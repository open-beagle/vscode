{"version":3,"sources":["vs/base/browser/ui/keybindingLabel/keybindingLabel.ts"],"names":[],"mappings":"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","file":"keybindingLabel.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./keybindingLabel';\nimport { equals } from 'vs/base/common/objects';\nimport { OperatingSystem } from 'vs/base/common/platform';\nimport { ResolvedKeybinding, ResolvedKeybindingPart } from 'vs/base/common/keyCodes';\nimport { UILabelProvider } from 'vs/base/common/keybindingLabels';\nimport * as dom from 'vs/base/browser/dom';\nimport { localize } from 'vs/nls';\nimport { IThemable } from 'vs/base/common/styler';\nimport { Color } from 'vs/base/common/color';\n\nconst $ = dom.$;\n\nexport interface PartMatches {\n\tctrlKey?: boolean;\n\tshiftKey?: boolean;\n\taltKey?: boolean;\n\tmetaKey?: boolean;\n\tkeyCode?: boolean;\n}\n\nexport interface Matches {\n\tfirstPart: PartMatches;\n\tchordPart: PartMatches;\n}\n\nexport interface KeybindingLabelOptions extends IKeybindingLabelStyles {\n\trenderUnboundKeybindings?: boolean;\n}\n\nexport interface IKeybindingLabelStyles {\n\tkeybindingLabelBackground?: Color;\n\tkeybindingLabelForeground?: Color;\n\tkeybindingLabelBorder?: Color;\n\tkeybindingLabelBottomBorder?: Color;\n\tkeybindingLabelShadow?: Color;\n}\n\nexport class KeybindingLabel implements IThemable {\n\n\tprivate domNode: HTMLElement;\n\tprivate options: KeybindingLabelOptions;\n\n\tprivate readonly keyElements = new Set<HTMLSpanElement>();\n\n\tprivate keybinding: ResolvedKeybinding | undefined;\n\tprivate matches: Matches | undefined;\n\tprivate didEverRender: boolean;\n\n\tprivate labelBackground: Color | undefined;\n\tprivate labelForeground: Color | undefined;\n\tprivate labelBorder: Color | undefined;\n\tprivate labelBottomBorder: Color | undefined;\n\tprivate labelShadow: Color | undefined;\n\n\tconstructor(container: HTMLElement, private os: OperatingSystem, options?: KeybindingLabelOptions) {\n\t\tthis.options = options || Object.create(null);\n\n\t\tthis.labelBackground = this.options.keybindingLabelBackground;\n\t\tthis.labelForeground = this.options.keybindingLabelForeground;\n\t\tthis.labelBorder = this.options.keybindingLabelBorder;\n\t\tthis.labelBottomBorder = this.options.keybindingLabelBottomBorder;\n\t\tthis.labelShadow = this.options.keybindingLabelShadow;\n\n\t\tthis.domNode = dom.append(container, $('.monaco-keybinding'));\n\t\tthis.didEverRender = false;\n\t\tcontainer.appendChild(this.domNode);\n\t}\n\n\tget element(): HTMLElement {\n\t\treturn this.domNode;\n\t}\n\n\tset(keybinding: ResolvedKeybinding | undefined, matches?: Matches) {\n\t\tif (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.keybinding = keybinding;\n\t\tthis.matches = matches;\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tthis.clear();\n\n\t\tif (this.keybinding) {\n\t\t\tlet [firstPart, chordPart] = this.keybinding.getParts();\n\t\t\tif (firstPart) {\n\t\t\t\tthis.renderPart(this.domNode, firstPart, this.matches ? this.matches.firstPart : null);\n\t\t\t}\n\t\t\tif (chordPart) {\n\t\t\t\tdom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n\t\t\t\tthis.renderPart(this.domNode, chordPart, this.matches ? this.matches.chordPart : null);\n\t\t\t}\n\t\t\tthis.domNode.title = this.keybinding.getAriaLabel() || '';\n\t\t} else if (this.options && this.options.renderUnboundKeybindings) {\n\t\t\tthis.renderUnbound(this.domNode);\n\t\t}\n\n\t\tthis.applyStyles();\n\n\t\tthis.didEverRender = true;\n\t}\n\n\tprivate clear(): void {\n\t\tdom.clearNode(this.domNode);\n\t\tthis.keyElements.clear();\n\t}\n\n\tprivate renderPart(parent: HTMLElement, part: ResolvedKeybindingPart, match: PartMatches | null) {\n\t\tconst modifierLabels = UILabelProvider.modifierLabels[this.os];\n\t\tif (part.ctrlKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.ctrlKey, Boolean(match?.ctrlKey), modifierLabels.separator);\n\t\t}\n\t\tif (part.shiftKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.shiftKey, Boolean(match?.shiftKey), modifierLabels.separator);\n\t\t}\n\t\tif (part.altKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.altKey, Boolean(match?.altKey), modifierLabels.separator);\n\t\t}\n\t\tif (part.metaKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.metaKey, Boolean(match?.metaKey), modifierLabels.separator);\n\t\t}\n\t\tconst keyLabel = part.keyLabel;\n\t\tif (keyLabel) {\n\t\t\tthis.renderKey(parent, keyLabel, Boolean(match?.keyCode), '');\n\t\t}\n\t}\n\n\tprivate renderKey(parent: HTMLElement, label: string, highlight: boolean, separator: string): void {\n\t\tdom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n\t\tif (separator) {\n\t\t\tdom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n\t\t}\n\t}\n\n\tprivate renderUnbound(parent: HTMLElement): void {\n\t\tdom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n\t}\n\n\tprivate createKeyElement(label: string, extraClass = ''): HTMLElement {\n\t\tconst keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n\t\tthis.keyElements.add(keyElement);\n\n\t\treturn keyElement;\n\t}\n\n\tstyle(styles: IKeybindingLabelStyles): void {\n\t\tthis.labelBackground = styles.keybindingLabelBackground;\n\t\tthis.labelForeground = styles.keybindingLabelForeground;\n\t\tthis.labelBorder = styles.keybindingLabelBorder;\n\t\tthis.labelBottomBorder = styles.keybindingLabelBottomBorder;\n\t\tthis.labelShadow = styles.keybindingLabelShadow;\n\n\t\tthis.applyStyles();\n\t}\n\n\tprivate applyStyles() {\n\t\tif (this.element) {\n\t\t\tfor (const keyElement of this.keyElements) {\n\t\t\t\tif (this.labelBackground) {\n\t\t\t\t\tkeyElement.style.backgroundColor = this.labelBackground?.toString();\n\t\t\t\t}\n\t\t\t\tif (this.labelBorder) {\n\t\t\t\t\tkeyElement.style.borderColor = this.labelBorder.toString();\n\t\t\t\t}\n\t\t\t\tif (this.labelBottomBorder) {\n\t\t\t\t\tkeyElement.style.borderBottomColor = this.labelBottomBorder.toString();\n\t\t\t\t}\n\t\t\t\tif (this.labelShadow) {\n\t\t\t\t\tkeyElement.style.boxShadow = `inset 0 -1px 0 ${this.labelShadow}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.labelForeground) {\n\t\t\t\tthis.element.style.color = this.labelForeground.toString();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static areSame(a: Matches | undefined, b: Matches | undefined): boolean {\n\t\tif (a === b || (!a && !b)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n\t}\n}\n"]}