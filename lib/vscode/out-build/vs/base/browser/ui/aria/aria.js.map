{"version":3,"file":"aria.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/base/browser/ui/aria/aria.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./aria';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport * as dom from 'vs/base/browser/dom';\n\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer: HTMLElement;\nlet alertContainer: HTMLElement;\nlet alertContainer2: HTMLElement;\nlet statusContainer: HTMLElement;\nlet statusContainer2: HTMLElement;\nexport function setARIAContainer(parent: HTMLElement) {\n\tariaContainer = document.createElement('div');\n\tariaContainer.className = 'monaco-aria-container';\n\n\tconst createAlertContainer = () => {\n\t\tconst element = document.createElement('div');\n\t\telement.className = 'monaco-alert';\n\t\telement.setAttribute('role', 'alert');\n\t\telement.setAttribute('aria-atomic', 'true');\n\t\tariaContainer.appendChild(element);\n\t\treturn element;\n\t};\n\talertContainer = createAlertContainer();\n\talertContainer2 = createAlertContainer();\n\n\tconst createStatusContainer = () => {\n\t\tconst element = document.createElement('div');\n\t\telement.className = 'monaco-status';\n\t\telement.setAttribute('role', 'complementary');\n\t\telement.setAttribute('aria-live', 'polite');\n\t\telement.setAttribute('aria-atomic', 'true');\n\t\tariaContainer.appendChild(element);\n\t\treturn element;\n\t};\n\tstatusContainer = createStatusContainer();\n\tstatusContainer2 = createStatusContainer();\n\n\tparent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg: string): void {\n\tif (!ariaContainer) {\n\t\treturn;\n\t}\n\n\t// Use alternate containers such that duplicated messages get read out by screen readers #99466\n\tif (alertContainer.textContent !== msg) {\n\t\tdom.clearNode(alertContainer2);\n\t\tinsertMessage(alertContainer, msg);\n\t} else {\n\t\tdom.clearNode(alertContainer);\n\t\tinsertMessage(alertContainer2, msg);\n\t}\n}\n\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg: string): void {\n\tif (!ariaContainer) {\n\t\treturn;\n\t}\n\n\tif (isMacintosh) {\n\t\talert(msg); // VoiceOver does not seem to support status role\n\t} else {\n\t\tif (statusContainer.textContent !== msg) {\n\t\t\tdom.clearNode(statusContainer2);\n\t\t\tinsertMessage(statusContainer, msg);\n\t\t} else {\n\t\t\tdom.clearNode(statusContainer);\n\t\t\tinsertMessage(statusContainer2, msg);\n\t\t}\n\t}\n}\n\nfunction insertMessage(target: HTMLElement, msg: string): void {\n\tdom.clearNode(target);\n\tif (msg.length > MAX_MESSAGE_LENGTH) {\n\t\tmsg = msg.substr(0, MAX_MESSAGE_LENGTH);\n\t}\n\ttarget.textContent = msg;\n\n\t// See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n\ttarget.style.visibility = 'hidden';\n\ttarget.style.visibility = 'visible';\n}\n"]}