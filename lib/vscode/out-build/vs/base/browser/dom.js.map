{"version":3,"file":"dom.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/base/browser/dom.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { FileAccess, RemoteAuthorities } from 'vs/base/common/network';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { insane, InsaneOptions } from 'vs/base/common/insane/insane';\nimport { KeyCode } from 'vs/base/common/keyCodes';\n\nexport function clearNode(node: HTMLElement): void {\n\twhile (node.firstChild) {\n\t\tnode.firstChild.remove();\n\t}\n}\n\n/**\n * @deprecated Use node.isConnected directly\n */\nexport function isInDOM(node: Node | null): boolean {\n\treturn node?.isConnected ?? false;\n}\n\nclass DomListener implements IDisposable {\n\n\tprivate _handler: (e: any) => void;\n\tprivate _node: EventTarget;\n\tprivate readonly _type: string;\n\tprivate readonly _options: boolean | AddEventListenerOptions;\n\n\tconstructor(node: EventTarget, type: string, handler: (e: any) => void, options?: boolean | AddEventListenerOptions) {\n\t\tthis._node = node;\n\t\tthis._type = type;\n\t\tthis._handler = handler;\n\t\tthis._options = (options || false);\n\t\tthis._node.addEventListener(this._type, this._handler, this._options);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (!this._handler) {\n\t\t\t// Already disposed\n\t\t\treturn;\n\t\t}\n\n\t\tthis._node.removeEventListener(this._type, this._handler, this._options);\n\n\t\t// Prevent leakers from holding on to the dom or handler func\n\t\tthis._node = null!;\n\t\tthis._handler = null!;\n\t}\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(node: EventTarget, type: K, handler: (event: GlobalEventHandlersEventMap[K]) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, options: AddEventListenerOptions): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCaptureOrOptions?: boolean | AddEventListenerOptions): IDisposable {\n\treturn new DomListener(node, type, handler, useCaptureOrOptions);\n}\n\nexport interface IAddStandardDisposableListenerSignature {\n\t(node: HTMLElement, type: 'click', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'mousedown', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keydown', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keypress', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keyup', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\n}\nfunction _wrapAsStandardMouseEvent(handler: (e: IMouseEvent) => void): (e: MouseEvent) => void {\n\treturn function (e: MouseEvent) {\n\t\treturn handler(new StandardMouseEvent(e));\n\t};\n}\nfunction _wrapAsStandardKeyboardEvent(handler: (e: IKeyboardEvent) => void): (e: KeyboardEvent) => void {\n\treturn function (e: KeyboardEvent) {\n\t\treturn handler(new StandardKeyboardEvent(e));\n\t};\n}\nexport let addStandardDisposableListener: IAddStandardDisposableListenerSignature = function addStandardDisposableListener(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = handler;\n\n\tif (type === 'click' || type === 'mousedown') {\n\t\twrapHandler = _wrapAsStandardMouseEvent(handler);\n\t} else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n\t\twrapHandler = _wrapAsStandardKeyboardEvent(handler);\n\t}\n\n\treturn addDisposableListener(node, type, wrapHandler, useCapture);\n};\n\nexport let addStandardDisposableGenericMouseDownListner = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseDownListner(node, wrapHandler, useCapture);\n};\n\nexport let addStandardDisposableGenericMouseUpListner = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseUpListner(node, wrapHandler, useCapture);\n};\nexport function addDisposableGenericMouseDownListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_DOWN : EventType.MOUSE_DOWN, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseMoveListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_MOVE : EventType.MOUSE_MOVE, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseUpListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_UP : EventType.MOUSE_UP, handler, useCapture);\n}\nexport function addDisposableNonBubblingMouseOutListener(node: Element, handler: (event: MouseEvent) => void): IDisposable {\n\treturn addDisposableListener(node, 'mouseout', (e: MouseEvent) => {\n\t\t// Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n\t\tlet toElement: Node | null = <Node>(e.relatedTarget);\n\t\twhile (toElement && toElement !== node) {\n\t\t\ttoElement = toElement.parentNode;\n\t\t}\n\t\tif (toElement === node) {\n\t\t\treturn;\n\t\t}\n\n\t\thandler(e);\n\t});\n}\n\nexport function addDisposableNonBubblingPointerOutListener(node: Element, handler: (event: MouseEvent) => void): IDisposable {\n\treturn addDisposableListener(node, 'pointerout', (e: MouseEvent) => {\n\t\t// Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n\t\tlet toElement: Node | null = <Node>(e.relatedTarget);\n\t\twhile (toElement && toElement !== node) {\n\t\t\ttoElement = toElement.parentNode;\n\t\t}\n\t\tif (toElement === node) {\n\t\t\treturn;\n\t\t}\n\n\t\thandler(e);\n\t});\n}\n\ninterface IRequestAnimationFrame {\n\t(callback: (time: number) => void): number;\n}\nlet _animationFrame: IRequestAnimationFrame | null = null;\nfunction doRequestAnimationFrame(callback: (time: number) => void): number {\n\tif (!_animationFrame) {\n\t\tconst emulatedRequestAnimationFrame = (callback: (time: number) => void): any => {\n\t\t\treturn setTimeout(() => callback(new Date().getTime()), 0);\n\t\t};\n\t\t_animationFrame = (\n\t\t\tself.requestAnimationFrame\n\t\t\t|| (<any>self).msRequestAnimationFrame\n\t\t\t|| (<any>self).webkitRequestAnimationFrame\n\t\t\t|| (<any>self).mozRequestAnimationFrame\n\t\t\t|| (<any>self).oRequestAnimationFrame\n\t\t\t|| emulatedRequestAnimationFrame\n\t\t);\n\t}\n\treturn _animationFrame.call(self, callback);\n}\n\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n\nclass AnimationFrameQueueItem implements IDisposable {\n\n\tprivate _runner: () => void;\n\tpublic priority: number;\n\tprivate _canceled: boolean;\n\n\tconstructor(runner: () => void, priority: number = 0) {\n\t\tthis._runner = runner;\n\t\tthis.priority = priority;\n\t\tthis._canceled = false;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._canceled = true;\n\t}\n\n\tpublic execute(): void {\n\t\tif (this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._runner();\n\t\t} catch (e) {\n\t\t\tonUnexpectedError(e);\n\t\t}\n\t}\n\n\t// Sort by priority (largest to lowest)\n\tpublic static sort(a: AnimationFrameQueueItem, b: AnimationFrameQueueItem): number {\n\t\treturn b.priority - a.priority;\n\t}\n}\n\n(function () {\n\t/**\n\t * The runners scheduled at the next animation frame\n\t */\n\tlet NEXT_QUEUE: AnimationFrameQueueItem[] = [];\n\t/**\n\t * The runners scheduled at the current animation frame\n\t */\n\tlet CURRENT_QUEUE: AnimationFrameQueueItem[] | null = null;\n\t/**\n\t * A flag to keep track if the native requestAnimationFrame was already called\n\t */\n\tlet animFrameRequested = false;\n\t/**\n\t * A flag to indicate if currently handling a native requestAnimationFrame callback\n\t */\n\tlet inAnimationFrameRunner = false;\n\n\tlet animationFrameRunner = () => {\n\t\tanimFrameRequested = false;\n\n\t\tCURRENT_QUEUE = NEXT_QUEUE;\n\t\tNEXT_QUEUE = [];\n\n\t\tinAnimationFrameRunner = true;\n\t\twhile (CURRENT_QUEUE.length > 0) {\n\t\t\tCURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n\t\t\tlet top = CURRENT_QUEUE.shift()!;\n\t\t\ttop.execute();\n\t\t}\n\t\tinAnimationFrameRunner = false;\n\t};\n\n\tscheduleAtNextAnimationFrame = (runner: () => void, priority: number = 0) => {\n\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\tNEXT_QUEUE.push(item);\n\n\t\tif (!animFrameRequested) {\n\t\t\tanimFrameRequested = true;\n\t\t\tdoRequestAnimationFrame(animationFrameRunner);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\trunAtThisOrScheduleAtNextAnimationFrame = (runner: () => void, priority?: number) => {\n\t\tif (inAnimationFrameRunner) {\n\t\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\t\tCURRENT_QUEUE!.push(item);\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn scheduleAtNextAnimationFrame(runner, priority);\n\t\t}\n\t};\n})();\n\nexport function measure(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, 10000 /* must be early */);\n}\n\nexport function modify(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, -10000 /* must be late */);\n}\n\n/**\n * Add a throttled listener. `handler` is fired at most every 8.33333ms or with the next animation frame (if browser supports it).\n */\nexport interface IEventMerger<R, E> {\n\t(lastEvent: R | null, currentEvent: E): R;\n}\n\nexport interface DOMEvent {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nconst MINIMUM_TIME_MS = 8;\nconst DEFAULT_EVENT_MERGER: IEventMerger<DOMEvent, DOMEvent> = function (lastEvent: DOMEvent | null, currentEvent: DOMEvent) {\n\treturn currentEvent;\n};\n\nclass TimeoutThrottledDomListener<R, E extends DOMEvent> extends Disposable {\n\n\tconstructor(node: any, type: string, handler: (event: R) => void, eventMerger: IEventMerger<R, E> = <any>DEFAULT_EVENT_MERGER, minimumTimeMs: number = MINIMUM_TIME_MS) {\n\t\tsuper();\n\n\t\tlet lastEvent: R | null = null;\n\t\tlet lastHandlerTime = 0;\n\t\tlet timeout = this._register(new TimeoutTimer());\n\n\t\tlet invokeHandler = () => {\n\t\t\tlastHandlerTime = (new Date()).getTime();\n\t\t\thandler(<R>lastEvent);\n\t\t\tlastEvent = null;\n\t\t};\n\n\t\tthis._register(addDisposableListener(node, type, (e) => {\n\n\t\t\tlastEvent = eventMerger(lastEvent, e);\n\t\t\tlet elapsedTime = (new Date()).getTime() - lastHandlerTime;\n\n\t\t\tif (elapsedTime >= minimumTimeMs) {\n\t\t\t\ttimeout.cancel();\n\t\t\t\tinvokeHandler();\n\t\t\t} else {\n\t\t\t\ttimeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function addDisposableThrottledListener<R, E extends DOMEvent = DOMEvent>(node: any, type: string, handler: (event: R) => void, eventMerger?: IEventMerger<R, E>, minimumTimeMs?: number): IDisposable {\n\treturn new TimeoutThrottledDomListener<R, E>(node, type, handler, eventMerger, minimumTimeMs);\n}\n\nexport function getComputedStyle(el: HTMLElement): CSSStyleDeclaration {\n\treturn document.defaultView!.getComputedStyle(el, null);\n}\n\nexport function getClientArea(element: HTMLElement): Dimension {\n\n\t// Try with DOM clientWidth / clientHeight\n\tif (element !== document.body) {\n\t\treturn new Dimension(element.clientWidth, element.clientHeight);\n\t}\n\n\t// If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n\tif (platform.isIOS && window.visualViewport) {\n\t\tconst width = window.visualViewport.width;\n\t\tconst height = window.visualViewport.height - (\n\t\t\tbrowser.isStandalone\n\t\t\t\t// in PWA mode, the visual viewport always includes the safe-area-inset-bottom (which is for the home indicator)\n\t\t\t\t// even when you are using the onscreen monitor, the visual viewport will include the area between system statusbar and the onscreen keyboard\n\t\t\t\t// plus the area between onscreen keyboard and the bottom bezel, which is 20px on iOS.\n\t\t\t\t? (20 + 4) // + 4px for body margin\n\t\t\t\t: 0\n\t\t);\n\t\treturn new Dimension(width, height);\n\t}\n\n\t// Try innerWidth / innerHeight\n\tif (window.innerWidth && window.innerHeight) {\n\t\treturn new Dimension(window.innerWidth, window.innerHeight);\n\t}\n\n\t// Try with document.body.clientWidth / document.body.clientHeight\n\tif (document.body && document.body.clientWidth && document.body.clientHeight) {\n\t\treturn new Dimension(document.body.clientWidth, document.body.clientHeight);\n\t}\n\n\t// Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n\tif (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {\n\t\treturn new Dimension(document.documentElement.clientWidth, document.documentElement.clientHeight);\n\t}\n\n\tthrow new Error('Unable to figure out browser width and height');\n}\n\nclass SizeUtils {\n\t// Adapted from WinJS\n\t// Converts a CSS positioning string for the specified element to pixels.\n\tprivate static convertToPixels(element: HTMLElement, value: string): number {\n\t\treturn parseFloat(value) || 0;\n\t}\n\n\tprivate static getDimension(element: HTMLElement, cssPropertyName: string, jsPropertyName: string): number {\n\t\tlet computedStyle: CSSStyleDeclaration = getComputedStyle(element);\n\t\tlet value = '0';\n\t\tif (computedStyle) {\n\t\t\tif (computedStyle.getPropertyValue) {\n\t\t\t\tvalue = computedStyle.getPropertyValue(cssPropertyName);\n\t\t\t} else {\n\t\t\t\t// IE8\n\t\t\t\tvalue = (<any>computedStyle).getAttribute(jsPropertyName);\n\t\t\t}\n\t\t}\n\t\treturn SizeUtils.convertToPixels(element, value);\n\t}\n\n\tstatic getBorderLeftWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n\t}\n\tstatic getBorderRightWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n\t}\n\tstatic getBorderTopWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n\t}\n\tstatic getBorderBottomWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n\t}\n\n\tstatic getPaddingLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n\t}\n\tstatic getPaddingRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n\t}\n\tstatic getPaddingTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n\t}\n\tstatic getPaddingBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n\t}\n\n\tstatic getMarginLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n\t}\n\tstatic getMarginTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n\t}\n\tstatic getMarginRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n\t}\n\tstatic getMarginBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n\t}\n}\n\n// ----------------------------------------------------------------------------------------\n// Position & Dimension\n\nexport interface IDimension {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport class Dimension implements IDimension {\n\n\tstatic readonly None = new Dimension(0, 0);\n\n\tconstructor(\n\t\tpublic readonly width: number,\n\t\tpublic readonly height: number,\n\t) { }\n\n\twith(width: number = this.width, height: number = this.height): Dimension {\n\t\tif (width !== this.width || height !== this.height) {\n\t\t\treturn new Dimension(width, height);\n\t\t} else {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstatic is(obj: unknown): obj is IDimension {\n\t\treturn typeof obj === 'object' && typeof (<IDimension>obj).height === 'number' && typeof (<IDimension>obj).width === 'number';\n\t}\n\n\tstatic lift(obj: IDimension): Dimension {\n\t\tif (obj instanceof Dimension) {\n\t\t\treturn obj;\n\t\t} else {\n\t\t\treturn new Dimension(obj.width, obj.height);\n\t\t}\n\t}\n\n\tstatic equals(a: Dimension | undefined, b: Dimension | undefined): boolean {\n\t\tif (a === b) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\t\treturn a.width === b.width && a.height === b.height;\n\t}\n}\n\nexport function getTopLeftOffset(element: HTMLElement): { left: number; top: number; } {\n\t// Adapted from WinJS.Utilities.getPosition\n\t// and added borders to the mix\n\n\tlet offsetParent = element.offsetParent;\n\tlet top = element.offsetTop;\n\tlet left = element.offsetLeft;\n\n\twhile (\n\t\t(element = <HTMLElement>element.parentNode) !== null\n\t\t&& element !== document.body\n\t\t&& element !== document.documentElement\n\t) {\n\t\ttop -= element.scrollTop;\n\t\tconst c = isShadowRoot(element) ? null : getComputedStyle(element);\n\t\tif (c) {\n\t\t\tleft -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n\t\t}\n\n\t\tif (element === offsetParent) {\n\t\t\tleft += SizeUtils.getBorderLeftWidth(element);\n\t\t\ttop += SizeUtils.getBorderTopWidth(element);\n\t\t\ttop += element.offsetTop;\n\t\t\tleft += element.offsetLeft;\n\t\t\toffsetParent = element.offsetParent;\n\t\t}\n\t}\n\n\treturn {\n\t\tleft: left,\n\t\ttop: top\n\t};\n}\n\nexport interface IDomNodePagePosition {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n}\n\nexport function size(element: HTMLElement, width: number | null, height: number | null): void {\n\tif (typeof width === 'number') {\n\t\telement.style.width = `${width}px`;\n\t}\n\n\tif (typeof height === 'number') {\n\t\telement.style.height = `${height}px`;\n\t}\n}\n\nexport function position(element: HTMLElement, top: number, right?: number, bottom?: number, left?: number, position: string = 'absolute'): void {\n\tif (typeof top === 'number') {\n\t\telement.style.top = `${top}px`;\n\t}\n\n\tif (typeof right === 'number') {\n\t\telement.style.right = `${right}px`;\n\t}\n\n\tif (typeof bottom === 'number') {\n\t\telement.style.bottom = `${bottom}px`;\n\t}\n\n\tif (typeof left === 'number') {\n\t\telement.style.left = `${left}px`;\n\t}\n\n\telement.style.position = position;\n}\n\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode: HTMLElement): IDomNodePagePosition {\n\tlet bb = domNode.getBoundingClientRect();\n\treturn {\n\t\tleft: bb.left + StandardWindow.scrollX,\n\t\ttop: bb.top + StandardWindow.scrollY,\n\t\twidth: bb.width,\n\t\theight: bb.height\n\t};\n}\n\nexport interface IStandardWindow {\n\treadonly scrollX: number;\n\treadonly scrollY: number;\n}\n\nexport const StandardWindow: IStandardWindow = new class implements IStandardWindow {\n\tget scrollX(): number {\n\t\tif (typeof window.scrollX === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollX;\n\t\t} else {\n\t\t\treturn document.body.scrollLeft + document.documentElement!.scrollLeft;\n\t\t}\n\t}\n\n\tget scrollY(): number {\n\t\tif (typeof window.scrollY === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollY;\n\t\t} else {\n\t\t\treturn document.body.scrollTop + document.documentElement!.scrollTop;\n\t\t}\n\t}\n};\n\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.offsetWidth + margin;\n}\n\nexport function getContentWidth(element: HTMLElement): number {\n\tlet border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n\tlet padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n\treturn element.offsetWidth - border - padding;\n}\n\nexport function getTotalScrollWidth(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.scrollWidth + margin;\n}\n\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element: HTMLElement): number {\n\tlet border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n\tlet padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n\treturn element.offsetHeight - border - padding;\n}\n\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n\treturn element.offsetHeight + margin;\n}\n\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element: HTMLElement, parent: HTMLElement): number {\n\tif (element === null) {\n\t\treturn 0;\n\t}\n\n\tlet elementPosition = getTopLeftOffset(element);\n\tlet parentPosition = getTopLeftOffset(parent);\n\treturn elementPosition.left - parentPosition.left;\n}\n\nexport function getLargestChildWidth(parent: HTMLElement, children: HTMLElement[]): number {\n\tlet childWidths = children.map((child) => {\n\t\treturn Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n\t});\n\tlet maxWidth = Math.max(...childWidths);\n\treturn maxWidth;\n}\n\n// ----------------------------------------------------------------------------------------\n\nexport function isAncestor(testChild: Node | null, testAncestor: Node | null): boolean {\n\twhile (testChild) {\n\t\tif (testChild === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\t\ttestChild = testChild.parentNode;\n\t}\n\n\treturn false;\n}\n\nconst parentFlowToDataKey = 'parentFlowToElementId';\n\n/**\n * Set an explicit parent to use for nodes that are not part of the\n * regular dom structure.\n */\nexport function setParentFlowTo(fromChildElement: HTMLElement, toParentElement: Element): void {\n\tfromChildElement.dataset[parentFlowToDataKey] = toParentElement.id;\n}\n\nfunction getParentFlowToElement(node: HTMLElement): HTMLElement | null {\n\tconst flowToParentId = node.dataset[parentFlowToDataKey];\n\tif (typeof flowToParentId === 'string') {\n\t\treturn document.getElementById(flowToParentId);\n\t}\n\treturn null;\n}\n\n/**\n * Check if `testAncestor` is an ancessor of `testChild`, observing the explicit\n * parents set by `setParentFlowTo`.\n */\nexport function isAncestorUsingFlowTo(testChild: Node, testAncestor: Node): boolean {\n\tlet node: Node | null = testChild;\n\twhile (node) {\n\t\tif (node === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (node instanceof HTMLElement) {\n\t\t\tconst flowToParentElement = getParentFlowToElement(node);\n\t\t\tif (flowToParentElement) {\n\t\t\t\tnode = flowToParentElement;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\n\treturn false;\n}\n\nexport function findParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node.classList.contains(clazz)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tif (stopAtClazzOrNode) {\n\t\t\tif (typeof stopAtClazzOrNode === 'string') {\n\t\t\t\tif (node.classList.contains(stopAtClazzOrNode)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (node === stopAtClazzOrNode) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnode = <HTMLElement>node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function hasParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): boolean {\n\treturn !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\n\nexport function isShadowRoot(node: Node): node is ShadowRoot {\n\treturn (\n\t\tnode && !!(<ShadowRoot>node).host && !!(<ShadowRoot>node).mode\n\t);\n}\n\nexport function isInShadowDOM(domNode: Node): boolean {\n\treturn !!getShadowRoot(domNode);\n}\n\nexport function getShadowRoot(domNode: Node): ShadowRoot | null {\n\twhile (domNode.parentNode) {\n\t\tif (domNode === document.body) {\n\t\t\t// reached the body\n\t\t\treturn null;\n\t\t}\n\t\tdomNode = domNode.parentNode;\n\t}\n\treturn isShadowRoot(domNode) ? domNode : null;\n}\n\nexport function getActiveElement(): Element | null {\n\tlet result = document.activeElement;\n\n\twhile (result?.shadowRoot) {\n\t\tresult = result.shadowRoot.activeElement;\n\t}\n\n\treturn result;\n}\n\nexport function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLStyleElement {\n\tlet style = document.createElement('style');\n\tstyle.type = 'text/css';\n\tstyle.media = 'screen';\n\tcontainer.appendChild(style);\n\treturn style;\n}\n\nexport function createMetaElement(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLMetaElement {\n\tlet meta = document.createElement('meta');\n\tcontainer.appendChild(meta);\n\treturn meta;\n}\n\nlet _sharedStyleSheet: HTMLStyleElement | null = null;\nfunction getSharedStyleSheet(): HTMLStyleElement {\n\tif (!_sharedStyleSheet) {\n\t\t_sharedStyleSheet = createStyleSheet();\n\t}\n\treturn _sharedStyleSheet;\n}\n\nfunction getDynamicStyleSheetRules(style: any) {\n\tif (style?.sheet?.rules) {\n\t\t// Chrome, IE\n\t\treturn style.sheet.rules;\n\t}\n\tif (style?.sheet?.cssRules) {\n\t\t// FF\n\t\treturn style.sheet.cssRules;\n\t}\n\treturn [];\n}\n\nexport function createCSSRule(selector: string, cssText: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style || !cssText) {\n\t\treturn;\n\t}\n\n\t(<CSSStyleSheet>style.sheet).insertRule(selector + '{' + cssText + '}', 0);\n}\n\nexport function removeCSSRulesContainingSelector(ruleName: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style) {\n\t\treturn;\n\t}\n\n\tlet rules = getDynamicStyleSheetRules(style);\n\tlet toDelete: number[] = [];\n\tfor (let i = 0; i < rules.length; i++) {\n\t\tlet rule = rules[i];\n\t\tif (rule.selectorText.indexOf(ruleName) !== -1) {\n\t\t\ttoDelete.push(i);\n\t\t}\n\t}\n\n\tfor (let i = toDelete.length - 1; i >= 0; i--) {\n\t\t(<any>style.sheet).deleteRule(toDelete[i]);\n\t}\n}\n\nexport function isHTMLElement(o: any): o is HTMLElement {\n\tif (typeof HTMLElement === 'object') {\n\t\treturn o instanceof HTMLElement;\n\t}\n\treturn o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\n\nexport const EventType = {\n\t// Mouse\n\tCLICK: 'click',\n\tAUXCLICK: 'auxclick',\n\tDBLCLICK: 'dblclick',\n\tMOUSE_UP: 'mouseup',\n\tMOUSE_DOWN: 'mousedown',\n\tMOUSE_OVER: 'mouseover',\n\tMOUSE_MOVE: 'mousemove',\n\tMOUSE_OUT: 'mouseout',\n\tMOUSE_ENTER: 'mouseenter',\n\tMOUSE_LEAVE: 'mouseleave',\n\tMOUSE_WHEEL: 'wheel',\n\tPOINTER_UP: 'pointerup',\n\tPOINTER_DOWN: 'pointerdown',\n\tPOINTER_MOVE: 'pointermove',\n\tCONTEXT_MENU: 'contextmenu',\n\tWHEEL: 'wheel',\n\t// Keyboard\n\tKEY_DOWN: 'keydown',\n\tKEY_PRESS: 'keypress',\n\tKEY_UP: 'keyup',\n\t// HTML Document\n\tLOAD: 'load',\n\tBEFORE_UNLOAD: 'beforeunload',\n\tUNLOAD: 'unload',\n\tABORT: 'abort',\n\tERROR: 'error',\n\tRESIZE: 'resize',\n\tSCROLL: 'scroll',\n\tFULLSCREEN_CHANGE: 'fullscreenchange',\n\tWK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n\t// Form\n\tSELECT: 'select',\n\tCHANGE: 'change',\n\tSUBMIT: 'submit',\n\tRESET: 'reset',\n\tFOCUS: 'focus',\n\tFOCUS_IN: 'focusin',\n\tFOCUS_OUT: 'focusout',\n\tBLUR: 'blur',\n\tINPUT: 'input',\n\t// Local Storage\n\tSTORAGE: 'storage',\n\t// Drag\n\tDRAG_START: 'dragstart',\n\tDRAG: 'drag',\n\tDRAG_ENTER: 'dragenter',\n\tDRAG_LEAVE: 'dragleave',\n\tDRAG_OVER: 'dragover',\n\tDROP: 'drop',\n\tDRAG_END: 'dragend',\n\t// Animation\n\tANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n\tANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n\tANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n} as const;\n\nexport interface EventLike {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport const EventHelper = {\n\tstop: function (e: EventLike, cancelBubble?: boolean) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\t// IE8\n\t\t\t(<any>e).returnValue = false;\n\t\t}\n\n\t\tif (cancelBubble) {\n\t\t\tif (e.stopPropagation) {\n\t\t\t\te.stopPropagation();\n\t\t\t} else {\n\t\t\t\t// IE8\n\t\t\t\t(<any>e).cancelBubble = true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport interface IFocusTracker extends Disposable {\n\tonDidFocus: Event<void>;\n\tonDidBlur: Event<void>;\n\trefreshState?(): void;\n}\n\nexport function saveParentsScrollTop(node: Element): number[] {\n\tlet r: number[] = [];\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tr[i] = node.scrollTop;\n\t\tnode = <Element>node.parentNode;\n\t}\n\treturn r;\n}\n\nexport function restoreParentsScrollTop(node: Element, state: number[]): void {\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tif (node.scrollTop !== state[i]) {\n\t\t\tnode.scrollTop = state[i];\n\t\t}\n\t\tnode = <Element>node.parentNode;\n\t}\n}\n\nclass FocusTracker extends Disposable implements IFocusTracker {\n\n\tprivate readonly _onDidFocus = this._register(new Emitter<void>());\n\tpublic readonly onDidFocus: Event<void> = this._onDidFocus.event;\n\n\tprivate readonly _onDidBlur = this._register(new Emitter<void>());\n\tpublic readonly onDidBlur: Event<void> = this._onDidBlur.event;\n\n\tprivate _refreshStateHandler: () => void;\n\n\tconstructor(element: HTMLElement | Window) {\n\t\tsuper();\n\t\tlet hasFocus = isAncestor(document.activeElement, <HTMLElement>element);\n\t\tlet loosingFocus = false;\n\n\t\tconst onFocus = () => {\n\t\t\tloosingFocus = false;\n\t\t\tif (!hasFocus) {\n\t\t\t\thasFocus = true;\n\t\t\t\tthis._onDidFocus.fire();\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (hasFocus) {\n\t\t\t\tloosingFocus = true;\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tif (loosingFocus) {\n\t\t\t\t\t\tloosingFocus = false;\n\t\t\t\t\t\thasFocus = false;\n\t\t\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t};\n\n\t\tthis._refreshStateHandler = () => {\n\t\t\tlet currentNodeHasFocus = isAncestor(document.activeElement, <HTMLElement>element);\n\t\t\tif (currentNodeHasFocus !== hasFocus) {\n\t\t\t\tif (hasFocus) {\n\t\t\t\t\tonBlur();\n\t\t\t\t} else {\n\t\t\t\t\tonFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis._register(domEvent(element, EventType.FOCUS, true)(onFocus));\n\t\tthis._register(domEvent(element, EventType.BLUR, true)(onBlur));\n\t}\n\n\trefreshState() {\n\t\tthis._refreshStateHandler();\n\t}\n}\n\nexport function trackFocus(element: HTMLElement | Window): IFocusTracker {\n\treturn new FocusTracker(element);\n}\n\nexport function after<T extends Node>(sibling: HTMLElement, child: T): T {\n\tsibling.after(child);\n\treturn child;\n}\n\nexport function append<T extends Node>(parent: HTMLElement, child: T): T;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): void;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): T | void {\n\tparent.append(...children);\n\tif (children.length === 1 && typeof children[0] !== 'string') {\n\t\treturn <T>children[0];\n\t}\n}\n\nexport function prepend<T extends Node>(parent: HTMLElement, child: T): T {\n\tparent.insertBefore(child, parent.firstChild);\n\treturn child;\n}\n\n/**\n * Removes all children from `parent` and appends `children`\n */\nexport function reset(parent: HTMLElement, ...children: Array<Node | string>): void {\n\tparent.innerText = '';\n\tappend(parent, ...children);\n}\n\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\n\nexport enum Namespace {\n\tHTML = 'http://www.w3.org/1999/xhtml',\n\tSVG = 'http://www.w3.org/2000/svg'\n}\n\nfunction _$<T extends Element>(namespace: Namespace, description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\tlet match = SELECTOR_REGEX.exec(description);\n\n\tif (!match) {\n\t\tthrow new Error('Bad use of emmet');\n\t}\n\n\tattrs = { ...(attrs || {}) };\n\n\tlet tagName = match[1] || 'div';\n\tlet result: T;\n\n\tif (namespace !== Namespace.HTML) {\n\t\tresult = document.createElementNS(namespace as string, tagName) as T;\n\t} else {\n\t\tresult = document.createElement(tagName) as unknown as T;\n\t}\n\n\tif (match[3]) {\n\t\tresult.id = match[3];\n\t}\n\tif (match[4]) {\n\t\tresult.className = match[4].replace(/\\./g, ' ').trim();\n\t}\n\n\tObject.keys(attrs).forEach(name => {\n\t\tconst value = attrs![name];\n\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (/^on\\w+$/.test(name)) {\n\t\t\t(<any>result)[name] = value;\n\t\t} else if (name === 'selected') {\n\t\t\tif (value) {\n\t\t\t\tresult.setAttribute(name, 'true');\n\t\t\t}\n\n\t\t} else {\n\t\t\tresult.setAttribute(name, value);\n\t\t}\n\t});\n\n\tresult.append(...children);\n\n\treturn result as T;\n}\n\nexport function $<T extends HTMLElement>(description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.HTML, description, attrs, ...children);\n}\n\n$.SVG = function <T extends SVGElement>(description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.SVG, description, attrs, ...children);\n};\n\nexport function join(nodes: Node[], separator: Node | string): Node[] {\n\tconst result: Node[] = [];\n\n\tnodes.forEach((node, index) => {\n\t\tif (index > 0) {\n\t\t\tif (separator instanceof Node) {\n\t\t\t\tresult.push(separator.cloneNode());\n\t\t\t} else {\n\t\t\t\tresult.push(document.createTextNode(separator));\n\t\t\t}\n\t\t}\n\n\t\tresult.push(node);\n\t});\n\n\treturn result;\n}\n\nexport function show(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = '';\n\t\telement.removeAttribute('aria-hidden');\n\t}\n}\n\nexport function hide(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = 'none';\n\t\telement.setAttribute('aria-hidden', 'true');\n\t}\n}\n\nfunction findParentWithAttribute(node: Node | null, attribute: string): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node instanceof HTMLElement && node.hasAttribute(attribute)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tnode = node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function removeTabIndexAndUpdateFocus(node: HTMLElement): void {\n\tif (!node || !node.hasAttribute('tabIndex')) {\n\t\treturn;\n\t}\n\n\t// If we are the currently focused element and tabIndex is removed,\n\t// standard DOM behavior is to move focus to the <body> element. We\n\t// typically never want that, rather put focus to the closest element\n\t// in the hierarchy of the parent DOM nodes.\n\tif (document.activeElement === node) {\n\t\tlet parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n\t\tif (parentFocusable) {\n\t\t\tparentFocusable.focus();\n\t\t}\n\t}\n\n\tnode.removeAttribute('tabindex');\n}\n\nexport function getElementsByTagName(tag: string): HTMLElement[] {\n\treturn Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\n\nexport function finalHandler<T extends DOMEvent>(fn: (event: T) => any): (event: T) => any {\n\treturn e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tfn(e);\n\t};\n}\n\nexport function domContentLoaded(): Promise<any> {\n\treturn new Promise<any>(resolve => {\n\t\tconst readyState = document.readyState;\n\t\tif (readyState === 'complete' || (document && document.body !== null)) {\n\t\t\tplatform.setImmediate(resolve);\n\t\t} else {\n\t\t\twindow.addEventListener('DOMContentLoaded', resolve, false);\n\t\t}\n\t});\n}\n\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(cssPx: number): number {\n\tconst screenPx = window.devicePixelRatio * cssPx;\n\treturn Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n\n/**\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url: string): boolean {\n\tif (browser.isElectron || browser.isEdgeLegacyWebView) {\n\t\t// In VSCode, window.open() always returns null...\n\t\t// The same is true for a WebView (see https://github.com/microsoft/monaco-editor/issues/628)\n\t\t// Also call directly window.open in sandboxed Electron (see https://github.com/microsoft/monaco-editor/issues/2220)\n\t\twindow.open(url);\n\t\treturn true;\n\t} else {\n\t\tlet newTab = window.open();\n\t\tif (newTab) {\n\t\t\t(newTab as any).opener = null;\n\t\t\tnewTab.location.href = url;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport function animate(fn: () => void): IDisposable {\n\tconst step = () => {\n\t\tfn();\n\t\tstepDisposable = scheduleAtNextAnimationFrame(step);\n\t};\n\n\tlet stepDisposable = scheduleAtNextAnimationFrame(step);\n\treturn toDisposable(() => stepDisposable.dispose());\n}\n\nRemoteAuthorities.setPreferredWebSchema(/^https:/.test(window.location.href) ? 'https' : 'http');\n\n/**\n * returns url('...')\n */\nexport function asCSSUrl(uri: URI): string {\n\tif (!uri) {\n\t\treturn `url('')`;\n\t}\n\treturn `url('${FileAccess.asBrowserUri(uri).toString(true).replace(/'/g, '%27')}')`;\n}\n\nexport function asCSSPropertyValue(value: string) {\n\treturn `'${value.replace(/'/g, '%27')}'`;\n}\n\nexport function triggerDownload(dataOrUri: Uint8Array | URI, name: string): void {\n\n\t// If the data is provided as Buffer, we create a\n\t// blob URL out of it to produce a valid link\n\tlet url: string;\n\tif (URI.isUri(dataOrUri)) {\n\t\turl = dataOrUri.toString(true);\n\t} else {\n\t\tconst blob = new Blob([dataOrUri]);\n\t\turl = URL.createObjectURL(blob);\n\n\t\t// Ensure to free the data from DOM eventually\n\t\tsetTimeout(() => URL.revokeObjectURL(url));\n\t}\n\n\t// In order to download from the browser, the only way seems\n\t// to be creating a <a> element with download attribute that\n\t// points to the file to download.\n\t// See also https://developers.google.com/web/updates/2011/08/Downloading-resources-in-HTML5-a-download\n\tconst anchor = document.createElement('a');\n\tdocument.body.appendChild(anchor);\n\tanchor.download = name;\n\tanchor.href = url;\n\tanchor.click();\n\n\t// Ensure to remove the element from DOM eventually\n\tsetTimeout(() => document.body.removeChild(anchor));\n}\n\nexport enum DetectedFullscreenMode {\n\n\t/**\n\t * The document is fullscreen, e.g. because an element\n\t * in the document requested to be fullscreen.\n\t */\n\tDOCUMENT = 1,\n\n\t/**\n\t * The browser is fullsreen, e.g. because the user enabled\n\t * native window fullscreen for it.\n\t */\n\tBROWSER\n}\n\nexport interface IDetectedFullscreen {\n\n\t/**\n\t * Figure out if the document is fullscreen or the browser.\n\t */\n\tmode: DetectedFullscreenMode;\n\n\t/**\n\t * Whether we know for sure that we are in fullscreen mode or\n\t * it is a guess.\n\t */\n\tguess: boolean;\n}\n\nexport function detectFullscreen(): IDetectedFullscreen | null {\n\n\t// Browser fullscreen: use DOM APIs to detect\n\tif (document.fullscreenElement || (<any>document).webkitFullscreenElement || (<any>document).webkitIsFullScreen) {\n\t\treturn { mode: DetectedFullscreenMode.DOCUMENT, guess: false };\n\t}\n\n\t// There is no standard way to figure out if the browser\n\t// is using native fullscreen. Via checking on screen\n\t// height and comparing that to window height, we can guess\n\t// it though.\n\n\tif (window.innerHeight === screen.height) {\n\t\t// if the height of the window matches the screen height, we can\n\t\t// safely assume that the browser is fullscreen because no browser\n\t\t// chrome is taking height away (e.g. like toolbars).\n\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: false };\n\t}\n\n\tif (platform.isMacintosh || platform.isLinux) {\n\t\t// macOS and Linux do not properly report `innerHeight`, only Windows does\n\t\tif (window.outerHeight === screen.height && window.outerWidth === screen.width) {\n\t\t\t// if the height of the browser matches the screen height, we can\n\t\t\t// only guess that we are in fullscreen. It is also possible that\n\t\t\t// the user has turned off taskbars in the OS and the browser is\n\t\t\t// simply able to span the entire size of the screen.\n\t\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: true };\n\t\t}\n\t}\n\n\t// Not in fullscreen\n\treturn null;\n}\n\n// -- sanitize and trusted html\n\nfunction _extInsaneOptions(opts: InsaneOptions, allowedAttributesForAll: string[]): InsaneOptions {\n\n\tlet allowedAttributes: Record<string, string[]> = opts.allowedAttributes ?? {};\n\n\tif (opts.allowedTags) {\n\t\tfor (let tag of opts.allowedTags) {\n\t\t\tlet array = allowedAttributes[tag];\n\t\t\tif (!array) {\n\t\t\t\tarray = allowedAttributesForAll;\n\t\t\t} else {\n\t\t\t\tarray = array.concat(allowedAttributesForAll);\n\t\t\t}\n\t\t\tallowedAttributes[tag] = array;\n\t\t}\n\t}\n\n\treturn { ...opts, allowedAttributes };\n}\n\nconst _ttpSafeInnerHtml = window.trustedTypes?.createPolicy('safeInnerHtml', {\n\tcreateHTML(value, options: InsaneOptions) {\n\t\treturn insane(value, options);\n\t}\n});\n\n/**\n * Sanitizes the given `value` and reset the given `node` with it.\n */\nexport function safeInnerHtml(node: HTMLElement, value: string): void {\n\n\tconst options = _extInsaneOptions({\n\t\tallowedTags: ['a', 'button', 'blockquote', 'code', 'div', 'h1', 'h2', 'h3', 'input', 'label', 'li', 'p', 'pre', 'select', 'small', 'span', 'strong', 'textarea', 'ul', 'ol'],\n\t\tallowedAttributes: {\n\t\t\t'a': ['href', 'x-dispatch'],\n\t\t\t'button': ['data-href', 'x-dispatch'],\n\t\t\t'input': ['type', 'placeholder', 'checked', 'required'],\n\t\t\t'label': ['for'],\n\t\t\t'select': ['required'],\n\t\t\t'span': ['data-command', 'role'],\n\t\t\t'textarea': ['name', 'placeholder', 'required'],\n\t\t},\n\t\tallowedSchemes: ['http', 'https', 'command']\n\t}, ['class', 'id', 'role', 'tabindex']);\n\n\tconst html = _ttpSafeInnerHtml?.createHTML(value, options) ?? insane(value, options);\n\tnode.innerHTML = html as string;\n}\n\n/**\n * Convert a Unicode string to a string in which each 16-bit unit occupies only one byte\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n */\nfunction toBinary(str: string): string {\n\tconst codeUnits = new Uint16Array(str.length);\n\tfor (let i = 0; i < codeUnits.length; i++) {\n\t\tcodeUnits[i] = str.charCodeAt(i);\n\t}\n\tlet binary = '';\n\tconst uint8array = new Uint8Array(codeUnits.buffer);\n\tfor (let i = 0; i < uint8array.length; i++) {\n\t\tbinary += String.fromCharCode(uint8array[i]);\n\t}\n\treturn binary;\n}\n\n/**\n * Version of the global `btoa` function that handles multi-byte characters instead\n * of throwing an exception.\n */\nexport function multibyteAwareBtoa(str: string): string {\n\treturn btoa(toBinary(str));\n}\n\n/**\n * Typings for the https://wicg.github.io/file-system-access\n *\n * Use `supported(window)` to find out if the browser supports this kind of API.\n */\nexport namespace WebFileSystemAccess {\n\n\texport function supported(obj: any & Window): boolean {\n\t\tif (typeof obj?.showDirectoryPicker === 'function') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\ntype ModifierKey = 'alt' | 'ctrl' | 'shift' | 'meta';\n\nexport interface IModifierKeyStatus {\n\taltKey: boolean;\n\tshiftKey: boolean;\n\tctrlKey: boolean;\n\tmetaKey: boolean;\n\tlastKeyPressed?: ModifierKey;\n\tlastKeyReleased?: ModifierKey;\n\tevent?: KeyboardEvent;\n}\n\nexport class ModifierKeyEmitter extends Emitter<IModifierKeyStatus> {\n\n\tprivate readonly _subscriptions = new DisposableStore();\n\tprivate _keyStatus: IModifierKeyStatus;\n\tprivate static instance: ModifierKeyEmitter;\n\n\tprivate constructor() {\n\t\tsuper();\n\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\n\t\tthis._subscriptions.add(domEvent(window, 'keydown', true)(e => {\n\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t// If Alt-key keydown event is repeated, ignore it #112347\n\t\t\t// Only known to be necessary for Alt-Key at the moment #115810\n\t\t\tif (event.keyCode === KeyCode.Alt && e.repeat) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.altKey && !this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'alt';\n\t\t\t} else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'ctrl';\n\t\t\t} else if (e.metaKey && !this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'meta';\n\t\t\t} else if (e.shiftKey && !this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'shift';\n\t\t\t} else if (event.keyCode !== KeyCode.Alt) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyPressed) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(window, 'keyup', true)(e => {\n\t\t\tif (!e.altKey && this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'alt';\n\t\t\t} else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'ctrl';\n\t\t\t} else if (!e.metaKey && this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'meta';\n\t\t\t} else if (!e.shiftKey && this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'shift';\n\t\t\t} else {\n\t\t\t\tthis._keyStatus.lastKeyReleased = undefined;\n\t\t\t}\n\n\t\t\tif (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mousedown', true)(e => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mouseup', true)(e => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mousemove', true)(e => {\n\t\t\tif (e.buttons) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(window, 'blur')(e => {\n\t\t\tthis.resetKeyStatus();\n\t\t}));\n\t}\n\n\tget keyStatus(): IModifierKeyStatus {\n\t\treturn this._keyStatus;\n\t}\n\n\tget isModifierPressed(): boolean {\n\t\treturn this._keyStatus.altKey || this._keyStatus.ctrlKey || this._keyStatus.metaKey || this._keyStatus.shiftKey;\n\t}\n\n\t/**\n\t * Allows to explicitly reset the key status based on more knowledge (#109062)\n\t */\n\tresetKeyStatus(): void {\n\t\tthis.doResetKeyStatus();\n\t\tthis.fire(this._keyStatus);\n\t}\n\n\tprivate doResetKeyStatus(): void {\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\t}\n\n\tstatic getInstance() {\n\t\tif (!ModifierKeyEmitter.instance) {\n\t\t\tModifierKeyEmitter.instance = new ModifierKeyEmitter();\n\t\t}\n\n\t\treturn ModifierKeyEmitter.instance;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._subscriptions.dispose();\n\t}\n}\n\nexport function getCookieValue(name: string): string | undefined {\n\tconst match = document.cookie.match('(^|[^;]+)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)'); // See https://stackoverflow.com/a/25490531\n\n\treturn match ? match.pop() : undefined;\n}\n"]}