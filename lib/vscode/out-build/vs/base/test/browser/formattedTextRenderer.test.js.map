{"version":3,"file":"formattedTextRenderer.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/base/test/browser/formattedTextRenderer.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { renderText, renderFormattedText } from 'vs/base/browser/formattedTextRenderer';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\n\nsuite('FormattedTextRenderer', () => {\n\tconst store = new DisposableStore();\n\n\tsetup(() => {\n\t\tstore.clear();\n\t});\n\n\tteardown(() => {\n\t\tstore.clear();\n\t});\n\n\ttest('render simple element', () => {\n\t\tlet result: HTMLElement = renderText('testing');\n\n\t\tassert.strictEqual(result.nodeType, document.ELEMENT_NODE);\n\t\tassert.strictEqual(result.textContent, 'testing');\n\t\tassert.strictEqual(result.tagName, 'DIV');\n\t});\n\n\ttest('render element with class', () => {\n\t\tlet result: HTMLElement = renderText('testing', {\n\t\t\tclassName: 'testClass'\n\t\t});\n\t\tassert.strictEqual(result.nodeType, document.ELEMENT_NODE);\n\t\tassert.strictEqual(result.className, 'testClass');\n\t});\n\n\ttest('simple formatting', () => {\n\t\tlet result: HTMLElement = renderFormattedText('**bold**');\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.firstChild!.textContent, 'bold');\n\t\tassert.strictEqual((<HTMLElement>result.firstChild).tagName, 'B');\n\t\tassert.strictEqual(result.innerHTML, '<b>bold</b>');\n\n\t\tresult = renderFormattedText('__italics__');\n\t\tassert.strictEqual(result.innerHTML, '<i>italics</i>');\n\n\t\tresult = renderFormattedText('``code``');\n\t\tassert.strictEqual(result.innerHTML, '``code``');\n\n\t\tresult = renderFormattedText('``code``', { renderCodeSegements: true });\n\t\tassert.strictEqual(result.innerHTML, '<code>code</code>');\n\n\t\tresult = renderFormattedText('this string has **bold**, __italics__, and ``code``!!', { renderCodeSegements: true });\n\t\tassert.strictEqual(result.innerHTML, 'this string has <b>bold</b>, <i>italics</i>, and <code>code</code>!!');\n\t});\n\n\ttest('no formatting', () => {\n\t\tlet result: HTMLElement = renderFormattedText('this is just a string');\n\t\tassert.strictEqual(result.innerHTML, 'this is just a string');\n\t});\n\n\ttest('preserve newlines', () => {\n\t\tlet result: HTMLElement = renderFormattedText('line one\\nline two');\n\t\tassert.strictEqual(result.innerHTML, 'line one<br>line two');\n\t});\n\n\ttest('action', () => {\n\t\tlet callbackCalled = false;\n\t\tlet result: HTMLElement = renderFormattedText('[[action]]', {\n\t\t\tactionHandler: {\n\t\t\t\tcallback(content) {\n\t\t\t\t\tassert.strictEqual(content, '0');\n\t\t\t\t\tcallbackCalled = true;\n\t\t\t\t},\n\t\t\t\tdisposeables: store\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, '<a href=\"#\">action</a>');\n\n\t\tlet event: MouseEvent = <any>document.createEvent('MouseEvent');\n\t\tevent.initEvent('click', true, true);\n\t\tresult.firstChild!.dispatchEvent(event);\n\t\tassert.strictEqual(callbackCalled, true);\n\t});\n\n\ttest('fancy action', () => {\n\t\tlet callbackCalled = false;\n\t\tlet result: HTMLElement = renderFormattedText('__**[[action]]**__', {\n\t\t\tactionHandler: {\n\t\t\t\tcallback(content) {\n\t\t\t\t\tassert.strictEqual(content, '0');\n\t\t\t\t\tcallbackCalled = true;\n\t\t\t\t},\n\t\t\t\tdisposeables: store\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, '<i><b><a href=\"#\">action</a></b></i>');\n\n\t\tlet event: MouseEvent = <any>document.createEvent('MouseEvent');\n\t\tevent.initEvent('click', true, true);\n\t\tresult.firstChild!.firstChild!.firstChild!.dispatchEvent(event);\n\t\tassert.strictEqual(callbackCalled, true);\n\t});\n\n\ttest('fancier action', () => {\n\t\tlet callbackCalled = false;\n\t\tlet result: HTMLElement = renderFormattedText('``__**[[action]]**__``', {\n\t\t\trenderCodeSegements: true,\n\t\t\tactionHandler: {\n\t\t\t\tcallback(content) {\n\t\t\t\t\tassert.strictEqual(content, '0');\n\t\t\t\t\tcallbackCalled = true;\n\t\t\t\t},\n\t\t\t\tdisposeables: store\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(result.innerHTML, '<code><i><b><a href=\"#\">action</a></b></i></code>');\n\n\t\tlet event: MouseEvent = <any>document.createEvent('MouseEvent');\n\t\tevent.initEvent('click', true, true);\n\t\tresult.firstChild!.firstChild!.firstChild!.firstChild!.dispatchEvent(event);\n\t\tassert.strictEqual(callbackCalled, true);\n\t});\n\n\ttest('escaped formatting', () => {\n\t\tlet result: HTMLElement = renderFormattedText('\\\\*\\\\*bold\\\\*\\\\*');\n\t\tassert.strictEqual(result.children.length, 0);\n\t\tassert.strictEqual(result.innerHTML, '**bold**');\n\t});\n});\n"]}