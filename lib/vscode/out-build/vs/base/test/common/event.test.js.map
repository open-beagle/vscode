{"version":3,"file":"event.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/base/test/common/event.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport { Event, Emitter, EventBufferer, EventMultiplexer, PauseableEmitter } from 'vs/base/common/event';\nimport { IDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { errorHandler, setUnexpectedErrorHandler } from 'vs/base/common/errors';\nimport { AsyncEmitter, IWaitUntil, timeout } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\n\nnamespace Samples {\n\n\texport class EventCounter {\n\n\t\tcount = 0;\n\n\t\treset() {\n\t\t\tthis.count = 0;\n\t\t}\n\n\t\tonEvent() {\n\t\t\tthis.count += 1;\n\t\t}\n\t}\n\n\texport class Document3 {\n\n\t\tprivate readonly _onDidChange = new Emitter<string>();\n\n\t\tonDidChange: Event<string> = this._onDidChange.event;\n\n\t\tsetText(value: string) {\n\t\t\t//...\n\t\t\tthis._onDidChange.fire(value);\n\t\t}\n\n\t}\n}\n\nsuite('Event', function () {\n\n\tconst counter = new Samples.EventCounter();\n\n\tsetup(() => counter.reset());\n\n\ttest('Emitter plain', function () {\n\n\t\tlet doc = new Samples.Document3();\n\n\t\tdocument.createElement('div').onclick = function () { };\n\t\tlet subscription = doc.onDidChange(counter.onEvent, counter);\n\n\t\tdoc.setText('far');\n\t\tdoc.setText('boo');\n\n\t\t// unhook listener\n\t\tsubscription.dispose();\n\t\tdoc.setText('boo');\n\t\tassert.strictEqual(counter.count, 2);\n\t});\n\n\n\ttest('Emitter, bucket', function () {\n\n\t\tlet bucket: IDisposable[] = [];\n\t\tlet doc = new Samples.Document3();\n\t\tlet subscription = doc.onDidChange(counter.onEvent, counter, bucket);\n\n\t\tdoc.setText('far');\n\t\tdoc.setText('boo');\n\n\t\t// unhook listener\n\t\twhile (bucket.length) {\n\t\t\tbucket.pop()!.dispose();\n\t\t}\n\t\tdoc.setText('boo');\n\n\t\t// noop\n\t\tsubscription.dispose();\n\n\t\tdoc.setText('boo');\n\t\tassert.strictEqual(counter.count, 2);\n\t});\n\n\ttest('Emitter, store', function () {\n\n\t\tlet bucket = new DisposableStore();\n\t\tlet doc = new Samples.Document3();\n\t\tlet subscription = doc.onDidChange(counter.onEvent, counter, bucket);\n\n\t\tdoc.setText('far');\n\t\tdoc.setText('boo');\n\n\t\t// unhook listener\n\t\tbucket.clear();\n\t\tdoc.setText('boo');\n\n\t\t// noop\n\t\tsubscription.dispose();\n\n\t\tdoc.setText('boo');\n\t\tassert.strictEqual(counter.count, 2);\n\t});\n\n\ttest('onFirstAdd|onLastRemove', () => {\n\n\t\tlet firstCount = 0;\n\t\tlet lastCount = 0;\n\t\tlet a = new Emitter({\n\t\t\tonFirstListenerAdd() { firstCount += 1; },\n\t\t\tonLastListenerRemove() { lastCount += 1; }\n\t\t});\n\n\t\tassert.strictEqual(firstCount, 0);\n\t\tassert.strictEqual(lastCount, 0);\n\n\t\tlet subscription = a.event(function () { });\n\t\tassert.strictEqual(firstCount, 1);\n\t\tassert.strictEqual(lastCount, 0);\n\n\t\tsubscription.dispose();\n\t\tassert.strictEqual(firstCount, 1);\n\t\tassert.strictEqual(lastCount, 1);\n\n\t\tsubscription = a.event(function () { });\n\t\tassert.strictEqual(firstCount, 2);\n\t\tassert.strictEqual(lastCount, 1);\n\t});\n\n\ttest('throwingListener', () => {\n\t\tconst origErrorHandler = errorHandler.getUnexpectedErrorHandler();\n\t\tsetUnexpectedErrorHandler(() => null);\n\n\t\ttry {\n\t\t\tlet a = new Emitter<undefined>();\n\t\t\tlet hit = false;\n\t\t\ta.event(function () {\n\t\t\t\t// eslint-disable-next-line no-throw-literal\n\t\t\t\tthrow 9;\n\t\t\t});\n\t\t\ta.event(function () {\n\t\t\t\thit = true;\n\t\t\t});\n\t\t\ta.fire(undefined);\n\t\t\tassert.strictEqual(hit, true);\n\n\t\t} finally {\n\t\t\tsetUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t});\n\n\ttest('reusing event function and context', function () {\n\t\tlet counter = 0;\n\t\tfunction listener() {\n\t\t\tcounter += 1;\n\t\t}\n\t\tconst context = {};\n\n\t\tlet emitter = new Emitter<undefined>();\n\t\tlet reg1 = emitter.event(listener, context);\n\t\tlet reg2 = emitter.event(listener, context);\n\n\t\temitter.fire(undefined);\n\t\tassert.strictEqual(counter, 2);\n\n\t\treg1.dispose();\n\t\temitter.fire(undefined);\n\t\tassert.strictEqual(counter, 3);\n\n\t\treg2.dispose();\n\t\temitter.fire(undefined);\n\t\tassert.strictEqual(counter, 3);\n\t});\n\n\ttest('Debounce Event', function (done: () => void) {\n\t\tlet doc = new Samples.Document3();\n\n\t\tlet onDocDidChange = Event.debounce(doc.onDidChange, (prev: string[] | undefined, cur) => {\n\t\t\tif (!prev) {\n\t\t\t\tprev = [cur];\n\t\t\t} else if (prev.indexOf(cur) < 0) {\n\t\t\t\tprev.push(cur);\n\t\t\t}\n\t\t\treturn prev;\n\t\t}, 10);\n\n\t\tlet count = 0;\n\n\t\tonDocDidChange(keys => {\n\t\t\tcount++;\n\t\t\tassert.ok(keys, 'was not expecting keys.');\n\t\t\tif (count === 1) {\n\t\t\t\tdoc.setText('4');\n\t\t\t\tassert.deepStrictEqual(keys, ['1', '2', '3']);\n\t\t\t} else if (count === 2) {\n\t\t\t\tassert.deepStrictEqual(keys, ['4']);\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n\n\t\tdoc.setText('1');\n\t\tdoc.setText('2');\n\t\tdoc.setText('3');\n\t});\n\n\ttest('Debounce Event - leading', async function () {\n\t\tconst emitter = new Emitter<void>();\n\t\tlet debounced = Event.debounce(emitter.event, (l, e) => e, 0, /*leading=*/true);\n\n\t\tlet calls = 0;\n\t\tdebounced(() => {\n\t\t\tcalls++;\n\t\t});\n\n\t\t// If the source event is fired once, the debounced (on the leading edge) event should be fired only once\n\t\temitter.fire();\n\n\t\tawait timeout(1);\n\t\tassert.strictEqual(calls, 1);\n\t});\n\n\ttest('Debounce Event - leading', async function () {\n\t\tconst emitter = new Emitter<void>();\n\t\tlet debounced = Event.debounce(emitter.event, (l, e) => e, 0, /*leading=*/true);\n\n\t\tlet calls = 0;\n\t\tdebounced(() => {\n\t\t\tcalls++;\n\t\t});\n\n\t\t// If the source event is fired multiple times, the debounced (on the leading edge) event should be fired twice\n\t\temitter.fire();\n\t\temitter.fire();\n\t\temitter.fire();\n\t\tawait timeout(1);\n\t\tassert.strictEqual(calls, 2);\n\t});\n\n\ttest('Debounce Event - leading reset', async function () {\n\t\tconst emitter = new Emitter<number>();\n\t\tlet debounced = Event.debounce(emitter.event, (l, e) => l ? l + 1 : 1, 0, /*leading=*/true);\n\n\t\tlet calls: number[] = [];\n\t\tdebounced((e) => calls.push(e));\n\n\t\temitter.fire(1);\n\t\temitter.fire(1);\n\n\t\tawait timeout(1);\n\t\tassert.deepStrictEqual(calls, [1, 1]);\n\t});\n\n\ttest('Emitter - In Order Delivery', function () {\n\t\tconst a = new Emitter<string>();\n\t\tconst listener2Events: string[] = [];\n\t\ta.event(function listener1(event) {\n\t\t\tif (event === 'e1') {\n\t\t\t\ta.fire('e2');\n\t\t\t\t// assert that all events are delivered at this point\n\t\t\t\tassert.deepStrictEqual(listener2Events, ['e1', 'e2']);\n\t\t\t}\n\t\t});\n\t\ta.event(function listener2(event) {\n\t\t\tlistener2Events.push(event);\n\t\t});\n\t\ta.fire('e1');\n\n\t\t// assert that all events are delivered in order\n\t\tassert.deepStrictEqual(listener2Events, ['e1', 'e2']);\n\t});\n});\n\nsuite('AsyncEmitter', function () {\n\n\ttest('event has waitUntil-function', async function () {\n\n\t\tinterface E extends IWaitUntil {\n\t\t\tfoo: boolean;\n\t\t\tbar: number;\n\t\t}\n\n\t\tlet emitter = new AsyncEmitter<E>();\n\n\t\temitter.event(e => {\n\t\t\tassert.strictEqual(e.foo, true);\n\t\t\tassert.strictEqual(e.bar, 1);\n\t\t\tassert.strictEqual(typeof e.waitUntil, 'function');\n\t\t});\n\n\t\temitter.fireAsync({ foo: true, bar: 1, }, CancellationToken.None);\n\t\temitter.dispose();\n\t});\n\n\ttest('sequential delivery', async function () {\n\n\t\tinterface E extends IWaitUntil {\n\t\t\tfoo: boolean;\n\t\t}\n\n\t\tlet globalState = 0;\n\t\tlet emitter = new AsyncEmitter<E>();\n\n\t\temitter.event(e => {\n\t\t\te.waitUntil(timeout(10).then(_ => {\n\t\t\t\tassert.strictEqual(globalState, 0);\n\t\t\t\tglobalState += 1;\n\t\t\t}));\n\t\t});\n\n\t\temitter.event(e => {\n\t\t\te.waitUntil(timeout(1).then(_ => {\n\t\t\t\tassert.strictEqual(globalState, 1);\n\t\t\t\tglobalState += 1;\n\t\t\t}));\n\t\t});\n\n\t\tawait emitter.fireAsync({ foo: true }, CancellationToken.None);\n\t\tassert.strictEqual(globalState, 2);\n\t});\n\n\ttest('sequential, in-order delivery', async function () {\n\t\tinterface E extends IWaitUntil {\n\t\t\tfoo: number;\n\t\t}\n\t\tlet events: number[] = [];\n\t\tlet done = false;\n\t\tlet emitter = new AsyncEmitter<E>();\n\n\t\t// e1\n\t\temitter.event(e => {\n\t\t\te.waitUntil(timeout(10).then(async _ => {\n\t\t\t\tif (e.foo === 1) {\n\t\t\t\t\tawait emitter.fireAsync({ foo: 2 }, CancellationToken.None);\n\t\t\t\t\tassert.deepStrictEqual(events, [1, 2]);\n\t\t\t\t\tdone = true;\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\t// e2\n\t\temitter.event(e => {\n\t\t\tevents.push(e.foo);\n\t\t\te.waitUntil(timeout(7));\n\t\t});\n\n\t\tawait emitter.fireAsync({ foo: 1 }, CancellationToken.None);\n\t\tassert.ok(done);\n\t});\n\n\ttest('catch errors', async function () {\n\t\tconst origErrorHandler = errorHandler.getUnexpectedErrorHandler();\n\t\tsetUnexpectedErrorHandler(() => null);\n\n\t\tinterface E extends IWaitUntil {\n\t\t\tfoo: boolean;\n\t\t}\n\n\t\tlet globalState = 0;\n\t\tlet emitter = new AsyncEmitter<E>();\n\n\t\temitter.event(e => {\n\t\t\tglobalState += 1;\n\t\t\te.waitUntil(new Promise((_r, reject) => reject(new Error())));\n\t\t});\n\n\t\temitter.event(e => {\n\t\t\tglobalState += 1;\n\t\t\te.waitUntil(timeout(10));\n\t\t\te.waitUntil(timeout(20).then(() => globalState++)); // multiple `waitUntil` are supported and awaited on\n\t\t});\n\n\t\tawait emitter.fireAsync({ foo: true }, CancellationToken.None).then(() => {\n\t\t\tassert.strictEqual(globalState, 3);\n\t\t}).catch(e => {\n\t\t\tconsole.log(e);\n\t\t\tassert.ok(false);\n\t\t});\n\n\t\tsetUnexpectedErrorHandler(origErrorHandler);\n\t});\n});\n\nsuite('PausableEmitter', function () {\n\n\ttest('basic', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>();\n\n\t\temitter.event(e => data.push(e));\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\t});\n\n\ttest('pause/resume - no merge', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>();\n\n\t\temitter.event(e => data.push(e));\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.pause();\n\t\temitter.fire(3);\n\t\temitter.fire(4);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 2, 3, 4]);\n\t\temitter.fire(5);\n\t\tassert.deepStrictEqual(data, [1, 2, 3, 4, 5]);\n\t});\n\n\ttest('pause/resume - merge', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>({ merge: (a) => a.reduce((p, c) => p + c, 0) });\n\n\t\temitter.event(e => data.push(e));\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.pause();\n\t\temitter.fire(3);\n\t\temitter.fire(4);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 2, 7]);\n\n\t\temitter.fire(5);\n\t\tassert.deepStrictEqual(data, [1, 2, 7, 5]);\n\t});\n\n\ttest('double pause/resume', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>();\n\n\t\temitter.event(e => data.push(e));\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.pause();\n\t\temitter.pause();\n\t\temitter.fire(3);\n\t\temitter.fire(4);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 2, 3, 4]);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 2, 3, 4]);\n\t});\n\n\ttest('resume, no pause', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>();\n\n\t\temitter.event(e => data.push(e));\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(data, [1, 2]);\n\n\t\temitter.resume();\n\t\temitter.fire(3);\n\t\tassert.deepStrictEqual(data, [1, 2, 3]);\n\t});\n\n\ttest('nested pause', function () {\n\t\tconst data: number[] = [];\n\t\tconst emitter = new PauseableEmitter<number>();\n\n\t\tlet once = true;\n\t\temitter.event(e => {\n\t\t\tdata.push(e);\n\n\t\t\tif (once) {\n\t\t\t\temitter.pause();\n\t\t\t\tonce = false;\n\t\t\t}\n\t\t});\n\t\temitter.event(e => {\n\t\t\tdata.push(e);\n\t\t});\n\n\t\temitter.pause();\n\t\temitter.fire(1);\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(data, []);\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 1]); // paused after first event\n\n\t\temitter.resume();\n\t\tassert.deepStrictEqual(data, [1, 1, 2, 2]); // remaing event delivered\n\n\t\temitter.fire(3);\n\t\tassert.deepStrictEqual(data, [1, 1, 2, 2, 3, 3]);\n\n\t});\n});\n\nsuite('Event utils', () => {\n\n\tsuite('EventBufferer', () => {\n\n\t\ttest('should not buffer when not wrapped', () => {\n\t\t\tconst bufferer = new EventBufferer();\n\t\t\tconst counter = new Samples.EventCounter();\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tconst event = bufferer.wrapEvent(emitter.event);\n\t\t\tconst listener = event(counter.onEvent, counter);\n\n\t\t\tassert.strictEqual(counter.count, 0);\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter.count, 1);\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter.count, 2);\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter.count, 3);\n\n\t\t\tlistener.dispose();\n\t\t});\n\n\t\ttest('should buffer when wrapped', () => {\n\t\t\tconst bufferer = new EventBufferer();\n\t\t\tconst counter = new Samples.EventCounter();\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tconst event = bufferer.wrapEvent(emitter.event);\n\t\t\tconst listener = event(counter.onEvent, counter);\n\n\t\t\tassert.strictEqual(counter.count, 0);\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter.count, 1);\n\n\t\t\tbufferer.bufferEvents(() => {\n\t\t\t\temitter.fire();\n\t\t\t\tassert.strictEqual(counter.count, 1);\n\t\t\t\temitter.fire();\n\t\t\t\tassert.strictEqual(counter.count, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(counter.count, 3);\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter.count, 4);\n\n\t\t\tlistener.dispose();\n\t\t});\n\n\t\ttest('once', () => {\n\t\t\tconst emitter = new Emitter<void>();\n\n\t\t\tlet counter1 = 0, counter2 = 0, counter3 = 0;\n\n\t\t\tconst listener1 = emitter.event(() => counter1++);\n\t\t\tconst listener2 = Event.once(emitter.event)(() => counter2++);\n\t\t\tconst listener3 = Event.once(emitter.event)(() => counter3++);\n\n\t\t\tassert.strictEqual(counter1, 0);\n\t\t\tassert.strictEqual(counter2, 0);\n\t\t\tassert.strictEqual(counter3, 0);\n\n\t\t\tlistener3.dispose();\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter1, 1);\n\t\t\tassert.strictEqual(counter2, 1);\n\t\t\tassert.strictEqual(counter3, 0);\n\n\t\t\temitter.fire();\n\t\t\tassert.strictEqual(counter1, 2);\n\t\t\tassert.strictEqual(counter2, 1);\n\t\t\tassert.strictEqual(counter3, 0);\n\n\t\t\tlistener1.dispose();\n\t\t\tlistener2.dispose();\n\t\t});\n\t});\n\n\tsuite('fromPromise', () => {\n\n\t\ttest('should emit when done', async () => {\n\t\t\tlet count = 0;\n\n\t\t\tconst event = Event.fromPromise(Promise.resolve(null));\n\t\t\tevent(() => count++);\n\n\t\t\tassert.strictEqual(count, 0);\n\n\t\t\tawait timeout(10);\n\t\t\tassert.strictEqual(count, 1);\n\t\t});\n\n\t\ttest('should emit when done - setTimeout', async () => {\n\t\t\tlet count = 0;\n\n\t\t\tconst promise = timeout(5);\n\t\t\tconst event = Event.fromPromise(promise);\n\t\t\tevent(() => count++);\n\n\t\t\tassert.strictEqual(count, 0);\n\t\t\tawait promise;\n\t\t\tassert.strictEqual(count, 1);\n\t\t});\n\t});\n\n\tsuite('stopwatch', () => {\n\n\t\ttest('should emit', () => {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tconst event = Event.stopwatch(emitter.event);\n\n\t\t\treturn new Promise((c, e) => {\n\t\t\t\tevent(duration => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tassert(duration > 0);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\te(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tc(undefined);\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => emitter.fire(), 10);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('buffer', () => {\n\n\t\ttest('should buffer events', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst emitter = new Emitter<number>();\n\t\t\tconst event = emitter.event;\n\t\t\tconst bufferedEvent = Event.buffer(event);\n\n\t\t\temitter.fire(1);\n\t\t\temitter.fire(2);\n\t\t\temitter.fire(3);\n\t\t\tassert.deepStrictEqual(result, [] as number[]);\n\n\t\t\tconst listener = bufferedEvent(num => result.push(num));\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\n\t\t\temitter.fire(4);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\n\t\t\tlistener.dispose();\n\t\t\temitter.fire(5);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('should buffer events on next tick', async () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst emitter = new Emitter<number>();\n\t\t\tconst event = emitter.event;\n\t\t\tconst bufferedEvent = Event.buffer(event, true);\n\n\t\t\temitter.fire(1);\n\t\t\temitter.fire(2);\n\t\t\temitter.fire(3);\n\t\t\tassert.deepStrictEqual(result, [] as number[]);\n\n\t\t\tconst listener = bufferedEvent(num => result.push(num));\n\t\t\tassert.deepStrictEqual(result, []);\n\n\t\t\tawait timeout(10);\n\t\t\temitter.fire(4);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t\tlistener.dispose();\n\t\t\temitter.fire(5);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('should fire initial buffer events', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst emitter = new Emitter<number>();\n\t\t\tconst event = emitter.event;\n\t\t\tconst bufferedEvent = Event.buffer(event, false, [-2, -1, 0]);\n\n\t\t\temitter.fire(1);\n\t\t\temitter.fire(2);\n\t\t\temitter.fire(3);\n\t\t\tassert.deepStrictEqual(result, [] as number[]);\n\n\t\t\tbufferedEvent(num => result.push(num));\n\t\t\tassert.deepStrictEqual(result, [-2, -1, 0, 1, 2, 3]);\n\t\t});\n\t});\n\n\tsuite('EventMultiplexer', () => {\n\n\t\ttest('works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\t\t\tm.event(r => result.push(r));\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\n\t\t\tassert.deepStrictEqual(result, []);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\t\t});\n\n\t\ttest('multiplexer dispose works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\t\t\tm.event(r => result.push(r));\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\n\t\t\tassert.deepStrictEqual(result, []);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\tm.dispose();\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\t\t});\n\n\t\ttest('event dispose works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\t\t\tm.event(r => result.push(r));\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\n\t\t\tassert.deepStrictEqual(result, []);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\te1.dispose();\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\t\t});\n\n\t\ttest('mutliplexer event dispose works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\t\t\tm.event(r => result.push(r));\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tconst l1 = m.add(e1.event);\n\n\t\t\tassert.deepStrictEqual(result, []);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\tl1.dispose();\n\t\t\tassert.deepStrictEqual(result, [0]);\n\n\t\t\te1.fire(0);\n\t\t\tassert.deepStrictEqual(result, [0]);\n\t\t});\n\n\t\ttest('hot start works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\t\t\tm.event(r => result.push(r));\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\t\t\tconst e2 = new Emitter<number>();\n\t\t\tm.add(e2.event);\n\t\t\tconst e3 = new Emitter<number>();\n\t\t\tm.add(e3.event);\n\n\t\t\te1.fire(1);\n\t\t\te2.fire(2);\n\t\t\te3.fire(3);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('cold start works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\t\t\tconst e2 = new Emitter<number>();\n\t\t\tm.add(e2.event);\n\t\t\tconst e3 = new Emitter<number>();\n\t\t\tm.add(e3.event);\n\n\t\t\tm.event(r => result.push(r));\n\n\t\t\te1.fire(1);\n\t\t\te2.fire(2);\n\t\t\te3.fire(3);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('late add works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\t\t\tconst e2 = new Emitter<number>();\n\t\t\tm.add(e2.event);\n\n\t\t\tm.event(r => result.push(r));\n\n\t\t\te1.fire(1);\n\t\t\te2.fire(2);\n\n\t\t\tconst e3 = new Emitter<number>();\n\t\t\tm.add(e3.event);\n\t\t\te3.fire(3);\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('add dispose works', () => {\n\t\t\tconst result: number[] = [];\n\t\t\tconst m = new EventMultiplexer<number>();\n\n\t\t\tconst e1 = new Emitter<number>();\n\t\t\tm.add(e1.event);\n\t\t\tconst e2 = new Emitter<number>();\n\t\t\tm.add(e2.event);\n\n\t\t\tm.event(r => result.push(r));\n\n\t\t\te1.fire(1);\n\t\t\te2.fire(2);\n\n\t\t\tconst e3 = new Emitter<number>();\n\t\t\tconst l3 = m.add(e3.event);\n\t\t\te3.fire(3);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\n\t\t\tl3.dispose();\n\t\t\te3.fire(4);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\n\t\t\te2.fire(4);\n\t\t\te1.fire(5);\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4, 5]);\n\t\t});\n\t});\n\n\ttest('latch', () => {\n\t\tconst emitter = new Emitter<number>();\n\t\tconst event = Event.latch(emitter.event);\n\n\t\tconst result: number[] = [];\n\t\tconst listener = event(num => result.push(num));\n\n\t\tassert.deepStrictEqual(result, []);\n\n\t\temitter.fire(1);\n\t\tassert.deepStrictEqual(result, [1]);\n\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(result, [1, 2]);\n\n\t\temitter.fire(2);\n\t\tassert.deepStrictEqual(result, [1, 2]);\n\n\t\temitter.fire(1);\n\t\tassert.deepStrictEqual(result, [1, 2, 1]);\n\n\t\temitter.fire(1);\n\t\tassert.deepStrictEqual(result, [1, 2, 1]);\n\n\t\temitter.fire(3);\n\t\tassert.deepStrictEqual(result, [1, 2, 1, 3]);\n\n\t\temitter.fire(3);\n\t\tassert.deepStrictEqual(result, [1, 2, 1, 3]);\n\n\t\temitter.fire(3);\n\t\tassert.deepStrictEqual(result, [1, 2, 1, 3]);\n\n\t\tlistener.dispose();\n\t});\n\n});\n"]}