{"version":3,"file":"decorators.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/base/test/common/decorators.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport * as assert from 'assert';\nimport { memoize, createMemoizer, throttle } from 'vs/base/common/decorators';\n\nsuite('Decorators', () => {\n\ttest('memoize should memoize methods', () => {\n\t\tclass Foo {\n\t\t\tcount = 0;\n\n\t\t\tconstructor(private _answer: number | null | undefined) { }\n\n\t\t\t@memoize\n\t\t\tanswer() {\n\t\t\t\tthis.count++;\n\t\t\t\treturn this._answer;\n\t\t\t}\n\t\t}\n\n\t\tconst foo = new Foo(42);\n\t\tassert.strictEqual(foo.count, 0);\n\t\tassert.strictEqual(foo.answer(), 42);\n\t\tassert.strictEqual(foo.count, 1);\n\t\tassert.strictEqual(foo.answer(), 42);\n\t\tassert.strictEqual(foo.count, 1);\n\n\t\tconst foo2 = new Foo(1337);\n\t\tassert.strictEqual(foo2.count, 0);\n\t\tassert.strictEqual(foo2.answer(), 1337);\n\t\tassert.strictEqual(foo2.count, 1);\n\t\tassert.strictEqual(foo2.answer(), 1337);\n\t\tassert.strictEqual(foo2.count, 1);\n\n\t\tassert.strictEqual(foo.answer(), 42);\n\t\tassert.strictEqual(foo.count, 1);\n\n\t\tconst foo3 = new Foo(null);\n\t\tassert.strictEqual(foo3.count, 0);\n\t\tassert.strictEqual(foo3.answer(), null);\n\t\tassert.strictEqual(foo3.count, 1);\n\t\tassert.strictEqual(foo3.answer(), null);\n\t\tassert.strictEqual(foo3.count, 1);\n\n\t\tconst foo4 = new Foo(undefined);\n\t\tassert.strictEqual(foo4.count, 0);\n\t\tassert.strictEqual(foo4.answer(), undefined);\n\t\tassert.strictEqual(foo4.count, 1);\n\t\tassert.strictEqual(foo4.answer(), undefined);\n\t\tassert.strictEqual(foo4.count, 1);\n\t});\n\n\ttest('memoize should memoize getters', () => {\n\t\tclass Foo {\n\t\t\tcount = 0;\n\n\t\t\tconstructor(private _answer: number | null | undefined) { }\n\n\t\t\t@memoize\n\t\t\tget answer() {\n\t\t\t\tthis.count++;\n\t\t\t\treturn this._answer;\n\t\t\t}\n\t\t}\n\n\t\tconst foo = new Foo(42);\n\t\tassert.strictEqual(foo.count, 0);\n\t\tassert.strictEqual(foo.answer, 42);\n\t\tassert.strictEqual(foo.count, 1);\n\t\tassert.strictEqual(foo.answer, 42);\n\t\tassert.strictEqual(foo.count, 1);\n\n\t\tconst foo2 = new Foo(1337);\n\t\tassert.strictEqual(foo2.count, 0);\n\t\tassert.strictEqual(foo2.answer, 1337);\n\t\tassert.strictEqual(foo2.count, 1);\n\t\tassert.strictEqual(foo2.answer, 1337);\n\t\tassert.strictEqual(foo2.count, 1);\n\n\t\tassert.strictEqual(foo.answer, 42);\n\t\tassert.strictEqual(foo.count, 1);\n\n\t\tconst foo3 = new Foo(null);\n\t\tassert.strictEqual(foo3.count, 0);\n\t\tassert.strictEqual(foo3.answer, null);\n\t\tassert.strictEqual(foo3.count, 1);\n\t\tassert.strictEqual(foo3.answer, null);\n\t\tassert.strictEqual(foo3.count, 1);\n\n\t\tconst foo4 = new Foo(undefined);\n\t\tassert.strictEqual(foo4.count, 0);\n\t\tassert.strictEqual(foo4.answer, undefined);\n\t\tassert.strictEqual(foo4.count, 1);\n\t\tassert.strictEqual(foo4.answer, undefined);\n\t\tassert.strictEqual(foo4.count, 1);\n\t});\n\n\ttest('memoized property should not be enumerable', () => {\n\t\tclass Foo {\n\t\t\t@memoize\n\t\t\tget answer() {\n\t\t\t\treturn 42;\n\t\t\t}\n\t\t}\n\n\t\tconst foo = new Foo();\n\t\tassert.strictEqual(foo.answer, 42);\n\n\t\tassert(!Object.keys(foo).some(k => /\\$memoize\\$/.test(k)));\n\t});\n\n\ttest('memoized property should not be writable', () => {\n\t\tclass Foo {\n\t\t\t@memoize\n\t\t\tget answer() {\n\t\t\t\treturn 42;\n\t\t\t}\n\t\t}\n\n\t\tconst foo = new Foo();\n\t\tassert.strictEqual(foo.answer, 42);\n\n\t\ttry {\n\t\t\t(foo as any)['$memoize$answer'] = 1337;\n\t\t\tassert(false);\n\t\t} catch (e) {\n\t\t\tassert.strictEqual(foo.answer, 42);\n\t\t}\n\t});\n\n\ttest('memoize clear', () => {\n\t\tconst memoizer = createMemoizer();\n\t\tlet counter = 0;\n\t\tclass Foo {\n\t\t\t@memoizer\n\t\t\tget answer() {\n\t\t\t\treturn ++counter;\n\t\t\t}\n\t\t}\n\n\t\tconst foo = new Foo();\n\t\tassert.strictEqual(foo.answer, 1);\n\t\tassert.strictEqual(foo.answer, 1);\n\t\tmemoizer.clear();\n\t\tassert.strictEqual(foo.answer, 2);\n\t\tassert.strictEqual(foo.answer, 2);\n\t\tmemoizer.clear();\n\t\tassert.strictEqual(foo.answer, 3);\n\t\tassert.strictEqual(foo.answer, 3);\n\t\tassert.strictEqual(foo.answer, 3);\n\t});\n\n\ttest('throttle', () => {\n\t\tconst spy = sinon.spy();\n\t\tconst clock = sinon.useFakeTimers();\n\t\ttry {\n\t\t\tclass ThrottleTest {\n\t\t\t\tprivate _handle: Function;\n\n\t\t\t\tconstructor(fn: Function) {\n\t\t\t\t\tthis._handle = fn;\n\t\t\t\t}\n\n\t\t\t\t@throttle(\n\t\t\t\t\t100,\n\t\t\t\t\t(a: number, b: number) => a + b,\n\t\t\t\t\t() => 0\n\t\t\t\t)\n\t\t\t\treport(p: number): void {\n\t\t\t\t\tthis._handle(p);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst t = new ThrottleTest(spy);\n\n\t\t\tt.report(1);\n\t\t\tt.report(2);\n\t\t\tt.report(3);\n\t\t\tassert.deepStrictEqual(spy.args, [[1]]);\n\n\t\t\tclock.tick(200);\n\t\t\tassert.deepStrictEqual(spy.args, [[1], [5]]);\n\t\t\tspy.reset();\n\n\t\t\tt.report(4);\n\t\t\tt.report(5);\n\t\t\tclock.tick(50);\n\t\t\tt.report(6);\n\n\t\t\tassert.deepStrictEqual(spy.args, [[4]]);\n\t\t\tclock.tick(60);\n\t\t\tassert.deepStrictEqual(spy.args, [[4], [11]]);\n\t\t} finally {\n\t\t\tclock.restore();\n\t\t}\n\t});\n});\n"]}