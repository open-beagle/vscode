{"version":3,"file":"testReporterModel.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/code/electron-sandbox/issue/test/testReporterModel.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { IssueReporterModel } from 'vs/code/electron-sandbox/issue/issueReporterModel';\nimport { normalizeGitHubUrl } from 'vs/platform/issue/common/issueReporterUtil';\nimport { IssueType } from 'vs/platform/issue/common/issue';\n\nsuite('IssueReporter', () => {\n\n\ttest('sets defaults to include all data', () => {\n\t\tconst issueReporterModel = new IssueReporterModel();\n\t\tassert.deepStrictEqual(issueReporterModel.getData(), {\n\t\t\tallExtensions: [],\n\t\t\tincludeSystemInfo: true,\n\t\t\tincludeWorkspaceInfo: true,\n\t\t\tincludeProcessInfo: true,\n\t\t\tincludeExtensions: true,\n\t\t\tincludeExperiments: true,\n\t\t\tissueType: 0\n\t\t});\n\t});\n\n\ttest('serializes model skeleton when no data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\n\nExtensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes GPU information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes experiment info when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t}\n\t\t\t},\n\t\t\texperimentInfo: 'vsliv695:30137379\\nvsins829:30139715'\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none<details>\n<summary>A/B Experiments</summary>\n\n\\`\\`\\`\nvsliv695:30137379\nvsins829:30139715\n\\`\\`\\`\n\n</details>\n\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes Linux environment information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {},\n\t\t\t\tlinuxEnv: {\n\t\t\t\t\tdesktopSession: 'ubuntu',\n\t\t\t\t\txdgCurrentDesktop: 'ubuntu',\n\t\t\t\t\txdgSessionDesktop: 'ubuntu:GNOME',\n\t\t\t\t\txdgSessionType: 'x11'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status||\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n|DESKTOP_SESSION|ubuntu|\n|XDG_CURRENT_DESKTOP|ubuntu|\n|XDG_SESSION_DESKTOP|ubuntu:GNOME|\n|XDG_SESSION_TYPE|x11|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes remote information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t},\n\t\t\t\tremoteData: [\n\t\t\t\t\t{\n\t\t\t\t\t\thostName: 'SSH: Pineapple',\n\t\t\t\t\t\tmachineInfo: {\n\t\t\t\t\t\t\tos: 'Linux x64 4.18.0',\n\t\t\t\t\t\t\tcpus: 'Intel(R) Xeon(R) CPU E5-2673 v4 @ 2.30GHz (2 x 2294)',\n\t\t\t\t\t\t\tmemory: '8GB',\n\t\t\t\t\t\t\tvmHint: '100%'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nRemote OS version: Linux x64 4.18.0\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n\n|Item|Value|\n|---|---|\n|Remote|SSH: Pineapple|\n|OS|Linux x64 4.18.0|\n|CPUs|Intel(R) Xeon(R) CPU E5-2673 v4 @ 2.30GHz (2 x 2294)|\n|Memory (System)|8GB|\n|VM|100%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('escapes backslashes in processArgs', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '\\\\\\\\HOST\\\\path',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nIssue Type: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status||\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv|\\\\\\\\\\\\\\\\HOST\\\\\\\\path|\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('should normalize GitHub urls', () => {\n\t\t[\n\t\t\t'https://github.com/repo',\n\t\t\t'https://github.com/repo/',\n\t\t\t'https://github.com/repo.git',\n\t\t\t'https://github.com/repo/issues',\n\t\t\t'https://github.com/repo/issues/',\n\t\t\t'https://github.com/repo/issues/new',\n\t\t\t'https://github.com/repo/issues/new/'\n\t\t].forEach(url => {\n\t\t\tassert.strictEqual('https://github.com/repo', normalizeGitHubUrl(url));\n\t\t});\n\t});\n\n\ttest('should have support for filing on extensions for bugs, performance issues, and feature requests', () => {\n\t\t[\n\t\t\tIssueType.Bug,\n\t\t\tIssueType.FeatureRequest,\n\t\t\tIssueType.PerformanceIssue\n\t\t].forEach(type => {\n\t\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\t\tissueType: type,\n\t\t\t\tfileOnExtension: true\n\t\t\t});\n\n\t\t\tassert.strictEqual(issueReporterModel.fileOnExtension(), true);\n\t\t});\n\t});\n});\n"]}