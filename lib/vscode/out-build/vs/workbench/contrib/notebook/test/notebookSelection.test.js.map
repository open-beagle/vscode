{"version":3,"file":"notebookSelection.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/test/notebookSelection.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { FoldingModel, updateFoldingStateAtIndex } from 'vs/workbench/contrib/notebook/browser/contrib/fold/foldingModel';\nimport { NotebookCellSelectionCollection } from 'vs/workbench/contrib/notebook/browser/viewModel/cellSelectionCollection';\nimport { CellEditType, CellKind, SelectionStateType } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { createNotebookCellList, setupInstantiationService, TestCell, withTestNotebook } from 'vs/workbench/contrib/notebook/test/testNotebookEditor';\n\nsuite('NotebookSelection', () => {\n\ttest('focus is never empty', function () {\n\t\tconst selectionCollection = new NotebookCellSelectionCollection();\n\t\tassert.deepStrictEqual(selectionCollection.focus, { start: 0, end: 0 });\n\n\t\tselectionCollection.setState(null, [], true, 'model');\n\t\tassert.deepStrictEqual(selectionCollection.focus, { start: 0, end: 0 });\n\t});\n});\n\nsuite('NotebookCellList focus/selection', () => {\n\tconst instantiationService = setupInstantiationService();\n\tconst modeService = instantiationService.get(IModeService);\n\n\ttest('notebook cell list setFocus', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\n\t\t\t\tcellList.setFocus([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tcellList.detachViewModel();\n\t\t\t});\n\t});\n\n\ttest('notebook cell list setSelections', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setSelection([0]);\n\t\t\t\t// the only selection is also the focus\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// set selection does not modify focus\n\t\t\t\tcellList.setSelection([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('notebook cell list setFocus', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\n\t\t\t\tcellList.setFocus([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\n\t\t\t\tcellList.setSelection([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\n\ttest('notebook cell list focus/selection from UI', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markdown, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// arrow down, move both focus and selections\n\t\t\t\tcellList.setFocus([1], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tcellList.setSelection([1], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\n\t\t\t\t// shift+arrow down, expands selection\n\t\t\t\tcellList.setFocus([2], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tcellList.setSelection([1, 2]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\n\t\t\t\t// arrow down, will move focus but not expand selection\n\t\t\t\tcellList.setFocus([3], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 3, end: 4 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\n\ttest('notebook cell list focus/selection with folding regions', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markdown, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tassert.strictEqual(cellList.length, 5);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\t\t\t\tcellList.setFocus([0]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.length, 3);\n\n\t\t\t\t// currently, focus on a folded cell will only focus the cell itself, excluding its \"inner\" cells\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\tcellList.focusNext(1, false);\n\t\t\t\t// focus next should skip the folded items\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// unfold\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.length, 4);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t});\n\t});\n\n\ttest('notebook cell list focus/selection with folding regions and applyEdits', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markdown, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tcellList.setSelection([0]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 2);\n\n\t\t\t\tviewModel.notebookDocument.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 0, count: 2, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 3);\n\n\t\t\t\t// mimic undo\n\t\t\t\tviewModel.notebookDocument.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 0, count: 0, cells: [\n\t\t\t\t\t\tnew TestCell(viewModel.viewType, 7, '# header f', 'markdown', CellKind.Code, [], modeService),\n\t\t\t\t\t\tnew TestCell(viewModel.viewType, 8, 'var g = 5;', 'javascript', CellKind.Code, [], modeService)\n\t\t\t\t\t]\n\t\t\t\t}], true, undefined, () => undefined, undefined, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 1);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(2), 2);\n\n\n\t\t\t});\n\t});\n\n\ttest('notebook cell list getModelIndex', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markdown, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(-1), 0);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(1), 2);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(2), 4);\n\t\t\t});\n\t});\n\n\n\ttest('notebook validate range', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange(null), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange(undefined), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 0 }), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 2 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 3 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: -1, end: 3 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: -1, end: 1 }), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 2, end: 1 }), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 2, end: -1 }), { start: 0, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('notebook updateSelectionState', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }, { start: -1, end: 0 }] });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('notebook cell selection w/ cell deletion', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tviewModel.deleteCell(1, true, false);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), []);\n\t\t\t});\n\t});\n});\n"]}