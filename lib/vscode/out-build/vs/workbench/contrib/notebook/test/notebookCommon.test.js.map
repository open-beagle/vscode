{"version":3,"file":"notebookCommon.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/test/notebookCommon.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { NOTEBOOK_DISPLAY_ORDER, sortMimeTypes, CellKind, diff, CellUri } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { cellRangesToIndexes, cellIndexesToRanges } from 'vs/workbench/contrib/notebook/common/notebookRange';\nimport { TestCell, setupInstantiationService } from 'vs/workbench/contrib/notebook/test/testNotebookEditor';\nimport { URI } from 'vs/base/common/uri';\nimport { IModeService } from 'vs/editor/common/services/modeService';\n\nsuite('NotebookCommon', () => {\n\tconst instantiationService = setupInstantiationService();\n\tconst modeService = instantiationService.get(IModeService);\n\n\ttest('sortMimeTypes default orders', function () {\n\t\tconst defaultDisplayOrder = NOTEBOOK_DISPLAY_ORDER;\n\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'text/markdown',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t], [], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'text/markdown',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t]\n\t\t);\n\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'text/markdown',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'text/plain',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'image/svg+xml'\n\t\t\t], [], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'text/markdown',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t]\n\t\t);\n\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'text/markdown',\n\t\t\t\t'application/json',\n\t\t\t\t'text/plain',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/png',\n\t\t\t\t'image/svg+xml'\n\t\t\t], [], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'text/markdown',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t]\n\t\t);\n\t});\n\n\n\n\ttest('sortMimeTypes user orders', function () {\n\t\tconst defaultDisplayOrder = NOTEBOOK_DISPLAY_ORDER;\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'text/markdown',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'image/png',\n\t\t\t\t'text/plain',\n\t\t\t\t'text/markdown',\n\t\t\t\t'text/html',\n\t\t\t\t'application/json'\n\t\t\t], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'image/png',\n\t\t\t\t'text/plain',\n\t\t\t\t'text/markdown',\n\t\t\t\t'text/html',\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'image/jpeg',\n\t\t\t]\n\t\t);\n\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'text/markdown',\n\t\t\t\t'application/json',\n\t\t\t\t'text/plain',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'image/png'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'text/html',\n\t\t\t\t'text/html',\n\t\t\t\t'text/markdown',\n\t\t\t\t'application/json'\n\t\t\t], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'text/html',\n\t\t\t\t'text/markdown',\n\t\t\t\t'application/javascript',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'image/png',\n\t\t\t\t'image/jpeg',\n\t\t\t\t'text/plain'\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('sortMimeTypes glob', function () {\n\t\tconst defaultDisplayOrder = NOTEBOOK_DISPLAY_ORDER;\n\n\t\t// unknown mime types come last\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/vnd-vega.json',\n\t\t\t\t'application/vnd-plot.json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'text/markdown',\n\t\t\t\t'text/html',\n\t\t\t\t'application/json'\n\t\t\t], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'text/html',\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'application/vnd-vega.json',\n\t\t\t\t'application/vnd-plot.json'\n\t\t\t],\n\t\t\t'unknown mimetypes keep the ordering'\n\t\t);\n\n\t\tassert.deepStrictEqual(sortMimeTypes(\n\t\t\t[\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'text/html',\n\t\t\t\t'application/vnd-plot.json',\n\t\t\t\t'application/vnd-vega.json'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'application/vnd-vega*',\n\t\t\t\t'text/markdown',\n\t\t\t\t'text/html',\n\t\t\t\t'application/json'\n\t\t\t], defaultDisplayOrder),\n\t\t\t[\n\t\t\t\t'application/vnd-vega.json',\n\t\t\t\t'text/html',\n\t\t\t\t'application/json',\n\t\t\t\t'application/javascript',\n\t\t\t\t'application/vnd-plot.json'\n\t\t\t],\n\t\t\t'glob *'\n\t\t);\n\t});\n\n\ttest('diff cells', function () {\n\t\tconst cells: TestCell[] = [];\n\n\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tcells.push(\n\t\t\t\tnew TestCell('notebook', i, `var a = ${i};`, 'javascript', CellKind.Code, [], modeService)\n\t\t\t);\n\t\t}\n\n\t\tassert.deepStrictEqual(diff<TestCell>(cells, [], (cell) => {\n\t\t\treturn cells.indexOf(cell) > -1;\n\t\t}), [\n\t\t\t{\n\t\t\t\tstart: 0,\n\t\t\t\tdeleteCount: 5,\n\t\t\t\ttoInsert: []\n\t\t\t}\n\t\t]\n\t\t);\n\n\t\tassert.deepStrictEqual(diff<TestCell>([], cells, (cell) => {\n\t\t\treturn false;\n\t\t}), [\n\t\t\t{\n\t\t\t\tstart: 0,\n\t\t\t\tdeleteCount: 0,\n\t\t\t\ttoInsert: cells\n\t\t\t}\n\t\t]\n\t\t);\n\n\t\tconst cellA = new TestCell('notebook', 6, 'var a = 6;', 'javascript', CellKind.Code, [], modeService);\n\t\tconst cellB = new TestCell('notebook', 7, 'var a = 7;', 'javascript', CellKind.Code, [], modeService);\n\n\t\tconst modifiedCells = [\n\t\t\tcells[0],\n\t\t\tcells[1],\n\t\t\tcellA,\n\t\t\tcells[3],\n\t\t\tcellB,\n\t\t\tcells[4]\n\t\t];\n\n\t\tconst splices = diff<TestCell>(cells, modifiedCells, (cell) => {\n\t\t\treturn cells.indexOf(cell) > -1;\n\t\t});\n\n\t\tassert.deepStrictEqual(splices,\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tstart: 2,\n\t\t\t\t\tdeleteCount: 1,\n\t\t\t\t\ttoInsert: [cellA]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tdeleteCount: 0,\n\t\t\t\t\ttoInsert: [cellB]\n\t\t\t\t}\n\t\t\t]\n\t\t);\n\t});\n});\n\n\nsuite('CellUri', function () {\n\n\ttest('parse, generate (file-scheme)', function () {\n\n\t\tconst nb = URI.parse('foo:///bar/følder/file.nb');\n\t\tconst id = 17;\n\n\t\tconst data = CellUri.generate(nb, id);\n\t\tconst actual = CellUri.parse(data);\n\t\tassert.ok(Boolean(actual));\n\t\tassert.strictEqual(actual?.handle, id);\n\t\tassert.strictEqual(actual?.notebook.toString(), nb.toString());\n\t});\n\n\ttest('parse, generate (foo-scheme)', function () {\n\n\t\tconst nb = URI.parse('foo:///bar/følder/file.nb');\n\t\tconst id = 17;\n\n\t\tconst data = CellUri.generate(nb, id);\n\t\tconst actual = CellUri.parse(data);\n\t\tassert.ok(Boolean(actual));\n\t\tassert.strictEqual(actual?.handle, id);\n\t\tassert.strictEqual(actual?.notebook.toString(), nb.toString());\n\t});\n});\n\n\nsuite('CellRange', function () {\n\n\ttest('Cell range to index', function () {\n\t\tassert.deepStrictEqual(cellRangesToIndexes([]), []);\n\t\tassert.deepStrictEqual(cellRangesToIndexes([{ start: 0, end: 0 }]), []);\n\t\tassert.deepStrictEqual(cellRangesToIndexes([{ start: 0, end: 1 }]), [0]);\n\t\tassert.deepStrictEqual(cellRangesToIndexes([{ start: 0, end: 2 }]), [0, 1]);\n\t\tassert.deepStrictEqual(cellRangesToIndexes([{ start: 0, end: 2 }, { start: 2, end: 3 }]), [0, 1, 2]);\n\t\tassert.deepStrictEqual(cellRangesToIndexes([{ start: 0, end: 2 }, { start: 3, end: 4 }]), [0, 1, 3]);\n\t});\n\n\ttest('Cell index to range', function () {\n\t\tassert.deepStrictEqual(cellIndexesToRanges([]), []);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([0]), [{ start: 0, end: 1 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([0, 1]), [{ start: 0, end: 2 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([0, 1, 2]), [{ start: 0, end: 3 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([0, 1, 3]), [{ start: 0, end: 2 }, { start: 3, end: 4 }]);\n\n\t\tassert.deepStrictEqual(cellIndexesToRanges([1, 0]), [{ start: 0, end: 2 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([1, 2, 0]), [{ start: 0, end: 3 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([3, 1, 0]), [{ start: 0, end: 2 }, { start: 3, end: 4 }]);\n\n\t\tassert.deepStrictEqual(cellIndexesToRanges([9, 10]), [{ start: 9, end: 11 }]);\n\t\tassert.deepStrictEqual(cellIndexesToRanges([10, 9]), [{ start: 9, end: 11 }]);\n\t});\n});\n"]}