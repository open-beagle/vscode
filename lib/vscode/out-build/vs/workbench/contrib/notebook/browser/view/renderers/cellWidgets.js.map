{"version":3,"file":"cellWidgets.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/view/renderers/cellWidgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { SimpleIconLabel } from 'vs/base/browser/ui/iconLabel/simpleIconLabel';\nimport { WorkbenchActionExecutedClassification, WorkbenchActionExecutedEvent } from 'vs/base/common/actions';\nimport { toErrorMessage } from 'vs/base/common/errorMessage';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { stripIcons } from 'vs/base/common/iconLabels';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore, dispose } from 'vs/base/common/lifecycle';\nimport { ElementSizeObserver } from 'vs/editor/browser/config/elementSizeObserver';\nimport { IDimension, isThemeColor } from 'vs/editor/common/editorCommon';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IThemeService, ThemeColor } from 'vs/platform/theme/common/themeService';\nimport { INotebookCellActionContext } from 'vs/workbench/contrib/notebook/browser/contrib/coreActions';\nimport { CodeCellLayoutInfo, MarkdownCellLayoutInfo } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { CellStatusbarAlignment, INotebookCellStatusBarItem } from 'vs/workbench/contrib/notebook/common/notebookCommon';\n\nconst $ = DOM.$;\n\nexport interface IClickTarget {\n\ttype: ClickTargetType;\n\tevent: MouseEvent;\n}\n\nexport const enum ClickTargetType {\n\tContainer = 0,\n\tContributedTextItem = 1,\n\tContributedCommandItem = 2\n}\n\nexport class CellEditorStatusBar extends Disposable {\n\treadonly statusBarContainer: HTMLElement;\n\n\tprivate readonly leftItemsContainer: HTMLElement;\n\tprivate readonly rightItemsContainer: HTMLElement;\n\tprivate readonly itemsDisposable: DisposableStore;\n\n\tprivate leftItems: CellStatusBarItem[] = [];\n\tprivate rightItems: CellStatusBarItem[] = [];\n\tprivate width: number = 0;\n\n\tprivate currentContext: INotebookCellActionContext | undefined;\n\tprotected readonly _onDidClick: Emitter<IClickTarget> = this._register(new Emitter<IClickTarget>());\n\treadonly onDidClick: Event<IClickTarget> = this._onDidClick.event;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) {\n\t\tsuper();\n\t\tthis.statusBarContainer = DOM.append(container, $('.cell-statusbar-container'));\n\t\tthis.statusBarContainer.tabIndex = -1;\n\t\tconst leftItemsContainer = DOM.append(this.statusBarContainer, $('.cell-status-left'));\n\t\tconst rightItemsContainer = DOM.append(this.statusBarContainer, $('.cell-status-right'));\n\t\tthis.leftItemsContainer = DOM.append(leftItemsContainer, $('.cell-contributed-items.cell-contributed-items-left'));\n\t\tthis.rightItemsContainer = DOM.append(rightItemsContainer, $('.cell-contributed-items.cell-contributed-items-right'));\n\n\t\tthis.itemsDisposable = this._register(new DisposableStore());\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => this.currentContext && this.update(this.currentContext)));\n\n\t\tthis._register(DOM.addDisposableListener(this.statusBarContainer, DOM.EventType.CLICK, e => {\n\t\t\tif (e.target === leftItemsContainer || e.target === rightItemsContainer || e.target === this.statusBarContainer) {\n\t\t\t\t// hit on empty space\n\t\t\t\tthis._onDidClick.fire({\n\t\t\t\t\ttype: ClickTargetType.Container,\n\t\t\t\t\tevent: e\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif ((e.target as HTMLElement).classList.contains('cell-status-item-has-command')) {\n\t\t\t\t\tthis._onDidClick.fire({\n\t\t\t\t\t\ttype: ClickTargetType.ContributedCommandItem,\n\t\t\t\t\t\tevent: e\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// text\n\t\t\t\t\tthis._onDidClick.fire({\n\t\t\t\t\t\ttype: ClickTargetType.ContributedTextItem,\n\t\t\t\t\t\tevent: e\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate layout(): void {\n\t\tif (!this.currentContext) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO@roblou maybe more props should be in common layoutInfo?\n\t\tconst layoutInfo = this.currentContext.cell.layoutInfo as CodeCellLayoutInfo | MarkdownCellLayoutInfo;\n\t\tconst width = layoutInfo.editorWidth;\n\t\tif (!width) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.statusBarContainer.style.width = `${width}px`;\n\n\t\tconst maxItemWidth = this.getMaxItemWidth();\n\t\tthis.leftItems.forEach(item => item.maxWidth = maxItemWidth);\n\t\tthis.rightItems.forEach(item => item.maxWidth = maxItemWidth);\n\t}\n\n\tprivate getMaxItemWidth() {\n\t\treturn this.width / 2;\n\t}\n\n\tupdate(context: INotebookCellActionContext) {\n\t\tthis.currentContext = context;\n\t\tthis.itemsDisposable.clear();\n\n\t\tif (!this.currentContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.itemsDisposable.add(this.currentContext.cell.onDidChangeLayout(() => this.layout()));\n\t\tthis.itemsDisposable.add(this.currentContext.cell.onDidChangeCellStatusBarItems(() => this.updateRenderedItems()));\n\t\tthis.itemsDisposable.add(this.currentContext.notebookEditor.onDidChangeActiveCell(() => this.updateActiveCell()));\n\t\tthis.layout();\n\t\tthis.updateActiveCell();\n\t\tthis.updateRenderedItems();\n\t}\n\n\tprivate updateActiveCell(): void {\n\t\tconst isActiveCell = this.currentContext!.notebookEditor.getActiveCell() === this.currentContext?.cell;\n\t\tthis.statusBarContainer.classList.toggle('is-active-cell', isActiveCell);\n\t}\n\n\tprivate updateRenderedItems(): void {\n\t\tconst items = this.currentContext!.cell.getCellStatusBarItems();\n\t\titems.sort((itemA, itemB) => {\n\t\t\treturn (itemB.priority ?? 0) - (itemA.priority ?? 0);\n\t\t});\n\n\t\tconst maxItemWidth = this.getMaxItemWidth();\n\t\tconst newLeftItems = items.filter(item => item.alignment === CellStatusbarAlignment.Left);\n\t\tconst newRightItems = items.filter(item => item.alignment === CellStatusbarAlignment.Right).reverse();\n\n\t\tconst updateItems = (renderedItems: CellStatusBarItem[], newItems: INotebookCellStatusBarItem[], container: HTMLElement) => {\n\t\t\tif (renderedItems.length > newItems.length) {\n\t\t\t\tconst deleted = renderedItems.splice(newItems.length, renderedItems.length - newItems.length);\n\t\t\t\tfor (let deletedItem of deleted) {\n\t\t\t\t\tcontainer.removeChild(deletedItem.container);\n\t\t\t\t\tdeletedItem.dispose();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewItems.forEach((newLeftItem, i) => {\n\t\t\t\tconst existingItem = renderedItems[i];\n\t\t\t\tif (existingItem) {\n\t\t\t\t\texistingItem.updateItem(newLeftItem, maxItemWidth);\n\t\t\t\t} else {\n\t\t\t\t\tconst item = this._instantiationService.createInstance(CellStatusBarItem, this.currentContext!, newLeftItem, maxItemWidth);\n\t\t\t\t\trenderedItems.push(item);\n\t\t\t\t\tcontainer.appendChild(item.container);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tupdateItems(this.leftItems, newLeftItems, this.leftItemsContainer);\n\t\tupdateItems(this.rightItems, newRightItems, this.rightItemsContainer);\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tdispose(this.leftItems);\n\t\tdispose(this.rightItems);\n\t}\n}\n\nclass CellStatusBarItem extends Disposable {\n\n\treadonly container = $('.cell-status-item');\n\n\tset maxWidth(v: number) {\n\t\tthis.container.style.maxWidth = v + 'px';\n\t}\n\n\tprivate _currentItem!: INotebookCellStatusBarItem;\n\tprivate _itemDisposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tprivate readonly _context: INotebookCellActionContext,\n\t\titemModel: INotebookCellStatusBarItem,\n\t\tmaxWidth: number | undefined,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) {\n\t\tsuper();\n\n\t\tthis.updateItem(itemModel, maxWidth);\n\t}\n\n\tupdateItem(item: INotebookCellStatusBarItem, maxWidth: number | undefined) {\n\t\tthis._itemDisposables.clear();\n\n\t\tif (!this._currentItem || this._currentItem.text !== item.text) {\n\t\t\tnew SimpleIconLabel(this.container).text = item.text.replace(/\\n/g, ' ');\n\t\t}\n\n\t\tconst resolveColor = (color: ThemeColor | string) => {\n\t\t\treturn isThemeColor(color) ?\n\t\t\t\t(this._themeService.getColorTheme().getColor(color.id)?.toString() || '') :\n\t\t\t\tcolor;\n\t\t};\n\n\t\tthis.container.style.color = item.color ? resolveColor(item.color) : '';\n\t\tthis.container.style.backgroundColor = item.backgroundColor ? resolveColor(item.backgroundColor) : '';\n\t\tthis.container.style.opacity = item.opacity ? item.opacity : '';\n\n\t\tthis.container.classList.toggle('cell-status-item-show-when-active', !!item.onlyShowWhenActive);\n\n\t\tif (typeof maxWidth === 'number') {\n\t\t\tthis.maxWidth = maxWidth;\n\t\t}\n\n\t\tlet ariaLabel: string;\n\t\tlet role: string | undefined;\n\t\tif (item.accessibilityInformation) {\n\t\t\tariaLabel = item.accessibilityInformation.label;\n\t\t\trole = item.accessibilityInformation.role;\n\t\t} else {\n\t\t\tariaLabel = item.text ? stripIcons(item.text).trim() : '';\n\t\t}\n\n\t\tthis.container.setAttribute('aria-label', ariaLabel);\n\t\tthis.container.setAttribute('role', role || '');\n\t\tthis.container.title = item.tooltip ?? '';\n\n\t\tthis.container.classList.toggle('cell-status-item-has-command', !!item.command);\n\t\tif (item.command) {\n\t\t\tthis.container.tabIndex = 0;\n\n\t\t\tthis._itemDisposables.add(DOM.addDisposableListener(this.container, DOM.EventType.CLICK, _e => {\n\t\t\t\tthis.executeCommand();\n\t\t\t}));\n\t\t\tthis._itemDisposables.add(DOM.addDisposableListener(this.container, DOM.EventType.KEY_DOWN, e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif (event.equals(KeyCode.Space) || event.equals(KeyCode.Enter)) {\n\t\t\t\t\tthis.executeCommand();\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.container.tabIndex = -1;\n\t\t}\n\n\t\tthis._currentItem = item;\n\t}\n\n\tprivate async executeCommand(): Promise<void> {\n\t\tconst command = this._currentItem.command;\n\t\tif (!command) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = typeof command === 'string' ? command : command.id;\n\t\tconst args = typeof command === 'string' ? [] : command.arguments ?? [];\n\n\t\targs.unshift(this._context);\n\n\t\tthis._telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', { id, from: 'cell status bar' });\n\t\ttry {\n\t\t\tawait this._commandService.executeCommand(id, ...args);\n\t\t} catch (error) {\n\t\t\tthis._notificationService.error(toErrorMessage(error));\n\t\t}\n\t}\n}\n\ndeclare const ResizeObserver: any;\n\nexport interface IResizeObserver {\n\tstartObserving: () => void;\n\tstopObserving: () => void;\n\tgetWidth(): number;\n\tgetHeight(): number;\n\tdispose(): void;\n}\n\nexport class BrowserResizeObserver extends Disposable implements IResizeObserver {\n\tprivate readonly referenceDomElement: HTMLElement | null;\n\n\tprivate readonly observer: any;\n\tprivate width: number;\n\tprivate height: number;\n\n\tconstructor(referenceDomElement: HTMLElement | null, dimension: IDimension | undefined, changeCallback: () => void) {\n\t\tsuper();\n\n\t\tthis.referenceDomElement = referenceDomElement;\n\t\tthis.width = -1;\n\t\tthis.height = -1;\n\n\t\tthis.observer = new ResizeObserver((entries: any) => {\n\t\t\tfor (const entry of entries) {\n\t\t\t\tif (entry.target === referenceDomElement && entry.contentRect) {\n\t\t\t\t\tif (this.width !== entry.contentRect.width || this.height !== entry.contentRect.height) {\n\t\t\t\t\t\tthis.width = entry.contentRect.width;\n\t\t\t\t\t\tthis.height = entry.contentRect.height;\n\t\t\t\t\t\tDOM.scheduleAtNextAnimationFrame(() => {\n\t\t\t\t\t\t\tchangeCallback();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.height;\n\t}\n\n\tstartObserving(): void {\n\t\tthis.observer.observe(this.referenceDomElement!);\n\t}\n\n\tstopObserving(): void {\n\t\tthis.observer.unobserve(this.referenceDomElement!);\n\t}\n\n\toverride dispose(): void {\n\t\tthis.observer.disconnect();\n\t\tsuper.dispose();\n\t}\n}\n\nexport function getResizesObserver(referenceDomElement: HTMLElement | null, dimension: IDimension | undefined, changeCallback: () => void): IResizeObserver {\n\tif (ResizeObserver) {\n\t\treturn new BrowserResizeObserver(referenceDomElement, dimension, changeCallback);\n\t} else {\n\t\treturn new ElementSizeObserver(referenceDomElement, dimension, changeCallback);\n\t}\n}\n"]}