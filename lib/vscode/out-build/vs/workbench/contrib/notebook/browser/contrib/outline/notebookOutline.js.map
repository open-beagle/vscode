{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/outline/notebookOutline.ts"],"names":[],"mappings":"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","file":"notebookOutline.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./notebookOutline';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { combinedDisposable, IDisposable, Disposable, DisposableStore, MutableDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { IThemeService, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { ICellViewModel } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebookEditor } from 'vs/workbench/contrib/notebook/browser/notebookEditor';\nimport { CellKind } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { IOutline, IOutlineComparator, IOutlineCreator, IOutlineListConfig, IOutlineService, IQuickPickDataSource, IQuickPickOutlineElement, OutlineChangeEvent, OutlineConfigKeys, OutlineTarget } from 'vs/workbench/services/outline/browser/outline';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IEditorPane } from 'vs/workbench/common/editor';\nimport { IKeyboardNavigationLabelProvider, IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IDataSource, ITreeNode, ITreeRenderer } from 'vs/base/browser/ui/tree/tree';\nimport { createMatches, FuzzyScore } from 'vs/base/common/filters';\nimport { IconLabel, IIconLabelValueOptions } from 'vs/base/browser/ui/iconLabel/iconLabel';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IEditorOptions } from 'vs/platform/editor/common/editor';\nimport { IEditorService, SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { getIconClassesForModeId } from 'vs/editor/common/services/getIconClasses';\nimport { IWorkbenchDataTreeOptions } from 'vs/platform/list/browser/listService';\nimport { localize } from 'vs/nls';\nimport { IMarkerService, MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { listErrorForeground, listWarningForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { isEqual } from 'vs/base/common/resources';\nimport { IdleValue } from 'vs/base/common/async';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from 'vs/platform/configuration/common/configurationRegistry';\nimport * as marked from 'vs/base/common/marked/marked';\nimport { renderMarkdownAsPlaintext } from 'vs/base/browser/markdownRenderer';\n\nexport interface IOutlineMarkerInfo {\n\treadonly count: number;\n\treadonly topSev: MarkerSeverity;\n}\n\nexport class OutlineEntry {\n\n\tprivate _children: OutlineEntry[] = [];\n\tprivate _parent: OutlineEntry | undefined;\n\tprivate _markerInfo: IOutlineMarkerInfo | undefined;\n\n\tconstructor(\n\t\treadonly index: number,\n\t\treadonly level: number,\n\t\treadonly cell: ICellViewModel,\n\t\treadonly label: string,\n\t\treadonly icon: ThemeIcon\n\t) { }\n\n\taddChild(entry: OutlineEntry) {\n\t\tthis._children.push(entry);\n\t\tentry._parent = this;\n\t}\n\n\tget parent(): OutlineEntry | undefined {\n\t\treturn this._parent;\n\t}\n\n\tget children(): Iterable<OutlineEntry> {\n\t\treturn this._children;\n\t}\n\n\tget markerInfo(): IOutlineMarkerInfo | undefined {\n\t\treturn this._markerInfo;\n\t}\n\n\tupdateMarkers(markerService: IMarkerService): void {\n\t\tif (this.cell.cellKind === CellKind.Code) {\n\t\t\t// a code cell can have marker\n\t\t\tconst marker = markerService.read({ resource: this.cell.uri, severities: MarkerSeverity.Error | MarkerSeverity.Warning });\n\t\t\tif (marker.length === 0) {\n\t\t\t\tthis._markerInfo = undefined;\n\t\t\t} else {\n\t\t\t\tconst topSev = marker.find(a => a.severity === MarkerSeverity.Error)?.severity ?? MarkerSeverity.Warning;\n\t\t\t\tthis._markerInfo = { topSev, count: marker.length };\n\t\t\t}\n\t\t} else {\n\t\t\t// a markdown cell can inherit markers from its children\n\t\t\tlet topChild: MarkerSeverity | undefined;\n\t\t\tfor (let child of this.children) {\n\t\t\t\tchild.updateMarkers(markerService);\n\t\t\t\tif (child.markerInfo) {\n\t\t\t\t\ttopChild = !topChild ? child.markerInfo.topSev : Math.max(child.markerInfo.topSev, topChild);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._markerInfo = topChild && { topSev: topChild, count: 0 };\n\t\t}\n\t}\n\n\tclearMarkers(): void {\n\t\tthis._markerInfo = undefined;\n\t\tfor (let child of this.children) {\n\t\t\tchild.clearMarkers();\n\t\t}\n\t}\n\n\tfind(cell: ICellViewModel, parents: OutlineEntry[]): OutlineEntry | undefined {\n\t\tif (cell.id === this.cell.id) {\n\t\t\treturn this;\n\t\t}\n\t\tparents.push(this);\n\t\tfor (let child of this.children) {\n\t\t\tconst result = child.find(cell, parents);\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\tparents.pop();\n\t\treturn undefined;\n\t}\n\n\tasFlatList(bucket: OutlineEntry[]): void {\n\t\tbucket.push(this);\n\t\tfor (let child of this.children) {\n\t\t\tchild.asFlatList(bucket);\n\t\t}\n\t}\n}\n\nclass NotebookOutlineTemplate {\n\n\tstatic readonly templateId = 'NotebookOutlineRenderer';\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\treadonly iconClass: HTMLElement,\n\t\treadonly iconLabel: IconLabel,\n\t\treadonly decoration: HTMLElement\n\t) { }\n}\n\nclass NotebookOutlineRenderer implements ITreeRenderer<OutlineEntry, FuzzyScore, NotebookOutlineTemplate> {\n\n\ttemplateId: string = NotebookOutlineTemplate.templateId;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): NotebookOutlineTemplate {\n\t\tcontainer.classList.add('notebook-outline-element', 'show-file-icons');\n\t\tconst iconClass = document.createElement('div');\n\t\tcontainer.append(iconClass);\n\t\tconst iconLabel = new IconLabel(container, { supportHighlights: true });\n\t\tconst decoration = document.createElement('div');\n\t\tdecoration.className = 'element-decoration';\n\t\tcontainer.append(decoration);\n\t\treturn new NotebookOutlineTemplate(container, iconClass, iconLabel, decoration);\n\t}\n\n\trenderElement(node: ITreeNode<OutlineEntry, FuzzyScore>, _index: number, template: NotebookOutlineTemplate, _height: number | undefined): void {\n\t\tconst options: IIconLabelValueOptions = {\n\t\t\tmatches: createMatches(node.filterData),\n\t\t\textraClasses: []\n\t\t};\n\n\t\tif (node.element.cell.cellKind === CellKind.Code && this._themeService.getFileIconTheme().hasFileIcons) {\n\t\t\ttemplate.iconClass.className = '';\n\t\t\toptions.extraClasses?.push(...getIconClassesForModeId(node.element.cell.language ?? ''));\n\t\t} else {\n\t\t\ttemplate.iconClass.className = 'element-icon ' + ThemeIcon.asClassNameArray(node.element.icon).join(' ');\n\t\t}\n\n\t\ttemplate.iconLabel.setLabel(node.element.label, undefined, options);\n\n\t\tconst { markerInfo } = node.element;\n\n\t\ttemplate.container.style.removeProperty('--outline-element-color');\n\t\ttemplate.decoration.innerText = '';\n\t\tif (markerInfo) {\n\t\t\tconst useBadges = this._configurationService.getValue<boolean>(OutlineConfigKeys.problemsBadges);\n\t\t\tif (!useBadges) {\n\t\t\t\ttemplate.decoration.classList.remove('bubble');\n\t\t\t\ttemplate.decoration.innerText = '';\n\t\t\t} else if (markerInfo.count === 0) {\n\t\t\t\ttemplate.decoration.classList.add('bubble');\n\t\t\t\ttemplate.decoration.innerText = '\\uea71';\n\t\t\t} else {\n\t\t\t\ttemplate.decoration.classList.remove('bubble');\n\t\t\t\ttemplate.decoration.innerText = markerInfo.count > 9 ? '9+' : String(markerInfo.count);\n\t\t\t}\n\t\t\tconst color = this._themeService.getColorTheme().getColor(markerInfo.topSev === MarkerSeverity.Error ? listErrorForeground : listWarningForeground);\n\t\t\tconst useColors = this._configurationService.getValue<boolean>(OutlineConfigKeys.problemsColors);\n\t\t\tif (!useColors) {\n\t\t\t\ttemplate.container.style.removeProperty('--outline-element-color');\n\t\t\t\ttemplate.decoration.style.setProperty('--outline-element-color', color?.toString() ?? 'inherit');\n\t\t\t} else {\n\t\t\t\ttemplate.container.style.setProperty('--outline-element-color', color?.toString() ?? 'inherit');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: NotebookOutlineTemplate): void {\n\t\ttemplateData.iconLabel.dispose();\n\t}\n}\n\nclass NotebookOutlineAccessibility implements IListAccessibilityProvider<OutlineEntry> {\n\tgetAriaLabel(element: OutlineEntry): string | null {\n\t\treturn element.label;\n\t}\n\tgetWidgetAriaLabel(): string {\n\t\treturn '';\n\t}\n}\n\nclass NotebookNavigationLabelProvider implements IKeyboardNavigationLabelProvider<OutlineEntry> {\n\tgetKeyboardNavigationLabel(element: OutlineEntry): { toString(): string | undefined; } | { toString(): string | undefined; }[] | undefined {\n\t\treturn element.label;\n\t}\n}\n\nclass NotebookOutlineVirtualDelegate implements IListVirtualDelegate<OutlineEntry> {\n\n\tgetHeight(_element: OutlineEntry): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(_element: OutlineEntry): string {\n\t\treturn NotebookOutlineTemplate.templateId;\n\t}\n}\n\nclass NotebookQuickPickProvider implements IQuickPickDataSource<OutlineEntry> {\n\n\tconstructor(\n\t\tprivate _getEntries: () => OutlineEntry[],\n\t\t@IThemeService private readonly _themeService: IThemeService\n\t) { }\n\n\tgetQuickPickElements(): IQuickPickOutlineElement<OutlineEntry>[] {\n\t\tconst bucket: OutlineEntry[] = [];\n\t\tfor (let entry of this._getEntries()) {\n\t\t\tentry.asFlatList(bucket);\n\t\t}\n\t\tconst result: IQuickPickOutlineElement<OutlineEntry>[] = [];\n\t\tconst { hasFileIcons } = this._themeService.getFileIconTheme();\n\t\tfor (let element of bucket) {\n\t\t\t// todo@jrieken it is fishy that codicons cannot be used with iconClasses\n\t\t\t// but file icons can...\n\t\t\tresult.push({\n\t\t\t\telement,\n\t\t\t\tlabel: hasFileIcons ? element.label : `$(${element.icon.id}) ${element.label}`,\n\t\t\t\tariaLabel: element.label,\n\t\t\t\ticonClasses: hasFileIcons ? getIconClassesForModeId(element.cell.language ?? '') : undefined,\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass NotebookComparator implements IOutlineComparator<OutlineEntry> {\n\n\tprivate readonly _collator = new IdleValue<Intl.Collator>(() => new Intl.Collator(undefined, { numeric: true }));\n\n\tcompareByPosition(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn a.index - b.index;\n\t}\n\tcompareByType(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn a.cell.cellKind - b.cell.cellKind || this._collator.value.compare(a.label, b.label);\n\t}\n\tcompareByName(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn this._collator.value.compare(a.label, b.label);\n\t}\n}\n\nexport class NotebookCellOutline implements IOutline<OutlineEntry> {\n\n\tprivate readonly _dispoables = new DisposableStore();\n\n\tprivate readonly _onDidChange = new Emitter<OutlineChangeEvent>();\n\n\treadonly onDidChange: Event<OutlineChangeEvent> = this._onDidChange.event;\n\n\tprivate _entries: OutlineEntry[] = [];\n\tprivate _activeEntry?: OutlineEntry;\n\tprivate readonly _entriesDisposables = new DisposableStore();\n\n\treadonly config: IOutlineListConfig<OutlineEntry>;\n\treadonly outlineKind = 'notebookCells';\n\n\tget activeElement(): OutlineEntry | undefined {\n\t\treturn this._activeEntry;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _editor: NotebookEditor,\n\t\tprivate readonly _target: OutlineTarget,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IMarkerService private readonly _markerService: IMarkerService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tconst selectionListener = new MutableDisposable();\n\t\tthis._dispoables.add(selectionListener);\n\t\tconst installSelectionListener = () => {\n\t\t\tif (!_editor.viewModel) {\n\t\t\t\tselectionListener.clear();\n\t\t\t} else {\n\t\t\t\tselectionListener.value = combinedDisposable(\n\t\t\t\t\t_editor.viewModel.onDidChangeSelection(() => this._recomputeActive()),\n\t\t\t\t\t_editor.viewModel.onDidChangeViewCells(() => this._recomputeState())\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tthis._dispoables.add(_editor.onDidChangeModel(() => {\n\t\t\tthis._recomputeState();\n\t\t\tinstallSelectionListener();\n\t\t}));\n\n\t\tthis._dispoables.add(_configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('notebook.outline.showCodeCells')) {\n\t\t\t\tthis._recomputeState();\n\t\t\t}\n\t\t}));\n\n\t\tthis._dispoables.add(themeService.onDidFileIconThemeChange(() => {\n\t\t\tthis._onDidChange.fire({});\n\t\t}));\n\n\t\tthis._recomputeState();\n\t\tinstallSelectionListener();\n\n\t\tconst options: IWorkbenchDataTreeOptions<OutlineEntry, FuzzyScore> = {\n\t\t\tcollapseByDefault: _target === OutlineTarget.Breadcrumbs,\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\tmultipleSelectionSupport: false,\n\t\t\taccessibilityProvider: new NotebookOutlineAccessibility(),\n\t\t\tidentityProvider: { getId: element => element.cell.id },\n\t\t\tkeyboardNavigationLabelProvider: new NotebookNavigationLabelProvider()\n\t\t};\n\n\t\tconst treeDataSource: IDataSource<this, OutlineEntry> = { getChildren: parent => parent instanceof NotebookCellOutline ? this._entries : parent.children };\n\t\tconst delegate = new NotebookOutlineVirtualDelegate();\n\t\tconst renderers = [instantiationService.createInstance(NotebookOutlineRenderer)];\n\t\tconst comparator = new NotebookComparator();\n\n\t\tthis.config = {\n\t\t\tbreadcrumbsDataSource: {\n\t\t\t\tgetBreadcrumbElements: () => {\n\t\t\t\t\tlet result: OutlineEntry[] = [];\n\t\t\t\t\tlet candidate = this._activeEntry;\n\t\t\t\t\twhile (candidate) {\n\t\t\t\t\t\tresult.unshift(candidate);\n\t\t\t\t\t\tcandidate = candidate.parent;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t},\n\t\t\tquickPickDataSource: instantiationService.createInstance(NotebookQuickPickProvider, () => this._entries),\n\t\t\ttreeDataSource,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\tcomparator,\n\t\t\toptions\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tthis._onDidChange.dispose();\n\t\tthis._dispoables.dispose();\n\t\tthis._entriesDisposables.dispose();\n\t}\n\n\tprivate _recomputeState(): void {\n\t\tthis._entriesDisposables.clear();\n\t\tthis._activeEntry = undefined;\n\t\tthis._entries.length = 0;\n\n\t\tconst { viewModel } = this._editor;\n\t\tif (!viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet includeCodeCells = true;\n\t\tif (this._target === OutlineTarget.OutlinePane) {\n\t\t\tincludeCodeCells = this._configurationService.getValue<boolean>('notebook.outline.showCodeCells');\n\t\t} else if (this._target === OutlineTarget.Breadcrumbs) {\n\t\t\tincludeCodeCells = this._configurationService.getValue<boolean>('notebook.breadcrumbs.showCodeCells');\n\t\t}\n\n\t\tconst focusedCellIndex = viewModel.getFocus().start;\n\t\tconst focused = viewModel.cellAt(focusedCellIndex)?.handle;\n\t\tconst entries: OutlineEntry[] = [];\n\n\t\tfor (let i = 0; i < viewModel.length; i++) {\n\t\t\tconst cell = viewModel.viewCells[i];\n\t\t\tconst isMarkdown = cell.cellKind === CellKind.Markdown;\n\t\t\tif (!isMarkdown && !includeCodeCells) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// The cap the amount of characters that we look at and use the following logic\n\t\t\t// - for MD prefer headings (each header is an entry)\n\t\t\t// - otherwise use the first none-empty line of the cell (MD or code)\n\t\t\tlet content = cell.getText().substr(0, 10_000);\n\t\t\tlet hasHeader = false;\n\n\t\t\tif (isMarkdown) {\n\t\t\t\tfor (const token of marked.lexer(content, { gfm: true })) {\n\t\t\t\t\tif (token.type === 'heading') {\n\t\t\t\t\t\thasHeader = true;\n\t\t\t\t\t\tentries.push(new OutlineEntry(entries.length, token.depth, cell, renderMarkdownAsPlaintext({ value: token.text }).trim(), Codicon.markdown));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!hasHeader) {\n\t\t\t\t\tcontent = renderMarkdownAsPlaintext({ value: content });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!hasHeader) {\n\t\t\t\tconst lineMatch = content.match(/^.*\\w+.*\\w*$/m);\n\t\t\t\tlet preview: string;\n\t\t\t\tif (!lineMatch) {\n\t\t\t\t\tpreview = localize('empty', \"empty cell\");\n\t\t\t\t} else {\n\t\t\t\t\tpreview = lineMatch[0].trim();\n\t\t\t\t\tif (preview.length >= 64) {\n\t\t\t\t\t\tpreview = preview.slice(0, 64) + '…';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tentries.push(new OutlineEntry(entries.length, 7, cell, preview, isMarkdown ? Codicon.markdown : Codicon.code));\n\t\t\t}\n\n\t\t\tif (cell.handle === focused) {\n\t\t\t\tthis._activeEntry = entries[entries.length - 1];\n\t\t\t}\n\n\t\t\t// send an event whenever any of the cells change\n\t\t\tthis._entriesDisposables.add(cell.model.onDidChangeContent(() => {\n\t\t\t\tthis._recomputeState();\n\t\t\t\tthis._onDidChange.fire({});\n\t\t\t}));\n\t\t}\n\n\t\t// build a tree from the list of entries\n\t\tif (entries.length > 0) {\n\t\t\tlet result: OutlineEntry[] = [entries[0]];\n\t\t\tlet parentStack: OutlineEntry[] = [entries[0]];\n\n\t\t\tfor (let i = 1; i < entries.length; i++) {\n\t\t\t\tlet entry = entries[i];\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst len = parentStack.length;\n\t\t\t\t\tif (len === 0) {\n\t\t\t\t\t\t// root node\n\t\t\t\t\t\tresult.push(entry);\n\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet parentCandidate = parentStack[len - 1];\n\t\t\t\t\t\tif (parentCandidate.level < entry.level) {\n\t\t\t\t\t\t\tparentCandidate.addChild(entry);\n\t\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparentStack.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._entries = result;\n\t\t}\n\n\t\t// feature: show markers with each cell\n\t\tconst markerServiceListener = new MutableDisposable();\n\t\tthis._entriesDisposables.add(markerServiceListener);\n\t\tconst updateMarkerUpdater = () => {\n\t\t\tconst doUpdateMarker = (clear: boolean) => {\n\t\t\t\tfor (let entry of this._entries) {\n\t\t\t\t\tif (clear) {\n\t\t\t\t\t\tentry.clearMarkers();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tentry.updateMarkers(this._markerService);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (this._configurationService.getValue(OutlineConfigKeys.problemsEnabled)) {\n\t\t\t\tmarkerServiceListener.value = this._markerService.onMarkerChanged(e => {\n\t\t\t\t\tif (e.some(uri => viewModel.viewCells.some(cell => isEqual(cell.uri, uri)))) {\n\t\t\t\t\t\tdoUpdateMarker(false);\n\t\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdoUpdateMarker(false);\n\t\t\t} else {\n\t\t\t\tmarkerServiceListener.clear();\n\t\t\t\tdoUpdateMarker(true);\n\t\t\t}\n\t\t};\n\t\tupdateMarkerUpdater();\n\t\tthis._entriesDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(OutlineConfigKeys.problemsEnabled)) {\n\t\t\t\tupdateMarkerUpdater();\n\t\t\t\tthis._onDidChange.fire({});\n\t\t\t}\n\t\t}));\n\n\t\tthis._onDidChange.fire({});\n\t}\n\n\tprivate _recomputeActive(): void {\n\t\tlet newActive: OutlineEntry | undefined;\n\t\tconst { viewModel } = this._editor;\n\n\t\tif (viewModel) {\n\t\t\tconst cell = viewModel.cellAt(viewModel.getFocus().start);\n\t\t\tif (cell) {\n\t\t\t\tfor (let entry of this._entries) {\n\t\t\t\t\tnewActive = entry.find(cell, []);\n\t\t\t\t\tif (newActive) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (newActive !== this._activeEntry) {\n\t\t\tthis._activeEntry = newActive;\n\t\t\tthis._onDidChange.fire({ affectOnlyActiveElement: true });\n\t\t}\n\t}\n\n\tget isEmpty(): boolean {\n\t\treturn this._entries.length === 0;\n\t}\n\n\tasync reveal(entry: OutlineEntry, options: IEditorOptions, sideBySide: boolean): Promise<void> {\n\t\tawait this._editorService.openEditor({\n\t\t\tresource: entry.cell.uri,\n\t\t\toptions,\n\t\t}, sideBySide ? SIDE_GROUP : undefined);\n\t}\n\n\tpreview(entry: OutlineEntry): IDisposable {\n\t\tconst widget = this._editor.getControl();\n\t\tif (!widget) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\twidget.revealInCenterIfOutsideViewport(entry.cell);\n\t\tconst ids = widget.deltaCellDecorations([], [{\n\t\t\thandle: entry.cell.handle,\n\t\t\toptions: { className: 'nb-symbolHighlight', outputClassName: 'nb-symbolHighlight' }\n\t\t}]);\n\t\treturn toDisposable(() => { widget.deltaCellDecorations(ids, []); });\n\n\t}\n\n\tcaptureViewState(): IDisposable {\n\t\tconst widget = this._editor.getControl();\n\t\tlet viewState = widget?.getEditorViewState();\n\t\treturn toDisposable(() => {\n\t\t\tif (viewState) {\n\t\t\t\twidget?.restoreListViewState(viewState);\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass NotebookOutlineCreator implements IOutlineCreator<NotebookEditor, OutlineEntry> {\n\n\treadonly dispose: () => void;\n\n\tconstructor(\n\t\t@IOutlineService outlineService: IOutlineService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tconst reg = outlineService.registerOutlineCreator(this);\n\t\tthis.dispose = () => reg.dispose();\n\t}\n\n\tmatches(candidate: IEditorPane): candidate is NotebookEditor {\n\t\treturn candidate.getId() === NotebookEditor.ID;\n\t}\n\n\tasync createOutline(editor: NotebookEditor, target: OutlineTarget): Promise<IOutline<OutlineEntry> | undefined> {\n\t\treturn this._instantiationService.createInstance(NotebookCellOutline, editor, target);\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(NotebookOutlineCreator, LifecyclePhase.Eventually);\n\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\tid: 'notebook',\n\torder: 100,\n\ttype: 'object',\n\t'properties': {\n\t\t'notebook.outline.showCodeCells': {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\tmarkdownDescription: localize('outline.showCodeCells', \"When enabled notebook outline shows code cells.\")\n\t\t},\n\t\t'notebook.breadcrumbs.showCodeCells': {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tmarkdownDescription: localize('breadcrumbs.showCodeCells', \"When enabled notebook breadcrumbs contain code cells.\")\n\t\t},\n\t}\n});\n"]}