{"version":3,"file":"diffElementViewModel.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/diff/diffElementViewModel.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { CellDiffViewModelLayoutChangeEvent, DiffSide, DIFF_CELL_MARGIN, IDiffElementLayoutInfo } from 'vs/workbench/contrib/notebook/browser/diff/notebookDiffEditorBrowser';\nimport { IGenericCellViewModel, NotebookLayoutInfo } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { DiffEditorWidget } from 'vs/editor/browser/widget/diffEditorWidget';\nimport { NotebookTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookTextModel';\nimport { hash } from 'vs/base/common/hash';\nimport { format } from 'vs/base/common/jsonFormatter';\nimport { applyEdits } from 'vs/base/common/jsonEdit';\nimport { NotebookCellMetadata } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { DiffNestedCellViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffNestedCellViewModel';\nimport { URI } from 'vs/base/common/uri';\nimport { NotebookDiffEditorEventDispatcher, NotebookDiffViewEventType } from 'vs/workbench/contrib/notebook/browser/diff/eventDispatcher';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\n\nexport enum PropertyFoldingState {\n\tExpanded,\n\tCollapsed\n}\n\nexport const OUTPUT_EDITOR_HEIGHT_MAGIC = 1440;\n\ntype ILayoutInfoDelta0 = { [K in keyof IDiffElementLayoutInfo]?: number; };\ninterface ILayoutInfoDelta extends ILayoutInfoDelta0 {\n\trawOutputHeight?: number;\n\trecomputeOutput?: boolean;\n}\n\nexport abstract class DiffElementViewModelBase extends Disposable {\n\tpublic metadataFoldingState: PropertyFoldingState;\n\tpublic outputFoldingState: PropertyFoldingState;\n\tprotected _layoutInfoEmitter = new Emitter<CellDiffViewModelLayoutChangeEvent>();\n\tonDidLayoutChange = this._layoutInfoEmitter.event;\n\tprotected _stateChangeEmitter = new Emitter<{ renderOutput: boolean; }>();\n\tonDidStateChange = this._stateChangeEmitter.event;\n\tprotected _layoutInfo!: IDiffElementLayoutInfo;\n\n\tset rawOutputHeight(height: number) {\n\t\tthis._layout({ rawOutputHeight: Math.min(OUTPUT_EDITOR_HEIGHT_MAGIC, height) });\n\t}\n\n\tget rawOutputHeight() {\n\t\tthrow new Error('Use Cell.layoutInfo.rawOutputHeight');\n\t}\n\n\tset outputStatusHeight(height: number) {\n\t\tthis._layout({ outputStatusHeight: height });\n\t}\n\n\tget outputStatusHeight() {\n\t\tthrow new Error('Use Cell.layoutInfo.outputStatusHeight');\n\t}\n\n\tset editorHeight(height: number) {\n\t\tthis._layout({ editorHeight: height });\n\t}\n\n\tget editorHeight() {\n\t\tthrow new Error('Use Cell.layoutInfo.editorHeight');\n\t}\n\n\tset editorMargin(margin: number) {\n\t\tthis._layout({ editorMargin: margin });\n\t}\n\n\tget editorMargin() {\n\t\tthrow new Error('Use Cell.layoutInfo.editorMargin');\n\t}\n\n\tset metadataStatusHeight(height: number) {\n\t\tthis._layout({ metadataStatusHeight: height });\n\t}\n\n\tget metadataStatusHeight() {\n\t\tthrow new Error('Use Cell.layoutInfo.outputStatusHeight');\n\t}\n\n\tset metadataHeight(height: number) {\n\t\tthis._layout({ metadataHeight: height });\n\t}\n\n\tget metadataHeight() {\n\t\tthrow new Error('Use Cell.layoutInfo.metadataHeight');\n\t}\n\n\tprivate _renderOutput = true;\n\n\tset renderOutput(value: boolean) {\n\t\tthis._renderOutput = value;\n\t\tthis._layout({ recomputeOutput: true });\n\t\tthis._stateChangeEmitter.fire({ renderOutput: this._renderOutput });\n\t}\n\n\tget renderOutput() {\n\t\treturn this._renderOutput;\n\t}\n\n\tget layoutInfo(): IDiffElementLayoutInfo {\n\t\treturn this._layoutInfo;\n\t}\n\n\tprivate _sourceEditorViewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null = null;\n\tprivate _outputEditorViewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null = null;\n\tprivate _metadataEditorViewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null = null;\n\n\tconstructor(\n\t\treadonly mainDocumentTextModel: NotebookTextModel,\n\t\treadonly original: DiffNestedCellViewModel | undefined,\n\t\treadonly modified: DiffNestedCellViewModel | undefined,\n\t\treadonly type: 'unchanged' | 'insert' | 'delete' | 'modified',\n\t\treadonly editorEventDispatcher: NotebookDiffEditorEventDispatcher\n\t) {\n\t\tsuper();\n\t\tthis._layoutInfo = {\n\t\t\twidth: 0,\n\t\t\teditorHeight: 0,\n\t\t\teditorMargin: 0,\n\t\t\tmetadataHeight: 0,\n\t\t\tmetadataStatusHeight: 25,\n\t\t\trawOutputHeight: 0,\n\t\t\toutputTotalHeight: 0,\n\t\t\toutputStatusHeight: 25,\n\t\t\tbodyMargin: 32,\n\t\t\ttotalHeight: 82\n\t\t};\n\n\t\tthis.metadataFoldingState = PropertyFoldingState.Collapsed;\n\t\tthis.outputFoldingState = PropertyFoldingState.Collapsed;\n\n\t\tthis._register(this.editorEventDispatcher.onDidChangeLayout(e => {\n\t\t\tthis._layoutInfoEmitter.fire({ outerWidth: true });\n\t\t}));\n\t}\n\n\tlayoutChange() {\n\t\tthis._layout({ recomputeOutput: true });\n\t}\n\n\tprotected _layout(delta: ILayoutInfoDelta) {\n\t\tconst width = delta.width !== undefined ? delta.width : this._layoutInfo.width;\n\t\tconst editorHeight = delta.editorHeight !== undefined ? delta.editorHeight : this._layoutInfo.editorHeight;\n\t\tconst editorMargin = delta.editorMargin !== undefined ? delta.editorMargin : this._layoutInfo.editorMargin;\n\t\tconst metadataHeight = delta.metadataHeight !== undefined ? delta.metadataHeight : this._layoutInfo.metadataHeight;\n\t\tconst metadataStatusHeight = delta.metadataStatusHeight !== undefined ? delta.metadataStatusHeight : this._layoutInfo.metadataStatusHeight;\n\t\tconst rawOutputHeight = delta.rawOutputHeight !== undefined ? delta.rawOutputHeight : this._layoutInfo.rawOutputHeight;\n\t\tconst outputStatusHeight = delta.outputStatusHeight !== undefined ? delta.outputStatusHeight : this._layoutInfo.outputStatusHeight;\n\t\tconst bodyMargin = delta.bodyMargin !== undefined ? delta.bodyMargin : this._layoutInfo.bodyMargin;\n\t\tconst outputHeight = (delta.recomputeOutput || delta.rawOutputHeight !== undefined) ? this._getOutputTotalHeight(rawOutputHeight) : this._layoutInfo.outputTotalHeight;\n\n\t\tconst totalHeight = editorHeight\n\t\t\t+ editorMargin\n\t\t\t+ metadataHeight\n\t\t\t+ metadataStatusHeight\n\t\t\t+ outputHeight\n\t\t\t+ outputStatusHeight\n\t\t\t+ bodyMargin;\n\n\t\tconst newLayout: IDiffElementLayoutInfo = {\n\t\t\twidth: width,\n\t\t\teditorHeight: editorHeight,\n\t\t\teditorMargin: editorMargin,\n\t\t\tmetadataHeight: metadataHeight,\n\t\t\tmetadataStatusHeight: metadataStatusHeight,\n\t\t\toutputTotalHeight: outputHeight,\n\t\t\toutputStatusHeight: outputStatusHeight,\n\t\t\tbodyMargin: bodyMargin,\n\t\t\trawOutputHeight: rawOutputHeight,\n\t\t\ttotalHeight: totalHeight\n\t\t};\n\n\t\tconst changeEvent: CellDiffViewModelLayoutChangeEvent = {};\n\n\t\tif (newLayout.width !== this._layoutInfo.width) {\n\t\t\tchangeEvent.width = true;\n\t\t}\n\n\t\tif (newLayout.editorHeight !== this._layoutInfo.editorHeight) {\n\t\t\tchangeEvent.editorHeight = true;\n\t\t}\n\n\t\tif (newLayout.editorMargin !== this._layoutInfo.editorMargin) {\n\t\t\tchangeEvent.editorMargin = true;\n\t\t}\n\n\t\tif (newLayout.metadataHeight !== this._layoutInfo.metadataHeight) {\n\t\t\tchangeEvent.metadataHeight = true;\n\t\t}\n\n\t\tif (newLayout.metadataStatusHeight !== this._layoutInfo.metadataStatusHeight) {\n\t\t\tchangeEvent.metadataStatusHeight = true;\n\t\t}\n\n\t\tif (newLayout.outputTotalHeight !== this._layoutInfo.outputTotalHeight) {\n\t\t\tchangeEvent.outputTotalHeight = true;\n\t\t}\n\n\t\tif (newLayout.outputStatusHeight !== this._layoutInfo.outputStatusHeight) {\n\t\t\tchangeEvent.outputStatusHeight = true;\n\t\t}\n\n\t\tif (newLayout.bodyMargin !== this._layoutInfo.bodyMargin) {\n\t\t\tchangeEvent.bodyMargin = true;\n\t\t}\n\n\t\tif (newLayout.totalHeight !== this._layoutInfo.totalHeight) {\n\t\t\tchangeEvent.totalHeight = true;\n\t\t}\n\n\t\tthis._layoutInfo = newLayout;\n\t\tthis._fireLayoutChangeEvent(changeEvent);\n\t}\n\n\tprivate _getOutputTotalHeight(rawOutputHeight: number) {\n\t\tif (this.outputFoldingState === PropertyFoldingState.Collapsed) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (this.renderOutput) {\n\t\t\tif (this.isOutputEmpty()) {\n\t\t\t\t// single line;\n\t\t\t\treturn 24;\n\t\t\t}\n\t\t\treturn this.getRichOutputTotalHeight();\n\t\t} else {\n\t\t\treturn rawOutputHeight;\n\t\t}\n\t}\n\n\tprivate _fireLayoutChangeEvent(state: CellDiffViewModelLayoutChangeEvent) {\n\t\tthis._layoutInfoEmitter.fire(state);\n\t\tthis.editorEventDispatcher.emit([{ type: NotebookDiffViewEventType.CellLayoutChanged, source: this._layoutInfo }]);\n\t}\n\n\tabstract checkIfOutputsModified(): boolean;\n\tabstract checkMetadataIfModified(): boolean;\n\tabstract isOutputEmpty(): boolean;\n\tabstract getRichOutputTotalHeight(): number;\n\tabstract getCellByUri(cellUri: URI): IGenericCellViewModel;\n\tabstract getOutputOffsetInCell(diffSide: DiffSide, index: number): number;\n\tabstract getOutputOffsetInContainer(diffSide: DiffSide, index: number): number;\n\tabstract updateOutputHeight(diffSide: DiffSide, index: number, height: number): void;\n\tabstract getNestedCellViewModel(diffSide: DiffSide): DiffNestedCellViewModel;\n\n\tgetComputedCellContainerWidth(layoutInfo: NotebookLayoutInfo, diffEditor: boolean, fullWidth: boolean) {\n\t\tif (fullWidth) {\n\t\t\treturn layoutInfo.width - 2 * DIFF_CELL_MARGIN + (diffEditor ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0) - 2;\n\t\t}\n\n\t\treturn (layoutInfo.width - 2 * DIFF_CELL_MARGIN + (diffEditor ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0)) / 2 - 18 - 2;\n\t}\n\n\tgetOutputEditorViewState(): editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null {\n\t\treturn this._outputEditorViewState;\n\t}\n\n\tsaveOutputEditorViewState(viewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null) {\n\t\tthis._outputEditorViewState = viewState;\n\t}\n\n\tgetMetadataEditorViewState(): editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null {\n\t\treturn this._metadataEditorViewState;\n\t}\n\n\tsaveMetadataEditorViewState(viewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null) {\n\t\tthis._metadataEditorViewState = viewState;\n\t}\n\n\tgetSourceEditorViewState(): editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null {\n\t\treturn this._sourceEditorViewState;\n\t}\n\n\tsaveSpirceEditorViewState(viewState: editorCommon.ICodeEditorViewState | editorCommon.IDiffEditorViewState | null) {\n\t\tthis._sourceEditorViewState = viewState;\n\t}\n}\n\nexport class SideBySideDiffElementViewModel extends DiffElementViewModelBase {\n\tget originalDocument() {\n\t\treturn this.otherDocumentTextModel;\n\t}\n\n\tget modifiedDocument() {\n\t\treturn this.mainDocumentTextModel;\n\t}\n\n\toverride readonly original: DiffNestedCellViewModel;\n\toverride readonly modified: DiffNestedCellViewModel;\n\toverride readonly type: 'unchanged' | 'modified';\n\n\tconstructor(\n\t\tmainDocumentTextModel: NotebookTextModel,\n\t\treadonly otherDocumentTextModel: NotebookTextModel,\n\t\toriginal: DiffNestedCellViewModel,\n\t\tmodified: DiffNestedCellViewModel,\n\t\ttype: 'unchanged' | 'modified',\n\t\teditorEventDispatcher: NotebookDiffEditorEventDispatcher\n\t) {\n\t\tsuper(\n\t\t\tmainDocumentTextModel,\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\ttype,\n\t\t\teditorEventDispatcher);\n\n\t\tthis.original = original;\n\t\tthis.modified = modified;\n\t\tthis.type = type;\n\n\t\tthis.metadataFoldingState = PropertyFoldingState.Collapsed;\n\t\tthis.outputFoldingState = PropertyFoldingState.Collapsed;\n\n\t\tif (this.checkMetadataIfModified()) {\n\t\t\tthis.metadataFoldingState = PropertyFoldingState.Expanded;\n\t\t}\n\n\t\tif (this.checkIfOutputsModified()) {\n\t\t\tthis.outputFoldingState = PropertyFoldingState.Expanded;\n\t\t}\n\n\t\tthis._register(this.original.onDidChangeOutputLayout(() => {\n\t\t\tthis._layout({ recomputeOutput: true });\n\t\t}));\n\n\t\tthis._register(this.modified.onDidChangeOutputLayout(() => {\n\t\t\tthis._layout({ recomputeOutput: true });\n\t\t}));\n\t}\n\n\tcheckIfOutputsModified() {\n\t\treturn !this.mainDocumentTextModel.transientOptions.transientOutputs && hash(this.original?.outputs.map(op => op.outputs) ?? []) !== hash(this.modified?.outputs.map(op => op.outputs) ?? []);\n\t}\n\n\tcheckMetadataIfModified(): boolean {\n\t\treturn hash(getFormatedMetadataJSON(this.mainDocumentTextModel, this.original?.metadata || {}, this.original?.language)) !== hash(getFormatedMetadataJSON(this.mainDocumentTextModel, this.modified?.metadata ?? {}, this.modified?.language));\n\t}\n\n\tupdateOutputHeight(diffSide: DiffSide, index: number, height: number) {\n\t\tif (diffSide === DiffSide.Original) {\n\t\t\tthis.original.updateOutputHeight(index, height);\n\t\t} else {\n\t\t\tthis.modified.updateOutputHeight(index, height);\n\t\t}\n\t}\n\n\tgetOutputOffsetInContainer(diffSide: DiffSide, index: number) {\n\t\tif (diffSide === DiffSide.Original) {\n\t\t\treturn this.original.getOutputOffset(index);\n\t\t} else {\n\t\t\treturn this.modified.getOutputOffset(index);\n\t\t}\n\t}\n\n\tgetOutputOffsetInCell(diffSide: DiffSide, index: number) {\n\t\tconst offsetInOutputsContainer = this.getOutputOffsetInContainer(diffSide, index);\n\n\t\treturn this._layoutInfo.editorHeight\n\t\t\t+ this._layoutInfo.editorMargin\n\t\t\t+ this._layoutInfo.metadataHeight\n\t\t\t+ this._layoutInfo.metadataStatusHeight\n\t\t\t+ this._layoutInfo.outputStatusHeight\n\t\t\t+ this._layoutInfo.bodyMargin / 2\n\t\t\t+ offsetInOutputsContainer;\n\t}\n\n\tisOutputEmpty() {\n\t\tif (this.mainDocumentTextModel.transientOptions.transientOutputs) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.checkIfOutputsModified()) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// outputs are not changed\n\n\t\treturn (this.original?.outputs || []).length === 0;\n\t}\n\n\tgetRichOutputTotalHeight() {\n\t\treturn Math.max(this.original.getOutputTotalHeight(), this.modified.getOutputTotalHeight());\n\t}\n\n\tgetNestedCellViewModel(diffSide: DiffSide): DiffNestedCellViewModel {\n\t\treturn diffSide === DiffSide.Original ? this.original : this.modified;\n\t}\n\n\tgetCellByUri(cellUri: URI): IGenericCellViewModel {\n\t\tif (cellUri.toString() === this.original.uri.toString()) {\n\t\t\treturn this.original;\n\t\t} else {\n\t\t\treturn this.modified;\n\t\t}\n\t}\n}\n\nexport class SingleSideDiffElementViewModel extends DiffElementViewModelBase {\n\tget cellViewModel() {\n\t\treturn this.type === 'insert' ? this.modified! : this.original!;\n\t}\n\n\tget originalDocument() {\n\t\tif (this.type === 'insert') {\n\t\t\treturn this.otherDocumentTextModel;\n\t\t} else {\n\t\t\treturn this.mainDocumentTextModel;\n\t\t}\n\t}\n\n\tget modifiedDocument() {\n\t\tif (this.type === 'insert') {\n\t\t\treturn this.mainDocumentTextModel;\n\t\t} else {\n\t\t\treturn this.otherDocumentTextModel;\n\t\t}\n\t}\n\n\toverride readonly type: 'insert' | 'delete';\n\n\tconstructor(\n\t\tmainDocumentTextModel: NotebookTextModel,\n\t\treadonly otherDocumentTextModel: NotebookTextModel,\n\t\toriginal: DiffNestedCellViewModel | undefined,\n\t\tmodified: DiffNestedCellViewModel | undefined,\n\t\ttype: 'insert' | 'delete',\n\t\teditorEventDispatcher: NotebookDiffEditorEventDispatcher\n\t) {\n\t\tsuper(mainDocumentTextModel, original, modified, type, editorEventDispatcher);\n\t\tthis.type = type;\n\n\t\tthis._register(this.cellViewModel!.onDidChangeOutputLayout(() => {\n\t\t\tthis._layout({ recomputeOutput: true });\n\t\t}));\n\t}\n\n\tgetNestedCellViewModel(diffSide: DiffSide): DiffNestedCellViewModel {\n\t\treturn this.type === 'insert' ? this.modified! : this.original!;\n\t}\n\n\n\tcheckIfOutputsModified(): boolean {\n\t\treturn false;\n\t}\n\n\tcheckMetadataIfModified(): boolean {\n\t\treturn false;\n\t}\n\n\tupdateOutputHeight(diffSide: DiffSide, index: number, height: number) {\n\t\tthis.cellViewModel?.updateOutputHeight(index, height);\n\t}\n\n\tgetOutputOffsetInContainer(diffSide: DiffSide, index: number) {\n\t\treturn this.cellViewModel!.getOutputOffset(index);\n\t}\n\n\tgetOutputOffsetInCell(diffSide: DiffSide, index: number) {\n\t\tconst offsetInOutputsContainer = this.cellViewModel!.getOutputOffset(index);\n\n\t\treturn this._layoutInfo.editorHeight\n\t\t\t+ this._layoutInfo.editorMargin\n\t\t\t+ this._layoutInfo.metadataHeight\n\t\t\t+ this._layoutInfo.metadataStatusHeight\n\t\t\t+ this._layoutInfo.outputStatusHeight\n\t\t\t+ this._layoutInfo.bodyMargin / 2\n\t\t\t+ offsetInOutputsContainer;\n\t}\n\n\tisOutputEmpty() {\n\t\tif (this.mainDocumentTextModel.transientOptions.transientOutputs) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// outputs are not changed\n\n\t\treturn (this.original?.outputs || this.modified?.outputs || []).length === 0;\n\t}\n\n\tgetRichOutputTotalHeight() {\n\t\treturn this.cellViewModel?.getOutputTotalHeight() ?? 0;\n\t}\n\n\tgetCellByUri(cellUri: URI): IGenericCellViewModel {\n\t\treturn this.cellViewModel!;\n\t}\n}\n\nexport function getFormatedMetadataJSON(documentTextModel: NotebookTextModel, metadata: NotebookCellMetadata, language?: string) {\n\tlet filteredMetadata: { [key: string]: any } = {};\n\n\tif (documentTextModel) {\n\t\tconst transientCellMetadata = documentTextModel.transientOptions.transientCellMetadata;\n\n\t\tconst keys = new Set([...Object.keys(metadata)]);\n\t\tfor (let key of keys) {\n\t\t\tif (!(transientCellMetadata[key as keyof NotebookCellMetadata])\n\t\t\t) {\n\t\t\t\tfilteredMetadata[key] = metadata[key as keyof NotebookCellMetadata];\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfilteredMetadata = metadata;\n\t}\n\n\tconst content = JSON.stringify({\n\t\tlanguage,\n\t\t...filteredMetadata\n\t});\n\n\tconst edits = format(content, undefined, {});\n\tconst metadataSource = applyEdits(content, edits);\n\n\treturn metadataSource;\n}\n"]}