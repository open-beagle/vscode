{"version":3,"sources":["vs/workbench/contrib/notebook/browser/diff/diffElementOutputs.ts"],"names":[],"mappings":"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","file":"diffElementOutputs.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport * as nls from 'vs/nls';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { DiffElementViewModelBase, SideBySideDiffElementViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffElementViewModel';\nimport { DiffSide, INotebookTextDiffEditor } from 'vs/workbench/contrib/notebook/browser/diff/notebookDiffEditorBrowser';\nimport { ICellOutputViewModel, IRenderOutput, RenderOutputType } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { getResizesObserver } from 'vs/workbench/contrib/notebook/browser/view/renderers/cellWidgets';\nimport { NotebookTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookTextModel';\nimport { BUILTIN_RENDERER_ID, NotebookCellOutputsSplice } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { INotebookService } from 'vs/workbench/contrib/notebook/common/notebookService';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { DiffNestedCellViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffNestedCellViewModel';\nimport { ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { mimetypeIcon } from 'vs/workbench/contrib/notebook/browser/notebookIcons';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { IQuickInputService, IQuickPickItem } from 'vs/platform/quickinput/common/quickInput';\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\nexport class OutputElement extends Disposable {\n\treadonly resizeListener = new DisposableStore();\n\tdomNode!: HTMLElement;\n\trenderResult?: IRenderOutput;\n\n\tconstructor(\n\t\tprivate _notebookEditor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _notebookService: INotebookService,\n\t\tprivate _quickInputService: IQuickInputService,\n\t\tprivate _diffElementViewModel: DiffElementViewModelBase,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _nestedCell: DiffNestedCellViewModel,\n\t\tprivate _outputContainer: HTMLElement,\n\t\treadonly output: ICellOutputViewModel\n\t) {\n\t\tsuper();\n\t}\n\n\trender(index: number, beforeElement?: HTMLElement) {\n\t\tconst outputItemDiv = document.createElement('div');\n\t\tlet result: IRenderOutput | undefined = undefined;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(this._notebookTextModel, undefined);\n\t\tconst pickedMimeTypeRenderer = mimeTypes[pick];\n\t\tif (mimeTypes.length > 1) {\n\t\t\toutputItemDiv.style.position = 'relative';\n\t\t\tconst mimeTypePicker = DOM.$('.multi-mimetype-output');\n\t\t\tmimeTypePicker.classList.add(...ThemeIcon.asClassNameArray(mimetypeIcon));\n\t\t\tmimeTypePicker.tabIndex = 0;\n\t\t\tmimeTypePicker.title = nls.localize('mimeTypePicker', \"Choose a different output mimetype, available mimetypes: {0}\", mimeTypes.map(mimeType => mimeType.mimeType).join(', '));\n\t\t\toutputItemDiv.appendChild(mimeTypePicker);\n\t\t\tthis.resizeListener.add(DOM.addStandardDisposableListener(mimeTypePicker, 'mousedown', async e => {\n\t\t\t\tif (e.leftButton) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.resizeListener.add((DOM.addDisposableListener(mimeTypePicker, DOM.EventType.KEY_DOWN, async e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif ((event.equals(KeyCode.Enter) || event.equals(KeyCode.Space))) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t})));\n\t\t}\n\n\t\tconst innerContainer = DOM.$('.output-inner-container');\n\t\tDOM.append(outputItemDiv, innerContainer);\n\n\n\t\tif (mimeTypes.length !== 0) {\n\t\t\tif (pickedMimeTypeRenderer.rendererId !== BUILTIN_RENDERER_ID) {\n\t\t\t\tconst renderer = this._notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\t\t\t\tresult = renderer\n\t\t\t\t\t? { type: RenderOutputType.Extension, renderer, source: this.output, mimeType: pickedMimeTypeRenderer.mimeType }\n\t\t\t\t\t: this._notebookEditor.getOutputRenderer().render(this.output, innerContainer, pickedMimeTypeRenderer.mimeType, this._notebookTextModel.uri,);\n\t\t\t} else {\n\t\t\t\tresult = this._notebookEditor.getOutputRenderer().render(this.output, innerContainer, pickedMimeTypeRenderer.mimeType, this._notebookTextModel.uri);\n\t\t\t}\n\n\t\t\tthis.output.pickedMimeType = pick;\n\t\t}\n\n\t\tthis.domNode = outputItemDiv;\n\t\tthis.renderResult = result;\n\n\t\tif (!result) {\n\t\t\t// this.viewCell.updateOutputHeight(index, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeElement) {\n\t\t\tthis._outputContainer.insertBefore(outputItemDiv, beforeElement);\n\t\t} else {\n\t\t\tthis._outputContainer.appendChild(outputItemDiv);\n\t\t}\n\n\t\tif (result.type !== RenderOutputType.Mainframe) {\n\t\t\t// this.viewCell.selfSizeMonitoring = true;\n\t\t\tthis._notebookEditor.createOutput(\n\t\t\t\tthis._diffElementViewModel,\n\t\t\t\tthis._nestedCell,\n\t\t\t\tresult,\n\t\t\t\t() => this.getOutputOffsetInCell(index),\n\t\t\t\tthis._diffElementViewModel instanceof SideBySideDiffElementViewModel\n\t\t\t\t\t? this._diffSide\n\t\t\t\t\t: this._diffElementViewModel.type === 'insert' ? DiffSide.Modified : DiffSide.Original\n\t\t\t);\n\t\t} else {\n\t\t\toutputItemDiv.classList.add('foreground', 'output-element');\n\t\t\toutputItemDiv.style.position = 'absolute';\n\t\t}\n\t\tif (result.type === RenderOutputType.Html || result.type === RenderOutputType.Extension) {\n\t\t\treturn;\n\t\t}\n\n\n\n\t\tlet clientHeight = Math.ceil(outputItemDiv.clientHeight);\n\t\tconst elementSizeObserver = getResizesObserver(outputItemDiv, undefined, () => {\n\t\t\tif (this._outputContainer && document.body.contains(this._outputContainer)) {\n\t\t\t\tconst height = Math.ceil(elementSizeObserver.getHeight());\n\n\t\t\t\tif (clientHeight === height) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclientHeight = height;\n\n\t\t\t\tconst currIndex = this.getCellOutputCurrentIndex();\n\t\t\t\tif (currIndex < 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.updateHeight(currIndex, height);\n\t\t\t}\n\t\t});\n\t\telementSizeObserver.startObserving();\n\t\tthis.resizeListener.add(elementSizeObserver);\n\t\tthis.updateHeight(index, clientHeight);\n\n\t\tconst top = this.getOutputOffsetInContainer(index);\n\t\toutputItemDiv.style.top = `${top}px`;\n\t}\n\n\tprivate async pickActiveMimeTypeRenderer(notebookTextModel: NotebookTextModel, viewModel: ICellOutputViewModel) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(notebookTextModel, undefined);\n\n\t\tconst items = mimeTypes.filter(mimeType => mimeType.isTrusted).map((mimeType, index): IMimeTypeRenderer => ({\n\t\t\tlabel: mimeType.mimeType,\n\t\t\tid: mimeType.mimeType,\n\t\t\tindex: index,\n\t\t\tpicked: index === currIndex,\n\t\t\tdetail: this.generateRendererInfo(mimeType.rendererId),\n\t\t\tdescription: index === currIndex ? nls.localize('curruentActiveMimeType', \"Currently Active\") : undefined\n\t\t}));\n\n\t\tconst picker = this._quickInputService.createQuickPick();\n\t\tpicker.items = items;\n\t\tpicker.activeItems = items.filter(item => !!item.picked);\n\t\tpicker.placeholder = items.length !== mimeTypes.length\n\t\t\t? nls.localize('promptChooseMimeTypeInSecure.placeHolder', \"Select mimetype to render for current output. Rich mimetypes are available only when the notebook is trusted\")\n\t\t\t: nls.localize('promptChooseMimeType.placeHolder', \"Select mimetype to render for current output\");\n\n\t\tconst pick = await new Promise<number | undefined>(resolve => {\n\t\t\tpicker.onDidAccept(() => {\n\t\t\t\tresolve(picker.selectedItems.length === 1 ? (picker.selectedItems[0] as IMimeTypeRenderer).index : undefined);\n\t\t\t\tpicker.dispose();\n\t\t\t});\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick !== currIndex) {\n\t\t\t// user chooses another mimetype\n\t\t\tconst index = this._nestedCell.outputsViewModels.indexOf(viewModel);\n\t\t\tconst nextElement = this.domNode.nextElementSibling;\n\t\t\tthis.resizeListener.clear();\n\t\t\tconst element = this.domNode;\n\t\t\tif (element) {\n\t\t\t\telement.parentElement?.removeChild(element);\n\t\t\t\tthis._notebookEditor.removeInset(\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._nestedCell,\n\t\t\t\t\tviewModel,\n\t\t\t\t\tthis._diffSide\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tviewModel.pickedMimeType = pick;\n\t\t\tthis.render(index, nextElement as HTMLElement);\n\t\t}\n\t}\n\n\tprivate generateRendererInfo(renderId: string | undefined): string {\n\t\tif (renderId === undefined || renderId === BUILTIN_RENDERER_ID) {\n\t\t\treturn nls.localize('builtinRenderInfo', \"built-in\");\n\t\t}\n\n\t\tconst renderInfo = this._notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName = renderInfo.displayName !== '' ? renderInfo.displayName : renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize('builtinRenderInfo', \"built-in\");\n\t}\n\n\tgetCellOutputCurrentIndex() {\n\t\treturn this._diffElementViewModel.getNestedCellViewModel(this._diffSide).outputs.indexOf(this.output.model);\n\t}\n\n\tupdateHeight(index: number, height: number) {\n\t\tthis._diffElementViewModel.updateOutputHeight(this._diffSide, index, height);\n\t}\n\n\tgetOutputOffsetInContainer(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t}\n\n\tgetOutputOffsetInCell(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInCell(this._diffSide, index);\n\t}\n}\n\nexport class OutputContainer extends Disposable {\n\tprivate _outputEntries = new Map<ICellOutputViewModel, OutputElement>();\n\tconstructor(\n\t\tprivate _editor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _diffElementViewModel: DiffElementViewModelBase,\n\t\tprivate _nestedCellViewModel: DiffNestedCellViewModel,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _outputContainer: HTMLElement,\n\t\t@INotebookService private _notebookService: INotebookService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@IOpenerService readonly _openerService: IOpenerService,\n\t\t@ITextFileService readonly _textFileService: ITextFileService,\n\n\t) {\n\t\tsuper();\n\t\tthis._register(this._diffElementViewModel.onDidLayoutChange(() => {\n\t\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\t\tconst index = _nestedCellViewModel.outputs.indexOf(key.model);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst top = this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t\t\t\t\tvalue.domNode.style.top = `${top}px`;\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._nestedCellViewModel.textModel.onDidChangeOutputs(splices => {\n\t\t\tthis._updateOutputs(splices);\n\t\t}));\n\t}\n\n\tprivate _updateOutputs(splices: NotebookCellOutputsSplice[]) {\n\t\tif (!splices.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst removedKeys: ICellOutputViewModel[] = [];\n\n\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\tif (this._nestedCellViewModel.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// already removed\n\t\t\t\tremovedKeys.push(key);\n\t\t\t\t// remove element from DOM\n\t\t\t\tthis._outputContainer.removeChild(value.domNode);\n\t\t\t\tthis._editor.removeInset(this._diffElementViewModel, this._nestedCellViewModel, key, this._diffSide);\n\t\t\t}\n\t\t});\n\n\t\tremovedKeys.forEach(key => {\n\t\t\tthis._outputEntries.get(key)?.dispose();\n\t\t\tthis._outputEntries.delete(key);\n\t\t});\n\n\t\tlet prevElement: HTMLElement | undefined = undefined;\n\t\tconst outputsToRender = this._nestedCellViewModel.outputsViewModels;\n\n\t\toutputsToRender.reverse().forEach(output => {\n\t\t\tif (this._outputEntries.has(output)) {\n\t\t\t\t// already exist\n\t\t\t\tprevElement = this._outputEntries.get(output)!.domNode;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// newly added element\n\t\t\tconst currIndex = this._nestedCellViewModel.outputsViewModels.indexOf(output);\n\t\t\tthis._renderOutput(output, currIndex, prevElement);\n\t\t\tprevElement = this._outputEntries.get(output)?.domNode;\n\t\t});\n\t}\n\trender() {\n\t\t// TODO, outputs to render (should have a limit)\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\n\t\t\t// always add to the end\n\t\t\tthis._renderOutput(currOutput, index, undefined);\n\t\t}\n\t}\n\n\tshowOutputs() {\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\t\t\t// always add to the end\n\t\t\tthis._editor.showInset(this._diffElementViewModel, currOutput.cellViewModel, currOutput, this._diffSide);\n\t\t}\n\t}\n\n\thideOutputs() {\n\t\tthis._outputEntries.forEach((outputElement, cellOutputViewModel) => {\n\t\t\tthis._editor.hideInset(this._diffElementViewModel, this._nestedCellViewModel, cellOutputViewModel);\n\t\t});\n\t}\n\n\tprivate _renderOutput(currOutput: ICellOutputViewModel, index: number, beforeElement?: HTMLElement) {\n\t\tif (!this._outputEntries.has(currOutput)) {\n\t\t\tthis._outputEntries.set(currOutput, new OutputElement(this._editor, this._notebookTextModel, this._notebookService, this._quickInputService, this._diffElementViewModel, this._diffSide, this._nestedCellViewModel, this._outputContainer, currOutput));\n\t\t}\n\n\t\tconst renderElement = this._outputEntries.get(currOutput)!;\n\t\trenderElement.render(index, beforeElement);\n\t}\n}\n"]}