{"version":3,"file":"notebookFolding.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/contrib/fold/test/notebookFolding.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { CellKind } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { setupInstantiationService, withTestNotebook } from 'vs/workbench/contrib/notebook/test/testNotebookEditor';\nimport { IUndoRedoService } from 'vs/platform/undoRedo/common/undoRedo';\nimport { FoldingModel, updateFoldingStateAtIndex } from 'vs/workbench/contrib/notebook/browser/contrib/fold/foldingModel';\n\nsuite('Notebook Folding', () => {\n\tconst instantiationService = setupInstantiationService();\n\tinstantiationService.spy(IUndoRedoService, 'pushElement');\n\n\ttest('Folding based on markdown cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingController = new FoldingModel();\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Top level header in a cell wins', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.1\\n# header3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingController = new FoldingModel();\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(0), 2);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(1), 7);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(2), 7);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 4 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Nested Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 5, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 6, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\t// viewModel.insertCell(7, new TestCell(viewModel.viewType, 7, ['var c = 8;'], 'markdown', CellKind.Code, []), true);\n\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t{ start: 1, end: 1 },\n\t\t\t\t// \t{ start: 6, end: 7 }\n\t\t\t\t// ]);\n\n\t\t\t\t// viewModel.insertCell(1, new TestCell(viewModel.viewType, 8, ['var c = 9;'], 'markdown', CellKind.Code, []), true);\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t// the first collapsed range is now expanded as we insert content into it.\n\t\t\t\t// \t// { start: 1,},\n\t\t\t\t// \t{ start: 7, end: 8 }\n\t\t\t\t// ]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding Memento', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 7, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 8, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('View Index', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(1), 2);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(2), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(3), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(7), 8);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markdown, [], {}],\n\t\t\t],\n\t\t\t(editor) => {\n\t\t\t\tconst viewModel = editor.viewModel;\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\n\t\t\t\t// folding ranges\n\t\t\t\t// [5, 6]\n\t\t\t\t// [10, 11]\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 5);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(9), 10);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(10), 12);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(11), 12);\n\t\t\t}\n\t\t);\n\t});\n});\n"]}