{"version":3,"sources":["vs/workbench/contrib/notebook/browser/viewModel/markdownCellViewModel.ts"],"names":[],"mappings":"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","file":"markdownCellViewModel.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport * as UUID from 'vs/base/common/uuid';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport * as nls from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { BOTTOM_CELL_TOOLBAR_GAP, BOTTOM_CELL_TOOLBAR_HEIGHT, CODE_CELL_LEFT_MARGIN, COLLAPSED_INDICATOR_HEIGHT, MARKDOWN_CELL_BOTTOM_MARGIN, MARKDOWN_CELL_TOP_MARGIN, CELL_RIGHT_MARGIN } from 'vs/workbench/contrib/notebook/browser/constants';\nimport { EditorFoldingStateDelegate } from 'vs/workbench/contrib/notebook/browser/contrib/fold/foldingModel';\nimport { CellEditState, CellFindMatch, ICellOutputViewModel, ICellViewModel, MarkdownCellLayoutChangeEvent, MarkdownCellLayoutInfo, NotebookLayoutInfo } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { MarkdownRenderer } from 'vs/editor/browser/core/markdownRenderer';\nimport { BaseCellViewModel } from 'vs/workbench/contrib/notebook/browser/viewModel/baseCellViewModel';\nimport { NotebookCellStateChangedEvent, NotebookEventDispatcher } from 'vs/workbench/contrib/notebook/browser/viewModel/eventDispatcher';\nimport { NotebookCellTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookCellTextModel';\nimport { CellKind, INotebookSearchOptions } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\n\nexport class MarkdownCellViewModel extends BaseCellViewModel implements ICellViewModel {\n\treadonly cellKind = CellKind.Markdown;\n\tprivate _html: HTMLElement | null = null;\n\tprivate _layoutInfo: MarkdownCellLayoutInfo;\n\n\tget layoutInfo() {\n\t\treturn this._layoutInfo;\n\t}\n\n\tset renderedMarkdownHeight(newHeight: number) {\n\t\tif (this.getEditState() === CellEditState.Preview) {\n\t\t\tconst newTotalHeight = newHeight + BOTTOM_CELL_TOOLBAR_GAP;\n\t\t\tthis.totalHeight = newTotalHeight;\n\t\t}\n\t}\n\n\tprivate set totalHeight(newHeight: number) {\n\t\tif (newHeight !== this.layoutInfo.totalHeight) {\n\t\t\tthis.layoutChange({ totalHeight: newHeight });\n\t\t}\n\t}\n\n\tprivate get totalHeight() {\n\t\tthrow new Error('MarkdownCellViewModel.totalHeight is write only');\n\t}\n\n\tprivate _editorHeight = 0;\n\tset editorHeight(newHeight: number) {\n\t\tthis._editorHeight = newHeight;\n\n\t\tthis.totalHeight = this._editorHeight + MARKDOWN_CELL_TOP_MARGIN + MARKDOWN_CELL_BOTTOM_MARGIN + BOTTOM_CELL_TOOLBAR_GAP + this.getEditorStatusbarHeight();\n\t}\n\n\tget editorHeight() {\n\t\tthrow new Error('MarkdownCellViewModel.editorHeight is write only');\n\t}\n\n\tprotected readonly _onDidChangeLayout = new Emitter<MarkdownCellLayoutChangeEvent>();\n\treadonly onDidChangeLayout = this._onDidChangeLayout.event;\n\n\tget foldingState() {\n\t\treturn this.foldingDelegate.getFoldingState(this.foldingDelegate.getCellIndex(this));\n\t}\n\n\tprivate _hoveringOutput: boolean = false;\n\tpublic get outputIsHovered(): boolean {\n\t\treturn this._hoveringOutput;\n\t}\n\n\tpublic set outputIsHovered(v: boolean) {\n\t\tthis._hoveringOutput = v;\n\t}\n\n\tprivate _focusOnOutput: boolean = false;\n\tpublic get outputIsFocused(): boolean {\n\t\treturn this._focusOnOutput;\n\t}\n\n\tpublic set outputIsFocused(v: boolean) {\n\t\tthis._focusOnOutput = v;\n\t}\n\n\tprivate _hoveringCell = false;\n\tpublic get cellIsHovered(): boolean {\n\t\treturn this._hoveringCell;\n\t}\n\n\tpublic set cellIsHovered(v: boolean) {\n\t\tthis._hoveringCell = v;\n\t\tthis._onDidChangeState.fire({ cellIsHoveredChanged: true });\n\t}\n\n\tpublic get contentHash(): number {\n\t\treturn this.model.getHashValue();\n\t}\n\n\tprivate readonly _onDidHideInput = new Emitter<void>();\n\treadonly onDidHideInput = this._onDidHideInput.event;\n\n\tconstructor(\n\t\tviewType: string,\n\t\tmodel: NotebookCellTextModel,\n\t\tinitialNotebookLayoutInfo: NotebookLayoutInfo | null,\n\t\treadonly foldingDelegate: EditorFoldingStateDelegate,\n\t\treadonly eventDispatcher: NotebookEventDispatcher,\n\t\tprivate readonly _mdRenderer: MarkdownRenderer,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t) {\n\t\tsuper(viewType, model, UUID.generateUuid(), configurationService, textModelService);\n\n\t\tthis._layoutInfo = {\n\t\t\teditorHeight: 0,\n\t\t\tfontInfo: initialNotebookLayoutInfo?.fontInfo || null,\n\t\t\teditorWidth: initialNotebookLayoutInfo?.width ? this.computeEditorWidth(initialNotebookLayoutInfo.width) : 0,\n\t\t\tbottomToolbarOffset: BOTTOM_CELL_TOOLBAR_GAP,\n\t\t\ttotalHeight: 0\n\t\t};\n\n\t\tthis._register(this.onDidChangeState(e => {\n\t\t\teventDispatcher.emit([new NotebookCellStateChangedEvent(e, this)]);\n\t\t}));\n\n\t\tthis._register(model.onDidChangeMetadata(e => {\n\t\t\tif (this.metadata?.inputCollapsed) {\n\t\t\t\tthis._onDidHideInput.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\t/**\n\t * we put outputs stuff here to make compiler happy\n\t */\n\toutputsViewModels: ICellOutputViewModel[] = [];\n\tgetOutputOffset(index: number): number {\n\t\t// throw new Error('Method not implemented.');\n\t\treturn -1;\n\t}\n\tupdateOutputHeight(index: number, height: number): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\ttriggerfoldingStateChange() {\n\t\tthis._onDidChangeState.fire({ foldingStateChanged: true });\n\t}\n\n\tprivate computeEditorWidth(outerWidth: number) {\n\t\treturn outerWidth - CODE_CELL_LEFT_MARGIN - CELL_RIGHT_MARGIN;\n\t}\n\n\tlayoutChange(state: MarkdownCellLayoutChangeEvent) {\n\t\t// recompute\n\n\t\tif (!this.metadata?.inputCollapsed) {\n\t\t\tconst editorWidth = state.outerWidth !== undefined ? this.computeEditorWidth(state.outerWidth) : this._layoutInfo.editorWidth;\n\t\t\tconst totalHeight = state.totalHeight === undefined ? this._layoutInfo.totalHeight : state.totalHeight;\n\n\t\t\tthis._layoutInfo = {\n\t\t\t\tfontInfo: state.font || this._layoutInfo.fontInfo,\n\t\t\t\teditorWidth,\n\t\t\t\teditorHeight: this._editorHeight,\n\t\t\t\tbottomToolbarOffset: totalHeight - BOTTOM_CELL_TOOLBAR_GAP - BOTTOM_CELL_TOOLBAR_HEIGHT / 2,\n\t\t\t\ttotalHeight\n\t\t\t};\n\t\t} else {\n\t\t\tconst editorWidth = state.outerWidth !== undefined ? this.computeEditorWidth(state.outerWidth) : this._layoutInfo.editorWidth;\n\t\t\tconst totalHeight = MARKDOWN_CELL_TOP_MARGIN + COLLAPSED_INDICATOR_HEIGHT + BOTTOM_CELL_TOOLBAR_GAP + MARKDOWN_CELL_BOTTOM_MARGIN;\n\t\t\tstate.totalHeight = totalHeight;\n\n\t\t\tthis._layoutInfo = {\n\t\t\t\tfontInfo: state.font || this._layoutInfo.fontInfo,\n\t\t\t\teditorWidth,\n\t\t\t\teditorHeight: this._editorHeight,\n\t\t\t\tbottomToolbarOffset: totalHeight - BOTTOM_CELL_TOOLBAR_GAP - BOTTOM_CELL_TOOLBAR_HEIGHT / 2,\n\t\t\t\ttotalHeight\n\t\t\t};\n\t\t}\n\n\t\tthis._onDidChangeLayout.fire(state);\n\t}\n\n\toverride restoreEditorViewState(editorViewStates: editorCommon.ICodeEditorViewState | null, totalHeight?: number) {\n\t\tsuper.restoreEditorViewState(editorViewStates);\n\t\t// we might already warmup the viewport so the cell has a total height computed\n\t\tif (totalHeight !== undefined && this._layoutInfo.totalHeight === 0) {\n\t\t\tthis._layoutInfo = {\n\t\t\t\tfontInfo: this._layoutInfo.fontInfo,\n\t\t\t\teditorWidth: this._layoutInfo.editorWidth,\n\t\t\t\tbottomToolbarOffset: this._layoutInfo.bottomToolbarOffset,\n\t\t\t\ttotalHeight: totalHeight,\n\t\t\t\teditorHeight: this._editorHeight\n\t\t\t};\n\t\t\tthis.layoutChange({});\n\t\t}\n\t}\n\n\thasDynamicHeight() {\n\t\treturn false;\n\t}\n\n\tgetHeight(lineHeight: number) {\n\t\tif (this._layoutInfo.totalHeight === 0) {\n\t\t\treturn 100;\n\t\t} else {\n\t\t\treturn this._layoutInfo.totalHeight;\n\t\t}\n\t}\n\n\tclearHTML() {\n\t\tthis._html = null;\n\t}\n\n\tgetHTML(): HTMLElement | null {\n\t\tif (this.cellKind === CellKind.Markdown) {\n\t\t\tif (this._html) {\n\t\t\t\treturn this._html;\n\t\t\t}\n\t\t\tconst renderer = this.getMarkdownRenderer();\n\t\t\tconst text = this.getText();\n\n\t\t\tif (text.length === 0) {\n\t\t\t\tconst el = document.createElement('p');\n\t\t\t\tel.className = 'emptyMarkdownPlaceholder';\n\t\t\t\tel.innerText = nls.localize('notebook.emptyMarkdownPlaceholder', \"Empty markdown cell, double click or press enter to edit.\");\n\t\t\t\tthis._html = el;\n\t\t\t} else {\n\t\t\t\tthis._html = renderer.render({ value: this.getText(), isTrusted: true }, undefined, { gfm: true }).element;\n\t\t\t}\n\n\t\t\treturn this._html;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected onDidChangeTextModelContent(): void {\n\t\tthis._html = null;\n\t\tthis._onDidChangeState.fire({ contentChanged: true });\n\t}\n\n\tonDeselect() {\n\t}\n\n\tgetMarkdownRenderer() {\n\t\treturn this._mdRenderer;\n\t}\n\n\tprivate readonly _hasFindResult = this._register(new Emitter<boolean>());\n\tpublic readonly hasFindResult: Event<boolean> = this._hasFindResult.event;\n\n\tstartFind(value: string, options: INotebookSearchOptions): CellFindMatch | null {\n\t\tconst matches = super.cellStartFind(value, options);\n\n\t\tif (matches === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tcell: this,\n\t\t\tmatches\n\t\t};\n\t}\n}\n"]}