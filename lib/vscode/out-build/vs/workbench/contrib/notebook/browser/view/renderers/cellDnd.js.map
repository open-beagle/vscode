{"version":3,"file":"cellDnd.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/view/renderers/cellDnd.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { domEvent } from 'vs/base/browser/event';\nimport { Delayer } from 'vs/base/common/async';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { BOTTOM_CELL_TOOLBAR_GAP } from 'vs/workbench/contrib/notebook/browser/constants';\nimport { BaseCellRenderTemplate, expandCellRangesWithHiddenCells, ICellViewModel, INotebookCellList, INotebookEditor } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { cloneNotebookCellTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookCellTextModel';\nimport { CellEditType, SelectionStateType } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { cellRangesToIndexes, ICellRange } from 'vs/workbench/contrib/notebook/common/notebookRange';\n\nconst $ = DOM.$;\n\nexport const DRAGGING_CLASS = 'cell-dragging';\nexport const GLOBAL_DRAG_CLASS = 'global-drag-active';\n\ntype DragImageProvider = () => HTMLElement;\n\ninterface CellDragEvent {\n\tbrowserEvent: DragEvent;\n\tdraggedOverCell: ICellViewModel;\n\tcellTop: number;\n\tcellHeight: number;\n\tdragPosRatio: number;\n}\n\nexport class CellDragAndDropController extends Disposable {\n\t// TODO@roblourens - should probably use dataTransfer here, but any dataTransfer set makes the editor think I am dropping a file, need\n\t// to figure out how to prevent that\n\tprivate currentDraggedCell: ICellViewModel | undefined;\n\n\tprivate listInsertionIndicator: HTMLElement;\n\n\tprivate list!: INotebookCellList;\n\n\tprivate isScrolling = false;\n\tprivate scrollingDelayer: Delayer<void>;\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: INotebookEditor,\n\t\tinsertionIndicatorContainer: HTMLElement\n\t) {\n\t\tsuper();\n\n\t\tthis.listInsertionIndicator = DOM.append(insertionIndicatorContainer, $('.cell-list-insertion-indicator'));\n\n\t\tthis._register(domEvent(document.body, DOM.EventType.DRAG_START, true)(this.onGlobalDragStart.bind(this)));\n\t\tthis._register(domEvent(document.body, DOM.EventType.DRAG_END, true)(this.onGlobalDragEnd.bind(this)));\n\n\t\tconst addCellDragListener = (eventType: string, handler: (e: CellDragEvent) => void) => {\n\t\t\tthis._register(DOM.addDisposableListener(\n\t\t\t\tnotebookEditor.getDomNode(),\n\t\t\t\teventType,\n\t\t\t\te => {\n\t\t\t\t\tconst cellDragEvent = this.toCellDragEvent(e);\n\t\t\t\t\tif (cellDragEvent) {\n\t\t\t\t\t\thandler(cellDragEvent);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t};\n\n\t\taddCellDragListener(DOM.EventType.DRAG_OVER, event => {\n\t\t\tevent.browserEvent.preventDefault();\n\t\t\tthis.onCellDragover(event);\n\t\t});\n\t\taddCellDragListener(DOM.EventType.DROP, event => {\n\t\t\tevent.browserEvent.preventDefault();\n\t\t\tthis.onCellDrop(event);\n\t\t});\n\t\taddCellDragListener(DOM.EventType.DRAG_LEAVE, event => {\n\t\t\tevent.browserEvent.preventDefault();\n\t\t\tthis.onCellDragLeave(event);\n\t\t});\n\n\t\tthis.scrollingDelayer = new Delayer(200);\n\t}\n\n\tsetList(value: INotebookCellList) {\n\t\tthis.list = value;\n\n\t\tthis.list.onWillScroll(e => {\n\t\t\tif (!e.scrollTopChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setInsertIndicatorVisibility(false);\n\t\t\tthis.isScrolling = true;\n\t\t\tthis.scrollingDelayer.trigger(() => {\n\t\t\t\tthis.isScrolling = false;\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate setInsertIndicatorVisibility(visible: boolean) {\n\t\tthis.listInsertionIndicator.style.opacity = visible ? '1' : '0';\n\t}\n\n\tprivate toCellDragEvent(event: DragEvent): CellDragEvent | undefined {\n\t\tconst targetTop = this.notebookEditor.getDomNode().getBoundingClientRect().top;\n\t\tconst dragOffset = this.list.scrollTop + event.clientY - targetTop;\n\t\tconst draggedOverCell = this.list.elementAt(dragOffset);\n\t\tif (!draggedOverCell) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst cellTop = this.list.getAbsoluteTopOfElement(draggedOverCell);\n\t\tconst cellHeight = this.list.elementHeight(draggedOverCell);\n\n\t\tconst dragPosInElement = dragOffset - cellTop;\n\t\tconst dragPosRatio = dragPosInElement / cellHeight;\n\n\t\treturn <CellDragEvent>{\n\t\t\tbrowserEvent: event,\n\t\t\tdraggedOverCell,\n\t\t\tcellTop,\n\t\t\tcellHeight,\n\t\t\tdragPosRatio\n\t\t};\n\t}\n\n\tclearGlobalDragState() {\n\t\tthis.notebookEditor.getDomNode().classList.remove(GLOBAL_DRAG_CLASS);\n\t}\n\n\tprivate onGlobalDragStart() {\n\t\tthis.notebookEditor.getDomNode().classList.add(GLOBAL_DRAG_CLASS);\n\t}\n\n\tprivate onGlobalDragEnd() {\n\t\tthis.notebookEditor.getDomNode().classList.remove(GLOBAL_DRAG_CLASS);\n\t}\n\n\tprivate onCellDragover(event: CellDragEvent): void {\n\t\tif (!event.browserEvent.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.currentDraggedCell) {\n\t\t\tevent.browserEvent.dataTransfer.dropEffect = 'none';\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isScrolling || this.currentDraggedCell === event.draggedOverCell) {\n\t\t\tthis.setInsertIndicatorVisibility(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst dropDirection = this.getDropInsertDirection(event.dragPosRatio);\n\t\tconst insertionIndicatorAbsolutePos = dropDirection === 'above' ? event.cellTop : event.cellTop + event.cellHeight;\n\t\tthis.updateInsertIndicator(dropDirection, insertionIndicatorAbsolutePos);\n\t}\n\n\tprivate updateInsertIndicator(dropDirection: string, insertionIndicatorAbsolutePos: number) {\n\t\tconst insertionIndicatorTop = insertionIndicatorAbsolutePos - this.list.scrollTop + BOTTOM_CELL_TOOLBAR_GAP / 2;\n\t\tif (insertionIndicatorTop >= 0) {\n\t\t\tthis.listInsertionIndicator.style.top = `${insertionIndicatorTop}px`;\n\t\t\tthis.setInsertIndicatorVisibility(true);\n\t\t} else {\n\t\t\tthis.setInsertIndicatorVisibility(false);\n\t\t}\n\t}\n\n\tprivate getDropInsertDirection(dragPosRatio: number): 'above' | 'below' {\n\t\treturn dragPosRatio < 0.5 ? 'above' : 'below';\n\t}\n\n\tprivate onCellDrop(event: CellDragEvent): void {\n\t\tconst draggedCell = this.currentDraggedCell!;\n\n\t\tif (this.isScrolling || this.currentDraggedCell === event.draggedOverCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragCleanup();\n\n\t\tconst dropDirection = this.getDropInsertDirection(event.dragPosRatio);\n\t\tthis._dropImpl(draggedCell, dropDirection, event.browserEvent, event.draggedOverCell);\n\t}\n\n\tprivate getCellRangeAroundDragTarget(draggedCellIndex: number) {\n\t\tconst selections = this.notebookEditor.getSelections();\n\t\tconst modelRanges = expandCellRangesWithHiddenCells(this.notebookEditor, this.notebookEditor.viewModel!, selections);\n\t\tconst nearestRange = modelRanges.find(range => range.start <= draggedCellIndex && draggedCellIndex < range.end);\n\n\t\tif (nearestRange) {\n\t\t\treturn nearestRange;\n\t\t} else {\n\t\t\treturn { start: draggedCellIndex, end: draggedCellIndex + 1 };\n\t\t}\n\t}\n\n\tprivate _dropImpl(draggedCell: ICellViewModel, dropDirection: 'above' | 'below', ctx: { clientY: number, ctrlKey: boolean, altKey: boolean }, draggedOverCell: ICellViewModel) {\n\t\tconst cellTop = this.list.getAbsoluteTopOfElement(draggedOverCell);\n\t\tconst cellHeight = this.list.elementHeight(draggedOverCell);\n\t\tconst insertionIndicatorAbsolutePos = dropDirection === 'above' ? cellTop : cellTop + cellHeight;\n\t\tconst insertionIndicatorTop = insertionIndicatorAbsolutePos - this.list.scrollTop + BOTTOM_CELL_TOOLBAR_GAP / 2;\n\t\tconst editorHeight = this.notebookEditor.getDomNode().getBoundingClientRect().height;\n\t\tif (insertionIndicatorTop < 0 || insertionIndicatorTop > editorHeight) {\n\t\t\t// Ignore drop, insertion point is off-screen\n\t\t\treturn;\n\t\t}\n\n\t\tconst isCopy = (ctx.ctrlKey && !platform.isMacintosh) || (ctx.altKey && platform.isMacintosh);\n\n\t\tif (isCopy) {\n\t\t\tconst viewModel = this.notebookEditor.viewModel!;\n\t\t\tconst draggedCellIndex = this.notebookEditor.viewModel!.getCellIndex(draggedCell);\n\t\t\tconst range = this.getCellRangeAroundDragTarget(draggedCellIndex);\n\n\t\t\tlet originalToIdx = viewModel.getCellIndex(draggedOverCell);\n\t\t\tif (dropDirection === 'below') {\n\t\t\t\tconst relativeToIndex = viewModel.getCellIndex(draggedOverCell);\n\t\t\t\tconst newIdx = viewModel.getNextVisibleCellIndex(relativeToIndex);\n\t\t\t\toriginalToIdx = newIdx;\n\t\t\t}\n\n\t\t\tlet finalSelection: ICellRange;\n\t\t\tlet finalFocus: ICellRange;\n\n\t\t\tif (originalToIdx <= range.start) {\n\t\t\t\tfinalSelection = { start: originalToIdx, end: originalToIdx + range.end - range.start };\n\t\t\t\tfinalFocus = { start: originalToIdx + draggedCellIndex - range.start, end: originalToIdx + draggedCellIndex - range.start + 1 };\n\t\t\t} else {\n\t\t\t\tconst delta = (originalToIdx - range.start);\n\t\t\t\tfinalSelection = { start: range.start + delta, end: range.end + delta };\n\t\t\t\tfinalFocus = { start: draggedCellIndex + delta, end: draggedCellIndex + delta + 1 };\n\t\t\t}\n\n\t\t\tviewModel.notebookDocument.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: originalToIdx,\n\t\t\t\t\tcount: 0,\n\t\t\t\t\tcells: cellRangesToIndexes([range]).map(index => cloneNotebookCellTextModel(viewModel.viewCells[index].model))\n\t\t\t\t}\n\t\t\t], true, { kind: SelectionStateType.Index, focus: viewModel.getFocus(), selections: viewModel.getSelections() }, () => ({ kind: SelectionStateType.Index, focus: finalFocus, selections: [finalSelection] }), undefined, true);\n\t\t\tthis.notebookEditor.revealCellRangeInView(finalSelection);\n\t\t} else {\n\t\t\tconst viewModel = this.notebookEditor.viewModel!;\n\t\t\tconst draggedCellIndex = this.notebookEditor.viewModel!.getCellIndex(draggedCell);\n\t\t\tconst range = this.getCellRangeAroundDragTarget(draggedCellIndex);\n\t\t\tlet originalToIdx = viewModel.getCellIndex(draggedOverCell);\n\t\t\tif (dropDirection === 'below') {\n\t\t\t\tconst relativeToIndex = viewModel.getCellIndex(draggedOverCell);\n\t\t\t\tconst newIdx = viewModel.getNextVisibleCellIndex(relativeToIndex);\n\t\t\t\toriginalToIdx = newIdx;\n\t\t\t}\n\n\t\t\tif (originalToIdx >= range.start && originalToIdx <= range.end) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet finalSelection: ICellRange;\n\t\t\tlet finalFocus: ICellRange;\n\n\t\t\tif (originalToIdx <= range.start) {\n\t\t\t\tfinalSelection = { start: originalToIdx, end: originalToIdx + range.end - range.start };\n\t\t\t\tfinalFocus = { start: originalToIdx + draggedCellIndex - range.start, end: originalToIdx + draggedCellIndex - range.start + 1 };\n\t\t\t} else {\n\t\t\t\tconst delta = (originalToIdx - range.end);\n\t\t\t\tfinalSelection = { start: range.start + delta, end: range.end + delta };\n\t\t\t\tfinalFocus = { start: draggedCellIndex + delta, end: draggedCellIndex + delta + 1 };\n\t\t\t}\n\n\t\t\tviewModel.notebookDocument.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: range.start,\n\t\t\t\t\tlength: range.end - range.start,\n\t\t\t\t\tnewIdx: originalToIdx <= range.start ? originalToIdx : (originalToIdx - (range.end - range.start))\n\t\t\t\t}\n\t\t\t], true, { kind: SelectionStateType.Index, focus: viewModel.getFocus(), selections: viewModel.getSelections() }, () => ({ kind: SelectionStateType.Index, focus: finalFocus, selections: [finalSelection] }), undefined, true);\n\t\t\tthis.notebookEditor.revealCellRangeInView(finalSelection);\n\t\t}\n\t}\n\n\tprivate onCellDragLeave(event: CellDragEvent): void {\n\t\tif (!event.browserEvent.relatedTarget || !DOM.isAncestor(event.browserEvent.relatedTarget as HTMLElement, this.notebookEditor.getDomNode())) {\n\t\t\tthis.setInsertIndicatorVisibility(false);\n\t\t}\n\t}\n\n\tprivate dragCleanup(): void {\n\t\tif (this.currentDraggedCell) {\n\t\t\tthis.currentDraggedCell.dragging = false;\n\t\t\tthis.currentDraggedCell = undefined;\n\t\t}\n\n\t\tthis.setInsertIndicatorVisibility(false);\n\t}\n\n\tregisterDragHandle(templateData: BaseCellRenderTemplate, cellRoot: HTMLElement, dragHandle: HTMLElement, dragImageProvider: DragImageProvider): void {\n\t\tconst container = templateData.container;\n\t\tdragHandle.setAttribute('draggable', 'true');\n\n\t\ttemplateData.disposables.add(domEvent(dragHandle, DOM.EventType.DRAG_END)(() => {\n\t\t\t// Note, templateData may have a different element rendered into it by now\n\t\t\tcontainer.classList.remove(DRAGGING_CLASS);\n\t\t\tthis.dragCleanup();\n\t\t}));\n\n\t\ttemplateData.disposables.add(domEvent(dragHandle, DOM.EventType.DRAG_START)(event => {\n\t\t\tif (!event.dataTransfer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.currentDraggedCell = templateData.currentRenderedCell!;\n\t\t\tthis.currentDraggedCell.dragging = true;\n\n\t\t\tconst dragImage = dragImageProvider();\n\t\t\tcellRoot.parentElement!.appendChild(dragImage);\n\t\t\tevent.dataTransfer.setDragImage(dragImage, 0, 0);\n\t\t\tsetTimeout(() => cellRoot.parentElement!.removeChild(dragImage!), 0); // Comment this out to debug drag image layout\n\n\t\t\tcontainer.classList.add(DRAGGING_CLASS);\n\t\t}));\n\t}\n\n\tpublic startExplicitDrag(cell: ICellViewModel, position: { clientY: number }) {\n\t\tthis.currentDraggedCell = cell;\n\t\tthis.setInsertIndicatorVisibility(true);\n\t}\n\n\tpublic explicitDrag(cell: ICellViewModel, position: { clientY: number }) {\n\t\tconst target = this.list.elementAt(position.clientY);\n\t\tif (target && target !== cell) {\n\t\t\tconst cellTop = this.list.getAbsoluteTopOfElement(target);\n\t\t\tconst cellHeight = this.list.elementHeight(target);\n\n\t\t\tconst dropDirection = this.getExplicitDragDropDirection(position.clientY, cellTop, cellHeight);\n\t\t\tconst insertionIndicatorAbsolutePos = dropDirection === 'above' ? cellTop : cellTop + cellHeight;\n\t\t\tthis.updateInsertIndicator(dropDirection, insertionIndicatorAbsolutePos);\n\t\t}\n\n\t\t// Try scrolling list if needed\n\t\tif (this.currentDraggedCell !== cell) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewRect = this.notebookEditor.getDomNode().getBoundingClientRect();\n\t\tconst eventPositionInView = position.clientY - this.list.scrollTop;\n\n\t\tconst scrollMargin = 0.2;\n\t\tconst maxScrollPerFrame = 20;\n\t\tconst eventPositionRatio = eventPositionInView / viewRect.height;\n\t\tif (eventPositionRatio < scrollMargin) {\n\t\t\tthis.list.scrollTop -= maxScrollPerFrame * (1 - eventPositionRatio / scrollMargin);\n\t\t} else if (eventPositionRatio > 1 - scrollMargin) {\n\t\t\tthis.list.scrollTop += maxScrollPerFrame * (1 - ((1 - eventPositionRatio) / scrollMargin));\n\t\t}\n\t}\n\n\tpublic endExplicitDrag(_cell: ICellViewModel) {\n\t\tthis.setInsertIndicatorVisibility(false);\n\t}\n\n\tpublic explicitDrop(cell: ICellViewModel, ctx: { clientY: number, ctrlKey: boolean, altKey: boolean }) {\n\t\tthis.currentDraggedCell = undefined;\n\t\tthis.setInsertIndicatorVisibility(false);\n\n\t\tconst target = this.list.elementAt(ctx.clientY);\n\t\tif (!target || target === cell) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellTop = this.list.getAbsoluteTopOfElement(target);\n\t\tconst cellHeight = this.list.elementHeight(target);\n\t\tconst dropDirection = this.getExplicitDragDropDirection(ctx.clientY, cellTop, cellHeight);\n\t\tthis._dropImpl(cell, dropDirection, ctx, target);\n\t}\n\n\tprivate getExplicitDragDropDirection(clientY: number, cellTop: number, cellHeight: number) {\n\t\tconst dragOffset = this.list.scrollTop + clientY;\n\t\tconst dragPosInElement = dragOffset - cellTop;\n\t\tconst dragPosRatio = dragPosInElement / cellHeight;\n\n\t\treturn this.getDropInsertDirection(dragPosRatio);\n\t}\n}\n"]}