{"version":3,"file":"codeCell.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/view/renderers/codeCell.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { raceCancellation } from 'vs/base/common/async';\nimport { CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport { IDimension } from 'vs/editor/common/editorCommon';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { EDITOR_BOTTOM_PADDING } from 'vs/workbench/contrib/notebook/browser/constants';\nimport { CellFocusMode, CodeCellRenderTemplate, getEditorTopPadding, IActiveNotebookEditor } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { CellOutputContainer } from 'vs/workbench/contrib/notebook/browser/view/renderers/cellOutput';\nimport { ClickTargetType } from 'vs/workbench/contrib/notebook/browser/view/renderers/cellWidgets';\nimport { CodeCellViewModel } from 'vs/workbench/contrib/notebook/browser/viewModel/codeCellViewModel';\nimport { INotebookCellStatusBarService } from 'vs/workbench/contrib/notebook/common/notebookCellStatusBarService';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\n\n\nexport class CodeCell extends Disposable {\n\tprivate _outputContainerRenderer: CellOutputContainer;\n\tprivate _untrustedStatusItem: IDisposable | null = null;\n\n\tprivate _renderedInputCollapseState: boolean | undefined;\n\tprivate _renderedOutputCollapseState: boolean | undefined;\n\n\tconstructor(\n\t\tprivate notebookEditor: IActiveNotebookEditor,\n\t\tprivate viewCell: CodeCellViewModel,\n\t\tprivate templateData: CodeCellRenderTemplate,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@INotebookCellStatusBarService readonly notebookCellStatusBarService: INotebookCellStatusBarService,\n\t\t@IOpenerService readonly openerService: IOpenerService,\n\t\t@ITextFileService readonly textFileService: ITextFileService\n\t) {\n\t\tsuper();\n\n\t\tconst width = this.viewCell.layoutInfo.editorWidth;\n\t\tconst lineNum = this.viewCell.lineCount;\n\t\tconst lineHeight = this.viewCell.layoutInfo.fontInfo?.lineHeight || 17;\n\t\tconst editorHeight = this.viewCell.layoutInfo.editorHeight === 0\n\t\t\t? lineNum * lineHeight + getEditorTopPadding() + EDITOR_BOTTOM_PADDING\n\t\t\t: this.viewCell.layoutInfo.editorHeight;\n\n\t\tthis.layoutEditor(\n\t\t\t{\n\t\t\t\twidth: width,\n\t\t\t\theight: editorHeight\n\t\t\t}\n\t\t);\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis._register({ dispose() { cts.dispose(true); } });\n\t\traceCancellation(viewCell.resolveTextModel(), cts.token).then(model => {\n\t\t\tif (model && templateData.editor) {\n\t\t\t\ttemplateData.editor.setModel(model);\n\t\t\t\tviewCell.attachTextEditor(templateData.editor);\n\t\t\t\tif (notebookEditor.getActiveCell() === viewCell && viewCell.focusMode === CellFocusMode.Editor && this.notebookEditor.hasFocus()) {\n\t\t\t\t\ttemplateData.editor?.focus();\n\t\t\t\t}\n\n\t\t\t\tconst realContentHeight = templateData.editor?.getContentHeight();\n\t\t\t\tif (realContentHeight !== undefined && realContentHeight !== editorHeight) {\n\t\t\t\t\tthis.onCellHeightChange(realContentHeight);\n\t\t\t\t}\n\n\t\t\t\tif (this.notebookEditor.getActiveCell() === this.viewCell && viewCell.focusMode === CellFocusMode.Editor && this.notebookEditor.hasFocus()) {\n\t\t\t\t\ttemplateData.editor?.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst updateForFocusMode = () => {\n\t\t\tif (this.notebookEditor.getFocus().start !== this.notebookEditor.viewModel.getCellIndex(viewCell)) {\n\t\t\t\ttemplateData.container.classList.toggle('cell-editor-focus', viewCell.focusMode === CellFocusMode.Editor);\n\t\t\t}\n\n\t\t\tif (viewCell.focusMode === CellFocusMode.Editor && this.notebookEditor.getActiveCell() === this.viewCell) {\n\t\t\t\ttemplateData.editor?.focus();\n\t\t\t}\n\n\t\t\ttemplateData.container.classList.toggle('cell-editor-focus', viewCell.focusMode === CellFocusMode.Editor);\n\t\t};\n\t\tthis._register(viewCell.onDidChangeState((e) => {\n\t\t\tif (e.focusModeChanged) {\n\t\t\t\tupdateForFocusMode();\n\t\t\t}\n\t\t}));\n\t\tupdateForFocusMode();\n\n\t\ttemplateData.editor?.updateOptions({ readOnly: notebookEditor.viewModel.options.isReadOnly });\n\t\tthis._register(viewCell.onDidChangeState((e) => {\n\t\t\tif (e.metadataChanged) {\n\t\t\t\ttemplateData.editor?.updateOptions({ readOnly: notebookEditor.viewModel.options.isReadOnly });\n\n\t\t\t\tif (this.updateForCollapseState()) {\n\t\t\t\t\tthis.relayoutCell();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeLayout((e) => {\n\t\t\tif (e.outerWidth !== undefined) {\n\t\t\t\tconst layoutInfo = templateData.editor.getLayoutInfo();\n\t\t\t\tif (layoutInfo.width !== viewCell.layoutInfo.editorWidth) {\n\t\t\t\t\tthis.onCellWidthChange();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeLayout((e) => {\n\t\t\tif (e.totalHeight) {\n\t\t\t\tthis.relayoutCell();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(templateData.editor.onDidContentSizeChange((e) => {\n\t\t\tif (e.contentHeightChanged) {\n\t\t\t\tif (this.viewCell.layoutInfo.editorHeight !== e.contentHeight) {\n\t\t\t\t\tthis.onCellHeightChange(e.contentHeight);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(templateData.editor.onDidChangeCursorSelection((e) => {\n\t\t\tif (e.source === 'restoreState') {\n\t\t\t\t// do not reveal the cell into view if this selection change was caused by restoring editors...\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst primarySelection = templateData.editor.getSelection();\n\n\t\t\tif (primarySelection) {\n\t\t\t\tthis.notebookEditor.revealLineInViewAsync(viewCell, primarySelection.positionLineNumber);\n\t\t\t}\n\t\t}));\n\n\t\t// Apply decorations\n\t\tthis._register(viewCell.onCellDecorationsChanged((e) => {\n\t\t\te.added.forEach(options => {\n\t\t\t\tif (options.className) {\n\t\t\t\t\ttemplateData.rootContainer.classList.add(options.className);\n\t\t\t\t}\n\n\t\t\t\tif (options.outputClassName) {\n\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(this.viewCell.id, [options.outputClassName], []);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\te.removed.forEach(options => {\n\t\t\t\tif (options.className) {\n\t\t\t\t\ttemplateData.rootContainer.classList.remove(options.className);\n\t\t\t\t}\n\n\t\t\t\tif (options.outputClassName) {\n\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(this.viewCell.id, [], [options.outputClassName]);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tviewCell.getCellDecorations().forEach(options => {\n\t\t\tif (options.className) {\n\t\t\t\ttemplateData.rootContainer.classList.add(options.className);\n\t\t\t}\n\n\t\t\tif (options.outputClassName) {\n\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(this.viewCell.id, [options.outputClassName], []);\n\t\t\t}\n\t\t});\n\n\t\t// Mouse click handlers\n\t\tthis._register(templateData.statusBar.onDidClick(e => {\n\t\t\tif (e.type !== ClickTargetType.ContributedCommandItem) {\n\t\t\t\tconst target = templateData.editor.getTargetAtClientPoint(e.event.clientX, e.event.clientY - viewCell.getEditorStatusbarHeight());\n\t\t\t\tif (target?.position) {\n\t\t\t\t\ttemplateData.editor.setPosition(target.position);\n\t\t\t\t\ttemplateData.editor.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(templateData.editor.onMouseDown(e => {\n\t\t\t// prevent default on right mouse click, otherwise it will trigger unexpected focus changes\n\t\t\t// the catch is, it means we don't allow customization of right button mouse down handlers other than the built in ones.\n\t\t\tif (e.event.rightButton) {\n\t\t\t\te.event.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\t// Focus Mode\n\t\tconst updateFocusMode = () => {\n\t\t\tviewCell.focusMode =\n\t\t\t\t(templateData.editor.hasWidgetFocus() || (document.activeElement && this.templateData.statusBar.statusBarContainer.contains(document.activeElement)))\n\t\t\t\t\t? CellFocusMode.Editor\n\t\t\t\t\t: CellFocusMode.Container;\n\t\t};\n\n\t\tthis._register(templateData.editor.onDidFocusEditorWidget(() => {\n\t\t\tupdateFocusMode();\n\t\t}));\n\t\tthis._register(templateData.editor.onDidBlurEditorWidget(() => {\n\t\t\t// this is for a special case:\n\t\t\t// users click the status bar empty space, which we will then focus the editor\n\t\t\t// so we don't want to update the focus state too eagerly, it will be updated with onDidFocusEditorWidget\n\t\t\tif (!(document.activeElement && this.templateData.statusBar.statusBarContainer.contains(document.activeElement))) {\n\t\t\t\tupdateFocusMode();\n\t\t\t}\n\t\t}));\n\n\t\t// Render Outputs\n\t\tthis._outputContainerRenderer = this.instantiationService.createInstance(CellOutputContainer, notebookEditor, viewCell, templateData);\n\t\tthis._outputContainerRenderer.render(editorHeight);\n\t\t// Need to do this after the intial renderOutput\n\t\tthis.updateForCollapseState();\n\t}\n\n\tprivate updateForCollapseState(): boolean {\n\t\tif (this.viewCell.metadata.outputCollapsed === this._renderedOutputCollapseState &&\n\t\t\tthis.viewCell.metadata.inputCollapsed === this._renderedInputCollapseState) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.viewCell.layoutChange({});\n\n\t\tif (this.viewCell.metadata?.inputCollapsed && this.viewCell.metadata.outputCollapsed) {\n\t\t\tthis.viewUpdateAllCollapsed();\n\t\t} else if (this.viewCell.metadata?.inputCollapsed) {\n\t\t\tthis.viewUpdateInputCollapsed();\n\t\t} else if (this.viewCell.metadata?.outputCollapsed && this.viewCell.outputsViewModels.length) {\n\t\t\tthis.viewUpdateOutputCollapsed();\n\t\t} else {\n\t\t\tthis.viewUpdateExpanded();\n\t\t}\n\n\t\tthis._renderedOutputCollapseState = this.viewCell.metadata.outputCollapsed;\n\t\tthis._renderedInputCollapseState = this.viewCell.metadata.inputCollapsed;\n\n\t\treturn true;\n\t}\n\n\tprivate viewUpdateInputCollapsed(): void {\n\t\tDOM.hide(this.templateData.cellContainer);\n\t\tDOM.hide(this.templateData.runButtonContainer);\n\t\tDOM.show(this.templateData.collapsedPart);\n\t\tDOM.show(this.templateData.outputContainer);\n\t\tthis.templateData.container.classList.toggle('collapsed', true);\n\t\tthis._outputContainerRenderer.viewUpdateShowOutputs();\n\n\t\tthis.relayoutCell();\n\t}\n\n\tprivate viewUpdateOutputCollapsed(): void {\n\t\tDOM.show(this.templateData.cellContainer);\n\t\tDOM.show(this.templateData.runButtonContainer);\n\t\tDOM.show(this.templateData.collapsedPart);\n\t\tDOM.hide(this.templateData.outputContainer);\n\n\t\tthis._outputContainerRenderer.viewUpdateHideOuputs();\n\n\t\tthis.templateData.container.classList.toggle('collapsed', false);\n\t\tthis.templateData.container.classList.toggle('output-collapsed', true);\n\n\t\tthis.relayoutCell();\n\t}\n\n\tprivate viewUpdateAllCollapsed(): void {\n\t\tDOM.hide(this.templateData.cellContainer);\n\t\tDOM.hide(this.templateData.runButtonContainer);\n\t\tDOM.show(this.templateData.collapsedPart);\n\t\tDOM.hide(this.templateData.outputContainer);\n\t\tthis.templateData.container.classList.toggle('collapsed', true);\n\t\tthis.templateData.container.classList.toggle('output-collapsed', true);\n\t\tthis._outputContainerRenderer.viewUpdateHideOuputs();\n\t\tthis.relayoutCell();\n\t}\n\n\tprivate viewUpdateExpanded(): void {\n\t\tDOM.show(this.templateData.cellContainer);\n\t\tDOM.show(this.templateData.runButtonContainer);\n\t\tDOM.hide(this.templateData.collapsedPart);\n\t\tDOM.show(this.templateData.outputContainer);\n\t\tthis.templateData.container.classList.toggle('collapsed', false);\n\t\tthis.templateData.container.classList.toggle('output-collapsed', false);\n\t\tthis._outputContainerRenderer.viewUpdateShowOutputs();\n\t\tthis.relayoutCell();\n\t}\n\n\tprivate layoutEditor(dimension: IDimension): void {\n\t\tthis.templateData.editor?.layout(dimension);\n\t}\n\n\tprivate onCellWidthChange(): void {\n\t\tconst realContentHeight = this.templateData.editor.getContentHeight();\n\t\tthis.viewCell.editorHeight = realContentHeight;\n\t\tthis.relayoutCell();\n\t\tthis.layoutEditor(\n\t\t\t{\n\t\t\t\twidth: this.viewCell.layoutInfo.editorWidth,\n\t\t\t\theight: realContentHeight\n\t\t\t}\n\t\t);\n\t}\n\n\tprivate onCellHeightChange(newHeight: number): void {\n\t\tconst viewLayout = this.templateData.editor.getLayoutInfo();\n\t\tthis.viewCell.editorHeight = newHeight;\n\t\tthis.relayoutCell();\n\t\tthis.layoutEditor(\n\t\t\t{\n\t\t\t\twidth: viewLayout.width,\n\t\t\t\theight: newHeight\n\t\t\t}\n\t\t);\n\t}\n\n\trelayoutCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t}\n\n\toverride dispose() {\n\t\tthis.viewCell.detachTextEditor();\n\t\tthis._outputContainerRenderer.dispose();\n\t\tthis._untrustedStatusItem?.dispose();\n\t\tthis.templateData.focusIndicatorLeft.style.height = 'initial';\n\n\t\tsuper.dispose();\n\t}\n}\n"]}