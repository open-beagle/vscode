{"version":3,"file":"diffComponents.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/notebook/browser/diff/diffComponents.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IDiffEditorOptions, IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { DiffElementViewModelBase, getFormatedMetadataJSON, OUTPUT_EDITOR_HEIGHT_MAGIC, PropertyFoldingState, SideBySideDiffElementViewModel, SingleSideDiffElementViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffElementViewModel';\nimport { CellDiffSideBySideRenderTemplate, CellDiffSingleSideRenderTemplate, DiffSide, DIFF_CELL_MARGIN, INotebookTextDiffEditor, NOTEBOOK_DIFF_CELL_PROPERTY, NOTEBOOK_DIFF_CELL_PROPERTY_EXPANDED } from 'vs/workbench/contrib/notebook/browser/diff/notebookDiffEditorBrowser';\nimport { EDITOR_BOTTOM_PADDING } from 'vs/workbench/contrib/notebook/browser/constants';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { DiffEditorWidget } from 'vs/editor/browser/widget/diffEditorWidget';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { CellEditType, CellUri, IOutputDto, NotebookCellMetadata } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { ToolBar } from 'vs/base/browser/ui/toolbar/toolbar';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IMenu, IMenuService, MenuId, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IAction } from 'vs/base/common/actions';\nimport { createAndFillInActionBarActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { Delayer } from 'vs/base/common/async';\nimport { CodiconActionViewItem } from 'vs/workbench/contrib/notebook/browser/view/renderers/cellActionView';\nimport { getEditorTopPadding } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { collapsedIcon, expandedIcon } from 'vs/workbench/contrib/notebook/browser/notebookIcons';\nimport { OutputContainer } from 'vs/workbench/contrib/notebook/browser/diff/diffElementOutputs';\nimport { EditorExtensionsRegistry } from 'vs/editor/browser/editorExtensions';\nimport { ContextMenuController } from 'vs/editor/contrib/contextmenu/contextmenu';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/snippetController2';\nimport { SuggestController } from 'vs/editor/contrib/suggest/suggestController';\nimport { AccessibilityHelpController } from 'vs/workbench/contrib/codeEditor/browser/accessibility/accessibility';\nimport { MenuPreventer } from 'vs/workbench/contrib/codeEditor/browser/menuPreventer';\nimport { SelectionClipboardContributionID } from 'vs/workbench/contrib/codeEditor/browser/selectionClipboard';\nimport { TabCompletionController } from 'vs/workbench/contrib/snippets/browser/tabCompletion';\nimport { renderIcon } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\n\nexport const fixedEditorOptions: IEditorOptions = {\n\tpadding: {\n\t\ttop: 12,\n\t\tbottom: 12\n\t},\n\tscrollBeyondLastLine: false,\n\tscrollbar: {\n\t\tverticalScrollbarSize: 14,\n\t\thorizontal: 'auto',\n\t\tvertical: 'hidden',\n\t\tuseShadows: true,\n\t\tverticalHasArrows: false,\n\t\thorizontalHasArrows: false,\n\t\talwaysConsumeMouseWheel: false,\n\t},\n\trenderLineHighlightOnlyWhenFocus: true,\n\toverviewRulerLanes: 0,\n\toverviewRulerBorder: false,\n\tselectOnLineNumbers: false,\n\twordWrap: 'off',\n\tlineNumbers: 'off',\n\tlineDecorationsWidth: 0,\n\tglyphMargin: false,\n\tfixedOverflowWidgets: true,\n\tminimap: { enabled: false },\n\trenderValidationDecorations: 'on',\n\trenderLineHighlight: 'none',\n\treadOnly: true\n};\n\nexport function getOptimizedNestedCodeEditorWidgetOptions(): ICodeEditorWidgetOptions {\n\treturn {\n\t\tisSimpleWidget: false,\n\t\tcontributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\tMenuPreventer.ID,\n\t\t\tSelectionClipboardContributionID,\n\t\t\tContextMenuController.ID,\n\t\t\tSuggestController.ID,\n\t\t\tSnippetController2.ID,\n\t\t\tTabCompletionController.ID,\n\t\t\tAccessibilityHelpController.ID\n\t\t])\n\t};\n}\n\nexport const fixedDiffEditorOptions: IDiffEditorOptions = {\n\t...fixedEditorOptions,\n\tglyphMargin: true,\n\tenableSplitViewResizing: false,\n\trenderIndicators: true,\n\treadOnly: false,\n\tisInEmbeddedEditor: true,\n\trenderOverviewRuler: false\n};\n\nclass PropertyHeader extends Disposable {\n\tprotected _foldingIndicator!: HTMLElement;\n\tprotected _statusSpan!: HTMLElement;\n\tprotected _toolbar!: ToolBar;\n\tprotected _menu!: IMenu;\n\tprotected _propertyExpanded?: IContextKey<boolean>;\n\n\tconstructor(\n\t\treadonly cell: DiffElementViewModelBase,\n\t\treadonly propertyHeaderContainer: HTMLElement,\n\t\treadonly notebookEditor: INotebookTextDiffEditor,\n\t\treadonly accessor: {\n\t\t\tupdateInfoRendering: (renderOutput: boolean) => void;\n\t\t\tcheckIfModified: (cell: DiffElementViewModelBase) => boolean;\n\t\t\tgetFoldingState: (cell: DiffElementViewModelBase) => PropertyFoldingState;\n\t\t\tupdateFoldingState: (cell: DiffElementViewModelBase, newState: PropertyFoldingState) => void;\n\t\t\tunChangedLabel: string;\n\t\t\tchangedLabel: string;\n\t\t\tprefix: string;\n\t\t\tmenuId: MenuId;\n\t\t},\n\t\t@IContextMenuService readonly contextMenuService: IContextMenuService,\n\t\t@IKeybindingService readonly keybindingService: IKeybindingService,\n\t\t@INotificationService readonly notificationService: INotificationService,\n\t\t@IMenuService readonly menuService: IMenuService,\n\t\t@IContextKeyService readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t}\n\n\tbuildHeader(): void {\n\t\tlet metadataChanged = this.accessor.checkIfModified(this.cell);\n\t\tthis._foldingIndicator = DOM.append(this.propertyHeaderContainer, DOM.$('.property-folding-indicator'));\n\t\tthis._foldingIndicator.classList.add(this.accessor.prefix);\n\t\tthis._updateFoldingIcon();\n\t\tconst metadataStatus = DOM.append(this.propertyHeaderContainer, DOM.$('div.property-status'));\n\t\tthis._statusSpan = DOM.append(metadataStatus, DOM.$('span'));\n\n\t\tif (metadataChanged) {\n\t\t\tthis._statusSpan.textContent = this.accessor.changedLabel;\n\t\t\tthis._statusSpan.style.fontWeight = 'bold';\n\t\t\tthis.propertyHeaderContainer.classList.add('modified');\n\t\t} else {\n\t\t\tthis._statusSpan.textContent = this.accessor.unChangedLabel;\n\t\t}\n\n\t\tconst cellToolbarContainer = DOM.append(this.propertyHeaderContainer, DOM.$('div.property-toolbar'));\n\t\tthis._toolbar = new ToolBar(cellToolbarContainer, this.contextMenuService, {\n\t\t\tactionViewItemProvider: action => {\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\tconst item = new CodiconActionViewItem(action, this.keybindingService, this.notificationService);\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\t\tthis._register(this._toolbar);\n\t\tthis._toolbar.context = {\n\t\t\tcell: this.cell\n\t\t};\n\n\t\tconst scopedContextKeyService = this.contextKeyService.createScoped(cellToolbarContainer);\n\t\tthis._register(scopedContextKeyService);\n\t\tconst propertyChanged = NOTEBOOK_DIFF_CELL_PROPERTY.bindTo(scopedContextKeyService);\n\t\tpropertyChanged.set(metadataChanged);\n\t\tthis._propertyExpanded = NOTEBOOK_DIFF_CELL_PROPERTY_EXPANDED.bindTo(scopedContextKeyService);\n\n\t\tthis._menu = this.menuService.createMenu(this.accessor.menuId, scopedContextKeyService);\n\t\tthis._register(this._menu);\n\n\t\tconst actions: IAction[] = [];\n\t\tcreateAndFillInActionBarActions(this._menu, { shouldForwardArgs: true }, actions);\n\t\tthis._toolbar.setActions(actions);\n\n\t\tthis._register(this._menu.onDidChange(() => {\n\t\t\tconst actions: IAction[] = [];\n\t\t\tcreateAndFillInActionBarActions(this._menu, { shouldForwardArgs: true }, actions);\n\t\t\tthis._toolbar.setActions(actions);\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.onMouseUp(e => {\n\t\t\tif (!e.event.target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst target = e.event.target as HTMLElement;\n\n\t\t\tif (target.classList.contains('codicon-notebook-collapsed') || target.classList.contains('codicon-notebook-expanded')) {\n\t\t\t\tconst parent = target.parentElement as HTMLElement;\n\n\t\t\t\tif (!parent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!parent.classList.contains(this.accessor.prefix)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!parent.classList.contains('property-folding-indicator')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// folding icon\n\n\t\t\t\tconst cellViewModel = e.target;\n\n\t\t\t\tif (cellViewModel === this.cell) {\n\t\t\t\t\tconst oldFoldingState = this.accessor.getFoldingState(this.cell);\n\t\t\t\t\tthis.accessor.updateFoldingState(this.cell, oldFoldingState === PropertyFoldingState.Expanded ? PropertyFoldingState.Collapsed : PropertyFoldingState.Expanded);\n\t\t\t\t\tthis._updateFoldingIcon();\n\t\t\t\t\tthis.accessor.updateInfoRendering(this.cell.renderOutput);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}));\n\n\t\tthis._updateFoldingIcon();\n\t\tthis.accessor.updateInfoRendering(this.cell.renderOutput);\n\t}\n\n\trefresh() {\n\t\tlet metadataChanged = this.accessor.checkIfModified(this.cell);\n\t\tif (metadataChanged) {\n\t\t\tthis._statusSpan.textContent = this.accessor.changedLabel;\n\t\t\tthis._statusSpan.style.fontWeight = 'bold';\n\t\t\tthis.propertyHeaderContainer.classList.add('modified');\n\t\t\tconst actions: IAction[] = [];\n\t\t\tcreateAndFillInActionBarActions(this._menu, undefined, actions);\n\t\t\tthis._toolbar.setActions(actions);\n\t\t} else {\n\t\t\tthis._statusSpan.textContent = this.accessor.unChangedLabel;\n\t\t\tthis._statusSpan.style.fontWeight = 'normal';\n\t\t\tthis._toolbar.setActions([]);\n\t\t}\n\t}\n\n\tprivate _updateFoldingIcon() {\n\t\tif (this.accessor.getFoldingState(this.cell) === PropertyFoldingState.Collapsed) {\n\t\t\tDOM.reset(this._foldingIndicator, renderIcon(collapsedIcon));\n\t\t\tthis._propertyExpanded?.set(false);\n\t\t} else {\n\t\t\tDOM.reset(this._foldingIndicator, renderIcon(expandedIcon));\n\t\t\tthis._propertyExpanded?.set(true);\n\t\t}\n\n\t}\n}\n\ninterface IDiffElementLayoutState {\n\touterWidth?: boolean;\n\teditorHeight?: boolean;\n\tmetadataEditor?: boolean;\n\tmetadataHeight?: boolean;\n\toutputTotalHeight?: boolean;\n}\n\nabstract class AbstractElementRenderer extends Disposable {\n\tprotected _metadataLocalDisposable = this._register(new DisposableStore());\n\tprotected _outputLocalDisposable = this._register(new DisposableStore());\n\tprotected _ignoreMetadata: boolean = false;\n\tprotected _ignoreOutputs: boolean = false;\n\tprotected _metadataHeaderContainer!: HTMLElement;\n\tprotected _metadataHeader!: PropertyHeader;\n\tprotected _metadataInfoContainer!: HTMLElement;\n\tprotected _metadataEditorContainer?: HTMLElement;\n\tprotected _metadataEditorDisposeStore!: DisposableStore;\n\tprotected _metadataEditor?: CodeEditorWidget | DiffEditorWidget;\n\n\tprotected _outputHeaderContainer!: HTMLElement;\n\tprotected _outputHeader!: PropertyHeader;\n\tprotected _outputInfoContainer!: HTMLElement;\n\tprotected _outputEditorContainer?: HTMLElement;\n\tprotected _outputViewContainer?: HTMLElement;\n\tprotected _outputLeftContainer?: HTMLElement;\n\tprotected _outputRightContainer?: HTMLElement;\n\tprotected _outputEmptyElement?: HTMLElement;\n\tprotected _outputLeftView?: OutputContainer;\n\tprotected _outputRightView?: OutputContainer;\n\tprotected _outputEditorDisposeStore!: DisposableStore;\n\tprotected _outputEditor?: CodeEditorWidget | DiffEditorWidget;\n\n\n\tprotected _diffEditorContainer!: HTMLElement;\n\tprotected _diagonalFill?: HTMLElement;\n\tprotected _isDisposed: boolean;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookTextDiffEditor,\n\t\treadonly cell: DiffElementViewModelBase,\n\t\treadonly templateData: CellDiffSingleSideRenderTemplate | CellDiffSideBySideRenderTemplate,\n\t\treadonly style: 'left' | 'right' | 'full',\n\t\tprotected readonly instantiationService: IInstantiationService,\n\t\tprotected readonly modeService: IModeService,\n\t\tprotected readonly modelService: IModelService,\n\t\tprotected readonly textModelService: ITextModelService,\n\t\tprotected readonly contextMenuService: IContextMenuService,\n\t\tprotected readonly keybindingService: IKeybindingService,\n\t\tprotected readonly notificationService: INotificationService,\n\t\tprotected readonly menuService: IMenuService,\n\t\tprotected readonly contextKeyService: IContextKeyService,\n\t\tprotected readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\t// init\n\t\tthis._isDisposed = false;\n\t\tthis._metadataEditorDisposeStore = new DisposableStore();\n\t\tthis._outputEditorDisposeStore = new DisposableStore();\n\t\tthis._register(this._metadataEditorDisposeStore);\n\t\tthis._register(this._outputEditorDisposeStore);\n\t\tthis._register(cell.onDidLayoutChange(e => this.layout(e)));\n\t\tthis._register(cell.onDidLayoutChange(e => this.updateBorders()));\n\t\tthis.init();\n\t\tthis.buildBody();\n\n\t\tthis._register(cell.onDidStateChange(() => {\n\t\t\tthis.updateOutputRendering(this.cell.renderOutput);\n\t\t}));\n\t}\n\n\tabstract init(): void;\n\tabstract styleContainer(container: HTMLElement): void;\n\tabstract _buildOutput(): void;\n\tabstract _disposeOutput(): void;\n\tabstract _buildMetadata(): void;\n\tabstract _disposeMetadata(): void;\n\n\tbuildBody(): void {\n\t\tconst body = this.templateData.body;\n\t\tthis._diffEditorContainer = this.templateData.diffEditorContainer;\n\t\tbody.classList.remove('left', 'right', 'full');\n\t\tswitch (this.style) {\n\t\t\tcase 'left':\n\t\t\t\tbody.classList.add('left');\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tbody.classList.add('right');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbody.classList.add('full');\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.styleContainer(this._diffEditorContainer);\n\t\tthis.updateSourceEditor();\n\n\t\tthis._ignoreMetadata = this.configurationService.getValue('notebook.diff.ignoreMetadata');\n\t\tif (this._ignoreMetadata) {\n\t\t\tthis._disposeMetadata();\n\t\t} else {\n\t\t\tthis._buildMetadata();\n\t\t}\n\n\t\tthis._ignoreOutputs = this.configurationService.getValue<boolean>('notebook.diff.ignoreOutputs') || !!(this.notebookEditor.textModel?.transientOptions.transientOutputs);\n\t\tif (this._ignoreOutputs) {\n\t\t\tthis._disposeOutput();\n\t\t} else {\n\t\t\tthis._buildOutput();\n\t\t}\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tlet metadataLayoutChange = false;\n\t\t\tlet outputLayoutChange = false;\n\t\t\tif (e.affectsConfiguration('notebook.diff.ignoreMetadata')) {\n\t\t\t\tconst newValue = this.configurationService.getValue<boolean>('notebook.diff.ignoreMetadata');\n\n\t\t\t\tif (newValue !== undefined && this._ignoreMetadata !== newValue) {\n\t\t\t\t\tthis._ignoreMetadata = newValue;\n\n\t\t\t\t\tthis._metadataLocalDisposable.clear();\n\t\t\t\t\tif (this.configurationService.getValue('notebook.diff.ignoreMetadata')) {\n\t\t\t\t\t\tthis._disposeMetadata();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cell.metadataStatusHeight = 25;\n\t\t\t\t\t\tthis._buildMetadata();\n\t\t\t\t\t\tthis.updateMetadataRendering();\n\t\t\t\t\t\tmetadataLayoutChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.affectsConfiguration('notebook.diff.ignoreOutputs')) {\n\t\t\t\tconst newValue = this.configurationService.getValue<boolean>('notebook.diff.ignoreOutputs');\n\n\t\t\t\tif (newValue !== undefined && this._ignoreOutputs !== (newValue || this.notebookEditor.textModel?.transientOptions.transientOutputs)) {\n\t\t\t\t\tthis._ignoreOutputs = newValue || !!(this.notebookEditor.textModel?.transientOptions.transientOutputs);\n\n\t\t\t\t\tthis._outputLocalDisposable.clear();\n\t\t\t\t\tif (this._ignoreOutputs) {\n\t\t\t\t\t\tthis._disposeOutput();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cell.outputStatusHeight = 25;\n\t\t\t\t\t\tthis._buildOutput();\n\t\t\t\t\t\toutputLayoutChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.layout({ metadataHeight: metadataLayoutChange, outputTotalHeight: outputLayoutChange });\n\t\t}));\n\t}\n\n\tupdateMetadataRendering() {\n\t\tif (this.cell.metadataFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t// we should expand the metadata editor\n\t\t\tthis._metadataInfoContainer.style.display = 'block';\n\n\t\t\tif (!this._metadataEditorContainer || !this._metadataEditor) {\n\t\t\t\t// create editor\n\t\t\t\tthis._metadataEditorContainer = DOM.append(this._metadataInfoContainer, DOM.$('.metadata-editor-container'));\n\t\t\t\tthis._buildMetadataEditor();\n\t\t\t} else {\n\t\t\t\tthis.cell.metadataHeight = this._metadataEditor.getContentHeight();\n\t\t\t}\n\t\t} else {\n\t\t\t// we should collapse the metadata editor\n\t\t\tthis._metadataInfoContainer.style.display = 'none';\n\t\t\t// this._metadataEditorDisposeStore.clear();\n\t\t\tthis.cell.metadataHeight = 0;\n\t\t}\n\t}\n\n\tupdateOutputRendering(renderRichOutput: boolean) {\n\t\tif (this.cell.outputFoldingState === PropertyFoldingState.Expanded) {\n\t\t\tthis._outputInfoContainer.style.display = 'block';\n\t\t\tif (renderRichOutput) {\n\t\t\t\tthis._hideOutputsRaw();\n\t\t\t\tthis._buildOutputRendererContainer();\n\t\t\t\tthis._showOutputsRenderer();\n\t\t\t\tthis._showOutputsEmptyView();\n\t\t\t} else {\n\t\t\t\tthis._hideOutputsRenderer();\n\t\t\t\tthis._buildOutputRawContainer();\n\t\t\t\tthis._showOutputsRaw();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._outputInfoContainer.style.display = 'none';\n\n\t\t\tthis._hideOutputsRaw();\n\t\t\tthis._hideOutputsRenderer();\n\t\t\tthis._hideOutputsEmptyView();\n\t\t}\n\t}\n\n\tprivate _buildOutputRawContainer() {\n\t\tif (!this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer = DOM.append(this._outputInfoContainer, DOM.$('.output-editor-container'));\n\t\t\tthis._buildOutputEditor();\n\t\t}\n\t}\n\n\tprivate _showOutputsRaw() {\n\t\tif (this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer.style.display = 'block';\n\t\t\tthis.cell.rawOutputHeight = this._outputEditor!.getContentHeight();\n\t\t}\n\t}\n\n\tprivate _showOutputsEmptyView() {\n\t\tthis.cell.layoutChange();\n\t}\n\n\tprotected _hideOutputsRaw() {\n\t\tif (this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer.style.display = 'none';\n\t\t\tthis.cell.rawOutputHeight = 0;\n\t\t}\n\t}\n\n\tprotected _hideOutputsEmptyView() {\n\t\tthis.cell.layoutChange();\n\t}\n\n\tabstract _buildOutputRendererContainer(): void;\n\tabstract _hideOutputsRenderer(): void;\n\tabstract _showOutputsRenderer(): void;\n\n\tprivate _applySanitizedMetadataChanges(currentMetadata: NotebookCellMetadata, newMetadata: any) {\n\t\tlet result: { [key: string]: any } = {};\n\t\ttry {\n\t\t\tconst newMetadataObj = JSON.parse(newMetadata);\n\t\t\tconst keys = new Set([...Object.keys(newMetadataObj)]);\n\t\t\tfor (let key of keys) {\n\t\t\t\tswitch (key as keyof NotebookCellMetadata) {\n\t\t\t\t\tcase 'inputCollapsed':\n\t\t\t\t\tcase 'outputCollapsed':\n\t\t\t\t\t\t// boolean\n\t\t\t\t\t\tif (typeof newMetadataObj[key] === 'boolean') {\n\t\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = currentMetadata[key as keyof NotebookCellMetadata];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'executionOrder':\n\t\t\t\t\t\t// number\n\t\t\t\t\t\tif (typeof newMetadataObj[key] === 'number') {\n\t\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = currentMetadata[key as keyof NotebookCellMetadata];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'runState':\n\t\t\t\t\t\t// enum\n\t\t\t\t\t\tif (typeof newMetadataObj[key] === 'number' && [1, 2, 3, 4].indexOf(newMetadataObj[key]) >= 0) {\n\t\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = currentMetadata[key as keyof NotebookCellMetadata];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst index = this.notebookEditor.textModel!.cells.indexOf(this.cell.modified!.textModel);\n\n\t\t\tif (index < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.notebookEditor.textModel!.applyEdits([\n\t\t\t\t{ editType: CellEditType.Metadata, index, metadata: result }\n\t\t\t], true, undefined, () => undefined, undefined);\n\t\t} catch {\n\t\t}\n\t}\n\n\tprivate async _buildMetadataEditor() {\n\t\tthis._metadataEditorDisposeStore.clear();\n\n\t\tif (this.cell instanceof SideBySideDiffElementViewModel) {\n\t\t\tthis._metadataEditor = this.instantiationService.createInstance(DiffEditorWidget, this._metadataEditorContainer!, {\n\t\t\t\t...fixedDiffEditorOptions,\n\t\t\t\toverflowWidgetsDomNode: this.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\treadOnly: false,\n\t\t\t\toriginalEditable: false,\n\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\tautomaticLayout: false,\n\t\t\t\tdimension: {\n\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), true, true)\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\toriginalEditor: getOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\tmodifiedEditor: getOptimizedNestedCodeEditorWidgetOptions()\n\t\t\t});\n\t\t\tthis.layout({ metadataHeight: true });\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor);\n\n\t\t\tthis._metadataEditorContainer?.classList.add('diff');\n\n\t\t\tconst originalMetadataModel = await this.textModelService.createModelReference(CellUri.generateCellMetadataUri(this.cell.originalDocument.uri, this.cell.original!.handle));\n\t\t\tconst modifiedMetadataModel = await this.textModelService.createModelReference(CellUri.generateCellMetadataUri(this.cell.modifiedDocument.uri, this.cell.modified!.handle));\n\t\t\tthis._metadataEditor.setModel({\n\t\t\t\toriginal: originalMetadataModel.object.textEditorModel,\n\t\t\t\tmodified: modifiedMetadataModel.object.textEditorModel\n\t\t\t});\n\n\t\t\tthis._metadataEditorDisposeStore.add(originalMetadataModel);\n\t\t\tthis._metadataEditorDisposeStore.add(modifiedMetadataModel);\n\n\t\t\tthis.cell.metadataHeight = this._metadataEditor.getContentHeight();\n\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor.onDidContentSizeChange((e) => {\n\t\t\t\tif (e.contentHeightChanged && this.cell.metadataFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t\t\tthis.cell.metadataHeight = e.contentHeight;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tlet respondingToContentChange = false;\n\n\t\t\tthis._metadataEditorDisposeStore.add(modifiedMetadataModel.object.textEditorModel.onDidChangeContent(() => {\n\t\t\t\trespondingToContentChange = true;\n\t\t\t\tconst value = modifiedMetadataModel.object.textEditorModel.getValue();\n\t\t\t\tthis._applySanitizedMetadataChanges(this.cell.modified!.metadata, value);\n\t\t\t\tthis._metadataHeader.refresh();\n\t\t\t\trespondingToContentChange = false;\n\t\t\t}));\n\n\t\t\tthis._metadataEditorDisposeStore.add(this.cell.modified!.textModel.onDidChangeMetadata(() => {\n\t\t\t\tif (respondingToContentChange) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst modifiedMetadataSource = getFormatedMetadataJSON(this.notebookEditor.textModel!, this.cell.modified?.metadata || {}, this.cell.modified?.language);\n\t\t\t\tmodifiedMetadataModel.object.textEditorModel.setValue(modifiedMetadataSource);\n\t\t\t}));\n\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis._metadataEditor = this.instantiationService.createInstance(CodeEditorWidget, this._metadataEditorContainer!, {\n\t\t\t\t...fixedEditorOptions,\n\t\t\t\tdimension: {\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, true),\n\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight\n\t\t\t\t},\n\t\t\t\toverflowWidgetsDomNode: this.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\treadOnly: false\n\t\t\t}, {});\n\t\t\tthis.layout({ metadataHeight: true });\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor);\n\n\t\t\tconst mode = this.modeService.create('jsonc');\n\t\t\tconst originalMetadataSource = getFormatedMetadataJSON(this.notebookEditor.textModel!,\n\t\t\t\tthis.cell.type === 'insert'\n\t\t\t\t\t? this.cell.modified!.metadata || {}\n\t\t\t\t\t: this.cell.original!.metadata || {});\n\t\t\tconst uri = this.cell.type === 'insert'\n\t\t\t\t? this.cell.modified!.uri\n\t\t\t\t: this.cell.original!.uri;\n\t\t\tconst handle = this.cell.type === 'insert'\n\t\t\t\t? this.cell.modified!.handle\n\t\t\t\t: this.cell.original!.handle;\n\n\t\t\tconst modelUri = CellUri.generateCellMetadataUri(uri, handle);\n\t\t\tconst metadataModel = this.modelService.createModel(originalMetadataSource, mode, modelUri, false);\n\t\t\tthis._metadataEditor.setModel(metadataModel);\n\t\t\tthis._metadataEditorDisposeStore.add(metadataModel);\n\n\t\t\tthis.cell.metadataHeight = this._metadataEditor.getContentHeight();\n\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor.onDidContentSizeChange((e) => {\n\t\t\t\tif (e.contentHeightChanged && this.cell.metadataFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t\t\tthis.cell.metadataHeight = e.contentHeight;\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _getFormatedOutputJSON(outputs: IOutputDto[]) {\n\t\treturn JSON.stringify(outputs.map(op => ({ outputs: op.outputs })), undefined, '\\t');\n\t}\n\n\tprivate _buildOutputEditor() {\n\t\tthis._outputEditorDisposeStore.clear();\n\n\t\tif ((this.cell.type === 'modified' || this.cell.type === 'unchanged') && !this.notebookEditor.textModel!.transientOptions.transientOutputs) {\n\t\t\tconst originalOutputsSource = this._getFormatedOutputJSON(this.cell.original?.outputs || []);\n\t\t\tconst modifiedOutputsSource = this._getFormatedOutputJSON(this.cell.modified?.outputs || []);\n\t\t\tif (originalOutputsSource !== modifiedOutputsSource) {\n\t\t\t\tconst mode = this.modeService.create('json');\n\t\t\t\tconst originalModel = this.modelService.createModel(originalOutputsSource, mode, undefined, true);\n\t\t\t\tconst modifiedModel = this.modelService.createModel(modifiedOutputsSource, mode, undefined, true);\n\t\t\t\tthis._outputEditorDisposeStore.add(originalModel);\n\t\t\t\tthis._outputEditorDisposeStore.add(modifiedModel);\n\n\t\t\t\tconst lineHeight = this.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\t\t\tconst lineCount = Math.max(originalModel.getLineCount(), modifiedModel.getLineCount());\n\t\t\t\tthis._outputEditor = this.instantiationService.createInstance(DiffEditorWidget, this._outputEditorContainer!, {\n\t\t\t\t\t...fixedDiffEditorOptions,\n\t\t\t\t\toverflowWidgetsDomNode: this.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\t\treadOnly: true,\n\t\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\t\tautomaticLayout: false,\n\t\t\t\t\tdimension: {\n\t\t\t\t\t\theight: Math.min(OUTPUT_EDITOR_HEIGHT_MAGIC, this.cell.layoutInfo.rawOutputHeight || lineHeight * lineCount),\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, true)\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\toriginalEditor: getOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\tmodifiedEditor: getOptimizedNestedCodeEditorWidgetOptions()\n\t\t\t\t});\n\t\t\t\tthis._outputEditorDisposeStore.add(this._outputEditor);\n\n\t\t\t\tthis._outputEditorContainer?.classList.add('diff');\n\n\t\t\t\tthis._outputEditor.setModel({\n\t\t\t\t\toriginal: originalModel,\n\t\t\t\t\tmodified: modifiedModel\n\t\t\t\t});\n\t\t\t\tthis._outputEditor.restoreViewState(this.cell.getOutputEditorViewState() as editorCommon.IDiffEditorViewState);\n\n\t\t\t\tthis.cell.rawOutputHeight = this._outputEditor.getContentHeight();\n\n\t\t\t\tthis._outputEditorDisposeStore.add(this._outputEditor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (e.contentHeightChanged && this.cell.outputFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t\t\t\tthis.cell.rawOutputHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tthis._outputEditorDisposeStore.add(this.cell.modified!.textModel.onDidChangeOutputs(() => {\n\t\t\t\t\tconst modifiedOutputsSource = this._getFormatedOutputJSON(this.cell.modified?.outputs || []);\n\t\t\t\t\tmodifiedModel.setValue(modifiedOutputsSource);\n\t\t\t\t\tthis._outputHeader.refresh();\n\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._outputEditor = this.instantiationService.createInstance(CodeEditorWidget, this._outputEditorContainer!, {\n\t\t\t...fixedEditorOptions,\n\t\t\tdimension: {\n\t\t\t\twidth: Math.min(OUTPUT_EDITOR_HEIGHT_MAGIC, this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, this.cell.type === 'unchanged' || this.cell.type === 'modified') - 32),\n\t\t\t\theight: this.cell.layoutInfo.rawOutputHeight\n\t\t\t},\n\t\t\toverflowWidgetsDomNode: this.notebookEditor.getOverflowContainerDomNode()\n\t\t}, {});\n\t\tthis._outputEditorDisposeStore.add(this._outputEditor);\n\n\t\tconst mode = this.modeService.create('json');\n\t\tconst originaloutputSource = this._getFormatedOutputJSON(\n\t\t\tthis.notebookEditor.textModel!.transientOptions.transientOutputs\n\t\t\t\t? []\n\t\t\t\t: this.cell.type === 'insert'\n\t\t\t\t\t? this.cell.modified!.outputs || []\n\t\t\t\t\t: this.cell.original!.outputs || []);\n\t\tconst outputModel = this.modelService.createModel(originaloutputSource, mode, undefined, true);\n\t\tthis._outputEditorDisposeStore.add(outputModel);\n\t\tthis._outputEditor.setModel(outputModel);\n\t\tthis._outputEditor.restoreViewState(this.cell.getOutputEditorViewState());\n\n\t\tthis.cell.rawOutputHeight = this._outputEditor.getContentHeight();\n\n\t\tthis._outputEditorDisposeStore.add(this._outputEditor.onDidContentSizeChange((e) => {\n\t\t\tif (e.contentHeightChanged && this.cell.outputFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t\tthis.cell.rawOutputHeight = e.contentHeight;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprotected layoutNotebookCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(\n\t\t\tthis.cell,\n\t\t\tthis.cell.layoutInfo.totalHeight\n\t\t);\n\t}\n\n\tupdateBorders() {\n\t\tthis.templateData.leftBorder.style.height = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.rightBorder.style.height = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.bottomBorder.style.top = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t}\n\n\toverride dispose() {\n\t\tif (this._outputEditor) {\n\t\t\tthis.cell.saveOutputEditorViewState(this._outputEditor.saveViewState());\n\t\t}\n\n\t\tif (this._metadataEditor) {\n\t\t\tthis.cell.saveMetadataEditorViewState(this._metadataEditor.saveViewState());\n\t\t}\n\n\t\tthis._metadataEditorDisposeStore.dispose();\n\t\tthis._outputEditorDisposeStore.dispose();\n\n\t\tthis._isDisposed = true;\n\t\tsuper.dispose();\n\t}\n\n\tabstract updateSourceEditor(): void;\n\tabstract layout(state: IDiffElementLayoutState): void;\n}\n\nabstract class SingleSideDiffElement extends AbstractElementRenderer {\n\n\toverride readonly cell: SingleSideDiffElementViewModel;\n\toverride readonly templateData: CellDiffSingleSideRenderTemplate;\n\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\tstyle: 'left' | 'right' | 'full',\n\t\tinstantiationService: IInstantiationService,\n\t\tmodeService: IModeService,\n\t\tmodelService: IModelService,\n\t\ttextModelService: ITextModelService,\n\t\tcontextMenuService: IContextMenuService,\n\t\tkeybindingService: IKeybindingService,\n\t\tnotificationService: INotificationService,\n\t\tmenuService: IMenuService,\n\t\tcontextKeyService: IContextKeyService,\n\t\tconfigurationService: IConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tnotebookEditor,\n\t\t\tcell,\n\t\t\ttemplateData,\n\t\t\tstyle,\n\t\t\tinstantiationService,\n\t\t\tmodeService,\n\t\t\tmodelService,\n\t\t\ttextModelService,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tmenuService,\n\t\t\tcontextKeyService,\n\t\t\tconfigurationService\n\t\t);\n\t\tthis.cell = cell;\n\t\tthis.templateData = templateData;\n\t}\n\n\tinit() {\n\t\tthis._diagonalFill = this.templateData.diagonalFill;\n\t}\n\n\toverride buildBody() {\n\t\tconst body = this.templateData.body;\n\t\tthis._diffEditorContainer = this.templateData.diffEditorContainer;\n\t\tbody.classList.remove('left', 'right', 'full');\n\t\tswitch (this.style) {\n\t\t\tcase 'left':\n\t\t\t\tbody.classList.add('left');\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tbody.classList.add('right');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbody.classList.add('full');\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.styleContainer(this._diffEditorContainer);\n\t\tthis.updateSourceEditor();\n\n\t\tif (this.configurationService.getValue('notebook.diff.ignoreMetadata')) {\n\t\t\tthis._disposeMetadata();\n\t\t} else {\n\t\t\tthis._buildMetadata();\n\t\t}\n\n\t\tif (this.configurationService.getValue('notebook.diff.ignoreOutputs') || this.notebookEditor.textModel?.transientOptions.transientOutputs) {\n\t\t\tthis._disposeOutput();\n\t\t} else {\n\t\t\tthis._buildOutput();\n\t\t}\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tlet metadataLayoutChange = false;\n\t\t\tlet outputLayoutChange = false;\n\t\t\tif (e.affectsConfiguration('notebook.diff.ignoreMetadata')) {\n\t\t\t\tthis._metadataLocalDisposable.clear();\n\t\t\t\tif (this.configurationService.getValue('notebook.diff.ignoreMetadata')) {\n\t\t\t\t\tthis._disposeMetadata();\n\t\t\t\t} else {\n\t\t\t\t\tthis.cell.metadataStatusHeight = 25;\n\t\t\t\t\tthis._buildMetadata();\n\t\t\t\t\tthis.updateMetadataRendering();\n\t\t\t\t\tmetadataLayoutChange = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.affectsConfiguration('notebook.diff.ignoreOutputs')) {\n\t\t\t\tthis._outputLocalDisposable.clear();\n\t\t\t\tif (this.configurationService.getValue('notebook.diff.ignoreOutputs') || this.notebookEditor.textModel?.transientOptions.transientOutputs) {\n\t\t\t\t\tthis._disposeOutput();\n\t\t\t\t} else {\n\t\t\t\t\tthis.cell.outputStatusHeight = 25;\n\t\t\t\t\tthis._buildOutput();\n\t\t\t\t\toutputLayoutChange = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.layout({ metadataHeight: metadataLayoutChange, outputTotalHeight: outputLayoutChange });\n\t\t}));\n\t}\n\n\t_disposeMetadata() {\n\t\tthis.cell.metadataStatusHeight = 0;\n\t\tthis.cell.metadataHeight = 0;\n\t\tthis.templateData.metadataHeaderContainer.style.display = 'none';\n\t\tthis.templateData.metadataInfoContainer.style.display = 'none';\n\t\tthis._metadataEditor = undefined;\n\t}\n\n\t_buildMetadata() {\n\t\tthis._metadataHeaderContainer = this.templateData.metadataHeaderContainer;\n\t\tthis._metadataInfoContainer = this.templateData.metadataInfoContainer;\n\t\tthis._metadataHeaderContainer.style.display = 'flex';\n\t\tthis._metadataInfoContainer.style.display = 'block';\n\t\tthis._metadataHeaderContainer.innerText = '';\n\t\tthis._metadataInfoContainer.innerText = '';\n\n\t\tthis._metadataHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._metadataHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateMetadataRendering.bind(this),\n\t\t\t\tcheckIfModified: (cell) => {\n\t\t\t\t\treturn cell.checkMetadataIfModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: (cell) => {\n\t\t\t\t\treturn cell.metadataFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (cell, state) => {\n\t\t\t\t\tcell.metadataFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: 'Metadata',\n\t\t\t\tchangedLabel: 'Metadata changed',\n\t\t\t\tprefix: 'metadata',\n\t\t\t\tmenuId: MenuId.NotebookDiffCellMetadataTitle\n\t\t\t}\n\t\t);\n\t\tthis._metadataLocalDisposable.add(this._metadataHeader);\n\t\tthis._metadataHeader.buildHeader();\n\t}\n\n\t_buildOutput() {\n\t\tthis.templateData.outputHeaderContainer.style.display = 'flex';\n\t\tthis.templateData.outputInfoContainer.style.display = 'block';\n\n\t\tthis._outputHeaderContainer = this.templateData.outputHeaderContainer;\n\t\tthis._outputInfoContainer = this.templateData.outputInfoContainer;\n\n\t\tthis._outputHeaderContainer.innerText = '';\n\t\tthis._outputInfoContainer.innerText = '';\n\n\t\tthis._outputHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._outputHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateOutputRendering.bind(this),\n\t\t\t\tcheckIfModified: (cell) => {\n\t\t\t\t\treturn cell.checkIfOutputsModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: (cell) => {\n\t\t\t\t\treturn cell.outputFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (cell, state) => {\n\t\t\t\t\tcell.outputFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: 'Outputs',\n\t\t\t\tchangedLabel: 'Outputs changed',\n\t\t\t\tprefix: 'output',\n\t\t\t\tmenuId: MenuId.NotebookDiffCellOutputsTitle\n\t\t\t}\n\t\t);\n\t\tthis._outputLocalDisposable.add(this._outputHeader);\n\t\tthis._outputHeader.buildHeader();\n\t}\n\n\t_disposeOutput() {\n\t\tthis._hideOutputsRaw();\n\t\tthis._hideOutputsRenderer();\n\t\tthis._hideOutputsEmptyView();\n\n\t\tthis.cell.rawOutputHeight = 0;\n\t\tthis.cell.outputStatusHeight = 0;\n\t\tthis.templateData.outputHeaderContainer.style.display = 'none';\n\t\tthis.templateData.outputInfoContainer.style.display = 'none';\n\t\tthis._outputViewContainer = undefined;\n\t}\n}\nexport class DeletedElement extends SingleSideDiffElement {\n\tprivate _editor!: CodeEditorWidget;\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\t@IModeService modeService: IModeService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\n\t) {\n\t\tsuper(notebookEditor, cell, templateData, 'left', instantiationService, modeService, modelService, textModelService, contextMenuService, keybindingService, notificationService, menuService, contextKeyService, configurationService);\n\t}\n\n\tstyleContainer(container: HTMLElement) {\n\t\tcontainer.classList.remove('inserted');\n\t\tcontainer.classList.add('removed');\n\t}\n\n\tupdateSourceEditor(): void {\n\t\tconst originalCell = this.cell.original!;\n\t\tconst lineCount = originalCell.textModel.textBuffer.getLineCount();\n\t\tconst lineHeight = this.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\tconst editorHeight = lineCount * lineHeight + getEditorTopPadding() + EDITOR_BOTTOM_PADDING;\n\n\t\tthis._editor = this.templateData.sourceEditor;\n\t\tthis._editor.layout({\n\t\t\twidth: (this.notebookEditor.getLayoutInfo().width - 2 * DIFF_CELL_MARGIN) / 2 - 18,\n\t\t\theight: editorHeight\n\t\t});\n\n\t\tthis.cell.editorHeight = editorHeight;\n\n\t\tthis._register(this._editor.onDidContentSizeChange((e) => {\n\t\t\tif (e.contentHeightChanged && this.cell.layoutInfo.editorHeight !== e.contentHeight) {\n\t\t\t\tthis.cell.editorHeight = e.contentHeight;\n\t\t\t}\n\t\t}));\n\n\t\tthis.textModelService.createModelReference(originalCell.uri).then(ref => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._register(ref);\n\n\t\t\tconst textModel = ref.object.textEditorModel;\n\t\t\tthis._editor.setModel(textModel);\n\t\t\tthis.cell.editorHeight = this._editor.getContentHeight();\n\t\t});\n\t}\n\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(() => {\n\t\t\tif (state.editorHeight || state.outerWidth) {\n\t\t\t\tthis._editor.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, false),\n\t\t\t\t\theight: this.cell.layoutInfo.editorHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\tthis._metadataEditor?.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, false),\n\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\tthis._outputEditor?.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, false),\n\t\t\t\t\theight: this.cell.layoutInfo.outputTotalHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this._diagonalFill) {\n\t\t\t\tthis._diagonalFill.style.height = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t\t\t}\n\n\t\t\tthis.layoutNotebookCell();\n\t\t});\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(this._outputInfoContainer, DOM.$('.output-view-container'));\n\t\t\tthis._outputEmptyElement = DOM.append(this._outputViewContainer, DOM.$('.output-empty-view'));\n\t\t\tconst span = DOM.append(this._outputEmptyElement, DOM.$('span'));\n\t\t\tspan.innerText = 'No outputs to render';\n\n\t\t\tif (this.cell.original!.outputs.length === 0) {\n\t\t\t\tthis._outputEmptyElement.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = 'none';\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._outputLeftView = this.instantiationService.createInstance(OutputContainer, this.notebookEditor, this.notebookEditor.textModel!, this.cell, this.cell.original!, DiffSide.Original, this._outputViewContainer!);\n\t\t\tthis._register(this._outputLeftView);\n\t\t\tthis._outputLeftView.render();\n\n\t\t\tconst removedOutputRenderListener = this.notebookEditor.onDidDynamicOutputRendered(e => {\n\t\t\t\tif (e.cell.uri.toString() === this.cell.original!.uri.toString()) {\n\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Original, this.cell.original!.id, ['nb-cellDeleted'], []);\n\t\t\t\t\tremovedOutputRenderListener.dispose();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._register(removedOutputRenderListener);\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = 'block';\n\t}\n\n\t_decorate() {\n\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Original, this.cell.original!.id, ['nb-cellDeleted'], []);\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'block';\n\n\t\t\tthis._outputLeftView?.showOutputs();\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'none';\n\n\t\t\tthis._outputLeftView?.hideOutputs();\n\t\t}\n\t}\n\n\toverride dispose() {\n\t\tif (this._editor) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class InsertElement extends SingleSideDiffElement {\n\tprivate _editor!: CodeEditorWidget;\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IModeService modeService: IModeService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(notebookEditor, cell, templateData, 'right', instantiationService, modeService, modelService, textModelService, contextMenuService, keybindingService, notificationService, menuService, contextKeyService, configurationService);\n\t}\n\n\tstyleContainer(container: HTMLElement): void {\n\t\tcontainer.classList.remove('removed');\n\t\tcontainer.classList.add('inserted');\n\t}\n\n\tupdateSourceEditor(): void {\n\t\tconst modifiedCell = this.cell.modified!;\n\t\tconst lineCount = modifiedCell.textModel.textBuffer.getLineCount();\n\t\tconst lineHeight = this.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\tconst editorHeight = lineCount * lineHeight + getEditorTopPadding() + EDITOR_BOTTOM_PADDING;\n\n\t\tthis._editor = this.templateData.sourceEditor;\n\t\tthis._editor.layout(\n\t\t\t{\n\t\t\t\twidth: (this.notebookEditor.getLayoutInfo().width - 2 * DIFF_CELL_MARGIN) / 2 - 18,\n\t\t\t\theight: editorHeight\n\t\t\t}\n\t\t);\n\t\tthis._editor.updateOptions({ readOnly: false });\n\t\tthis.cell.editorHeight = editorHeight;\n\n\t\tthis._register(this._editor.onDidContentSizeChange((e) => {\n\t\t\tif (e.contentHeightChanged && this.cell.layoutInfo.editorHeight !== e.contentHeight) {\n\t\t\t\tthis.cell.editorHeight = e.contentHeight;\n\t\t\t}\n\t\t}));\n\n\t\tthis.textModelService.createModelReference(modifiedCell.uri).then(ref => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._register(ref);\n\n\t\t\tconst textModel = ref.object.textEditorModel;\n\t\t\tthis._editor.setModel(textModel);\n\t\t\tthis._editor.restoreViewState(this.cell.getSourceEditorViewState() as editorCommon.ICodeEditorViewState);\n\t\t\tthis.cell.editorHeight = this._editor.getContentHeight();\n\t\t});\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(this._outputInfoContainer, DOM.$('.output-view-container'));\n\t\t\tthis._outputEmptyElement = DOM.append(this._outputViewContainer, DOM.$('.output-empty-view'));\n\t\t\tthis._outputEmptyElement.innerText = 'No outputs to render';\n\n\t\t\tif (this.cell.modified!.outputs.length === 0) {\n\t\t\t\tthis._outputEmptyElement.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = 'none';\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._outputRightView = this.instantiationService.createInstance(OutputContainer, this.notebookEditor, this.notebookEditor.textModel!, this.cell, this.cell.modified!, DiffSide.Modified, this._outputViewContainer!);\n\t\t\tthis._register(this._outputRightView);\n\t\t\tthis._outputRightView.render();\n\n\t\t\tconst insertOutputRenderListener = this.notebookEditor.onDidDynamicOutputRendered(e => {\n\t\t\t\tif (e.cell.uri.toString() === this.cell.modified!.uri.toString()) {\n\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Modified, this.cell.modified!.id, ['nb-cellAdded'], []);\n\t\t\t\t\tinsertOutputRenderListener.dispose();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._register(insertOutputRenderListener);\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = 'block';\n\t}\n\n\t_decorate() {\n\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Modified, this.cell.modified!.id, ['nb-cellAdded'], []);\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'block';\n\t\t\tthis._outputRightView?.showOutputs();\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'none';\n\t\t\tthis._outputRightView?.hideOutputs();\n\t\t}\n\t}\n\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(() => {\n\t\t\tif (state.editorHeight || state.outerWidth) {\n\t\t\t\tthis._editor.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, false),\n\t\t\t\t\theight: this.cell.layoutInfo.editorHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\tthis._metadataEditor?.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, true),\n\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\tthis._outputEditor?.layout({\n\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(this.notebookEditor.getLayoutInfo(), false, false),\n\t\t\t\t\theight: this.cell.layoutInfo.outputTotalHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.layoutNotebookCell();\n\n\t\t\tif (this._diagonalFill) {\n\t\t\t\tthis._diagonalFill.style.height = `${this.cell.layoutInfo.editorHeight + this.cell.layoutInfo.editorMargin + this.cell.layoutInfo.metadataStatusHeight + this.cell.layoutInfo.metadataHeight + this.cell.layoutInfo.outputTotalHeight + this.cell.layoutInfo.outputStatusHeight}px`;\n\t\t\t}\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tif (this._editor) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class ModifiedElement extends AbstractElementRenderer {\n\tprivate _editor?: DiffEditorWidget;\n\tprivate _editorContainer!: HTMLElement;\n\tprivate _inputToolbarContainer!: HTMLElement;\n\tprotected _toolbar!: ToolBar;\n\tprotected _menu!: IMenu;\n\n\toverride readonly cell: SideBySideDiffElementViewModel;\n\toverride readonly templateData: CellDiffSideBySideRenderTemplate;\n\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SideBySideDiffElementViewModel,\n\t\ttemplateData: CellDiffSideBySideRenderTemplate,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IModeService modeService: IModeService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(notebookEditor, cell, templateData, 'full', instantiationService, modeService, modelService, textModelService, contextMenuService, keybindingService, notificationService, menuService, contextKeyService, configurationService);\n\t\tthis.cell = cell;\n\t\tthis.templateData = templateData;\n\t}\n\n\tinit() { }\n\tstyleContainer(container: HTMLElement): void {\n\t\tcontainer.classList.remove('inserted', 'removed');\n\t}\n\n\t_disposeMetadata() {\n\t\tthis.cell.metadataStatusHeight = 0;\n\t\tthis.cell.metadataHeight = 0;\n\t\tthis.templateData.metadataHeaderContainer.style.display = 'none';\n\t\tthis.templateData.metadataInfoContainer.style.display = 'none';\n\t\tthis._metadataEditor = undefined;\n\t}\n\n\t_buildMetadata() {\n\t\tthis._metadataHeaderContainer = this.templateData.metadataHeaderContainer;\n\t\tthis._metadataInfoContainer = this.templateData.metadataInfoContainer;\n\t\tthis._metadataHeaderContainer.style.display = 'flex';\n\t\tthis._metadataInfoContainer.style.display = 'block';\n\n\t\tthis._metadataHeaderContainer.innerText = '';\n\t\tthis._metadataInfoContainer.innerText = '';\n\n\t\tthis._metadataHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._metadataHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateMetadataRendering.bind(this),\n\t\t\t\tcheckIfModified: (cell) => {\n\t\t\t\t\treturn cell.checkMetadataIfModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: (cell) => {\n\t\t\t\t\treturn cell.metadataFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (cell, state) => {\n\t\t\t\t\tcell.metadataFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: 'Metadata',\n\t\t\t\tchangedLabel: 'Metadata changed',\n\t\t\t\tprefix: 'metadata',\n\t\t\t\tmenuId: MenuId.NotebookDiffCellMetadataTitle\n\t\t\t}\n\t\t);\n\t\tthis._metadataLocalDisposable.add(this._metadataHeader);\n\t\tthis._metadataHeader.buildHeader();\n\t}\n\n\t_disposeOutput() {\n\t\tthis._hideOutputsRaw();\n\t\tthis._hideOutputsRenderer();\n\t\tthis._hideOutputsEmptyView();\n\n\t\tthis.cell.rawOutputHeight = 0;\n\t\tthis.cell.outputStatusHeight = 0;\n\t\tthis.templateData.outputHeaderContainer.style.display = 'none';\n\t\tthis.templateData.outputInfoContainer.style.display = 'none';\n\t\tthis._outputViewContainer = undefined;\n\t}\n\n\t_buildOutput() {\n\t\tthis.templateData.outputHeaderContainer.style.display = 'flex';\n\t\tthis.templateData.outputInfoContainer.style.display = 'block';\n\n\t\tthis._outputHeaderContainer = this.templateData.outputHeaderContainer;\n\t\tthis._outputInfoContainer = this.templateData.outputInfoContainer;\n\t\tthis._outputHeaderContainer.innerText = '';\n\t\tthis._outputInfoContainer.innerText = '';\n\n\t\tif (this.cell.checkIfOutputsModified()) {\n\t\t\tthis._outputInfoContainer.classList.add('modified');\n\t\t}\n\n\t\tthis._outputHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._outputHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateOutputRendering.bind(this),\n\t\t\t\tcheckIfModified: (cell) => {\n\t\t\t\t\treturn cell.checkIfOutputsModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: (cell) => {\n\t\t\t\t\treturn cell.outputFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (cell, state) => {\n\t\t\t\t\tcell.outputFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: 'Outputs',\n\t\t\t\tchangedLabel: 'Outputs changed',\n\t\t\t\tprefix: 'output',\n\t\t\t\tmenuId: MenuId.NotebookDiffCellOutputsTitle\n\t\t\t}\n\t\t);\n\t\tthis._outputLocalDisposable.add(this._outputHeader);\n\t\tthis._outputHeader.buildHeader();\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(this._outputInfoContainer, DOM.$('.output-view-container'));\n\t\t\tthis._outputEmptyElement = DOM.append(this._outputViewContainer, DOM.$('.output-empty-view'));\n\t\t\tthis._outputEmptyElement.innerText = 'No outputs to render';\n\n\t\t\tif (!this.cell.checkIfOutputsModified() && this.cell.modified.outputs.length === 0) {\n\t\t\t\tthis._outputEmptyElement.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = 'none';\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._register(this.cell.modified.textModel.onDidChangeOutputs(() => {\n\t\t\t\t// currently we only allow outputs change to the modified cell\n\t\t\t\tif (!this.cell.checkIfOutputsModified() && this.cell.modified.outputs.length === 0) {\n\t\t\t\t\tthis._outputEmptyElement!.style.display = 'block';\n\t\t\t\t} else {\n\t\t\t\t\tthis._outputEmptyElement!.style.display = 'none';\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._outputLeftContainer = DOM.append(this._outputViewContainer!, DOM.$('.output-view-container-left'));\n\t\t\tthis._outputRightContainer = DOM.append(this._outputViewContainer!, DOM.$('.output-view-container-right'));\n\n\t\t\tif (this.cell.checkIfOutputsModified()) {\n\t\t\t\tconst originalOutputRenderListener = this.notebookEditor.onDidDynamicOutputRendered(e => {\n\t\t\t\t\tif (e.cell.uri.toString() === this.cell.original.uri.toString()) {\n\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Original, this.cell.original.id, ['nb-cellDeleted'], []);\n\t\t\t\t\t\toriginalOutputRenderListener.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst modifiedOutputRenderListener = this.notebookEditor.onDidDynamicOutputRendered(e => {\n\t\t\t\t\tif (e.cell.uri.toString() === this.cell.modified.uri.toString()) {\n\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Modified, this.cell.modified.id, ['nb-cellAdded'], []);\n\t\t\t\t\t\tmodifiedOutputRenderListener.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._register(originalOutputRenderListener);\n\t\t\t\tthis._register(modifiedOutputRenderListener);\n\t\t\t}\n\n\t\t\t// We should use the original text model here\n\t\t\tthis._outputLeftView = this.instantiationService.createInstance(OutputContainer, this.notebookEditor, this.notebookEditor.textModel!, this.cell, this.cell.original!, DiffSide.Original, this._outputLeftContainer!);\n\t\t\tthis._outputLeftView.render();\n\t\t\tthis._register(this._outputLeftView);\n\t\t\tthis._outputRightView = this.instantiationService.createInstance(OutputContainer, this.notebookEditor, this.notebookEditor.textModel!, this.cell, this.cell.modified!, DiffSide.Modified, this._outputRightContainer!);\n\t\t\tthis._outputRightView.render();\n\t\t\tthis._register(this._outputRightView);\n\t\t\tthis._decorate();\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = 'block';\n\t}\n\n\t_decorate() {\n\t\tif (this.cell.checkIfOutputsModified()) {\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Original, this.cell.original.id, ['nb-cellDeleted'], []);\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(DiffSide.Modified, this.cell.modified.id, ['nb-cellAdded'], []);\n\t\t}\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'block';\n\n\t\t\tthis._outputLeftView?.showOutputs();\n\t\t\tthis._outputRightView?.showOutputs();\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = 'none';\n\n\t\t\tthis._outputLeftView?.hideOutputs();\n\t\t\tthis._outputRightView?.hideOutputs();\n\t\t}\n\t}\n\n\tupdateSourceEditor(): void {\n\t\tconst modifiedCell = this.cell.modified!;\n\t\tconst lineCount = modifiedCell.textModel.textBuffer.getLineCount();\n\t\tconst lineHeight = this.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\tconst editorHeight = this.cell.layoutInfo.editorHeight !== 0 ? this.cell.layoutInfo.editorHeight : lineCount * lineHeight + getEditorTopPadding() + EDITOR_BOTTOM_PADDING;\n\t\tthis._editorContainer = this.templateData.editorContainer;\n\t\tthis._editor = this.templateData.sourceEditor;\n\n\t\tthis._editorContainer.classList.add('diff');\n\n\t\tthis._editor.layout({\n\t\t\twidth: this.notebookEditor.getLayoutInfo().width - 2 * DIFF_CELL_MARGIN,\n\t\t\theight: editorHeight\n\t\t});\n\n\t\tthis._editorContainer.style.height = `${editorHeight}px`;\n\n\t\tthis._register(this._editor.onDidContentSizeChange((e) => {\n\t\t\tif (e.contentHeightChanged && this.cell.layoutInfo.editorHeight !== e.contentHeight) {\n\t\t\t\tthis.cell.editorHeight = e.contentHeight;\n\t\t\t}\n\t\t}));\n\n\t\tthis._initializeSourceDiffEditor();\n\n\t\tthis._inputToolbarContainer = this.templateData.inputToolbarContainer;\n\t\tthis._toolbar = this.templateData.toolbar;\n\n\t\tthis._toolbar.context = {\n\t\t\tcell: this.cell\n\t\t};\n\n\t\tthis._menu = this.menuService.createMenu(MenuId.NotebookDiffCellInputTitle, this.contextKeyService);\n\t\tthis._register(this._menu);\n\t\tconst actions: IAction[] = [];\n\t\tcreateAndFillInActionBarActions(this._menu, { shouldForwardArgs: true }, actions);\n\t\tthis._toolbar.setActions(actions);\n\n\t\tif (this.cell.modified!.textModel.getValue() !== this.cell.original!.textModel.getValue()) {\n\t\t\tthis._inputToolbarContainer.style.display = 'block';\n\t\t} else {\n\t\t\tthis._inputToolbarContainer.style.display = 'none';\n\t\t}\n\n\t\tthis._register(this.cell.modified!.textModel.onDidChangeContent(() => {\n\t\t\tif (this.cell.modified!.textModel.getValue() !== this.cell.original!.textModel.getValue()) {\n\t\t\t\tthis._inputToolbarContainer.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tthis._inputToolbarContainer.style.display = 'none';\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async _initializeSourceDiffEditor() {\n\t\tconst originalCell = this.cell.original!;\n\t\tconst modifiedCell = this.cell.modified!;\n\n\t\tconst originalRef = await this.textModelService.createModelReference(originalCell.uri);\n\t\tconst modifiedRef = await this.textModelService.createModelReference(modifiedCell.uri);\n\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst textModel = originalRef.object.textEditorModel;\n\t\tconst modifiedTextModel = modifiedRef.object.textEditorModel;\n\t\tthis._register({\n\t\t\tdispose: () => {\n\t\t\t\tconst delayer = new Delayer<void>(5000);\n\t\t\t\tdelayer.trigger(() => {\n\t\t\t\t\toriginalRef.dispose();\n\t\t\t\t\tdelayer.dispose();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis._register({\n\t\t\tdispose: () => {\n\t\t\t\tconst delayer = new Delayer<void>(5000);\n\t\t\t\tdelayer.trigger(() => {\n\t\t\t\t\tmodifiedRef.dispose();\n\t\t\t\t\tdelayer.dispose();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis._editor!.setModel({\n\t\t\toriginal: textModel,\n\t\t\tmodified: modifiedTextModel\n\t\t});\n\n\t\tthis._editor!.restoreViewState(this.cell.getSourceEditorViewState() as editorCommon.IDiffEditorViewState);\n\n\t\tconst contentHeight = this._editor!.getContentHeight();\n\t\tthis.cell.editorHeight = contentHeight;\n\t}\n\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(() => {\n\t\t\tif (state.editorHeight) {\n\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\tthis._editor!.layout({\n\t\t\t\t\twidth: this._editor!.getViewWidth(),\n\t\t\t\t\theight: this.cell.layoutInfo.editorHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (state.outerWidth) {\n\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\tthis._editor!.layout();\n\t\t\t}\n\n\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\tif (this._metadataEditorContainer) {\n\t\t\t\t\tthis._metadataEditorContainer.style.height = `${this.cell.layoutInfo.metadataHeight}px`;\n\t\t\t\t\tthis._metadataEditor?.layout();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\tif (this._outputEditorContainer) {\n\t\t\t\t\tthis._outputEditorContainer.style.height = `${this.cell.layoutInfo.outputTotalHeight}px`;\n\t\t\t\t\tthis._outputEditor?.layout();\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tthis.layoutNotebookCell();\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tif (this._editor) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n"]}