{"version":3,"sources":["vs/workbench/contrib/codeEditor/browser/quickaccess/gotoLineQuickAccess.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAiBhG,IAAa,2BAA2B,GAAxC,MAAa,2BAA4B,SAAQ,yDAAmC;QAInF,YACkC,aAA6B,EACtB,oBAA2C;YAEnF,KAAK,EAAE,CAAC;YAHyB,kBAAa,GAAb,aAAa,CAAgB;YACtB,yBAAoB,GAApB,oBAAoB,CAAuB;YAJjE,uCAAkC,GAAG,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC;QAOnG,CAAC;QAED,IAAY,aAAa;;YACxB,MAAM,YAAY,GAAG,MAAA,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAiC,CAAC,SAAS,0CAAE,MAAM,CAAC;YAE3G,OAAO;gBACN,gBAAgB,EAAE,CAAC,CAAA,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,0BAA0B,CAAA,IAAI,CAAC,CAAA,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,aAAa,CAAA;aAC3F,CAAC;QACH,CAAC;QAED,IAAc,uBAAuB;YACpC,OAAO,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC;QACnD,CAAC;QAEkB,YAAY,CAAC,OAAsC,EAAE,OAAiG;;YAExK,2BAA2B;YAC3B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE;gBAC5J,MAAA,OAAO,CAAC,gBAAgB,+CAAxB,OAAO,CAAqB,CAAC,CAAC,+DAA+D;gBAE7F,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE;oBAC9D,SAAS,EAAE,OAAO,CAAC,KAAK;oBACxB,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,aAAa,CAAC,gBAAgB;oBACtE,aAAa,EAAE,OAAO,CAAC,aAAa;iBACpC,EAAE,0BAAU,CAAC,CAAC;aACf;YAED,iCAAiC;iBAC5B;gBACJ,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;aACrC;QACF,CAAC;KACD,CAAA;IAzCY,2BAA2B;QAKrC,WAAA,8BAAc,CAAA;QACd,WAAA,qCAAqB,CAAA;OANX,2BAA2B,CAyCvC;IAzCY,kEAA2B;IA2CxC,mBAAQ,CAAC,EAAE,CAAuB,wBAAoB,CAAC,WAAW,CAAC,CAAC,2BAA2B,CAAC;QAC/F,IAAI,EAAE,2BAA2B;QACjC,MAAM,EAAE,yDAAmC,CAAC,MAAM;QAClD,WAAW,EAAE,CAAA,GAAA,cAAQ,CAAA,CAAC,CAAgC,EAAE,IAAyF,CAAC;QAClJ,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAA,GAAA,cAAQ,CAAA,CAAC,CAAqB,EAAE,IAAmB,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;KACvG,CAAC,CAAC;IAEH,MAAM,cAAe,SAAQ,iBAAO;QAEnC;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,2BAA2B;gBAC/B,KAAK,EAAE,EAAE,KAAK,EAAE,CAAA,GAAA,cAAQ,CAAA,CAAC,CAAU,EAAE,IAAsB,CAAC,EAAE,QAAQ,EAAE,sBAAsB,EAAE;gBAChG,EAAE,EAAE,IAAI;gBACR,UAAU,EAAE;oBACX,MAAM,4BAAmC;oBACzC,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,mCAA8B;oBACvC,GAAG,EAAE,EAAE,OAAO,EAAE,kCAA8B,EAAE;iBAChD;aACD,CAAC,CAAC;QACJ,CAAC;QAED,KAAK,CAAC,GAAG,CAAC,QAA0B;YACnC,QAAQ,CAAC,GAAG,CAAC,+BAAkB,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;QACvF,CAAC;KACD;IAED,CAAA,GAAA,yBAAe,CAAA,CAAC,cAAc,CAAC,CAAC","file":"gotoLineQuickAccess.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { IKeyMods, IQuickInputService } from 'vs/platform/quickinput/common/quickInput';\nimport { IEditorService, SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IRange } from 'vs/editor/common/core/range';\nimport { AbstractGotoLineQuickAccessProvider } from 'vs/editor/contrib/quickAccess/gotoLineQuickAccess';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IQuickAccessRegistry, Extensions as QuickaccesExtensions } from 'vs/platform/quickinput/common/quickAccess';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkbenchEditorConfiguration } from 'vs/workbench/common/editor';\nimport { Action2, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { KeyMod, KeyCode } from 'vs/base/common/keyCodes';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IQuickAccessTextEditorContext } from 'vs/editor/contrib/quickAccess/editorNavigationQuickAccess';\n\nexport class GotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n\n\tprotected readonly onDidActiveTextEditorControlChange = this.editorService.onDidActiveEditorChange;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t}\n\n\tprivate get configuration() {\n\t\tconst editorConfig = this.configurationService.getValue<IWorkbenchEditorConfiguration>().workbench?.editor;\n\n\t\treturn {\n\t\t\topenEditorPinned: !editorConfig?.enablePreviewFromQuickOpen || !editorConfig?.enablePreview\n\t\t};\n\t}\n\n\tprotected get activeTextEditorControl() {\n\t\treturn this.editorService.activeTextEditorControl;\n\t}\n\n\tprotected override gotoLocation(context: IQuickAccessTextEditorContext, options: { range: IRange, keyMods: IKeyMods, forceSideBySide?: boolean, preserveFocus?: boolean }): void {\n\n\t\t// Check for sideBySide use\n\t\tif ((options.keyMods.alt || (this.configuration.openEditorPinned && options.keyMods.ctrlCmd) || options.forceSideBySide) && this.editorService.activeEditor) {\n\t\t\tcontext.restoreViewState?.(); // since we open to the side, restore view state in this editor\n\n\t\t\tthis.editorService.openEditor(this.editorService.activeEditor, {\n\t\t\t\tselection: options.range,\n\t\t\t\tpinned: options.keyMods.ctrlCmd || this.configuration.openEditorPinned,\n\t\t\t\tpreserveFocus: options.preserveFocus\n\t\t\t}, SIDE_GROUP);\n\t\t}\n\n\t\t// Otherwise let parent handle it\n\t\telse {\n\t\t\tsuper.gotoLocation(context, options);\n\t\t}\n\t}\n}\n\nRegistry.as<IQuickAccessRegistry>(QuickaccesExtensions.Quickaccess).registerQuickAccessProvider({\n\tctor: GotoLineQuickAccessProvider,\n\tprefix: AbstractGotoLineQuickAccessProvider.PREFIX,\n\tplaceholder: localize('gotoLineQuickAccessPlaceholder', \"Type the line number and optional column to go to (e.g. 42:5 for line 42 and column 5).\"),\n\thelpEntries: [{ description: localize('gotoLineQuickAccess', \"Go to Line/Column\"), needsEditor: true }]\n});\n\nclass GotoLineAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.gotoLine',\n\t\t\ttitle: { value: localize('gotoLine', \"Go to Line/Column...\"), original: 'Go to Line/Column...' },\n\t\t\tf1: true,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: null,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KEY_G,\n\t\t\t\tmac: { primary: KeyMod.WinCtrl | KeyCode.KEY_G }\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\taccessor.get(IQuickInputService).quickAccess.show(GotoLineQuickAccessProvider.PREFIX);\n\t}\n}\n\nregisterAction2(GotoLineAction);\n"]}