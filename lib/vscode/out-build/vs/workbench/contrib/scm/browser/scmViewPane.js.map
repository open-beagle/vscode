{"version":3,"sources":["vs/workbench/contrib/scm/browser/scmViewPane.ts"],"names":[],"mappings":"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","file":"scmViewPane.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/scm';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { basename, dirname } from 'vs/base/common/resources';\nimport { IDisposable, Disposable, DisposableStore, combinedDisposable, dispose, toDisposable } from 'vs/base/common/lifecycle';\nimport { ViewPane, IViewPaneOptions, ViewAction } from 'vs/workbench/browser/parts/views/viewPane';\nimport { append, $, Dimension, asCSSUrl } from 'vs/base/browser/dom';\nimport { IListVirtualDelegate, IIdentityProvider } from 'vs/base/browser/ui/list/list';\nimport { ISCMResourceGroup, ISCMResource, InputValidationType, ISCMRepository, ISCMInput, IInputValidation, ISCMViewService, ISCMViewVisibleRepositoryChangeEvent, ISCMService, SCMInputChangeReason, VIEW_PANE_ID } from 'vs/workbench/contrib/scm/common/scm';\nimport { ResourceLabels, IResourceLabel } from 'vs/workbench/browser/labels';\nimport { CountBadge } from 'vs/base/browser/ui/countBadge/countBadge';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IContextViewService, IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IContextKeyService, IContextKey, ContextKeyExpr, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { MenuItemAction, IMenuService, registerAction2, MenuId, IAction2Options, MenuRegistry, Action2 } from 'vs/platform/actions/common/actions';\nimport { IAction, ActionRunner } from 'vs/base/common/actions';\nimport { ActionBar, IActionViewItemProvider } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IThemeService, registerThemingParticipant, IFileIconTheme } from 'vs/platform/theme/common/themeService';\nimport { isSCMResource, isSCMResourceGroup, connectPrimaryMenuToInlineActionBar, isSCMRepository, isSCMInput, collectContextMenuActions, getActionViewItemProvider } from './util';\nimport { attachBadgeStyler } from 'vs/platform/theme/common/styler';\nimport { WorkbenchCompressibleObjectTree, IOpenEvent } from 'vs/platform/list/browser/listService';\nimport { IConfigurationService, ConfigurationTarget, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { disposableTimeout, ThrottledDelayer } from 'vs/base/common/async';\nimport { ITreeNode, ITreeFilter, ITreeSorter, ITreeContextMenuEvent } from 'vs/base/browser/ui/tree/tree';\nimport { ResourceTree, IResourceNode } from 'vs/base/common/resourceTree';\nimport { ISplice } from 'vs/base/common/sequence';\nimport { ICompressibleTreeRenderer, ICompressibleKeyboardNavigationLabelProvider } from 'vs/base/browser/ui/tree/objectTree';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { ICompressedTreeNode, ICompressedTreeElement } from 'vs/base/browser/ui/tree/compressedObjectTreeModel';\nimport { URI } from 'vs/base/common/uri';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { compareFileNames, comparePaths } from 'vs/base/common/comparers';\nimport { FuzzyScore, createMatches, IMatch } from 'vs/base/common/filters';\nimport { IViewDescriptorService, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { localize } from 'vs/nls';\nimport { coalesce, flatten } from 'vs/base/common/arrays';\nimport { memoize } from 'vs/base/common/decorators';\nimport { IStorageService, StorageScope, StorageTarget, WillSaveStateReason } from 'vs/platform/storage/common/storage';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { SIDE_BAR_BACKGROUND, SIDE_BAR_BORDER, PANEL_BACKGROUND, PANEL_INPUT_BORDER } from 'vs/workbench/common/theme';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IEditorConstructionOptions } from 'vs/editor/browser/editorBrowser';\nimport { getSimpleEditorOptions } from 'vs/workbench/contrib/codeEditor/browser/simpleEditorOptions';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { EditorExtensionsRegistry } from 'vs/editor/browser/editorExtensions';\nimport { MenuPreventer } from 'vs/workbench/contrib/codeEditor/browser/menuPreventer';\nimport { SelectionClipboardContributionID } from 'vs/workbench/contrib/codeEditor/browser/selectionClipboard';\nimport { ContextMenuController } from 'vs/editor/contrib/contextmenu/contextmenu';\nimport * as platform from 'vs/base/common/platform';\nimport { compare, format } from 'vs/base/common/strings';\nimport { inputPlaceholderForeground, inputValidationInfoBorder, inputValidationWarningBorder, inputValidationErrorBorder, inputValidationInfoBackground, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningForeground, inputValidationErrorBackground, inputValidationErrorForeground, inputBackground, inputForeground, inputBorder, focusBorder, registerColor, contrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { SuggestController } from 'vs/editor/contrib/suggest/suggestController';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/snippetController2';\nimport { Schemas } from 'vs/base/common/network';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ModesHoverController } from 'vs/editor/contrib/hover/hover';\nimport { ColorDetector } from 'vs/editor/contrib/colorPicker/colorDetector';\nimport { LinkDetector } from 'vs/editor/contrib/links/links';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { DEFAULT_FONT_FAMILY } from 'vs/workbench/browser/style';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { RepositoryRenderer } from 'vs/workbench/contrib/scm/browser/scmRepositoryRenderer';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { LabelFuzzyScore } from 'vs/base/browser/ui/tree/abstractTree';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { API_OPEN_DIFF_EDITOR_COMMAND_ID, API_OPEN_EDITOR_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\n\ntype TreeElement = ISCMRepository | ISCMInput | ISCMResourceGroup | IResourceNode<ISCMResource, ISCMResourceGroup> | ISCMResource;\n\ninterface ISCMLayout {\n\theight: number | undefined;\n\twidth: number | undefined;\n\treadonly onDidChange: Event<void>;\n}\n\ninterface InputTemplate {\n\treadonly inputWidget: SCMInputWidget;\n\tdisposable: IDisposable;\n\treadonly templateDisposable: IDisposable;\n}\n\nclass InputRenderer implements ICompressibleTreeRenderer<ISCMInput, FuzzyScore, InputTemplate> {\n\n\tstatic readonly DEFAULT_HEIGHT = 26;\n\n\tstatic readonly TEMPLATE_ID = 'input';\n\tget templateId(): string { return InputRenderer.TEMPLATE_ID; }\n\n\tprivate inputWidgets = new Map<ISCMInput, SCMInputWidget>();\n\tprivate contentHeights = new WeakMap<ISCMInput, number>();\n\tprivate editorSelections = new WeakMap<ISCMInput, Selection[]>();\n\n\tconstructor(\n\t\tprivate outerLayout: ISCMLayout,\n\t\tprivate overflowWidgetsDomNode: HTMLElement,\n\t\tprivate updateHeight: (input: ISCMInput, height: number) => void,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): InputTemplate {\n\t\t// hack\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-no-twistie');\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst inputElement = append(container, $('.scm-input'));\n\t\tconst inputWidget = this.instantiationService.createInstance(SCMInputWidget, inputElement, this.overflowWidgetsDomNode);\n\t\tdisposables.add(inputWidget);\n\n\t\treturn { inputWidget, disposable: Disposable.None, templateDisposable: disposables };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMInput, FuzzyScore>, index: number, templateData: InputTemplate): void {\n\t\ttemplateData.disposable.dispose();\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst input = node.element;\n\t\ttemplateData.inputWidget.input = input;\n\n\t\t// Remember widget\n\t\tthis.inputWidgets.set(input, templateData.inputWidget);\n\t\tdisposables.add({ dispose: () => this.inputWidgets.delete(input) });\n\n\t\t// Widget cursor selections\n\t\tconst selections = this.editorSelections.get(input);\n\n\t\tif (selections) {\n\t\t\ttemplateData.inputWidget.selections = selections;\n\t\t}\n\n\t\tdisposables.add(toDisposable(() => {\n\t\t\tconst selections = templateData.inputWidget.selections;\n\n\t\t\tif (selections) {\n\t\t\t\tthis.editorSelections.set(input, selections);\n\t\t\t}\n\t\t}));\n\n\t\t// Rerender the element whenever the editor content height changes\n\t\tconst onDidChangeContentHeight = () => {\n\t\t\tconst contentHeight = templateData.inputWidget.getContentHeight();\n\t\t\tconst lastContentHeight = this.contentHeights.get(input)!;\n\t\t\tthis.contentHeights.set(input, contentHeight);\n\n\t\t\tif (lastContentHeight !== contentHeight) {\n\t\t\t\tthis.updateHeight(input, contentHeight + 10);\n\t\t\t\ttemplateData.inputWidget.layout();\n\t\t\t}\n\t\t};\n\n\t\tconst startListeningContentHeightChange = () => {\n\t\t\tdisposables.add(templateData.inputWidget.onDidChangeContentHeight(onDidChangeContentHeight));\n\t\t\tonDidChangeContentHeight();\n\t\t};\n\n\t\t// Setup height change listener on next tick\n\t\tconst timeout = disposableTimeout(startListeningContentHeightChange, 0);\n\t\tdisposables.add(timeout);\n\n\t\t// Layout the editor whenever the outer layout happens\n\t\tconst layoutEditor = () => templateData.inputWidget.layout();\n\t\tdisposables.add(this.outerLayout.onDidChange(layoutEditor));\n\t\tlayoutEditor();\n\n\t\ttemplateData.disposable = disposables;\n\t}\n\n\trenderCompressedElements(): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tdisposeElement(group: ITreeNode<ISCMInput, FuzzyScore>, index: number, template: InputTemplate): void {\n\t\ttemplate.disposable.dispose();\n\t}\n\n\tdisposeTemplate(templateData: InputTemplate): void {\n\t\ttemplateData.disposable.dispose();\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n\n\tgetHeight(input: ISCMInput): number {\n\t\treturn (this.contentHeights.get(input) ?? InputRenderer.DEFAULT_HEIGHT) + 10;\n\t}\n\n\tgetRenderedInputWidget(input: ISCMInput): SCMInputWidget | undefined {\n\t\treturn this.inputWidgets.get(input);\n\t}\n\n\tgetFocusedInput(): ISCMInput | undefined {\n\t\tfor (const [input, inputWidget] of this.inputWidgets) {\n\t\t\tif (inputWidget.hasFocus()) {\n\t\t\t\treturn input;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tclearValidation(): void {\n\t\tfor (const [, inputWidget] of this.inputWidgets) {\n\t\t\tinputWidget.clearValidation();\n\t\t}\n\t}\n}\n\ninterface ResourceGroupTemplate {\n\treadonly name: HTMLElement;\n\treadonly count: CountBadge;\n\treadonly actionBar: ActionBar;\n\telementDisposables: IDisposable;\n\treadonly disposables: IDisposable;\n}\n\nclass ResourceGroupRenderer implements ICompressibleTreeRenderer<ISCMResourceGroup, FuzzyScore, ResourceGroupTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'resource group';\n\tget templateId(): string { return ResourceGroupRenderer.TEMPLATE_ID; }\n\n\tconstructor(\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IThemeService private themeService: IThemeService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ResourceGroupTemplate {\n\t\t// hack\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-twistie');\n\n\t\tconst element = append(container, $('.resource-group'));\n\t\tconst name = append(element, $('.name'));\n\t\tconst actionsContainer = append(element, $('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, { actionViewItemProvider: this.actionViewItemProvider });\n\t\tconst countContainer = append(element, $('.count'));\n\t\tconst count = new CountBadge(countContainer);\n\t\tconst styler = attachBadgeStyler(count, this.themeService);\n\t\tconst elementDisposables = Disposable.None;\n\t\tconst disposables = combinedDisposable(actionBar, styler);\n\n\t\treturn { name, count, actionBar, elementDisposables, disposables };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMResourceGroup, FuzzyScore>, index: number, template: ResourceGroupTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\n\t\tconst group = node.element;\n\t\ttemplate.name.textContent = group.label;\n\t\ttemplate.actionBar.clear();\n\t\ttemplate.actionBar.context = group;\n\t\ttemplate.count.setCount(group.elements.length);\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(group.provider);\n\t\tdisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceGroupMenu(group), template.actionBar));\n\n\t\ttemplate.elementDisposables = disposables;\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResourceGroup>, FuzzyScore>, index: number, templateData: ResourceGroupTemplate, height: number | undefined): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tdisposeElement(group: ITreeNode<ISCMResourceGroup, FuzzyScore>, index: number, template: ResourceGroupTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t}\n\n\tdisposeTemplate(template: ResourceGroupTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t\ttemplate.disposables.dispose();\n\t}\n}\n\ninterface ResourceTemplate {\n\telement: HTMLElement;\n\tname: HTMLElement;\n\tfileLabel: IResourceLabel;\n\tdecorationIcon: HTMLElement;\n\tactionBar: ActionBar;\n\telementDisposables: IDisposable;\n\tdisposables: IDisposable;\n}\n\nclass RepositoryPaneActionRunner extends ActionRunner {\n\n\tconstructor(private getSelectedResources: () => (ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>)[]) {\n\t\tsuper();\n\t}\n\n\toverride async runAction(action: IAction, context: ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>): Promise<any> {\n\t\tif (!(action instanceof MenuItemAction)) {\n\t\t\treturn super.runAction(action, context);\n\t\t}\n\n\t\tconst selection = this.getSelectedResources();\n\t\tconst contextIsSelected = selection.some(s => s === context);\n\t\tconst actualContext = contextIsSelected ? selection : [context];\n\t\tconst args = flatten(actualContext.map(e => ResourceTree.isResourceNode(e) ? ResourceTree.collect(e) : [e]));\n\t\tawait action.run(...args);\n\t}\n}\n\nclass ResourceRenderer implements ICompressibleTreeRenderer<ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore, ResourceTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'resource';\n\tget templateId(): string { return ResourceRenderer.TEMPLATE_ID; }\n\n\tconstructor(\n\t\tprivate viewModelProvider: () => ViewModel,\n\t\tprivate labels: ResourceLabels,\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\tprivate actionRunner: ActionRunner,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IThemeService private themeService: IThemeService\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ResourceTemplate {\n\t\tconst element = append(container, $('.resource'));\n\t\tconst name = append(element, $('.name'));\n\t\tconst fileLabel = this.labels.create(name, { supportDescriptionHighlights: true, supportHighlights: true });\n\t\tconst actionsContainer = append(fileLabel.element, $('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: this.actionViewItemProvider,\n\t\t\tactionRunner: this.actionRunner\n\t\t});\n\n\t\tconst decorationIcon = append(element, $('.decoration-icon'));\n\t\tconst disposables = combinedDisposable(actionBar, fileLabel);\n\n\t\treturn { element, name, fileLabel, decorationIcon, actionBar, elementDisposables: Disposable.None, disposables };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMResource, FuzzyScore | LabelFuzzyScore> | ITreeNode<ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\n\t\tconst elementDisposables = new DisposableStore();\n\t\tconst resourceOrFolder = node.element;\n\t\tconst iconResource = ResourceTree.isResourceNode(resourceOrFolder) ? resourceOrFolder.element : resourceOrFolder;\n\t\tconst uri = ResourceTree.isResourceNode(resourceOrFolder) ? resourceOrFolder.uri : resourceOrFolder.sourceUri;\n\t\tconst fileKind = ResourceTree.isResourceNode(resourceOrFolder) ? FileKind.FOLDER : FileKind.FILE;\n\t\tconst viewModel = this.viewModelProvider();\n\t\tconst tooltip = !ResourceTree.isResourceNode(resourceOrFolder) && resourceOrFolder.decorations.tooltip || '';\n\n\t\ttemplate.actionBar.clear();\n\t\ttemplate.actionBar.context = resourceOrFolder;\n\n\t\tlet matches: IMatch[] | undefined;\n\t\tlet descriptionMatches: IMatch[] | undefined;\n\n\t\tif (ResourceTree.isResourceNode(resourceOrFolder)) {\n\t\t\tif (resourceOrFolder.element) {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.element.resourceGroup.provider);\n\t\t\t\telementDisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceMenu(resourceOrFolder.element), template.actionBar));\n\t\t\t\ttemplate.name.classList.toggle('strike-through', resourceOrFolder.element.decorations.strikeThrough);\n\t\t\t\ttemplate.element.classList.toggle('faded', resourceOrFolder.element.decorations.faded);\n\t\t\t} else {\n\t\t\t\tmatches = createMatches(node.filterData as FuzzyScore | undefined);\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.context.provider);\n\t\t\t\telementDisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceFolderMenu(resourceOrFolder.context), template.actionBar));\n\t\t\t\ttemplate.name.classList.remove('strike-through');\n\t\t\t\ttemplate.element.classList.remove('faded');\n\t\t\t}\n\t\t} else {\n\t\t\t[matches, descriptionMatches] = this._processFilterData(uri, node.filterData);\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.resourceGroup.provider);\n\t\t\telementDisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceMenu(resourceOrFolder), template.actionBar));\n\t\t\ttemplate.name.classList.toggle('strike-through', resourceOrFolder.decorations.strikeThrough);\n\t\t\ttemplate.element.classList.toggle('faded', resourceOrFolder.decorations.faded);\n\t\t}\n\n\t\tconst render = () => {\n\t\t\tconst theme = this.themeService.getColorTheme();\n\t\t\tconst icon = iconResource && (theme.type === ColorScheme.LIGHT ? iconResource.decorations.icon : iconResource.decorations.iconDark);\n\n\t\t\ttemplate.fileLabel.setFile(uri, {\n\t\t\t\tfileDecorations: { colors: false, badges: !icon },\n\t\t\t\thidePath: viewModel.mode === ViewModelMode.Tree,\n\t\t\t\tfileKind,\n\t\t\t\tmatches,\n\t\t\t\tdescriptionMatches\n\t\t\t});\n\n\t\t\tif (icon) {\n\t\t\t\ttemplate.decorationIcon.style.display = '';\n\t\t\t\ttemplate.decorationIcon.style.backgroundImage = asCSSUrl(icon);\n\t\t\t\ttemplate.decorationIcon.title = tooltip;\n\t\t\t} else {\n\t\t\t\ttemplate.decorationIcon.style.display = 'none';\n\t\t\t\ttemplate.decorationIcon.style.backgroundImage = '';\n\t\t\t\ttemplate.decorationIcon.title = '';\n\t\t\t}\n\t\t};\n\n\t\telementDisposables.add(this.themeService.onDidColorThemeChange(render));\n\t\trender();\n\n\t\ttemplate.element.setAttribute('data-tooltip', tooltip);\n\t\ttemplate.elementDisposables = elementDisposables;\n\t}\n\n\tdisposeElement(resource: ITreeNode<ISCMResource, FuzzyScore | LabelFuzzyScore> | ITreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResource> | ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate, height: number | undefined): void {\n\t\ttemplate.elementDisposables.dispose();\n\n\t\tconst elementDisposables = new DisposableStore();\n\t\tconst compressed = node.element as ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>;\n\t\tconst folder = compressed.elements[compressed.elements.length - 1];\n\n\t\tconst label = compressed.elements.map(e => e.name).join('/');\n\t\tconst fileKind = FileKind.FOLDER;\n\n\t\tconst matches = createMatches(node.filterData as FuzzyScore | undefined);\n\t\ttemplate.fileLabel.setResource({ resource: folder.uri, name: label }, {\n\t\t\tfileDecorations: { colors: false, badges: true },\n\t\t\tfileKind,\n\t\t\tmatches\n\t\t});\n\n\t\ttemplate.actionBar.clear();\n\t\ttemplate.actionBar.context = folder;\n\n\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(folder.context.provider);\n\t\telementDisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceFolderMenu(folder.context), template.actionBar));\n\n\t\ttemplate.name.classList.remove('strike-through');\n\t\ttemplate.element.classList.remove('faded');\n\t\ttemplate.decorationIcon.style.display = 'none';\n\t\ttemplate.decorationIcon.style.backgroundImage = '';\n\n\t\ttemplate.element.setAttribute('data-tooltip', '');\n\t\ttemplate.elementDisposables = elementDisposables;\n\t}\n\n\tdisposeCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResource> | ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate, height: number | undefined): void {\n\t\ttemplate.elementDisposables.dispose();\n\t}\n\n\tdisposeTemplate(template: ResourceTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t\ttemplate.disposables.dispose();\n\t}\n\n\tprivate _processFilterData(uri: URI, filterData: FuzzyScore | LabelFuzzyScore | undefined): [IMatch[] | undefined, IMatch[] | undefined] {\n\t\tif (!filterData) {\n\t\t\treturn [undefined, undefined];\n\t\t}\n\n\t\tif (!(filterData as LabelFuzzyScore).label) {\n\t\t\tconst matches = createMatches(filterData as FuzzyScore);\n\t\t\treturn [matches, undefined];\n\t\t}\n\n\t\tconst fileName = basename(uri);\n\t\tconst label = (filterData as LabelFuzzyScore).label;\n\t\tconst pathLength = label.length - fileName.length;\n\t\tconst matches = createMatches((filterData as LabelFuzzyScore).score);\n\n\t\t// FileName match\n\t\tif (label === fileName) {\n\t\t\treturn [matches, undefined];\n\t\t}\n\n\t\t// FilePath match\n\t\tlet labelMatches: IMatch[] = [];\n\t\tlet descriptionMatches: IMatch[] = [];\n\n\t\tfor (const match of matches) {\n\t\t\tif (match.start > pathLength) {\n\t\t\t\t// Label match\n\t\t\t\tlabelMatches.push({\n\t\t\t\t\tstart: match.start - pathLength,\n\t\t\t\t\tend: match.end - pathLength\n\t\t\t\t});\n\t\t\t} else if (match.end < pathLength) {\n\t\t\t\t// Description match\n\t\t\t\tdescriptionMatches.push(match);\n\t\t\t} else {\n\t\t\t\t// Spanning match\n\t\t\t\tlabelMatches.push({\n\t\t\t\t\tstart: 0,\n\t\t\t\t\tend: match.end - pathLength\n\t\t\t\t});\n\t\t\t\tdescriptionMatches.push({\n\t\t\t\t\tstart: match.start,\n\t\t\t\t\tend: pathLength\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn [labelMatches, descriptionMatches];\n\t}\n}\n\nclass ListDelegate implements IListVirtualDelegate<TreeElement> {\n\n\tconstructor(private readonly inputRenderer: InputRenderer) { }\n\n\tgetHeight(element: TreeElement) {\n\t\tif (isSCMInput(element)) {\n\t\t\treturn this.inputRenderer.getHeight(element);\n\t\t} else {\n\t\t\treturn 22;\n\t\t}\n\t}\n\n\tgetTemplateId(element: TreeElement) {\n\t\tif (isSCMRepository(element)) {\n\t\t\treturn RepositoryRenderer.TEMPLATE_ID;\n\t\t} else if (isSCMInput(element)) {\n\t\t\treturn InputRenderer.TEMPLATE_ID;\n\t\t} else if (ResourceTree.isResourceNode(element) || isSCMResource(element)) {\n\t\t\treturn ResourceRenderer.TEMPLATE_ID;\n\t\t} else {\n\t\t\treturn ResourceGroupRenderer.TEMPLATE_ID;\n\t\t}\n\t}\n}\n\nclass SCMTreeFilter implements ITreeFilter<TreeElement> {\n\n\tfilter(element: TreeElement): boolean {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn true;\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.elements.length > 0 || !element.hideWhenEmpty;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport class SCMTreeSorter implements ITreeSorter<TreeElement> {\n\n\t@memoize\n\tprivate get viewModel(): ViewModel { return this.viewModelProvider(); }\n\n\tconstructor(private viewModelProvider: () => ViewModel) { }\n\n\tcompare(one: TreeElement, other: TreeElement): number {\n\t\tif (isSCMRepository(one)) {\n\t\t\tif (!isSCMRepository(other)) {\n\t\t\t\tthrow new Error('Invalid comparison');\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (isSCMInput(one)) {\n\t\t\treturn -1;\n\t\t} else if (isSCMInput(other)) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (isSCMResourceGroup(one)) {\n\t\t\tif (!isSCMResourceGroup(other)) {\n\t\t\t\tthrow new Error('Invalid comparison');\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\t// List\n\t\tif (this.viewModel.mode === ViewModelMode.List) {\n\t\t\t// FileName\n\t\t\tif (this.viewModel.sortKey === ViewModelSortKey.Name) {\n\t\t\t\tconst oneName = basename((one as ISCMResource).sourceUri);\n\t\t\t\tconst otherName = basename((other as ISCMResource).sourceUri);\n\n\t\t\t\treturn compareFileNames(oneName, otherName);\n\t\t\t}\n\n\t\t\t// Status\n\t\t\tif (this.viewModel.sortKey === ViewModelSortKey.Status) {\n\t\t\t\tconst oneTooltip = (one as ISCMResource).decorations.tooltip ?? '';\n\t\t\t\tconst otherTooltip = (other as ISCMResource).decorations.tooltip ?? '';\n\n\t\t\t\tif (oneTooltip !== otherTooltip) {\n\t\t\t\t\treturn compare(oneTooltip, otherTooltip);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Path (default)\n\t\t\tconst onePath = (one as ISCMResource).sourceUri.fsPath;\n\t\t\tconst otherPath = (other as ISCMResource).sourceUri.fsPath;\n\n\t\t\treturn comparePaths(onePath, otherPath);\n\t\t}\n\n\t\t// Tree\n\t\tconst oneIsDirectory = ResourceTree.isResourceNode(one);\n\t\tconst otherIsDirectory = ResourceTree.isResourceNode(other);\n\n\t\tif (oneIsDirectory !== otherIsDirectory) {\n\t\t\treturn oneIsDirectory ? -1 : 1;\n\t\t}\n\n\t\tconst oneName = ResourceTree.isResourceNode(one) ? one.name : basename((one as ISCMResource).sourceUri);\n\t\tconst otherName = ResourceTree.isResourceNode(other) ? other.name : basename((other as ISCMResource).sourceUri);\n\n\t\treturn compareFileNames(oneName, otherName);\n\t}\n}\n\nexport class SCMTreeKeyboardNavigationLabelProvider implements ICompressibleKeyboardNavigationLabelProvider<TreeElement> {\n\n\tconstructor(\n\t\tprivate viewModelProvider: () => ViewModel,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t) { }\n\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string; } | { toString(): string; }[] | undefined {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn element.name;\n\t\t} else if (isSCMRepository(element)) {\n\t\t\treturn undefined;\n\t\t} else if (isSCMInput(element)) {\n\t\t\treturn undefined;\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.label;\n\t\t} else {\n\t\t\tconst viewModel = this.viewModelProvider();\n\t\t\tif (viewModel.mode === ViewModelMode.List) {\n\t\t\t\t// In List mode match using the file name and the path.\n\t\t\t\t// Since we want to match both on the file name and the\n\t\t\t\t// full path we return an array of labels. A match in the\n\t\t\t\t// file name takes precedence over a match in the path.\n\t\t\t\tconst fileName = basename(element.sourceUri);\n\t\t\t\tconst filePath = this.labelService.getUriLabel(element.sourceUri, { relative: true });\n\n\t\t\t\treturn [fileName, filePath];\n\t\t\t} else {\n\t\t\t\t// In Tree mode only match using the file name\n\t\t\t\treturn basename(element.sourceUri);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCompressedNodeKeyboardNavigationLabel(elements: TreeElement[]): { toString(): string | undefined; } | undefined {\n\t\tconst folders = elements as IResourceNode<ISCMResource, ISCMResourceGroup>[];\n\t\treturn folders.map(e => e.name).join('/');\n\t}\n}\n\nfunction getSCMResourceId(element: TreeElement): string {\n\tif (ResourceTree.isResourceNode(element)) {\n\t\tconst group = element.context;\n\t\treturn `folder:${group.provider.id}/${group.id}/$FOLDER/${element.uri.toString()}`;\n\t} else if (isSCMRepository(element)) {\n\t\tconst provider = element.provider;\n\t\treturn `repo:${provider.id}`;\n\t} else if (isSCMInput(element)) {\n\t\tconst provider = element.repository.provider;\n\t\treturn `input:${provider.id}`;\n\t} else if (isSCMResource(element)) {\n\t\tconst group = element.resourceGroup;\n\t\tconst provider = group.provider;\n\t\treturn `resource:${provider.id}/${group.id}/${element.sourceUri.toString()}`;\n\t} else {\n\t\tconst provider = element.provider;\n\t\treturn `group:${provider.id}/${element.id}`;\n\t}\n}\n\nclass SCMResourceIdentityProvider implements IIdentityProvider<TreeElement> {\n\n\tgetId(element: TreeElement): string {\n\t\treturn getSCMResourceId(element);\n\t}\n}\n\nexport class SCMAccessibilityProvider implements IListAccessibilityProvider<TreeElement> {\n\n\tconstructor(\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('scm', \"Source Control Management\");\n\t}\n\n\tgetAriaLabel(element: TreeElement): string {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn this.labelService.getUriLabel(element.uri, { relative: true, noPrefix: true }) || element.name;\n\t\t} else if (isSCMRepository(element)) {\n\t\t\tlet folderName = '';\n\t\t\tif (element.provider.rootUri) {\n\t\t\t\tconst folder = this.workspaceContextService.getWorkspaceFolder(element.provider.rootUri);\n\n\t\t\t\tif (folder?.uri.toString() === element.provider.rootUri.toString()) {\n\t\t\t\t\tfolderName = folder.name;\n\t\t\t\t} else {\n\t\t\t\t\tfolderName = basename(element.provider.rootUri);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn `${folderName} ${element.provider.label}`;\n\t\t} else if (isSCMInput(element)) {\n\t\t\treturn localize('input', \"Source Control Input\");\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.label;\n\t\t} else {\n\t\t\tconst result: string[] = [];\n\n\t\t\tresult.push(basename(element.sourceUri));\n\n\t\t\tif (element.decorations.tooltip) {\n\t\t\t\tresult.push(element.decorations.tooltip);\n\t\t\t}\n\n\t\t\tconst path = this.labelService.getUriLabel(dirname(element.sourceUri), { relative: true, noPrefix: true });\n\n\t\t\tif (path) {\n\t\t\t\tresult.push(path);\n\t\t\t}\n\n\t\t\treturn result.join(', ');\n\t\t}\n\t}\n}\n\ninterface IGroupItem {\n\treadonly element: ISCMResourceGroup;\n\treadonly resources: ISCMResource[];\n\treadonly tree: ResourceTree<ISCMResource, ISCMResourceGroup>;\n\tdispose(): void;\n}\n\ninterface IRepositoryItem {\n\treadonly element: ISCMRepository;\n\treadonly groupItems: IGroupItem[];\n\tdispose(): void;\n}\n\ninterface ITreeViewState {\n\treadonly collapsed: string[];\n}\n\nfunction isRepositoryItem(item: IRepositoryItem | IGroupItem): item is IRepositoryItem {\n\treturn Array.isArray((item as IRepositoryItem).groupItems);\n}\n\nfunction asTreeElement(node: IResourceNode<ISCMResource, ISCMResourceGroup>, forceIncompressible: boolean, viewState?: ITreeViewState): ICompressedTreeElement<TreeElement> {\n\tconst element = (node.childrenCount === 0 && node.element) ? node.element : node;\n\tconst collapsed = viewState ? viewState.collapsed.indexOf(getSCMResourceId(element)) > -1 : false;\n\n\treturn {\n\t\telement,\n\t\tchildren: Iterable.map(node.children, node => asTreeElement(node, false, viewState)),\n\t\tincompressible: !!node.element || forceIncompressible,\n\t\tcollapsed,\n\t\tcollapsible: node.childrenCount > 0\n\t};\n}\n\nconst enum ViewModelMode {\n\tList = 'list',\n\tTree = 'tree'\n}\n\nconst enum ViewModelSortKey {\n\tPath = 'path',\n\tName = 'name',\n\tStatus = 'status'\n}\n\nconst Menus = {\n\tViewSort: new MenuId('SCMViewSort'),\n\tRepositories: new MenuId('SCMRepositories'),\n};\n\nconst ContextKeys = {\n\tViewModelMode: new RawContextKey<ViewModelMode>('scmViewModelMode', ViewModelMode.List),\n\tViewModelSortKey: new RawContextKey<ViewModelSortKey>('scmViewModelSortKey', ViewModelSortKey.Path),\n\tViewModelAreAllRepositoriesCollapsed: new RawContextKey<boolean>('scmViewModelAreAllRepositoriesCollapsed', false),\n\tViewModelIsAnyRepositoryCollapsible: new RawContextKey<boolean>('scmViewModelIsAnyRepositoryCollapsible', false),\n\tSCMProvider: new RawContextKey<string | undefined>('scmProvider', undefined),\n\tSCMProviderRootUri: new RawContextKey<string | undefined>('scmProviderRootUri', undefined),\n\tSCMProviderHasRootUri: new RawContextKey<boolean>('scmProviderHasRootUri', undefined),\n\tRepositoryCount: new RawContextKey<number>('scmRepositoryCount', 0),\n\tRepositoryVisibilityCount: new RawContextKey<number>('scmRepositoryVisibleCount', 0),\n\tRepositoryVisibility(repository: ISCMRepository) {\n\t\treturn new RawContextKey<boolean>(`scmRepositoryVisible:${repository.provider.id}`, false);\n\t}\n};\n\nMenuRegistry.appendMenuItem(MenuId.SCMTitle, {\n\ttitle: localize('sortAction', \"View & Sort\"),\n\tsubmenu: Menus.ViewSort,\n\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0)),\n\tgroup: '0_view&sort'\n});\n\nMenuRegistry.appendMenuItem(Menus.ViewSort, {\n\ttitle: localize('repositories', \"Repositories\"),\n\tsubmenu: Menus.Repositories,\n\tgroup: '0_repositories'\n});\n\nclass RepositoryVisibilityAction extends Action2 {\n\n\tprivate repository: ISCMRepository;\n\n\tconstructor(repository: ISCMRepository) {\n\t\tconst title = repository.provider.rootUri ? basename(repository.provider.rootUri) : repository.provider.label;\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.toggleRepositoryVisibility.${repository.provider.id}`,\n\t\t\ttitle,\n\t\t\tf1: false,\n\t\t\tprecondition: ContextKeyExpr.or(ContextKeys.RepositoryVisibilityCount.notEqualsTo(1), ContextKeys.RepositoryVisibility(repository).isEqualTo(false)),\n\t\t\ttoggled: ContextKeys.RepositoryVisibility(repository).isEqualTo(true),\n\t\t\tmenu: { id: Menus.Repositories }\n\t\t});\n\t\tthis.repository = repository;\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst scmViewService = accessor.get(ISCMViewService);\n\t\tscmViewService.toggleVisibility(this.repository);\n\t}\n}\n\ninterface RepositoryVisibilityItem {\n\treadonly contextKey: IContextKey<boolean>;\n\tdispose(): void;\n}\n\nclass RepositoryVisibilityActionController {\n\n\tprivate items = new Map<ISCMRepository, RepositoryVisibilityItem>();\n\tprivate repositoryCountContextKey: IContextKey<number>;\n\tprivate repositoryVisibilityCountContextKey: IContextKey<number>;\n\tprivate disposables = new DisposableStore();\n\n\tconstructor(\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@ISCMService scmService: ISCMService,\n\t\t@IContextKeyService private contextKeyService: IContextKeyService\n\t) {\n\t\tthis.repositoryCountContextKey = ContextKeys.RepositoryCount.bindTo(contextKeyService);\n\t\tthis.repositoryVisibilityCountContextKey = ContextKeys.RepositoryVisibilityCount.bindTo(contextKeyService);\n\n\t\tscmViewService.onDidChangeVisibleRepositories(this.onDidChangeVisibleRepositories, this, this.disposables);\n\t\tscmService.onDidAddRepository(this.onDidAddRepository, this, this.disposables);\n\t\tscmService.onDidRemoveRepository(this.onDidRemoveRepository, this, this.disposables);\n\n\t\tfor (const repository of scmService.repositories) {\n\t\t\tthis.onDidAddRepository(repository);\n\t\t}\n\t}\n\n\tprivate onDidAddRepository(repository: ISCMRepository): void {\n\t\tconst action = registerAction2(class extends RepositoryVisibilityAction {\n\t\t\tconstructor() {\n\t\t\t\tsuper(repository);\n\t\t\t}\n\t\t});\n\n\t\tconst contextKey = ContextKeys.RepositoryVisibility(repository).bindTo(this.contextKeyService);\n\t\tcontextKey.set(this.scmViewService.isVisible(repository));\n\n\t\tthis.items.set(repository, {\n\t\t\tcontextKey,\n\t\t\tdispose() {\n\t\t\t\tcontextKey.reset();\n\t\t\t\taction.dispose();\n\t\t\t}\n\t\t});\n\n\t\tthis.updateRepositoriesCounts();\n\t}\n\n\tprivate onDidRemoveRepository(repository: ISCMRepository): void {\n\t\tthis.items.get(repository)?.dispose();\n\t\tthis.items.delete(repository);\n\t\tthis.updateRepositoriesCounts();\n\t}\n\n\tprivate onDidChangeVisibleRepositories(): void {\n\t\tlet count = 0;\n\n\t\tfor (const [repository, item] of this.items) {\n\t\t\tconst isVisible = this.scmViewService.isVisible(repository);\n\t\t\titem.contextKey.set(isVisible);\n\n\t\t\tif (isVisible) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\tthis.repositoryCountContextKey.set(this.items.size);\n\t\tthis.repositoryVisibilityCountContextKey.set(count);\n\t}\n\n\tprivate updateRepositoriesCounts(): void {\n\t\tthis.repositoryCountContextKey.set(this.items.size);\n\t\tthis.repositoryVisibilityCountContextKey.set(Iterable.reduce(this.items.keys(), (r, repository) => r + (this.scmViewService.isVisible(repository) ? 1 : 0), 0));\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t\tdispose(this.items.values());\n\t\tthis.items.clear();\n\t}\n}\n\nclass ViewModel {\n\n\tprivate readonly _onDidChangeMode = new Emitter<ViewModelMode>();\n\treadonly onDidChangeMode = this._onDidChangeMode.event;\n\n\tprivate visible: boolean = false;\n\n\tget mode(): ViewModelMode { return this._mode; }\n\tset mode(mode: ViewModelMode) {\n\t\tif (this._mode === mode) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mode = mode;\n\n\t\tfor (const [, item] of this.items) {\n\t\t\tfor (const groupItem of item.groupItems) {\n\t\t\t\tgroupItem.tree.clear();\n\n\t\t\t\tif (mode === ViewModelMode.Tree) {\n\t\t\t\t\tfor (const resource of groupItem.resources) {\n\t\t\t\t\t\tgroupItem.tree.add(resource.sourceUri, resource);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.refresh();\n\t\tthis._onDidChangeMode.fire(mode);\n\t\tthis.modeContextKey.set(mode);\n\t}\n\n\tprivate _sortKey: ViewModelSortKey = ViewModelSortKey.Path;\n\tget sortKey(): ViewModelSortKey { return this._sortKey; }\n\tset sortKey(sortKey: ViewModelSortKey) {\n\t\tif (sortKey !== this._sortKey) {\n\t\t\tthis._sortKey = sortKey;\n\t\t\tthis.refresh();\n\t\t}\n\t\tthis.sortKeyContextKey.set(sortKey);\n\t}\n\n\tprivate _treeViewStateIsStale = false;\n\tget treeViewState(): ITreeViewState | undefined {\n\t\tif (this.visible && this._treeViewStateIsStale) {\n\t\t\tthis.updateViewState();\n\t\t\tthis._treeViewStateIsStale = false;\n\t\t}\n\n\t\treturn this._treeViewState;\n\t}\n\n\tprivate items = new Map<ISCMRepository, IRepositoryItem>();\n\tprivate visibilityDisposables = new DisposableStore();\n\tprivate scrollTop: number | undefined;\n\tprivate alwaysShowRepositories = false;\n\tprivate firstVisible = true;\n\tprivate disposables = new DisposableStore();\n\n\tprivate modeContextKey: IContextKey<ViewModelMode>;\n\tprivate sortKeyContextKey: IContextKey<ViewModelSortKey>;\n\tprivate areAllRepositoriesCollapsedContextKey: IContextKey<boolean>;\n\tprivate isAnyRepositoryCollapsibleContextKey: IContextKey<boolean>;\n\tprivate scmProviderContextKey: IContextKey<string | undefined>;\n\tprivate scmProviderRootUriContextKey: IContextKey<string | undefined>;\n\tprivate scmProviderHasRootUriContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\tprivate tree: WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>,\n\t\tprivate inputRenderer: InputRenderer,\n\t\tprivate _mode: ViewModelMode,\n\t\tprivate _treeViewState: ITreeViewState | undefined,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@IConfigurationService protected configurationService: IConfigurationService,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IUriIdentityService private uriIdentityService: IUriIdentityService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tthis.modeContextKey = ContextKeys.ViewModelMode.bindTo(contextKeyService);\n\t\tthis.modeContextKey.set(_mode);\n\t\tthis.sortKeyContextKey = ContextKeys.ViewModelSortKey.bindTo(contextKeyService);\n\t\tthis.sortKeyContextKey.set(this._sortKey);\n\t\tthis.areAllRepositoriesCollapsedContextKey = ContextKeys.ViewModelAreAllRepositoriesCollapsed.bindTo(contextKeyService);\n\t\tthis.isAnyRepositoryCollapsibleContextKey = ContextKeys.ViewModelIsAnyRepositoryCollapsible.bindTo(contextKeyService);\n\t\tthis.scmProviderContextKey = ContextKeys.SCMProvider.bindTo(contextKeyService);\n\t\tthis.scmProviderRootUriContextKey = ContextKeys.SCMProviderRootUri.bindTo(contextKeyService);\n\t\tthis.scmProviderHasRootUriContextKey = ContextKeys.SCMProviderHasRootUri.bindTo(contextKeyService);\n\n\t\tconfigurationService.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this.disposables);\n\t\tthis.onDidChangeConfiguration();\n\n\t\tEvent.filter(this.tree.onDidChangeCollapseState, e => isSCMRepository(e.node.element))\n\t\t\t(this.updateRepositoryCollapseAllContextKeys, this, this.disposables);\n\n\t\tthis.disposables.add(this.tree.onDidChangeCollapseState(() => this._treeViewStateIsStale = true));\n\t}\n\n\tprivate onDidChangeConfiguration(e?: IConfigurationChangeEvent): void {\n\t\tif (!e || e.affectsConfiguration('scm.alwaysShowRepositories')) {\n\t\t\tthis.alwaysShowRepositories = this.configurationService.getValue<boolean>('scm.alwaysShowRepositories');\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate _onDidChangeVisibleRepositories({ added, removed }: ISCMViewVisibleRepositoryChangeEvent): void {\n\t\tfor (const repository of added) {\n\t\t\tconst disposable = combinedDisposable(\n\t\t\t\trepository.provider.groups.onDidSplice(splice => this._onDidSpliceGroups(item, splice)),\n\t\t\t\trepository.input.onDidChangeVisibility(() => this.refresh(item))\n\t\t\t);\n\t\t\tconst groupItems = repository.provider.groups.elements.map(group => this.createGroupItem(group));\n\t\t\tconst item: IRepositoryItem = {\n\t\t\t\telement: repository, groupItems, dispose() {\n\t\t\t\t\tdispose(this.groupItems);\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.items.set(repository, item);\n\t\t}\n\n\t\tfor (const repository of removed) {\n\t\t\tconst item = this.items.get(repository)!;\n\t\t\titem.dispose();\n\t\t\tthis.items.delete(repository);\n\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\tprivate _onDidSpliceGroups(item: IRepositoryItem, { start, deleteCount, toInsert }: ISplice<ISCMResourceGroup>): void {\n\t\tconst itemsToInsert: IGroupItem[] = toInsert.map(group => this.createGroupItem(group));\n\t\tconst itemsToDispose = item.groupItems.splice(start, deleteCount, ...itemsToInsert);\n\n\t\tfor (const item of itemsToDispose) {\n\t\t\titem.dispose();\n\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\tprivate createGroupItem(group: ISCMResourceGroup): IGroupItem {\n\t\tconst tree = new ResourceTree<ISCMResource, ISCMResourceGroup>(group, group.provider.rootUri || URI.file('/'), this.uriIdentityService.extUri);\n\t\tconst resources: ISCMResource[] = [...group.elements];\n\t\tconst disposable = combinedDisposable(\n\t\t\tgroup.onDidChange(() => this.tree.refilter()),\n\t\t\tgroup.onDidSplice(splice => this._onDidSpliceGroup(item, splice))\n\t\t);\n\n\t\tconst item: IGroupItem = { element: group, resources, tree, dispose() { disposable.dispose(); } };\n\n\t\tif (this._mode === ViewModelMode.Tree) {\n\t\t\tfor (const resource of resources) {\n\t\t\t\titem.tree.add(resource.sourceUri, resource);\n\t\t\t}\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tprivate _onDidSpliceGroup(item: IGroupItem, { start, deleteCount, toInsert }: ISplice<ISCMResource>): void {\n\t\tconst before = item.resources.length;\n\t\tconst deleted = item.resources.splice(start, deleteCount, ...toInsert);\n\t\tconst after = item.resources.length;\n\n\t\tif (this._mode === ViewModelMode.Tree) {\n\t\t\tfor (const resource of deleted) {\n\t\t\t\titem.tree.delete(resource.sourceUri);\n\t\t\t}\n\n\t\t\tfor (const resource of toInsert) {\n\t\t\t\titem.tree.add(resource.sourceUri, resource);\n\t\t\t}\n\t\t}\n\n\t\tif (before !== after && (before === 0 || after === 0)) {\n\t\t\tthis.refresh();\n\t\t} else {\n\t\t\tthis.refresh(item);\n\t\t}\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tthis.visibilityDisposables = new DisposableStore();\n\t\t\tthis.scmViewService.onDidChangeVisibleRepositories(this._onDidChangeVisibleRepositories, this, this.visibilityDisposables);\n\t\t\tthis._onDidChangeVisibleRepositories({ added: this.scmViewService.visibleRepositories, removed: Iterable.empty() });\n\n\t\t\tif (typeof this.scrollTop === 'number') {\n\t\t\t\tthis.tree.scrollTop = this.scrollTop;\n\t\t\t\tthis.scrollTop = undefined;\n\t\t\t}\n\n\t\t\tthis.editorService.onDidActiveEditorChange(this.onDidActiveEditorChange, this, this.visibilityDisposables);\n\t\t\tthis.onDidActiveEditorChange();\n\t\t} else {\n\t\t\tthis.updateViewState();\n\n\t\t\tthis.visibilityDisposables.dispose();\n\t\t\tthis._onDidChangeVisibleRepositories({ added: Iterable.empty(), removed: [...this.items.keys()] });\n\t\t\tthis.scrollTop = this.tree.scrollTop;\n\t\t}\n\n\t\tthis.visible = visible;\n\t\tthis.updateRepositoryCollapseAllContextKeys();\n\t}\n\n\tprivate refresh(item?: IRepositoryItem | IGroupItem): void {\n\t\tif (!this.alwaysShowRepositories && this.items.size === 1) {\n\t\t\tconst provider = Iterable.first(this.items.values())!.element.provider;\n\t\t\tthis.scmProviderContextKey.set(provider.contextValue);\n\t\t\tthis.scmProviderRootUriContextKey.set(provider.rootUri?.toString());\n\t\t\tthis.scmProviderHasRootUriContextKey.set(!!provider.rootUri);\n\t\t} else {\n\t\t\tthis.scmProviderContextKey.set(undefined);\n\t\t\tthis.scmProviderRootUriContextKey.set(undefined);\n\t\t\tthis.scmProviderHasRootUriContextKey.set(false);\n\t\t}\n\n\t\tif (!this.alwaysShowRepositories && (this.items.size === 1 && (!item || isRepositoryItem(item)))) {\n\t\t\tconst item = Iterable.first(this.items.values())!;\n\t\t\tthis.tree.setChildren(null, this.render(item, this.treeViewState).children);\n\t\t} else if (item) {\n\t\t\tthis.tree.setChildren(item.element, this.render(item, this.treeViewState).children);\n\t\t} else {\n\t\t\tconst items = coalesce(this.scmViewService.visibleRepositories.map(r => this.items.get(r)));\n\t\t\tthis.tree.setChildren(null, items.map(item => this.render(item, this.treeViewState)));\n\t\t}\n\n\t\tthis.updateRepositoryCollapseAllContextKeys();\n\t}\n\n\tprivate render(item: IRepositoryItem | IGroupItem, treeViewState?: ITreeViewState): ICompressedTreeElement<TreeElement> {\n\t\tif (isRepositoryItem(item)) {\n\t\t\tconst children: ICompressedTreeElement<TreeElement>[] = [];\n\t\t\tconst hasSomeChanges = item.groupItems.some(item => item.element.elements.length > 0);\n\n\t\t\tif (item.element.input.visible) {\n\t\t\t\tchildren.push({ element: item.element.input, incompressible: true, collapsible: false });\n\t\t\t}\n\n\t\t\tif (this.items.size === 1 || hasSomeChanges) {\n\t\t\t\tchildren.push(...item.groupItems.map(i => this.render(i, treeViewState)));\n\t\t\t}\n\n\t\t\tconst collapsed = treeViewState ? treeViewState.collapsed.indexOf(getSCMResourceId(item.element)) > -1 : false;\n\n\t\t\treturn { element: item.element, children, incompressible: true, collapsed, collapsible: true };\n\t\t} else {\n\t\t\tconst children = this.mode === ViewModelMode.List\n\t\t\t\t? Iterable.map(item.resources, element => ({ element, incompressible: true }))\n\t\t\t\t: Iterable.map(item.tree.root.children, node => asTreeElement(node, true, treeViewState));\n\n\t\t\tconst collapsed = treeViewState ? treeViewState.collapsed.indexOf(getSCMResourceId(item.element)) > -1 : false;\n\n\t\t\treturn { element: item.element, children, incompressible: true, collapsed, collapsible: true };\n\t\t}\n\t}\n\n\tprivate updateViewState(): void {\n\t\tconst collapsed: string[] = [];\n\t\tconst visit = (node: ITreeNode<TreeElement | null, FuzzyScore>) => {\n\t\t\tif (node.element && node.collapsible && node.collapsed) {\n\t\t\t\tcollapsed.push(getSCMResourceId(node.element));\n\t\t\t}\n\n\t\t\tfor (const child of node.children) {\n\t\t\t\tvisit(child);\n\t\t\t}\n\t\t};\n\n\t\tvisit(this.tree.getNode());\n\n\t\tthis._treeViewState = { collapsed };\n\t}\n\n\tprivate onDidActiveEditorChange(): void {\n\t\tif (!this.configurationService.getValue<boolean>('scm.autoReveal')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.firstVisible) {\n\t\t\tthis.firstVisible = false;\n\t\t\tthis.visibilityDisposables.add(disposableTimeout(() => this.onDidActiveEditorChange(), 250));\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tconst item = this.items.get(repository);\n\n\t\t\tif (!item) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// go backwards from last group\n\t\t\tfor (let j = item.groupItems.length - 1; j >= 0; j--) {\n\t\t\t\tconst groupItem = item.groupItems[j];\n\t\t\t\tconst resource = this.mode === ViewModelMode.Tree\n\t\t\t\t\t? groupItem.tree.getNode(uri)?.element\n\t\t\t\t\t: groupItem.resources.find(r => this.uriIdentityService.extUri.isEqual(r.sourceUri, uri));\n\n\t\t\t\tif (resource) {\n\t\t\t\t\tthis.tree.reveal(resource);\n\t\t\t\t\tthis.tree.setSelection([resource]);\n\t\t\t\t\tthis.tree.setFocus([resource]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfocus() {\n\t\tif (this.tree.getFocus().length === 0) {\n\t\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\t\tconst widget = this.inputRenderer.getRenderedInputWidget(repository.input);\n\n\t\t\t\tif (widget) {\n\t\t\t\t\twidget.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.tree.domFocus();\n\t}\n\n\tprivate updateRepositoryCollapseAllContextKeys(): void {\n\t\tif (!this.visible || this.scmViewService.visibleRepositories.length === 1) {\n\t\t\tthis.isAnyRepositoryCollapsibleContextKey.set(false);\n\t\t\tthis.areAllRepositoriesCollapsedContextKey.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isAnyRepositoryCollapsibleContextKey.set(this.scmViewService.visibleRepositories.some(r => this.tree.hasElement(r) && this.tree.isCollapsible(r)));\n\t\tthis.areAllRepositoriesCollapsedContextKey.set(this.scmViewService.visibleRepositories.every(r => this.tree.hasElement(r) && (!this.tree.isCollapsible(r) || this.tree.isCollapsed(r))));\n\t}\n\n\tcollapseAllRepositories(): void {\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tif (this.tree.isCollapsible(repository)) {\n\t\t\t\tthis.tree.collapse(repository);\n\t\t\t}\n\t\t}\n\t}\n\n\texpandAllRepositories(): void {\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tif (this.tree.isCollapsible(repository)) {\n\t\t\t\tthis.tree.expand(repository);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.visibilityDisposables.dispose();\n\t\tthis.disposables.dispose();\n\t\tdispose(this.items.values());\n\t\tthis.items.clear();\n\t}\n}\n\nclass SetListViewModeAction extends ViewAction<SCMViewPane>  {\n\tconstructor(menu: Partial<IAction2Options['menu']> = {}) {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.setListViewMode',\n\t\t\ttitle: localize('setListViewMode', \"View as List\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.listFlat,\n\t\t\ttoggled: ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.List),\n\t\t\tmenu: { id: Menus.ViewSort, group: '1_viewmode', ...menu }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.mode = ViewModelMode.List;\n\t}\n}\n\nclass SetListViewModeNavigationAction extends SetListViewModeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: MenuId.SCMTitle,\n\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0), ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.Tree)),\n\t\t\tgroup: 'navigation',\n\t\t\torder: -1000\n\t\t});\n\t}\n}\n\nclass SetTreeViewModeAction extends ViewAction<SCMViewPane>  {\n\tconstructor(menu: Partial<IAction2Options['menu']> = {}) {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.setTreeViewMode',\n\t\t\ttitle: localize('setTreeViewMode', \"View as Tree\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.listTree,\n\t\t\ttoggled: ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.Tree),\n\t\t\tmenu: { id: Menus.ViewSort, group: '1_viewmode', ...menu }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.mode = ViewModelMode.Tree;\n\t}\n}\n\nclass SetTreeViewModeNavigationAction extends SetTreeViewModeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: MenuId.SCMTitle,\n\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0), ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.List)),\n\t\t\tgroup: 'navigation',\n\t\t\torder: -1000\n\t\t});\n\t}\n}\n\nregisterAction2(SetListViewModeAction);\nregisterAction2(SetTreeViewModeAction);\nregisterAction2(SetListViewModeNavigationAction);\nregisterAction2(SetTreeViewModeNavigationAction);\n\nabstract class SetSortKeyAction extends ViewAction<SCMViewPane>  {\n\tconstructor(private sortKey: ViewModelSortKey, title: string) {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.setSortKey.${sortKey}`,\n\t\t\ttitle: title,\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ttoggled: ContextKeys.ViewModelSortKey.isEqualTo(sortKey),\n\t\t\tmenu: { id: Menus.ViewSort, group: '2_sort' }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.sortKey = this.sortKey;\n\t}\n}\n\nclass SetSortByNameAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Name, localize('sortByName', \"Sort by Name\"));\n\t}\n}\n\nclass SetSortByPathAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Path, localize('sortByPath', \"Sort by Path\"));\n\t}\n}\n\nclass SetSortByStatusAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Status, localize('sortByStatus', \"Sort by Status\"));\n\t}\n}\n\nregisterAction2(SetSortByNameAction);\nregisterAction2(SetSortByPathAction);\nregisterAction2(SetSortByStatusAction);\n\nclass CollapseAllRepositoriesAction extends ViewAction<SCMViewPane>  {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.collapseAllRepositories`,\n\t\t\ttitle: localize('collapse all', \"Collapse All Repositories\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.ViewModelIsAnyRepositoryCollapsible.isEqualTo(true), ContextKeys.ViewModelAreAllRepositoriesCollapsed.isEqualTo(false))\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.collapseAllRepositories();\n\t}\n}\n\nclass ExpandAllRepositoriesAction extends ViewAction<SCMViewPane>  {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.expandAllRepositories`,\n\t\t\ttitle: localize('expand all', \"Expand All Repositories\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.expandAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.ViewModelIsAnyRepositoryCollapsible.isEqualTo(true), ContextKeys.ViewModelAreAllRepositoriesCollapsed.isEqualTo(true))\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.expandAllRepositories();\n\t}\n}\n\nregisterAction2(CollapseAllRepositoriesAction);\nregisterAction2(ExpandAllRepositoriesAction);\n\nclass SCMInputWidget extends Disposable {\n\tprivate static readonly ValidationTimeouts: { [severity: number]: number } = {\n\t\t[InputValidationType.Information]: 5000,\n\t\t[InputValidationType.Warning]: 8000,\n\t\t[InputValidationType.Error]: 10000\n\t};\n\n\tprivate readonly defaultInputFontFamily = DEFAULT_FONT_FAMILY;\n\n\tprivate element: HTMLElement;\n\tprivate editorContainer: HTMLElement;\n\tprivate placeholderTextContainer: HTMLElement;\n\tprivate inputEditor: CodeEditorWidget;\n\n\tprivate model: { readonly input: ISCMInput; readonly textModel: ITextModel; } | undefined;\n\tprivate repositoryContextKey: IContextKey<ISCMRepository | undefined>;\n\tprivate repositoryDisposables = new DisposableStore();\n\n\tprivate validation: IInputValidation | undefined;\n\tprivate validationDisposable: IDisposable = Disposable.None;\n\tprivate _validationTimer: any;\n\n\t// This is due to \"Setup height change listener on next tick\" above\n\t// https://github.com/microsoft/vscode/issues/108067\n\tprivate lastLayoutWasTrash = false;\n\tprivate shouldFocusAfterLayout = false;\n\n\treadonly onDidChangeContentHeight: Event<void>;\n\n\tget input(): ISCMInput | undefined {\n\t\treturn this.model?.input;\n\t}\n\n\tset input(input: ISCMInput | undefined) {\n\t\tif (input === this.input) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.validationDisposable.dispose();\n\t\tthis.editorContainer.classList.remove('synthetic-focus');\n\n\t\tthis.repositoryDisposables.dispose();\n\t\tthis.repositoryDisposables = new DisposableStore();\n\t\tthis.repositoryContextKey.set(input?.repository);\n\n\t\tif (!input) {\n\t\t\tthis.model?.textModel.dispose();\n\t\t\tthis.inputEditor.setModel(undefined);\n\t\t\tthis.model = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tlet query: string | undefined;\n\n\t\tif (input.repository.provider.rootUri) {\n\t\t\tquery = `rootUri=${encodeURIComponent(input.repository.provider.rootUri.toString())}`;\n\t\t}\n\n\t\tconst uri = URI.from({\n\t\t\tscheme: Schemas.vscode,\n\t\t\tpath: `scm/${input.repository.provider.contextValue}/${input.repository.provider.id}/input`,\n\t\t\tquery\n\t\t});\n\n\t\tif (this.configurationService.getValue('editor.wordBasedSuggestions', { resource: uri }) !== false) {\n\t\t\tthis.configurationService.updateValue('editor.wordBasedSuggestions', false, { resource: uri }, ConfigurationTarget.MEMORY);\n\t\t}\n\n\t\tconst textModel = this.modelService.getModel(uri) ?? this.modelService.createModel('', this.modeService.create('scminput'), uri);\n\t\tthis.inputEditor.setModel(textModel);\n\n\t\t// Validation\n\t\tconst validationDelayer = new ThrottledDelayer<any>(200);\n\t\tconst validate = async () => {\n\t\t\tconst position = this.inputEditor.getSelection()?.getStartPosition();\n\t\t\tconst offset = position && textModel.getOffsetAt(position);\n\t\t\tconst value = textModel.getValue();\n\n\t\t\tthis.setValidation(await input.validateInput(value, offset || 0));\n\t\t};\n\n\t\tconst triggerValidation = () => validationDelayer.trigger(validate);\n\t\tthis.repositoryDisposables.add(validationDelayer);\n\t\tthis.repositoryDisposables.add(this.inputEditor.onDidChangeCursorPosition(triggerValidation));\n\n\t\t// Adaptive indentation rules\n\t\tconst opts = this.modelService.getCreationOptions(textModel.getLanguageIdentifier().language, textModel.uri, textModel.isForSimpleWidget);\n\t\tconst onEnter = Event.filter(this.inputEditor.onKeyDown, e => e.keyCode === KeyCode.Enter);\n\t\tthis.repositoryDisposables.add(onEnter(() => textModel.detectIndentation(opts.insertSpaces, opts.tabSize)));\n\n\t\t// Keep model in sync with API\n\t\ttextModel.setValue(input.value);\n\t\tthis.repositoryDisposables.add(input.onDidChange(({ value, reason }) => {\n\t\t\tif (value === textModel.getValue()) { // circuit breaker\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttextModel.setValue(value);\n\n\t\t\tconst position = reason === SCMInputChangeReason.HistoryPrevious\n\t\t\t\t? textModel.getFullModelRange().getStartPosition()\n\t\t\t\t: textModel.getFullModelRange().getEndPosition();\n\t\t\tthis.inputEditor.setPosition(position);\n\t\t\tthis.inputEditor.revealPositionInCenterIfOutsideViewport(position);\n\t\t}));\n\t\tthis.repositoryDisposables.add(input.onDidChangeFocus(() => this.focus()));\n\t\tthis.repositoryDisposables.add(input.onDidChangeValidationMessage((e) => this.setValidation(e, { focus: true, timeout: true })));\n\n\t\t// Keep API in sync with model, update placeholder visibility and validate\n\t\tconst updatePlaceholderVisibility = () => this.placeholderTextContainer.classList.toggle('hidden', textModel.getValueLength() > 0);\n\t\tthis.repositoryDisposables.add(textModel.onDidChangeContent(() => {\n\t\t\tinput.setValue(textModel.getValue(), true);\n\t\t\tupdatePlaceholderVisibility();\n\t\t\ttriggerValidation();\n\t\t}));\n\t\tupdatePlaceholderVisibility();\n\n\t\t// Update placeholder text\n\t\tconst updatePlaceholderText = () => {\n\t\t\tconst binding = this.keybindingService.lookupKeybinding('scm.acceptInput');\n\t\t\tconst label = binding ? binding.getLabel() : (platform.isMacintosh ? 'Cmd+Enter' : 'Ctrl+Enter');\n\t\t\tconst placeholderText = format(input.placeholder, label);\n\n\t\t\tthis.inputEditor.updateOptions({ ariaLabel: placeholderText });\n\t\t\tthis.placeholderTextContainer.textContent = placeholderText;\n\t\t};\n\t\tthis.repositoryDisposables.add(input.onDidChangePlaceholder(updatePlaceholderText));\n\t\tthis.repositoryDisposables.add(this.keybindingService.onDidUpdateKeybindings(updatePlaceholderText));\n\t\tupdatePlaceholderText();\n\n\t\t// Update input template\n\t\tlet commitTemplate = '';\n\t\tconst updateTemplate = () => {\n\t\t\tif (typeof input.repository.provider.commitTemplate === 'undefined' || !input.visible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst oldCommitTemplate = commitTemplate;\n\t\t\tcommitTemplate = input.repository.provider.commitTemplate;\n\n\t\t\tconst value = textModel.getValue();\n\n\t\t\tif (value && value !== oldCommitTemplate) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttextModel.setValue(commitTemplate);\n\t\t};\n\t\tthis.repositoryDisposables.add(input.repository.provider.onDidChangeCommitTemplate(updateTemplate, this));\n\t\tupdateTemplate();\n\n\t\t// Save model\n\t\tthis.model = { input, textModel };\n\t}\n\n\tget selections(): Selection[] | null {\n\t\treturn this.inputEditor.getSelections();\n\t}\n\n\tset selections(selections: Selection[] | null) {\n\t\tif (selections) {\n\t\t\tthis.inputEditor.setSelections(selections);\n\t\t}\n\t}\n\n\tprivate setValidation(validation: IInputValidation | undefined, options?: { focus?: boolean; timeout?: boolean }) {\n\t\tif (this._validationTimer) {\n\t\t\tclearTimeout(this._validationTimer);\n\t\t\tthis._validationTimer = 0;\n\t\t}\n\n\t\tthis.validation = validation;\n\t\tthis.renderValidation();\n\n\t\tif (options?.focus && !this.hasFocus()) {\n\t\t\tthis.focus();\n\t\t}\n\n\t\tif (validation && options?.timeout) {\n\t\t\tthis._validationTimer = setTimeout(() => this.setValidation(undefined), SCMInputWidget.ValidationTimeouts[validation.type]);\n\t\t}\n\t}\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toverflowWidgetsDomNode: HTMLElement,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IModelService private modelService: IModelService,\n\t\t@IModeService private modeService: IModeService,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ISCMViewService private readonly scmViewService: ISCMViewService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService\n\t) {\n\t\tsuper();\n\n\t\tthis.element = append(container, $('.scm-editor'));\n\t\tthis.editorContainer = append(this.element, $('.scm-editor-container'));\n\t\tthis.placeholderTextContainer = append(this.editorContainer, $('.scm-editor-placeholder'));\n\n\t\tconst fontFamily = this.getInputEditorFontFamily();\n\t\tconst fontSize = this.getInputEditorFontSize();\n\t\tconst lineHeight = this.computeLineHeight(fontSize);\n\n\t\tthis.setPlaceholderFontStyles(fontFamily, fontSize, lineHeight);\n\n\t\tconst contextKeyService2 = contextKeyService.createScoped(this.element);\n\t\tthis.repositoryContextKey = contextKeyService2.createKey('scmRepository', undefined);\n\n\t\tconst editorOptions: IEditorConstructionOptions = {\n\t\t\t...getSimpleEditorOptions(),\n\t\t\tlineDecorationsWidth: 4,\n\t\t\tdragAndDrop: false,\n\t\t\tcursorWidth: 1,\n\t\t\tfontSize: fontSize,\n\t\t\tlineHeight: lineHeight,\n\t\t\tfontFamily: fontFamily,\n\t\t\twrappingStrategy: 'advanced',\n\t\t\twrappingIndent: 'none',\n\t\t\tpadding: { top: 3, bottom: 3 },\n\t\t\tquickSuggestions: false,\n\t\t\tscrollbar: { alwaysConsumeMouseWheel: false },\n\t\t\toverflowWidgetsDomNode,\n\t\t\trenderWhitespace: 'none'\n\t\t};\n\n\t\tconst codeEditorWidgetOptions: ICodeEditorWidgetOptions = {\n\t\t\tisSimpleWidget: true,\n\t\t\tcontributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\tSuggestController.ID,\n\t\t\t\tSnippetController2.ID,\n\t\t\t\tMenuPreventer.ID,\n\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\tContextMenuController.ID,\n\t\t\t\tColorDetector.ID,\n\t\t\t\tModesHoverController.ID,\n\t\t\t\tLinkDetector.ID\n\t\t\t])\n\t\t};\n\n\t\tconst services = new ServiceCollection([IContextKeyService, contextKeyService2]);\n\t\tconst instantiationService2 = instantiationService.createChild(services);\n\t\tthis.inputEditor = instantiationService2.createInstance(CodeEditorWidget, this.editorContainer, editorOptions, codeEditorWidgetOptions);\n\t\tthis._register(this.inputEditor);\n\n\t\tthis._register(this.inputEditor.onDidFocusEditorText(() => {\n\t\t\tif (this.input?.repository) {\n\t\t\t\tthis.scmViewService.focus(this.input.repository);\n\t\t\t}\n\n\t\t\tthis.editorContainer.classList.add('synthetic-focus');\n\t\t\tthis.renderValidation();\n\t\t}));\n\t\tthis._register(this.inputEditor.onDidBlurEditorText(() => {\n\t\t\tthis.editorContainer.classList.remove('synthetic-focus');\n\t\t\tthis.validationDisposable.dispose();\n\t\t}));\n\n\t\tconst firstLineKey = contextKeyService2.createKey('scmInputIsInFirstPosition', false);\n\t\tconst lastLineKey = contextKeyService2.createKey('scmInputIsInLastPosition', false);\n\n\t\tthis._register(this.inputEditor.onDidChangeCursorPosition(({ position }) => {\n\t\t\tconst viewModel = this.inputEditor._getViewModel()!;\n\t\t\tconst lastLineNumber = viewModel.getLineCount();\n\t\t\tconst lastLineCol = viewModel.getLineContent(lastLineNumber).length + 1;\n\t\t\tconst viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(position);\n\t\t\tfirstLineKey.set(viewPosition.lineNumber === 1 && viewPosition.column === 1);\n\t\t\tlastLineKey.set(viewPosition.lineNumber === lastLineNumber && viewPosition.column === lastLineCol);\n\t\t}));\n\n\t\tconst onInputFontFamilyChanged = Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.inputFontFamily') || e.affectsConfiguration('scm.inputFontSize'));\n\t\tthis._register(onInputFontFamilyChanged(() => {\n\t\t\tconst fontFamily = this.getInputEditorFontFamily();\n\t\t\tconst fontSize = this.getInputEditorFontSize();\n\t\t\tconst lineHeight = this.computeLineHeight(fontSize);\n\n\t\t\tthis.inputEditor.updateOptions({\n\t\t\t\tfontFamily: fontFamily,\n\t\t\t\tfontSize: fontSize,\n\t\t\t\tlineHeight: lineHeight,\n\t\t\t});\n\n\t\t\tthis.setPlaceholderFontStyles(fontFamily, fontSize, lineHeight);\n\t\t}));\n\n\t\tthis.onDidChangeContentHeight = Event.signal(Event.filter(this.inputEditor.onDidContentSizeChange, e => e.contentHeightChanged));\n\t}\n\n\tgetContentHeight(): number {\n\t\tconst editorContentHeight = this.inputEditor.getContentHeight();\n\t\treturn Math.min(editorContentHeight, 134);\n\t}\n\n\tlayout(): void {\n\t\tconst editorHeight = this.getContentHeight();\n\t\tconst dimension = new Dimension(this.element.clientWidth - 2, editorHeight);\n\n\t\tif (dimension.width < 0) {\n\t\t\tthis.lastLayoutWasTrash = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastLayoutWasTrash = false;\n\t\tthis.inputEditor.layout(dimension);\n\t\tthis.renderValidation();\n\n\t\tif (this.shouldFocusAfterLayout) {\n\t\t\tthis.shouldFocusAfterLayout = false;\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\tfocus(): void {\n\t\tif (this.lastLayoutWasTrash) {\n\t\t\tthis.lastLayoutWasTrash = false;\n\t\t\tthis.shouldFocusAfterLayout = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.inputEditor.focus();\n\t\tthis.editorContainer.classList.add('synthetic-focus');\n\t}\n\n\thasFocus(): boolean {\n\t\treturn this.inputEditor.hasTextFocus();\n\t}\n\n\tprivate renderValidation(): void {\n\t\tthis.validationDisposable.dispose();\n\n\t\tthis.editorContainer.classList.toggle('validation-info', this.validation?.type === InputValidationType.Information);\n\t\tthis.editorContainer.classList.toggle('validation-warning', this.validation?.type === InputValidationType.Warning);\n\t\tthis.editorContainer.classList.toggle('validation-error', this.validation?.type === InputValidationType.Error);\n\n\t\tif (!this.validation || !this.inputEditor.hasTextFocus()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.validationDisposable = this.contextViewService.showContextView({\n\t\t\tgetAnchor: () => this.editorContainer,\n\t\t\trender: container => {\n\t\t\t\tconst element = append(container, $('.scm-editor-validation'));\n\t\t\t\telement.classList.toggle('validation-info', this.validation!.type === InputValidationType.Information);\n\t\t\t\telement.classList.toggle('validation-warning', this.validation!.type === InputValidationType.Warning);\n\t\t\t\telement.classList.toggle('validation-error', this.validation!.type === InputValidationType.Error);\n\t\t\t\telement.style.width = `${this.editorContainer.clientWidth}px`;\n\t\t\t\telement.textContent = this.validation!.message;\n\t\t\t\treturn Disposable.None;\n\t\t\t},\n\t\t\tanchorAlignment: AnchorAlignment.LEFT\n\t\t});\n\t}\n\n\tprivate getInputEditorFontFamily(): string {\n\t\tconst inputFontFamily = this.configurationService.getValue<string>('scm.inputFontFamily').trim();\n\n\t\tif (inputFontFamily.toLowerCase() === 'editor') {\n\t\t\treturn this.configurationService.getValue<string>('editor.fontFamily').trim();\n\t\t}\n\n\t\tif (inputFontFamily.length !== 0 && inputFontFamily.toLowerCase() !== 'default') {\n\t\t\treturn inputFontFamily;\n\t\t}\n\n\t\treturn this.defaultInputFontFamily;\n\t}\n\n\tprivate getInputEditorFontSize(): number {\n\t\treturn this.configurationService.getValue<number>('scm.inputFontSize');\n\t}\n\n\tprivate computeLineHeight(fontSize: number): number {\n\t\treturn Math.round(fontSize * 1.5);\n\t}\n\n\tprivate setPlaceholderFontStyles(fontFamily: string, fontSize: number, lineHeight: number): void {\n\t\tthis.placeholderTextContainer.style.fontFamily = fontFamily;\n\t\tthis.placeholderTextContainer.style.fontSize = `${fontSize}px`;\n\t\tthis.placeholderTextContainer.style.lineHeight = `${lineHeight}px`;\n\t}\n\n\tclearValidation(): void {\n\t\tthis.validationDisposable.dispose();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.input = undefined;\n\t\tthis.repositoryDisposables.dispose();\n\t\tthis.validationDisposable.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nexport class SCMViewPane extends ViewPane {\n\n\tprivate _onDidLayout: Emitter<void>;\n\tprivate layoutCache: ISCMLayout;\n\n\tprivate listContainer!: HTMLElement;\n\tprivate tree!: WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>;\n\tprivate _viewModel!: ViewModel;\n\tget viewModel(): ViewModel { return this._viewModel; }\n\tprivate listLabels!: ResourceLabels;\n\tprivate inputRenderer!: InputRenderer;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@ISCMService private scmService: ISCMService,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@ICommandService private commandService: ICommandService,\n\t\t@IEditorService private editorService: IEditorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IMenuService private menuService: IMenuService,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.SCMTitle }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis._onDidLayout = new Emitter<void>();\n\t\tthis.layoutCache = {\n\t\t\theight: undefined,\n\t\t\twidth: undefined,\n\t\t\tonDidChange: this._onDidLayout.event\n\t\t};\n\n\t\tthis._register(Event.any(this.scmService.onDidAddRepository, this.scmService.onDidRemoveRepository)(() => this._onDidChangeViewWelcomeState.fire()));\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\t// List\n\t\tthis.listContainer = append(container, $('.scm-view.show-file-icons'));\n\n\t\tconst overflowWidgetsDomNode = $('.scm-overflow-widgets-container.monaco-editor');\n\n\t\tconst updateActionsVisibility = () => this.listContainer.classList.toggle('show-actions', this.configurationService.getValue<boolean>('scm.alwaysShowActions'));\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.alwaysShowActions'))(updateActionsVisibility));\n\t\tupdateActionsVisibility();\n\n\t\tconst updateProviderCountVisibility = () => {\n\t\t\tconst value = this.configurationService.getValue<'hidden' | 'auto' | 'visible'>('scm.providerCountBadge');\n\t\t\tthis.listContainer.classList.toggle('hide-provider-counts', value === 'hidden');\n\t\t\tthis.listContainer.classList.toggle('auto-provider-counts', value === 'auto');\n\t\t};\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.providerCountBadge'))(updateProviderCountVisibility));\n\t\tupdateProviderCountVisibility();\n\n\t\tthis.inputRenderer = this.instantiationService.createInstance(InputRenderer, this.layoutCache, overflowWidgetsDomNode, (input, height) => this.tree.updateElementHeight(input, height));\n\t\tconst delegate = new ListDelegate(this.inputRenderer);\n\n\t\tthis.listLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n\t\tthis._register(this.listLabels);\n\n\t\tconst actionRunner = new RepositoryPaneActionRunner(() => this.getSelectedResources());\n\t\tthis._register(actionRunner);\n\t\tthis._register(actionRunner.onBeforeRun(() => this.tree.domFocus()));\n\n\t\tconst renderers: ICompressibleTreeRenderer<any, any, any>[] = [\n\t\t\tthis.instantiationService.createInstance(RepositoryRenderer, getActionViewItemProvider(this.instantiationService)),\n\t\t\tthis.inputRenderer,\n\t\t\tthis.instantiationService.createInstance(ResourceGroupRenderer, getActionViewItemProvider(this.instantiationService)),\n\t\t\tthis.instantiationService.createInstance(ResourceRenderer, () => this._viewModel, this.listLabels, getActionViewItemProvider(this.instantiationService), actionRunner)\n\t\t];\n\n\t\tconst filter = new SCMTreeFilter();\n\t\tconst sorter = new SCMTreeSorter(() => this._viewModel);\n\t\tconst keyboardNavigationLabelProvider = this.instantiationService.createInstance(SCMTreeKeyboardNavigationLabelProvider, () => this._viewModel);\n\t\tconst identityProvider = new SCMResourceIdentityProvider();\n\n\t\tthis.tree = this.instantiationService.createInstance(\n\t\t\tWorkbenchCompressibleObjectTree,\n\t\t\t'SCM Tree Repo',\n\t\t\tthis.listContainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\ttransformOptimization: false,\n\t\t\t\tidentityProvider,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tfilter,\n\t\t\t\tsorter,\n\t\t\t\tkeyboardNavigationLabelProvider,\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: this.viewDescriptorService.getViewLocationById(this.id) === ViewContainerLocation.Sidebar ? SIDE_BAR_BACKGROUND : PANEL_BACKGROUND\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: this.instantiationService.createInstance(SCMAccessibilityProvider)\n\t\t\t}) as WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>;\n\n\t\tthis._register(this.tree.onDidOpen(this.open, this));\n\n\t\tthis._register(this.tree.onContextMenu(this.onListContextMenu, this));\n\t\tthis._register(this.tree.onDidScroll(this.inputRenderer.clearValidation, this.inputRenderer));\n\t\tthis._register(this.tree);\n\n\t\tappend(this.listContainer, overflowWidgetsDomNode);\n\n\t\tlet viewMode = this.configurationService.getValue<'tree' | 'list'>('scm.defaultViewMode') === 'list' ? ViewModelMode.List : ViewModelMode.Tree;\n\n\t\tconst storageMode = this.storageService.get(`scm.viewMode`, StorageScope.WORKSPACE) as ViewModelMode;\n\t\tif (typeof storageMode === 'string') {\n\t\t\tviewMode = storageMode;\n\t\t}\n\n\t\tlet viewState: ITreeViewState | undefined;\n\n\t\tconst storageViewState = this.storageService.get(`scm.viewState`, StorageScope.WORKSPACE);\n\t\tif (storageViewState) {\n\t\t\ttry {\n\t\t\t\tviewState = JSON.parse(storageViewState);\n\t\t\t} catch {/* noop */ }\n\t\t}\n\n\t\tthis._register(this.instantiationService.createInstance(RepositoryVisibilityActionController));\n\n\t\tthis._viewModel = this.instantiationService.createInstance(ViewModel, this.tree, this.inputRenderer, viewMode, viewState);\n\t\tthis._register(this._viewModel);\n\n\t\tthis.listContainer.classList.add('file-icon-themable-tree');\n\t\tthis.listContainer.classList.add('show-file-icons');\n\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis._register(this.themeService.onDidFileIconThemeChange(this.updateIndentStyles, this));\n\t\tthis._register(this._viewModel.onDidChangeMode(this.onDidChangeMode, this));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(this._viewModel.setVisible, this._viewModel));\n\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.alwaysShowRepositories'))(this.updateActions, this));\n\t\tthis.updateActions();\n\n\t\tthis._register(this.storageService.onWillSaveState(e => {\n\t\t\tif (e.reason === WillSaveStateReason.SHUTDOWN) {\n\t\t\t\tthis.storageService.store(`scm.viewState`, JSON.stringify(this._viewModel.treeViewState), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate updateIndentStyles(theme: IFileIconTheme): void {\n\t\tthis.listContainer.classList.toggle('list-view-mode', this._viewModel.mode === ViewModelMode.List);\n\t\tthis.listContainer.classList.toggle('tree-view-mode', this._viewModel.mode === ViewModelMode.Tree);\n\t\tthis.listContainer.classList.toggle('align-icons-and-twisties', (this._viewModel.mode === ViewModelMode.List && theme.hasFileIcons) || (theme.hasFileIcons && !theme.hasFolderIcons));\n\t\tthis.listContainer.classList.toggle('hide-arrows', this._viewModel.mode === ViewModelMode.Tree && theme.hidesExplorerArrows === true);\n\t}\n\n\tprivate onDidChangeMode(): void {\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis.storageService.store(`scm.viewMode`, this._viewModel.mode, StorageScope.WORKSPACE, StorageTarget.USER);\n\t}\n\n\toverride layoutBody(height: number | undefined = this.layoutCache.height, width: number | undefined = this.layoutCache.width): void {\n\t\tif (height === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (width !== undefined) {\n\t\t\tsuper.layoutBody(height, width);\n\t\t}\n\n\t\tthis.layoutCache.height = height;\n\t\tthis.layoutCache.width = width;\n\t\tthis._onDidLayout.fire();\n\n\t\tthis.listContainer.style.height = `${height}px`;\n\t\tthis.tree.layout(height, width);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tif (this.isExpanded()) {\n\t\t\tthis._viewModel.focus();\n\t\t}\n\t}\n\n\tprivate async open(e: IOpenEvent<TreeElement | undefined>): Promise<void> {\n\t\tif (!e.element) {\n\t\t\treturn;\n\t\t} else if (isSCMRepository(e.element)) {\n\t\t\tthis.scmViewService.focus(e.element);\n\t\t\treturn;\n\t\t} else if (isSCMResourceGroup(e.element)) {\n\t\t\tconst provider = e.element.provider;\n\t\t\tconst repository = this.scmService.repositories.find(r => r.provider === provider);\n\t\t\tif (repository) {\n\t\t\t\tthis.scmViewService.focus(repository);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (ResourceTree.isResourceNode(e.element)) {\n\t\t\tconst provider = e.element.context.provider;\n\t\t\tconst repository = this.scmService.repositories.find(r => r.provider === provider);\n\t\t\tif (repository) {\n\t\t\t\tthis.scmViewService.focus(repository);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (isSCMInput(e.element)) {\n\t\t\tthis.scmViewService.focus(e.element.repository);\n\n\t\t\tconst widget = this.inputRenderer.getRenderedInputWidget(e.element);\n\n\t\t\tif (widget) {\n\t\t\t\twidget.focus();\n\n\t\t\t\tconst selection = this.tree.getSelection();\n\n\t\t\t\tif (selection.length === 1 && selection[0] === e.element) {\n\t\t\t\t\tsetTimeout(() => this.tree.setSelection([]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// ISCMResource\n\t\tif (e.element.command?.id === API_OPEN_EDITOR_COMMAND_ID || e.element.command?.id === API_OPEN_DIFF_EDITOR_COMMAND_ID) {\n\t\t\tawait this.commandService.executeCommand(e.element.command.id, ...(e.element.command.arguments || []), e);\n\t\t} else {\n\t\t\tawait e.element.open(!!e.editorOptions.preserveFocus);\n\n\t\t\tif (e.editorOptions.pinned) {\n\t\t\t\tconst activeEditorPane = this.editorService.activeEditorPane;\n\n\t\t\t\tif (activeEditorPane) {\n\t\t\t\t\tactiveEditorPane.group.pinEditor(activeEditorPane.input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst provider = e.element.resourceGroup.provider;\n\t\tconst repository = this.scmService.repositories.find(r => r.provider === provider);\n\n\t\tif (repository) {\n\t\t\tthis.scmViewService.focus(repository);\n\t\t}\n\t}\n\n\tprivate onListContextMenu(e: ITreeContextMenuEvent<TreeElement | null>): void {\n\t\tif (!e.element) {\n\t\t\tconst menu = this.menuService.createMenu(Menus.ViewSort, this.contextKeyService);\n\t\t\tconst actions: IAction[] = [];\n\t\t\tconst disposable = createAndFillInContextMenuActions(menu, undefined, actions);\n\n\t\t\treturn this.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tonHide: () => {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tmenu.dispose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst element = e.element;\n\t\tlet context: any = element;\n\t\tlet actions: IAction[] = [];\n\t\tlet disposable: IDisposable = Disposable.None;\n\n\t\tif (isSCMRepository(element)) {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.provider);\n\t\t\tconst menu = menus.repositoryMenu;\n\t\t\tcontext = element.provider;\n\t\t\t[actions, disposable] = collectContextMenuActions(menu);\n\t\t} else if (isSCMInput(element)) {\n\t\t\t// noop\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.provider);\n\t\t\tconst menu = menus.getResourceGroupMenu(element);\n\t\t\t[actions, disposable] = collectContextMenuActions(menu);\n\t\t} else if (ResourceTree.isResourceNode(element)) {\n\t\t\tif (element.element) {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.element.resourceGroup.provider);\n\t\t\t\tconst menu = menus.getResourceMenu(element.element);\n\t\t\t\t[actions, disposable] = collectContextMenuActions(menu);\n\t\t\t} else {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.context.provider);\n\t\t\t\tconst menu = menus.getResourceFolderMenu(element.context);\n\t\t\t\t[actions, disposable] = collectContextMenuActions(menu);\n\t\t\t}\n\t\t} else {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.resourceGroup.provider);\n\t\t\tconst menu = menus.getResourceMenu(element);\n\t\t\t[actions, disposable] = collectContextMenuActions(menu);\n\t\t}\n\n\t\tconst actionRunner = new RepositoryPaneActionRunner(() => this.getSelectedResources());\n\t\tactionRunner.onBeforeRun(() => this.tree.domFocus());\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionsContext: () => context,\n\t\t\tactionRunner,\n\t\t\tonHide() {\n\t\t\t\tdisposable.dispose();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getSelectedResources(): (ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>)[] {\n\t\treturn this.tree.getSelection()\n\t\t\t.filter(r => !!r && !isSCMResourceGroup(r))! as any;\n\t}\n\n\toverride shouldShowWelcome(): boolean {\n\t\treturn this.scmService.repositories.length === 0;\n\t}\n}\n\nexport const scmProviderSeparatorBorderColor = registerColor('scm.providerBorder', { dark: '#454545', light: '#C8C8C8', hc: contrastBorder }, localize('scm.providerBorder', \"SCM Provider separator border.\"));\n\nregisterThemingParticipant((theme, collector) => {\n\tconst inputBackgroundColor = theme.getColor(inputBackground);\n\tif (inputBackgroundColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container .monaco-editor-background,\n\t\t.scm-view .scm-editor-container .monaco-editor,\n\t\t.scm-view .scm-editor-container .monaco-editor .margin\n\t\t{ background-color: ${inputBackgroundColor} !important; }`);\n\t}\n\n\tconst inputForegroundColor = theme.getColor(inputForeground);\n\tif (inputForegroundColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container .mtk1 { color: ${inputForegroundColor}; }`);\n\t}\n\n\tconst inputBorderColor = theme.getColor(inputBorder);\n\tif (inputBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container { outline: 1px solid ${inputBorderColor}; }`);\n\t}\n\n\tconst panelInputBorder = theme.getColor(PANEL_INPUT_BORDER);\n\tif (panelInputBorder) {\n\t\tcollector.addRule(`.monaco-workbench .part.panel .scm-view .scm-editor-container { outline: 1px solid ${panelInputBorder}; }`);\n\t}\n\n\tconst focusBorderColor = theme.getColor(focusBorder);\n\tif (focusBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container.synthetic-focus { outline: 1px solid ${focusBorderColor}; }`);\n\t}\n\n\tconst inputPlaceholderForegroundColor = theme.getColor(inputPlaceholderForeground);\n\tif (inputPlaceholderForegroundColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-placeholder { color: ${inputPlaceholderForegroundColor}; }`);\n\t}\n\n\tconst inputValidationInfoBorderColor = theme.getColor(inputValidationInfoBorder);\n\tif (inputValidationInfoBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container.validation-info { outline: 1px solid ${inputValidationInfoBorderColor} !important; }`);\n\t\tcollector.addRule(`.scm-editor-validation.validation-info { border-color: ${inputValidationInfoBorderColor}; }`);\n\t}\n\n\tconst inputValidationInfoBackgroundColor = theme.getColor(inputValidationInfoBackground);\n\tif (inputValidationInfoBackgroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-info { background-color: ${inputValidationInfoBackgroundColor}; }`);\n\t}\n\n\tconst inputValidationInfoForegroundColor = theme.getColor(inputValidationInfoForeground);\n\tif (inputValidationInfoForegroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-info { color: ${inputValidationInfoForegroundColor}; }`);\n\t}\n\n\tconst inputValidationWarningBorderColor = theme.getColor(inputValidationWarningBorder);\n\tif (inputValidationWarningBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container.validation-warning { outline: 1px solid ${inputValidationWarningBorderColor} !important; }`);\n\t\tcollector.addRule(`.scm-editor-validation.validation-warning { border-color: ${inputValidationWarningBorderColor}; }`);\n\t}\n\n\tconst inputValidationWarningBackgroundColor = theme.getColor(inputValidationWarningBackground);\n\tif (inputValidationWarningBackgroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-warning { background-color: ${inputValidationWarningBackgroundColor}; }`);\n\t}\n\n\tconst inputValidationWarningForegroundColor = theme.getColor(inputValidationWarningForeground);\n\tif (inputValidationWarningForegroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-warning { color: ${inputValidationWarningForegroundColor}; }`);\n\t}\n\n\tconst inputValidationErrorBorderColor = theme.getColor(inputValidationErrorBorder);\n\tif (inputValidationErrorBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-editor-container.validation-error { outline: 1px solid ${inputValidationErrorBorderColor} !important; }`);\n\t\tcollector.addRule(`.scm-editor-validation.validation-error { border-color: ${inputValidationErrorBorderColor}; }`);\n\t}\n\n\tconst inputValidationErrorBackgroundColor = theme.getColor(inputValidationErrorBackground);\n\tif (inputValidationErrorBackgroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-error { background-color: ${inputValidationErrorBackgroundColor}; }`);\n\t}\n\n\tconst inputValidationErrorForegroundColor = theme.getColor(inputValidationErrorForeground);\n\tif (inputValidationErrorForegroundColor) {\n\t\tcollector.addRule(`.scm-editor-validation.validation-error { color: ${inputValidationErrorForegroundColor}; }`);\n\t}\n\n\tconst repositoryStatusActionsBorderColor = theme.getColor(SIDE_BAR_BORDER);\n\tif (repositoryStatusActionsBorderColor) {\n\t\tcollector.addRule(`.scm-view .scm-provider > .status > .monaco-action-bar > .actions-container { border-color: ${repositoryStatusActionsBorderColor}; }`);\n\t}\n});\n"]}