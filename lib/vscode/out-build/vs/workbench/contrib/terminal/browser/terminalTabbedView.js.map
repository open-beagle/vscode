{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalTabbedView.ts"],"names":[],"mappings":"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","file":"terminalTabbedView.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { LayoutPriority, Orientation, Sizing, SplitView } from 'vs/base/browser/ui/splitview/splitview';\nimport { Disposable, dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ITerminalInstance, ITerminalService, TerminalConnectionState } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { TerminalFindWidget } from 'vs/workbench/contrib/terminal/browser/terminalFindWidget';\nimport { DEFAULT_TABS_WIDGET_WIDTH, MIDPOINT_WIDGET_WIDTH, MIN_TABS_WIDGET_WIDTH, TerminalTabsWidget } from 'vs/workbench/contrib/terminal/browser/terminalTabsWidget';\nimport { IThemeService, IColorTheme } from 'vs/platform/theme/common/themeService';\nimport { isLinux, isMacintosh } from 'vs/base/common/platform';\nimport * as dom from 'vs/base/browser/dom';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { DataTransfers } from 'vs/base/browser/dnd';\nimport { URI } from 'vs/base/common/uri';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { Action, IAction, Separator } from 'vs/base/common/actions';\nimport { IMenu, IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { KEYBINDING_CONTEXT_TERMINAL_FIND_VISIBLE, KEYBINDING_CONTEXT_TERMINAL_IS_TABS_NARROW_FOCUS, KEYBINDING_CONTEXT_TERMINAL_TABS_FOCUS } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { localize } from 'vs/nls';\n\nconst $ = dom.$;\n\nconst FIND_FOCUS_CLASS = 'find-focused';\nconst TABS_WIDGET_WIDTH_KEY = 'tabs-widget-width';\nconst MAX_TABS_WIDGET_WIDTH = 500;\nconst STATUS_ICON_WIDTH = 30;\nconst SPLIT_ANNOTATION_WIDTH = 30;\n\nexport class TerminalTabbedView extends Disposable {\n\n\tprivate _splitView: SplitView;\n\n\tprivate _terminalContainer: HTMLElement;\n\tprivate _terminalTabTree: HTMLElement;\n\tprivate _parentElement: HTMLElement;\n\tprivate _tabTreeContainer: HTMLElement;\n\n\tprivate _tabsWidget: TerminalTabsWidget;\n\tprivate _findWidget: TerminalFindWidget;\n\tprivate _sashDisposables: IDisposable[] | undefined;\n\n\tprivate _plusButton: HTMLElement | undefined;\n\n\tprivate _tabTreeIndex: number;\n\tprivate _terminalContainerIndex: number;\n\n\tprivate _findWidgetVisible: IContextKey<boolean>;\n\n\tprivate _height: number | undefined;\n\tprivate _width: number | undefined;\n\n\tprivate _cancelContextMenu: boolean = false;\n\tprivate _instanceMenu: IMenu;\n\tprivate _tabsWidgetMenu: IMenu;\n\tprivate _tabsWidgetEmptyMenu: IMenu;\n\n\tprivate _terminalIsTabsNarrowContextKey: IContextKey<boolean>;\n\tprivate _terminalTabsFocusContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\tparentElement: HTMLElement,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\n\t\tthis._parentElement = parentElement;\n\n\t\tthis._tabTreeContainer = $('.tabs-container');\n\t\tconst tabWidgetContainer = $('.tabs-widget-container');\n\t\tthis._terminalTabTree = $('.tabs-widget');\n\t\ttabWidgetContainer.appendChild(this._terminalTabTree);\n\t\tthis._tabTreeContainer.appendChild(tabWidgetContainer);\n\n\t\tthis._instanceMenu = this._register(menuService.createMenu(MenuId.TerminalContainerContext, contextKeyService));\n\t\tthis._tabsWidgetMenu = this._register(menuService.createMenu(MenuId.TerminalTabsWidgetContext, contextKeyService));\n\t\tthis._tabsWidgetEmptyMenu = this._register(menuService.createMenu(MenuId.TerminalTabsWidgetEmptyContext, contextKeyService));\n\n\t\tthis._register(this._tabsWidget = this._instantiationService.createInstance(TerminalTabsWidget, this._terminalTabTree));\n\t\tthis._register(this._findWidget = this._instantiationService.createInstance(TerminalFindWidget, this._terminalService.getFindState()));\n\t\tparentElement.appendChild(this._findWidget.getDomNode());\n\n\t\tthis._terminalContainer = document.createElement('div');\n\t\tthis._terminalContainer.classList.add('terminal-outer-container');\n\t\tthis._terminalContainer.style.display = 'block';\n\n\t\tthis._tabTreeIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 0 : 1;\n\t\tthis._terminalContainerIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 1 : 0;\n\n\t\tthis._findWidgetVisible = KEYBINDING_CONTEXT_TERMINAL_FIND_VISIBLE.bindTo(contextKeyService);\n\n\t\tthis._terminalService.setContainers(parentElement, this._terminalContainer);\n\n\t\tthis._terminalIsTabsNarrowContextKey = KEYBINDING_CONTEXT_TERMINAL_IS_TABS_NARROW_FOCUS.bindTo(contextKeyService);\n\t\tthis._terminalTabsFocusContextKey = KEYBINDING_CONTEXT_TERMINAL_TABS_FOCUS.bindTo(contextKeyService);\n\n\t\t_configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('terminal.integrated.tabs.enabled') ||\n\t\t\t\te.affectsConfiguration('terminal.integrated.tabs.hideCondition')) {\n\t\t\t\tthis._refreshShowTabs();\n\t\t\t} else if (e.affectsConfiguration('terminal.integrated.tabs.location')) {\n\t\t\t\tthis._tabTreeIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 0 : 1;\n\t\t\t\tthis._terminalContainerIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 1 : 0;\n\t\t\t\tif (this._shouldShowTabs()) {\n\t\t\t\t\tthis._splitView.swapViews(0, 1);\n\t\t\t\t\tthis._removeSashListener();\n\t\t\t\t\tthis._addSashListener();\n\t\t\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastWidgetWidth());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._register(this._terminalService.onInstancesChanged(() => this._refreshShowTabs()));\n\t\tthis._register(this._themeService.onDidColorThemeChange(theme => this._updateTheme(theme)));\n\t\tthis._updateTheme();\n\n\t\tthis._findWidget.focusTracker.onDidFocus(() => this._terminalContainer!.classList.add(FIND_FOCUS_CLASS));\n\n\t\tthis._attachEventListeners(parentElement, this._terminalContainer);\n\n\t\tthis._splitView = new SplitView(parentElement, { orientation: Orientation.HORIZONTAL, proportionalLayout: false });\n\n\t\tthis._setupSplitView();\n\n\t\tthis._terminalService.onPanelMovedToSide(() => {\n\t\t\ttry {\n\t\t\t\tthis._updateWidgetWidth(MIN_TABS_WIDGET_WIDTH);\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _shouldShowTabs(): boolean {\n\t\tconst enable = this._terminalService.configHelper.config.tabs.enabled;\n\t\tconst hideForSingle = this._terminalService.configHelper.config.tabs.hideCondition === 'singleTerminal';\n\t\treturn enable && (!hideForSingle || (hideForSingle && this._terminalService.terminalInstances.length > 1));\n\t}\n\n\tprivate _refreshShowTabs() {\n\t\tif (this._shouldShowTabs()) {\n\t\t\tif (this._splitView.length === 1) {\n\t\t\t\tthis._addTabTree();\n\t\t\t\tthis._addSashListener();\n\t\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastWidgetWidth());\n\t\t\t\tthis._rerenderTabs();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._splitView.length === 2) {\n\t\t\t\tthis._splitView.removeView(this._tabTreeIndex);\n\t\t\t\tif (this._plusButton) {\n\t\t\t\t\tthis._tabTreeContainer.removeChild(this._plusButton);\n\t\t\t\t}\n\t\t\t\tthis._removeSashListener();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _getLastWidgetWidth(): number {\n\t\tconst storedValue = this._storageService.get(TABS_WIDGET_WIDTH_KEY, StorageScope.WORKSPACE);\n\t\tif (!storedValue || !parseInt(storedValue)) {\n\t\t\treturn DEFAULT_TABS_WIDGET_WIDTH;\n\t\t}\n\t\treturn parseInt(storedValue);\n\t}\n\n\tprivate _handleOnDidSashReset(): void {\n\t\t// Calculate ideal size of widget to display all text based on its contents\n\t\tlet idealWidth = DEFAULT_TABS_WIDGET_WIDTH;\n\t\tconst offscreenCanvas = new OffscreenCanvas(1, 1);\n\t\tconst ctx = offscreenCanvas.getContext('2d');\n\t\tif (ctx) {\n\t\t\tconst style = window.getComputedStyle(this._terminalTabTree);\n\t\t\tctx.font = `${style.fontStyle} ${style.fontSize} ${style.fontFamily}`;\n\t\t\tconst maxInstanceWidth = this._terminalService.terminalInstances.reduce((p, c) => {\n\t\t\t\treturn Math.max(p, ctx.measureText(c.title + (c.shellLaunchConfig.description || '')).width + this._getAdditionalWidth(c));\n\t\t\t}, 0);\n\t\t\tidealWidth = Math.ceil(Math.max(maxInstanceWidth, DEFAULT_TABS_WIDGET_WIDTH));\n\t\t}\n\t\t// If the size is already ideal, toggle to collapsed\n\t\tconst currentWidth = Math.ceil(this._splitView.getViewSize(this._tabTreeIndex));\n\t\tif (currentWidth === idealWidth) {\n\t\t\tidealWidth = MIN_TABS_WIDGET_WIDTH;\n\t\t}\n\t\tthis._splitView.resizeView(this._tabTreeIndex, idealWidth);\n\t\tthis._updateWidgetWidth(idealWidth);\n\t}\n\n\tprivate _getAdditionalWidth(instance: ITerminalInstance): number {\n\t\t// Size to include padding, icon, status icon (if any), split annotation (if any), + a little more\n\t\tconst additionalWidth = 30;\n\t\tconst statusIconWidth = instance.statusList.statuses.length > 0 ? STATUS_ICON_WIDTH : 0;\n\t\tconst splitAnnotationWidth = (this._terminalService.getTabForInstance(instance)?.terminalInstances.length || 0) > 1 ? SPLIT_ANNOTATION_WIDTH : 0;\n\t\treturn additionalWidth + splitAnnotationWidth + statusIconWidth;\n\t}\n\n\tprivate _handleOnDidSashChange(): void {\n\t\tlet widgetWidth = this._splitView.getViewSize(this._tabTreeIndex);\n\t\tif (!this._width || widgetWidth <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tthis._updateWidgetWidth(widgetWidth);\n\t}\n\n\tprivate _updateWidgetWidth(width: number): void {\n\t\tif (width < MIDPOINT_WIDGET_WIDTH && width >= MIN_TABS_WIDGET_WIDTH) {\n\t\t\twidth = MIN_TABS_WIDGET_WIDTH;\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, width);\n\t\t} else if (width >= MIDPOINT_WIDGET_WIDTH && width < DEFAULT_TABS_WIDGET_WIDTH) {\n\t\t\twidth = DEFAULT_TABS_WIDGET_WIDTH;\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, width);\n\t\t}\n\t\tthis._rerenderTabs();\n\t\tthis._storageService.store(TABS_WIDGET_WIDTH_KEY, width, StorageScope.WORKSPACE, StorageTarget.USER);\n\t}\n\n\tprivate _setupSplitView(): void {\n\t\tthis._register(this._splitView.onDidSashReset(() => this._handleOnDidSashReset()));\n\t\tthis._register(this._splitView.onDidSashChange(() => this._handleOnDidSashChange()));\n\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._addTabTree();\n\t\t}\n\t\tthis._splitView.addView({\n\t\t\telement: this._terminalContainer,\n\t\t\tlayout: width => this._terminalService.terminalTabs.forEach(tab => tab.layout(width, this._height || 0)),\n\t\t\tminimumSize: 120,\n\t\t\tmaximumSize: Number.POSITIVE_INFINITY,\n\t\t\tonDidChange: () => Disposable.None,\n\t\t\tpriority: LayoutPriority.High\n\t\t}, Sizing.Distribute, this._terminalContainerIndex);\n\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._addSashListener();\n\t\t}\n\t}\n\n\tprivate _addTabTree() {\n\t\tthis._splitView.addView({\n\t\t\telement: this._tabTreeContainer,\n\t\t\tlayout: width => this._tabsWidget.layout(this._height || 0, width),\n\t\t\tminimumSize: MIN_TABS_WIDGET_WIDTH,\n\t\t\tmaximumSize: MAX_TABS_WIDGET_WIDTH,\n\t\t\tonDidChange: () => Disposable.None,\n\t\t\tpriority: LayoutPriority.Low\n\t\t}, Sizing.Distribute, this._tabTreeIndex);\n\t\tthis._rerenderTabs();\n\t}\n\n\tprivate _rerenderTabs() {\n\t\tconst hasText = this._tabTreeContainer.clientWidth > MIDPOINT_WIDGET_WIDTH;\n\t\tthis._tabTreeContainer.classList.toggle('has-text', hasText);\n\t\tthis._terminalIsTabsNarrowContextKey.set(!hasText);\n\t\tfor (const instance of this._terminalService.terminalInstances) {\n\t\t\ttry {\n\t\t\t\tthis._tabsWidget.rerender(instance);\n\t\t\t} catch (e) {\n\t\t\t\tthis._logService.warn('Exception when rerendering new tab widget', e);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _addSashListener() {\n\t\tlet interval: number;\n\t\tthis._sashDisposables = [\n\t\t\tthis._splitView.sashes[0].onDidStart(e => {\n\t\t\t\tinterval = window.setInterval(() => {\n\t\t\t\t\tthis._rerenderTabs();\n\t\t\t\t}, 100);\n\t\t\t}),\n\t\t\tthis._splitView.sashes[0].onDidEnd(e => {\n\t\t\t\twindow.clearInterval(interval);\n\t\t\t\tinterval = 0;\n\t\t\t})\n\t\t];\n\t}\n\n\tprivate _removeSashListener() {\n\t\tif (this._sashDisposables) {\n\t\t\tdispose(this._sashDisposables);\n\t\t\tthis._sashDisposables = undefined;\n\t\t}\n\t}\n\n\tlayout(width: number, height: number): void {\n\t\tthis._height = height;\n\t\tthis._width = width;\n\t\tthis._splitView.layout(width);\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastWidgetWidth());\n\t\t}\n\t\tthis._rerenderTabs();\n\t}\n\n\tprivate _updateTheme(theme?: IColorTheme): void {\n\t\tif (!theme) {\n\t\t\ttheme = this._themeService.getColorTheme();\n\t\t}\n\n\t\tthis._findWidget?.updateTheme(theme);\n\t}\n\n\tprivate _attachEventListeners(parentDomElement: HTMLElement, terminalContainer: HTMLElement): void {\n\t\tthis._register(dom.addDisposableListener(terminalContainer, 'mousedown', async (event: MouseEvent) => {\n\t\t\tif (this._terminalService.terminalInstances.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.which === 2 && isLinux) {\n\t\t\t\t// Drop selection and focus terminal on Linux to enable middle button paste when click\n\t\t\t\t// occurs on the selection itself.\n\t\t\t\tconst terminal = this._terminalService.getActiveInstance();\n\t\t\t\tif (terminal) {\n\t\t\t\t\tterminal.focus();\n\t\t\t\t}\n\t\t\t} else if (event.which === 3) {\n\t\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\t\tif (rightClickBehavior === 'copyPaste' || rightClickBehavior === 'paste') {\n\t\t\t\t\tconst terminal = this._terminalService.getActiveInstance();\n\t\t\t\t\tif (!terminal) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// copyPaste: Shift+right click should open context menu\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && event.shiftKey) {\n\t\t\t\t\t\tthis._openContextMenu(event, parentDomElement);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && terminal.hasSelection()) {\n\t\t\t\t\t\tawait terminal.copySelection();\n\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (BrowserFeatures.clipboard.readText) {\n\t\t\t\t\t\t\tterminal.paste();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._notificationService.info(`This browser doesn't support the clipboard.readText API needed to trigger a paste, try ${isMacintosh ? '⌘' : 'Ctrl'}+V instead.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Clear selection after all click event bubbling is finished on Mac to prevent\n\t\t\t\t\t// right-click selecting a word which is seemed cannot be disabled. There is a\n\t\t\t\t\t// flicker when pasting but this appears to give the best experience if the\n\t\t\t\t\t// setting is enabled.\n\t\t\t\t\tif (isMacintosh) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._terminalContainer, 'contextmenu', (event: MouseEvent) => {\n\t\t\tif (!this._cancelContextMenu) {\n\t\t\t\tthis._openContextMenu(event, this._terminalContainer);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tthis._cancelContextMenu = false;\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabTreeContainer, 'contextmenu', (event: MouseEvent) => {\n\t\t\tif (!this._cancelContextMenu) {\n\t\t\t\tthis._openContextMenu(event, this._tabTreeContainer);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tthis._cancelContextMenu = false;\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(document, 'keydown', (event: KeyboardEvent) => {\n\t\t\tterminalContainer.classList.toggle('alt-active', !!event.altKey);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(document, 'keyup', (event: KeyboardEvent) => {\n\t\t\tterminalContainer.classList.toggle('alt-active', !!event.altKey);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(parentDomElement, 'keyup', (event: KeyboardEvent) => {\n\t\t\tif (event.keyCode === 27) {\n\t\t\t\t// Keep terminal open on escape\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabTreeContainer, dom.EventType.FOCUS_IN, () => {\n\t\t\tthis._terminalTabsFocusContextKey.set(true);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabTreeContainer, dom.EventType.FOCUS_OUT, () => {\n\t\t\tthis._terminalTabsFocusContextKey.set(false);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(parentDomElement, dom.EventType.DROP, async (e: DragEvent) => {\n\t\t\tif (e.target === this._parentElement || dom.isAncestor(e.target as HTMLElement, parentDomElement)) {\n\t\t\t\tif (!e.dataTransfer) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check if files were dragged from the tree explorer\n\t\t\t\tlet path: string | undefined;\n\t\t\t\tconst resources = e.dataTransfer.getData(DataTransfers.RESOURCES);\n\t\t\t\tif (resources) {\n\t\t\t\t\tpath = URI.parse(JSON.parse(resources)[0]).fsPath;\n\t\t\t\t} else if (e.dataTransfer.files.length > 0 && e.dataTransfer.files[0].path /* Electron only */) {\n\t\t\t\t\t// Check if the file was dragged from the filesystem\n\t\t\t\t\tpath = URI.file(e.dataTransfer.files[0].path).fsPath;\n\t\t\t\t}\n\n\t\t\t\tif (!path) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst terminal = this._terminalService.getActiveInstance();\n\t\t\t\tif (terminal) {\n\t\t\t\t\tconst preparedPath = await this._terminalService.preparePathForTerminalAsync(path, terminal.shellLaunchConfig.executable, terminal.title, terminal.shellType);\n\t\t\t\t\tterminal.sendText(preparedPath, false);\n\t\t\t\t\tterminal.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _openContextMenu(event: MouseEvent, parent: HTMLElement): void {\n\t\tconst standardEvent = new StandardMouseEvent(event);\n\n\t\tconst anchor: { x: number, y: number } = { x: standardEvent.posx, y: standardEvent.posy };\n\t\tconst actions: IAction[] = [];\n\t\tlet menu: IMenu;\n\t\tif (parent === this._terminalContainer) {\n\t\t\tmenu = this._instanceMenu;\n\t\t} else {\n\t\t\tmenu = this._tabsWidget.getFocus().length === 0 ? this._tabsWidgetEmptyMenu : this._tabsWidgetMenu;\n\t\t}\n\n\t\tconst actionsDisposable = createAndFillInContextMenuActions(menu, undefined, actions);\n\n\t\t// TODO: Convert to command?\n\t\tif (menu === this._tabsWidgetEmptyMenu) {\n\t\t\tactions.push(...this._getTabActions());\n\t\t}\n\n\t\tthis._contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionsContext: () => this._parentElement,\n\t\t\tonHide: () => actionsDisposable.dispose()\n\t\t});\n\t}\n\n\tprivate _getTabActions(): Action[] {\n\t\treturn [\n\t\t\tnew Separator(),\n\t\t\tthis._configurationService.inspect('terminal.integrated.tabs.location').userValue === 'left' ?\n\t\t\t\tnew Action('moveRight', localize('moveTabsRight', \"Move Tabs Right\"), undefined, undefined, async () => {\n\t\t\t\t\tthis._configurationService.updateValue('terminal.integrated.tabs.location', 'right');\n\t\t\t\t}) :\n\t\t\t\tnew Action('moveLeft', localize('moveTabsLeft', \"Move Tabs Left\"), undefined, undefined, async () => {\n\t\t\t\t\tthis._configurationService.updateValue('terminal.integrated.tabs.location', 'left');\n\t\t\t\t}),\n\t\t\tnew Action('hideTabs', localize('hideTabs', \"Hide Tabs\"), undefined, undefined, async () => {\n\t\t\t\tthis._configurationService.updateValue('terminal.integrated.tabs.enabled', false);\n\t\t\t})\n\t\t];\n\t}\n\n\tpublic focusTabs(): void {\n\t\tthis._terminalTabsFocusContextKey.set(true);\n\t\tconst selected = this._tabsWidget.getSelection();\n\t\tthis._tabsWidget.domFocus();\n\t\tif (selected) {\n\t\t\tthis._tabsWidget.setFocus(selected);\n\t\t}\n\t}\n\n\tpublic focusFindWidget() {\n\t\tthis._findWidgetVisible.set(true);\n\t\tconst activeInstance = this._terminalService.getActiveInstance();\n\t\tif (activeInstance && activeInstance.hasSelection() && activeInstance.selection!.indexOf('\\n') === -1) {\n\t\t\tthis._findWidget!.reveal(activeInstance.selection);\n\t\t} else {\n\t\t\tthis._findWidget!.reveal();\n\t\t}\n\t}\n\n\tpublic hideFindWidget() {\n\t\tthis._findWidgetVisible.reset();\n\t\tthis.focus();\n\t\tthis._findWidget!.hide();\n\t}\n\n\tpublic showFindWidget() {\n\t\tconst activeInstance = this._terminalService.getActiveInstance();\n\t\tif (activeInstance && activeInstance.hasSelection() && activeInstance.selection!.indexOf('\\n') === -1) {\n\t\t\tthis._findWidget!.show(activeInstance.selection);\n\t\t} else {\n\t\t\tthis._findWidget!.show();\n\t\t}\n\t}\n\n\tpublic getFindWidget(): TerminalFindWidget {\n\t\treturn this._findWidget!;\n\t}\n\tpublic focus() {\n\t\tif (this._terminalService.connectionState === TerminalConnectionState.Connecting) {\n\t\t\t// If the terminal is waiting to reconnect to remote terminals, then there is no TerminalInstance yet that can\n\t\t\t// be focused. So wait for connection to finish, then focus.\n\t\t\tconst activeElement = document.activeElement;\n\t\t\tthis._register(this._terminalService.onDidChangeConnectionState(() => {\n\t\t\t\t// Only focus the terminal if the activeElement has not changed since focus() was called\n\t\t\t\t// TODO hack\n\t\t\t\tif (document.activeElement === activeElement) {\n\t\t\t\t\tthis._focus();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\treturn;\n\t\t}\n\t\tthis._focus();\n\t}\n\n\tprivate _focus() {\n\t\tthis._terminalService.getActiveInstance()?.focusWhenReady();\n\t}\n}\n"]}