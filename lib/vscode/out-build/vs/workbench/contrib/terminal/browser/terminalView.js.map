{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalView.ts"],"names":[],"mappings":"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","file":"terminalView.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { Action, IAction, Separator, SubmenuAction } from 'vs/base/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextMenuService, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IThemeService, IColorTheme, registerThemingParticipant, ICssStyleCollector } from 'vs/platform/theme/common/themeService';\nimport { ContextMenuTabsGroup, switchTerminalActionViewItemSeparator, switchTerminalShowTabsTitle } from 'vs/workbench/contrib/terminal/browser/terminalActions';\nimport { TERMINAL_BACKGROUND_COLOR, TERMINAL_BORDER_COLOR } from 'vs/workbench/contrib/terminal/common/terminalColorRegistry';\nimport { INotificationService, IPromptChoice, Severity } from 'vs/platform/notification/common/notification';\nimport { ITerminalInstance, ITerminalService, TerminalConnectionState } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { ViewPane, IViewPaneOptions } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { PANEL_BACKGROUND, SIDE_BAR_BACKGROUND } from 'vs/workbench/common/theme';\nimport { IMenu, IMenuService, MenuId, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { ITerminalProfile, TERMINAL_COMMAND_ID } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { ActionViewItem, SelectActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { ITerminalContributionService } from 'vs/workbench/contrib/terminal/common/terminalExtensionPoints';\nimport { attachSelectBoxStyler, attachStylerCallback } from 'vs/platform/theme/common/styler';\nimport { selectBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { ISelectOptionItem } from 'vs/base/browser/ui/selectBox/selectBox';\nimport { IActionViewItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { TerminalTabbedView } from 'vs/workbench/contrib/terminal/browser/terminalTabbedView';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { DropdownWithPrimaryActionViewItem } from 'vs/base/browser/ui/dropdown/dropdownWithPrimaryActionViewItem';\nimport { reset } from 'vs/base/browser/dom';\nimport { renderLabelWithIcons } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport { getColorForSeverity } from 'vs/workbench/contrib/terminal/browser/terminalStatusList';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\n\nexport class TerminalViewPane extends ViewPane {\n\tprivate _actions: IAction[] | undefined;\n\tprivate _fontStyleElement: HTMLElement | undefined;\n\tprivate _parentDomElement: HTMLElement | undefined;\n\tprivate _tabsViewWrapper: HTMLElement | undefined;\n\tprivate _terminalTabbedView?: TerminalTabbedView;\n\tpublic get terminalTabbedView(): TerminalTabbedView | undefined { return this._terminalTabbedView; }\n\tprivate _terminalsInitialized = false;\n\tprivate _bodyDimensions: { width: number, height: number } = { width: 0, height: 0 };\n\tprivate _isWelcomeShowing: boolean = false;\n\tprivate _tabButtons: DropdownWithPrimaryActionViewItem | undefined;\n\tprivate readonly _dropdownMenu: IMenu;\n\tprivate readonly _singleTabMenu: IMenu;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@ITerminalContributionService private readonly _terminalContributionService: ITerminalContributionService\n\t) {\n\t\tsuper(options, keybindingService, _contextMenuService, configurationService, _contextKeyService, viewDescriptorService, _instantiationService, openerService, themeService, telemetryService);\n\t\tthis._terminalService.onDidRegisterProcessSupport(() => {\n\t\t\tif (this._actions) {\n\t\t\t\tfor (const action of this._actions) {\n\t\t\t\t\taction.enabled = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._onDidChangeViewWelcomeState.fire();\n\t\t});\n\t\tthis._terminalService.onInstanceCreated(() => {\n\t\t\tif (!this._isWelcomeShowing) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._isWelcomeShowing = true;\n\t\t\tthis._onDidChangeViewWelcomeState.fire();\n\t\t\tif (!this._terminalTabbedView && this._parentDomElement) {\n\t\t\t\tthis._createTabsView();\n\t\t\t\tthis.layoutBody(this._parentDomElement.offsetHeight, this._parentDomElement.offsetWidth);\n\t\t\t}\n\t\t});\n\n\t\tthis._dropdownMenu = this._register(this._menuService.createMenu(MenuId.TerminalToolbarContext, this._contextKeyService));\n\t\tthis._singleTabMenu = this._register(this._menuService.createMenu(MenuId.TerminalSingleTabContext, this._contextKeyService));\n\t\tthis._register(this._terminalService.onDidChangeAvailableProfiles(profiles => this._updateTabActionBar(profiles)));\n\t}\n\n\tpublic override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._parentDomElement = container;\n\t\tthis._parentDomElement.classList.add('integrated-terminal');\n\t\tthis._fontStyleElement = document.createElement('style');\n\n\t\tif (!this.shouldShowWelcome()) {\n\t\t\tthis._createTabsView();\n\t\t}\n\n\t\tthis._parentDomElement.appendChild(this._fontStyleElement);\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('terminal.integrated.fontFamily') || e.affectsConfiguration('editor.fontFamily')) {\n\t\t\t\tconst configHelper = this._terminalService.configHelper;\n\t\t\t\tif (!configHelper.configFontIsMonospace()) {\n\t\t\t\t\tconst choices: IPromptChoice[] = [{\n\t\t\t\t\t\tlabel: nls.localize('terminal.useMonospace', \"Use 'monospace'\"),\n\t\t\t\t\t\trun: () => this.configurationService.updateValue('terminal.integrated.fontFamily', 'monospace'),\n\t\t\t\t\t}];\n\t\t\t\t\tthis._notificationService.prompt(Severity.Warning, nls.localize('terminal.monospaceOnly', \"The terminal only supports monospace fonts. Be sure to restart VS Code if this is a newly installed font.\"), choices);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tconst hadTerminals = !!this._terminalService.terminalTabs.length;\n\t\t\t\tif (this._terminalService.isProcessSupportRegistered) {\n\t\t\t\t\tif (this._terminalsInitialized) {\n\t\t\t\t\t\tif (!hadTerminals) {\n\t\t\t\t\t\t\tthis._terminalService.createTerminal();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._terminalsInitialized = true;\n\t\t\t\t\t\tthis._terminalService.initializeTerminals();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hadTerminals) {\n\t\t\t\t\tthis._terminalService.getActiveTab()?.setVisible(visible);\n\t\t\t\t} else {\n\t\t\t\t\t// TODO@Tyriar - this call seems unnecessary\n\t\t\t\t\tthis.layoutBody(this._bodyDimensions.height, this._bodyDimensions.width);\n\t\t\t\t}\n\t\t\t\tthis._terminalService.showPanel(true);\n\t\t\t} else {\n\t\t\t\tthis._terminalService.getActiveTab()?.setVisible(false);\n\t\t\t}\n\t\t}));\n\t\tthis.layoutBody(this._parentDomElement.offsetHeight, this._parentDomElement.offsetWidth);\n\t}\n\n\tprivate _createTabsView(): void {\n\t\tif (!this._parentDomElement) {\n\t\t\treturn;\n\t\t}\n\t\tthis._tabsViewWrapper = document.createElement('div');\n\t\tthis._tabsViewWrapper.classList.add('tabs-view-wrapper');\n\t\tthis._terminalTabbedView = this.instantiationService.createInstance(TerminalTabbedView, this._parentDomElement);\n\t\tthis._parentDomElement.append(this._tabsViewWrapper);\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\n\t\tif (this._terminalTabbedView) {\n\t\t\tthis._bodyDimensions.width = width;\n\t\t\tthis._bodyDimensions.height = height;\n\n\t\t\tthis._terminalTabbedView.layout(width, height);\n\t\t}\n\t}\n\n\tpublic override getActionViewItem(action: Action): IActionViewItem | undefined {\n\t\tswitch (action.id) {\n\t\t\tcase TERMINAL_COMMAND_ID.SWITCH_TERMINAL: {\n\t\t\t\treturn this._instantiationService.createInstance(SwitchTerminalActionViewItem, action);\n\t\t\t}\n\t\t\tcase TERMINAL_COMMAND_ID.FOCUS: {\n\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\tcreateAndFillInContextMenuActions(this._singleTabMenu, undefined, actions);\n\t\t\t\treturn this._instantiationService.createInstance(SingleTerminalTabActionViewItem, action, actions);\n\t\t\t}\n\t\t\tcase TERMINAL_COMMAND_ID.CREATE_WITH_PROFILE_BUTTON: {\n\t\t\t\tif (this._tabButtons) {\n\t\t\t\t\tthis._tabButtons.dispose();\n\t\t\t\t}\n\t\t\t\tconst actions = this._getTabActionBarArgs(this._terminalService.availableProfiles);\n\t\t\t\tthis._tabButtons = new DropdownWithPrimaryActionViewItem(actions.primaryAction, actions.dropdownAction, actions.dropdownMenuActions, actions.className, this._contextMenuService);\n\t\t\t\tthis._updateTabActionBar(this._terminalService.availableProfiles);\n\t\t\t\treturn this._tabButtons;\n\t\t\t}\n\t\t}\n\t\treturn super.getActionViewItem(action);\n\t}\n\n\tprivate _updateTabActionBar(profiles: ITerminalProfile[]): void {\n\t\tconst actions = this._getTabActionBarArgs(profiles);\n\t\tthis._tabButtons?.update(actions.dropdownAction, actions.dropdownMenuActions, actions.dropdownIcon);\n\t}\n\n\tprivate _getTabActionBarArgs(profiles: ITerminalProfile[]): {\n\t\tprimaryAction: MenuItemAction,\n\t\tdropdownAction: IAction,\n\t\tdropdownMenuActions: IAction[],\n\t\tclassName: string,\n\t\tdropdownIcon?: string\n\t} {\n\t\tconst dropdownActions: IAction[] = [];\n\t\tconst submenuActions: IAction[] = [];\n\n\t\tfor (const p of profiles) {\n\t\t\tdropdownActions.push(new MenuItemAction({ id: TERMINAL_COMMAND_ID.NEW_WITH_PROFILE, title: p.profileName, category: ContextMenuTabsGroup.Profile }, undefined, { arg: p, shouldForwardArgs: true }, this._contextKeyService, this._commandService));\n\t\t\tsubmenuActions.push(new MenuItemAction({ id: TERMINAL_COMMAND_ID.SPLIT, title: p.profileName, category: ContextMenuTabsGroup.Profile }, undefined, { arg: p, shouldForwardArgs: true }, this._contextKeyService, this._commandService));\n\t\t}\n\n\t\tfor (const contributed of this._terminalContributionService.terminalTypes) {\n\t\t\tdropdownActions.push(new MenuItemAction({ id: contributed.command, title: contributed.title, category: ContextMenuTabsGroup.Profile }, undefined, undefined, this._contextKeyService, this._commandService));\n\t\t}\n\n\t\tif (dropdownActions.length > 0) {\n\t\t\tdropdownActions.push(new SubmenuAction('split.profile', 'Split...', submenuActions));\n\t\t\tdropdownActions.push(new Separator());\n\t\t}\n\n\t\tfor (const [, configureActions] of this._dropdownMenu.getActions()) {\n\t\t\tfor (const action of configureActions) {\n\t\t\t\t// make sure the action is a MenuItemAction\n\t\t\t\tif ('alt' in action) {\n\t\t\t\t\tdropdownActions.push(action);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst primaryAction = this._instantiationService.createInstance(MenuItemAction, { id: TERMINAL_COMMAND_ID.NEW, title: nls.localize('terminal.new', \"New Terminal\"), icon: Codicon.plus }, undefined, undefined);\n\t\tconst dropdownAction = new Action('refresh profiles', 'Launch Profile...', 'codicon-chevron-down', true);\n\t\treturn { primaryAction, dropdownAction, dropdownMenuActions: dropdownActions, className: 'terminal-tab-actions' };\n\t}\n\n\tpublic override focus() {\n\t\tif (this._terminalService.connectionState === TerminalConnectionState.Connecting) {\n\t\t\t// If the terminal is waiting to reconnect to remote terminals, then there is no TerminalInstance yet that can\n\t\t\t// be focused. So wait for connection to finish, then focus.\n\t\t\tconst activeElement = document.activeElement;\n\t\t\tthis._register(this._terminalService.onDidChangeConnectionState(() => {\n\t\t\t\t// Only focus the terminal if the activeElement has not changed since focus() was called\n\t\t\t\t// TODO hack\n\t\t\t\tif (document.activeElement === activeElement) {\n\t\t\t\t\tthis._focus();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\treturn;\n\t\t}\n\t\tthis._focus();\n\t}\n\n\tprivate _focus() {\n\t\tthis._terminalService.getActiveInstance()?.focusWhenReady();\n\t}\n\n\toverride shouldShowWelcome(): boolean {\n\t\tthis._isWelcomeShowing = !this._terminalService.isProcessSupportRegistered && this._terminalService.terminalInstances.length === 0;\n\t\treturn this._isWelcomeShowing;\n\t}\n}\n\nregisterThemingParticipant((theme: IColorTheme, collector: ICssStyleCollector) => {\n\tconst panelBackgroundColor = theme.getColor(TERMINAL_BACKGROUND_COLOR) || theme.getColor(PANEL_BACKGROUND);\n\tcollector.addRule(`.monaco-workbench .part.panel .pane-body.integrated-terminal .terminal-outer-container { background-color: ${panelBackgroundColor ? panelBackgroundColor.toString() : ''}; }`);\n\n\tconst sidebarBackgroundColor = theme.getColor(TERMINAL_BACKGROUND_COLOR) || theme.getColor(SIDE_BAR_BACKGROUND);\n\tcollector.addRule(`.monaco-workbench .part.sidebar .pane-body.integrated-terminal .terminal-outer-container { background-color: ${sidebarBackgroundColor ? sidebarBackgroundColor.toString() : ''}; }`);\n\n\tconst borderColor = theme.getColor(TERMINAL_BORDER_COLOR);\n\tif (borderColor) {\n\t\tcollector.addRule(`.monaco-workbench .pane-body.integrated-terminal .split-view-view:not(:first-child) { border-color: ${borderColor.toString()}; }`);\n\t}\n});\n\n\nclass SwitchTerminalActionViewItem extends SelectActionViewItem {\n\tconstructor(\n\t\taction: IAction,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IContextViewService contextViewService: IContextViewService\n\t) {\n\t\tsuper(null, action, getTerminalSelectOpenItems(_terminalService), _terminalService.activeTabIndex, contextViewService, { ariaLabel: nls.localize('terminals', 'Open Terminals.'), optionsAsChildren: true });\n\t\tthis._register(_terminalService.onInstancesChanged(() => this._updateItems(), this));\n\t\tthis._register(_terminalService.onActiveTabChanged(() => this._updateItems(), this));\n\t\tthis._register(_terminalService.onInstanceTitleChanged(() => this._updateItems(), this));\n\t\tthis._register(_terminalService.onTabDisposed(() => this._updateItems(), this));\n\t\tthis._register(_terminalService.onDidChangeConnectionState(() => this._updateItems(), this));\n\t\tthis._register(_terminalService.onDidChangeAvailableProfiles(() => this._updateItems(), this));\n\t\tthis._register(attachSelectBoxStyler(this.selectBox, this._themeService));\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tcontainer.classList.add('switch-terminal');\n\t\tthis._register(attachStylerCallback(this._themeService, { selectBorder }, colors => {\n\t\t\tcontainer.style.borderColor = colors.selectBorder ? `${colors.selectBorder}` : '';\n\t\t}));\n\t}\n\n\tprivate _updateItems(): void {\n\t\tconst options = getTerminalSelectOpenItems(this._terminalService);\n\t\tthis.setOptions(options, this._terminalService.activeTabIndex);\n\t}\n}\n\nfunction getTerminalSelectOpenItems(terminalService: ITerminalService): ISelectOptionItem[] {\n\tlet items: ISelectOptionItem[];\n\tif (terminalService.connectionState === TerminalConnectionState.Connected) {\n\t\titems = terminalService.getTabLabels().map(label => {\n\t\t\treturn { text: label };\n\t\t});\n\t} else {\n\t\titems = [{ text: nls.localize('terminalConnectingLabel', \"Starting...\") }];\n\t}\n\titems.push({ text: switchTerminalActionViewItemSeparator, isDisabled: true });\n\titems.push({ text: switchTerminalShowTabsTitle });\n\treturn items;\n}\n\nclass SingleTerminalTabActionViewItem extends ActionViewItem {\n\tconstructor(\n\t\taction: IAction,\n\t\tprivate readonly _actions: IAction[],\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(undefined, {\n\t\t\t...action,\n\t\t\tdispose: () => action.dispose(),\n\t\t\trun: async () => this._run(),\n\t\t\tlabel: getSingleTabLabel(_terminalService.getActiveInstance())\n\t\t});\n\t\tthis._register(this._terminalService.onInstancePrimaryStatusChanged(() => this.updateLabel()));\n\t\tthis._register(this._terminalService.onActiveInstanceChanged(() => this.updateLabel()));\n\t\tthis._register(this._terminalService.onInstancesChanged(() => this.updateLabel()));\n\t\tthis._register(this._terminalService.onInstanceTitleChanged(e => {\n\t\t\tif (e === this._terminalService.getActiveInstance()) {\n\t\t\t\tthis.updateLabel();\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride updateLabel(): void {\n\t\tif (this.label) {\n\t\t\tconst label = this.label;\n\t\t\tconst instance = this._terminalService.getActiveInstance();\n\t\t\tif (!instance) {\n\t\t\t\treset(label, '');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlabel.classList.add('single-terminal-tab');\n\t\t\tlet colorStyle = '';\n\t\t\tconst primaryStatus = instance.statusList.primary;\n\t\t\tif (primaryStatus) {\n\t\t\t\tconst colorKey = getColorForSeverity(primaryStatus.severity);\n\t\t\t\tthis._themeService.getColorTheme();\n\t\t\t\tconst foundColor = this._themeService.getColorTheme().getColor(colorKey);\n\t\t\t\tif (foundColor) {\n\t\t\t\t\tcolorStyle = foundColor.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tlabel.style.color = colorStyle;\n\t\t\treset(label, ...renderLabelWithIcons(getSingleTabLabel(instance)));\n\t\t}\n\t}\n\n\tprivate _run() {\n\t\tthis._contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => this.element!,\n\t\t\tgetActions: () => this._actions,\n\t\t\tgetActionsContext: () => this.label\n\t\t});\n\t}\n}\n\nfunction getSingleTabLabel(instance: ITerminalInstance | null) {\n\tif (!instance || !instance.title) {\n\t\treturn '';\n\t}\n\tconst primaryStatus = instance.statusList.primary;\n\tlet label = `$(${instance.icon?.id}) ${instance.title}`;\n\tif (instance.shellLaunchConfig.description) {\n\t\tlabel += ` (${instance.shellLaunchConfig.description})`;\n\t}\n\tif (primaryStatus?.icon) {\n\t\tlabel += ` $(${primaryStatus.icon.id})`;\n\t}\n\treturn label;\n}\n"]}