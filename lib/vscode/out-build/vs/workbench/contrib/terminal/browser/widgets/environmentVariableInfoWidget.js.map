{"version":3,"file":"environmentVariableInfoWidget.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/terminal/browser/widgets/environmentVariableInfoWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { IEnvironmentVariableInfo } from 'vs/workbench/contrib/terminal/common/environmentVariable';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { ITerminalWidget } from 'vs/workbench/contrib/terminal/browser/widgets/widgets';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport * as dom from 'vs/base/browser/dom';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { IHoverService, IHoverOptions } from 'vs/workbench/services/hover/browser/hover';\nimport { ThemeIcon } from 'vs/platform/theme/common/themeService';\n\nexport class EnvironmentVariableInfoWidget extends Widget implements ITerminalWidget {\n\treadonly id = 'env-var-info';\n\n\tprivate _domNode: HTMLElement | undefined;\n\tprivate _container: HTMLElement | undefined;\n\tprivate _mouseMoveListener: IDisposable | undefined;\n\tprivate _hoverOptions: IHoverOptions | undefined;\n\n\tget requiresAction() { return this._info.requiresAction; }\n\n\tconstructor(\n\t\tprivate _info: IEnvironmentVariableInfo,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IHoverService private readonly _hoverService: IHoverService\n\t) {\n\t\tsuper();\n\t}\n\n\tattach(container: HTMLElement): void {\n\t\tthis._container = container;\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.classList.add('terminal-env-var-info', ...ThemeIcon.asClassNameArray(this._info.getIcon()));\n\t\tif (this.requiresAction) {\n\t\t\tthis._domNode.classList.add('requires-action');\n\t\t}\n\t\tcontainer.appendChild(this._domNode);\n\n\t\tconst scheduler: RunOnceScheduler = new RunOnceScheduler(() => this._showHover(), this._configurationService.getValue<number>('workbench.hover.delay'));\n\t\tthis._register(scheduler);\n\t\tlet origin = { x: 0, y: 0 };\n\n\t\tthis.onmouseover(this._domNode, e => {\n\t\t\torigin.x = e.browserEvent.pageX;\n\t\t\torigin.y = e.browserEvent.pageY;\n\t\t\tscheduler.schedule();\n\n\t\t\tthis._mouseMoveListener = dom.addDisposableListener(this._domNode!, dom.EventType.MOUSE_MOVE, e => {\n\t\t\t\t// Reset the scheduler if the mouse moves too much\n\t\t\t\tif (Math.abs(e.pageX - origin.x) > window.devicePixelRatio * 2 || Math.abs(e.pageY - origin.y) > window.devicePixelRatio * 2) {\n\t\t\t\t\torigin.x = e.pageX;\n\t\t\t\t\torigin.y = e.pageY;\n\t\t\t\t\tscheduler.schedule();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.onnonbubblingmouseout(this._domNode, () => {\n\t\t\tscheduler.cancel();\n\t\t\tthis._mouseMoveListener?.dispose();\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._domNode?.parentElement?.removeChild(this._domNode);\n\t\tthis._mouseMoveListener?.dispose();\n\t}\n\n\tfocus() {\n\t\tthis._showHover(true);\n\t}\n\n\tprivate _showHover(focus?: boolean) {\n\t\tif (!this._domNode || !this._container) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._hoverOptions) {\n\t\t\tconst actions = this._info.getActions ? this._info.getActions() : undefined;\n\t\t\tthis._hoverOptions = {\n\t\t\t\ttarget: this._domNode,\n\t\t\t\ttext: new MarkdownString(this._info.getInfo()),\n\t\t\t\tactions\n\t\t\t};\n\t\t}\n\t\tthis._hoverService.showHover(this._hoverOptions, focus);\n\t}\n}\n"]}