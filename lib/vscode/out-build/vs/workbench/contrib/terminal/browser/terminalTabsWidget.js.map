{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalTabsWidget.ts"],"names":[],"mappings":"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","file":"terminalTabsWidget.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IListService, WorkbenchObjectTree } from 'vs/platform/list/browser/listService';\nimport { ITreeNode, ITreeRenderer } from 'vs/base/browser/ui/tree/tree';\nimport { DefaultStyleController } from 'vs/base/browser/ui/list/listWidget';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IThemeService, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { ITerminalInstance, ITerminalService } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { localize } from 'vs/nls';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { MenuEntryActionViewItem } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { KEYBINDING_CONTEXT_TERMINAL_TABS_SINGULAR_SELECTION, TERMINAL_COMMAND_ID } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Action } from 'vs/base/common/actions';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { TerminalDecorationsProvider } from 'vs/workbench/contrib/terminal/browser/terminalDecorationsProvider';\nimport { DEFAULT_LABELS_CONTAINER, IResourceLabel, ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IDecorationsService } from 'vs/workbench/services/decorations/browser/decorations';\nimport { IHoverAction, IHoverService } from 'vs/workbench/services/hover/browser/hover';\nimport Severity from 'vs/base/common/severity';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\n\nconst $ = DOM.$;\nconst TAB_HEIGHT = 22;\nexport const MIN_TABS_WIDGET_WIDTH = 46;\nexport const DEFAULT_TABS_WIDGET_WIDTH = 80;\nexport const MIDPOINT_WIDGET_WIDTH = (MIN_TABS_WIDGET_WIDTH + DEFAULT_TABS_WIDGET_WIDTH) / 2;\n\nexport class TerminalTabsWidget extends WorkbenchObjectTree<ITerminalInstance>  {\n\tprivate _decorationsProvider: TerminalDecorationsProvider | undefined;\n\tprivate _terminalTabsSingleSelectedContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IDecorationsService _decorationsService: IDecorationsService\n\t) {\n\t\tsuper('TerminalTabsTree', container,\n\t\t\t{\n\t\t\t\tgetHeight: () => TAB_HEIGHT,\n\t\t\t\tgetTemplateId: () => 'terminal.tabs'\n\t\t\t},\n\t\t\t[instantiationService.createInstance(TerminalTabsRenderer, container, instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER), () => this.getSelection())],\n\t\t\t{\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tsupportDynamicHeights: false,\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: e => e?.instanceId\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel: e => e?.title,\n\t\t\t\t\tgetWidgetAriaLabel: () => localize('terminal.tabs', \"Terminal tabs\")\n\t\t\t\t},\n\t\t\t\tstyleController: id => new DefaultStyleController(DOM.createStyleSheet(container), id),\n\t\t\t\tfilter: undefined,\n\t\t\t\tsmoothScrolling: configurationService.getValue<boolean>('workbench.list.smoothScrolling'),\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\tadditionalScrollHeight: TAB_HEIGHT\n\t\t\t},\n\t\t\tcontextKeyService,\n\t\t\tlistService,\n\t\t\tthemeService,\n\t\t\tconfigurationService,\n\t\t\tkeybindingService,\n\t\t\taccessibilityService,\n\t\t);\n\t\tthis._terminalService.onInstancesChanged(() => this._render());\n\t\tthis._terminalService.onInstanceTitleChanged(() => this._render());\n\t\tthis._terminalService.onActiveInstanceChanged(e => {\n\t\t\tif (e) {\n\t\t\t\tthis.setSelection([e]);\n\t\t\t\tthis.reveal(e);\n\t\t\t}\n\t\t});\n\n\t\tthis.onMouseDblClick(async () => {\n\t\t\tif (this.getFocus().length === 0) {\n\t\t\t\tconst instance = this._terminalService.createTerminal();\n\t\t\t\tthis._terminalService.setActiveInstance(instance);\n\t\t\t\tawait instance.focusWhenReady();\n\t\t\t}\n\t\t});\n\n\t\tthis.onMouseClick(e => {\n\t\t\t// If focus mode is single click focus the element unless a multi-select in happening\n\t\t\tconst focusMode = configurationService.getValue<'singleClick' | 'doubleClick'>('terminal.integrated.tabs.focusMode');\n\t\t\tif (focusMode === 'singleClick') {\n\t\t\t\tif (this.getSelection().length <= 1) {\n\t\t\t\t\te.element?.focus(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Set the selection to whatever is right clicked if it is not inside the selection\n\t\tthis.onContextMenu(e => {\n\t\t\tif (!e.element) {\n\t\t\t\tthis.setSelection([null]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst selection = this.getSelection();\n\t\t\tif (!selection || !selection.find(s => e.element === s)) {\n\t\t\t\tthis.setSelection([e.element]);\n\t\t\t}\n\t\t});\n\n\t\tthis._terminalTabsSingleSelectedContextKey = KEYBINDING_CONTEXT_TERMINAL_TABS_SINGULAR_SELECTION.bindTo(contextKeyService);\n\n\t\tthis.onDidChangeSelection(e => {\n\t\t\tthis._terminalTabsSingleSelectedContextKey.set(e.elements.length === 1);\n\t\t\tif (this._terminalTabsSingleSelectedContextKey) {\n\t\t\t\tconst instance = e.elements[0];\n\t\t\t\tif (!instance) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._terminalService.setActiveInstance(instance);\n\t\t\t}\n\t\t});\n\n\t\tthis.onDidChangeFocus(e => {\n\t\t\tthis._terminalTabsSingleSelectedContextKey.set(e.elements.length === 1);\n\t\t});\n\n\t\tthis.onDidOpen(async e => {\n\t\t\tconst instance = e.element;\n\t\t\tif (!instance) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._terminalService.setActiveInstance(instance);\n\t\t\tif (!e.editorOptions.preserveFocus) {\n\t\t\t\tawait instance.focusWhenReady();\n\t\t\t}\n\t\t});\n\t\tif (!this._decorationsProvider) {\n\t\t\tthis._decorationsProvider = instantiationService.createInstance(TerminalDecorationsProvider);\n\t\t\t_decorationsService.registerDecorationsProvider(this._decorationsProvider);\n\t\t}\n\t\tthis._terminalService.onInstancePrimaryStatusChanged(() => this._render());\n\t\tthis._render();\n\t}\n\n\tprivate _render(): void {\n\t\tthis.setChildren(null, this._terminalService.terminalInstances.map(instance => {\n\t\t\treturn {\n\t\t\t\telement: instance,\n\t\t\t\tcollapsed: true,\n\t\t\t\tcollapsible: false\n\t\t\t};\n\t\t}));\n\t}\n}\n\nclass TerminalTabsRenderer implements ITreeRenderer<ITerminalInstance, never, ITerminalTabEntryTemplate> {\n\ttemplateId = 'terminal.tabs';\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _labels: ResourceLabels,\n\t\tprivate readonly _getSelection: () => (ITerminalInstance | null)[],\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IListService private readonly _listService: IListService\n\t) {\n\t}\n\n\trenderTemplate(container: HTMLElement): ITerminalTabEntryTemplate {\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-no-twistie');\n\n\t\tconst element = DOM.append(container, $('.terminal-tabs-entry'));\n\t\tconst context: { hoverActions?: IHoverAction[] } = {};\n\t\tconst label = this._labels.create(element, {\n\t\t\tsupportHighlights: true,\n\t\t\tsupportDescriptionHighlights: true,\n\t\t\tsupportIcons: true,\n\t\t\thoverDelegate: {\n\t\t\t\tdelay: this._configurationService.getValue<number>('workbench.hover.delay'),\n\t\t\t\tshowHover: options => {\n\t\t\t\t\treturn this._hoverService.showHover({\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tactions: context.hoverActions,\n\t\t\t\t\t\thideOnHover: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst actionsContainer = DOM.append(label.element, $('.actions'));\n\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: action =>\n\t\t\t\taction instanceof MenuItemAction\n\t\t\t\t\t? this._instantiationService.createInstance(MenuEntryActionViewItem, action)\n\t\t\t\t\t: undefined\n\t\t});\n\n\t\treturn {\n\t\t\telement,\n\t\t\tlabel,\n\t\t\tactionBar,\n\t\t\tcontext\n\t\t};\n\t}\n\n\tshouldHideText(): boolean {\n\t\treturn this._container ? this._container.clientWidth < MIDPOINT_WIDGET_WIDTH : false;\n\t}\n\n\trenderElement(node: ITreeNode<ITerminalInstance>, index: number, template: ITerminalTabEntryTemplate): void {\n\t\tlet instance = node.element;\n\n\t\tconst tab = this._terminalService.getTabForInstance(instance);\n\t\tif (!tab) {\n\t\t\tthrow new Error(`Could not find tab for instance \"${instance.instanceId}\"`);\n\t\t}\n\n\t\tconst hasText = !this.shouldHideText();\n\t\ttemplate.element.classList.toggle('has-text', hasText);\n\n\t\tlet ariaLabel: string = '';\n\t\tlet prefix: string = '';\n\t\tif (tab.terminalInstances.length > 1) {\n\t\t\tconst terminalIndex = tab.terminalInstances.indexOf(instance);\n\t\t\tariaLabel = localize({\n\t\t\t\tkey: 'splitTerminalAriaLabel',\n\t\t\t\tcomment: [\n\t\t\t\t\t`The terminal's ID`,\n\t\t\t\t\t`The terminal's title`,\n\t\t\t\t\t`The terminal's split number`,\n\t\t\t\t\t`The terminal group's total split number`\n\t\t\t\t]\n\t\t\t}, \"Terminal {0} {1}, split {2} of {3}\", instance.instanceId, instance.title, terminalIndex + 1, tab.terminalInstances.length);\n\t\t\tif (terminalIndex === 0) {\n\t\t\t\tprefix = `┌ `;\n\t\t\t} else if (terminalIndex === tab!.terminalInstances.length - 1) {\n\t\t\t\tprefix = `└ `;\n\t\t\t} else {\n\t\t\t\tprefix = `├ `;\n\t\t\t}\n\t\t} else {\n\t\t\tariaLabel = localize({\n\t\t\t\tkey: 'terminalAriaLabel',\n\t\t\t\tcomment: [\n\t\t\t\t\t`The terminal's ID`,\n\t\t\t\t\t`The terminal's title`\n\t\t\t\t]\n\t\t\t}, \"Terminal {0} {1}\", instance.instanceId, instance.title);\n\t\t}\n\n\t\tlet title = instance.title;\n\t\tconst statuses = instance.statusList.statuses;\n\t\ttemplate.context.hoverActions = [];\n\t\tfor (const status of statuses) {\n\t\t\ttitle += `\\n\\n---\\n\\n${status.tooltip || status.id}`;\n\t\t\tif (status.hoverActions) {\n\t\t\t\ttemplate.context.hoverActions.push(...status.hoverActions);\n\t\t\t}\n\t\t}\n\n\t\tlet label: string;\n\t\tif (!hasText) {\n\t\t\ttemplate.actionBar.clear();\n\t\t\tconst primaryStatus = instance.statusList.primary;\n\t\t\tif (primaryStatus && primaryStatus.severity >= Severity.Warning) {\n\t\t\t\tlabel = `${prefix}$(${primaryStatus.icon?.id || instance.icon?.id})`;\n\t\t\t\tariaLabel = '';\n\t\t\t} else {\n\t\t\t\tlabel = `${prefix}$(${instance.icon?.id})`;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fillActionBar(instance, template);\n\t\t\tlabel = `${prefix}$(${instance.icon?.id})`;\n\t\t\t// Only add the title if the icon is set, this prevents the title jumping around for\n\t\t\t// example when launching with a ShellLaunchConfig.name and no icon\n\t\t\tif (instance.icon) {\n\t\t\t\tlabel += ` ${instance.title}`;\n\t\t\t}\n\t\t}\n\n\t\tif (!template.elementDispoables) {\n\t\t\ttemplate.elementDispoables = new DisposableStore();\n\t\t}\n\n\t\t// Kill terminal on middle click\n\t\ttemplate.elementDispoables.add(DOM.addDisposableListener(template.element, DOM.EventType.AUXCLICK, e => {\n\t\t\tif (e.button === 1/*middle*/) {\n\t\t\t\tinstance.dispose();\n\t\t\t}\n\t\t}));\n\n\t\t// Set aria lable to expose split information to screen reader\n\t\ttemplate.label.element.querySelector('.label-name')?.setAttribute('aria-label', ariaLabel);\n\n\t\ttemplate.label.setResource({\n\t\t\tresource: instance.resource,\n\t\t\tname: label,\n\t\t\tdescription: hasText ? instance.shellLaunchConfig.description : undefined\n\t\t}, {\n\t\t\tfileDecorations: {\n\t\t\t\tcolors: true,\n\t\t\t\tbadges: hasText\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tmarkdown: new MarkdownString(title),\n\t\t\t\tmarkdownNotSupportedFallback: undefined\n\t\t\t}\n\t\t});\n\t}\n\n\tdisposeElement(element: ITreeNode<ITerminalInstance, any>, index: number, templateData: ITerminalTabEntryTemplate): void {\n\t\ttemplateData.elementDispoables?.dispose();\n\t\ttemplateData.elementDispoables = undefined;\n\t}\n\n\tdisposeTemplate(templateData: ITerminalTabEntryTemplate): void {\n\t}\n\n\tfillActionBar(instance: ITerminalInstance, template: ITerminalTabEntryTemplate): void {\n\t\t// If the instance is within the selection, split all selected\n\t\tconst actions = [\n\t\t\tnew Action(TERMINAL_COMMAND_ID.SPLIT_INSTANCE, localize('terminal.split', \"Split\"), ThemeIcon.asClassName(Codicon.splitHorizontal), true, async () => {\n\t\t\t\tthis._runForSelectionOrInstance(instance, e => this._terminalService.splitInstance(e));\n\t\t\t}),\n\t\t\tnew Action(TERMINAL_COMMAND_ID.KILL_INSTANCE, localize('terminal.kill', \"Kill\"), ThemeIcon.asClassName(Codicon.trashcan), true, async () => {\n\t\t\t\tthis._runForSelectionOrInstance(instance, e => e.dispose());\n\t\t\t})\n\t\t];\n\t\t// TODO: Cache these in a way that will use the correct instance\n\t\ttemplate.actionBar.clear();\n\t\tfor (const action of actions) {\n\t\t\ttemplate.actionBar.push(action, { icon: true, label: false, keybinding: this._keybindingService.lookupKeybinding(action.id)?.getLabel() });\n\t\t}\n\t}\n\n\tprivate _runForSelectionOrInstance(instance: ITerminalInstance, callback: (instance: ITerminalInstance) => void) {\n\t\tconst selection = this._getSelection();\n\t\tif (selection.includes(instance)) {\n\t\t\tfor (const s of selection) {\n\t\t\t\tif (s) {\n\t\t\t\t\tcallback(s);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(instance);\n\t\t}\n\t\tthis._terminalService.focusTabs();\n\t\tthis._listService.lastFocusedList?.focusNext();\n\t}\n}\n\ninterface ITerminalTabEntryTemplate {\n\telement: HTMLElement;\n\tlabel: IResourceLabel;\n\tactionBar: ActionBar;\n\tcontext: {\n\t\thoverActions?: IHoverAction[];\n\t};\n\telementDispoables?: DisposableStore;\n}\n"]}