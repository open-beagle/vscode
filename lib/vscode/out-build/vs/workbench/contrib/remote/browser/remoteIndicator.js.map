{"version":3,"sources":["vs/workbench/contrib/remote/browser/remoteIndicator.ts"],"names":[],"mappings":"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","file":"remoteIndicator.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { STATUS_BAR_HOST_NAME_BACKGROUND, STATUS_BAR_HOST_NAME_FOREGROUND } from 'vs/workbench/common/theme';\nimport { themeColorFromId } from 'vs/platform/theme/common/themeService';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { Disposable, dispose } from 'vs/base/common/lifecycle';\nimport { MenuId, IMenuService, MenuItemAction, MenuRegistry, registerAction2, Action2, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { StatusbarAlignment, IStatusbarService, IStatusbarEntryAccessor, IStatusbarEntry } from 'vs/workbench/services/statusbar/common/statusbar';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { Schemas } from 'vs/base/common/network';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from 'vs/platform/quickinput/common/quickInput';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { PersistentConnectionEventType } from 'vs/platform/remote/common/remoteAgentConnection';\nimport { IRemoteAuthorityResolverService } from 'vs/platform/remote/common/remoteAuthorityResolver';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { isWeb } from 'vs/base/common/platform';\nimport { once } from 'vs/base/common/functional';\nimport { truncate } from 'vs/base/common/strings';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { getVirtualWorkspaceLocation } from 'vs/platform/remote/common/remoteHosts';\nimport { getCodiconAriaLabel } from 'vs/base/common/codicons';\nimport { ILogService } from 'vs/platform/log/common/log';\n\n\ntype ActionGroup = [string, Array<MenuItemAction | SubmenuItemAction>];\nexport class RemoteStatusIndicator extends Disposable implements IWorkbenchContribution {\n\n\tprivate static readonly REMOTE_ACTIONS_COMMAND_ID = 'workbench.action.remote.showMenu';\n\tprivate static readonly CLOSE_REMOTE_COMMAND_ID = 'workbench.action.remote.close';\n\tprivate static readonly SHOW_CLOSE_REMOTE_COMMAND_ID = !isWeb; // web does not have a \"Close Remote\" command\n\n\tprivate static readonly REMOTE_STATUS_LABEL_MAX_LENGTH = 40;\n\n\tprivate remoteStatusEntry: IStatusbarEntryAccessor | undefined;\n\n\tprivate readonly legacyIndicatorMenu = this._register(this.menuService.createMenu(MenuId.StatusBarWindowIndicatorMenu, this.contextKeyService)); // to be removed once migration completed\n\tprivate readonly remoteIndicatorMenu = this._register(this.menuService.createMenu(MenuId.StatusBarRemoteIndicatorMenu, this.contextKeyService));\n\n\tprivate remoteMenuActionsGroups: ActionGroup[] | undefined;\n\n\tprivate readonly remoteAuthority = this.environmentService.remoteAuthority;\n\tprivate connectionState: 'initializing' | 'connected' | 'reconnecting' | 'disconnected' | undefined = undefined;\n\tprivate readonly connectionStateContextKey = new RawContextKey<'' | 'initializing' | 'disconnected' | 'connected'>('remoteConnectionState', '').bindTo(this.contextKeyService);\n\n\tprivate loggedInvalidGroupNames: { [group: string]: boolean } = Object.create(null);\n\n\tconstructor(\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IContextKeyService private contextKeyService: IContextKeyService,\n\t\t@IMenuService private menuService: IMenuService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IRemoteAuthorityResolverService private readonly remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper();\n\n\t\t// Set initial connection state\n\t\tif (this.remoteAuthority) {\n\t\t\tthis.connectionState = 'initializing';\n\t\t\tthis.connectionStateContextKey.set(this.connectionState);\n\t\t}\n\n\t\tthis.registerActions();\n\t\tthis.registerListeners();\n\n\t\tthis.updateWhenInstalledExtensionsRegistered();\n\t\tthis.updateRemoteStatusIndicator();\n\t}\n\n\tprivate registerActions(): void {\n\t\tconst category = { value: nls.localize('remote.category', \"Remote\"), original: 'Remote' };\n\n\t\t// Show Remote Menu\n\t\tconst that = this;\n\t\tregisterAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteStatusIndicator.REMOTE_ACTIONS_COMMAND_ID,\n\t\t\t\t\tcategory,\n\t\t\t\t\ttitle: { value: nls.localize('remote.showMenu', \"Show Remote Menu\"), original: 'Show Remote Menu' },\n\t\t\t\t\tf1: true,\n\t\t\t\t});\n\t\t\t}\n\t\t\trun = () => that.showRemoteMenu();\n\t\t});\n\n\t\t// Close Remote Connection\n\t\tif (RemoteStatusIndicator.SHOW_CLOSE_REMOTE_COMMAND_ID && this.remoteAuthority) {\n\t\t\tregisterAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\t\tcategory,\n\t\t\t\t\t\ttitle: { value: nls.localize('remote.close', \"Close Remote Connection\"), original: 'Close Remote Connection' },\n\t\t\t\t\t\tf1: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun = () => that.remoteAuthority && that.hostService.openWindow({ forceReuseWindow: true, remoteAuthority: null });\n\t\t\t});\n\n\t\t\tMenuRegistry.appendMenuItem(MenuId.MenubarFileMenu, {\n\t\t\t\tgroup: '6_close',\n\t\t\t\tcommand: {\n\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\ttitle: nls.localize({ key: 'miCloseRemote', comment: ['&& denotes a mnemonic'] }, \"Close Re&&mote Connection\")\n\t\t\t\t},\n\t\t\t\torder: 3.5\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Menu changes\n\t\tconst updateRemoteActions = () => {\n\t\t\tthis.remoteMenuActionsGroups = undefined;\n\t\t\tthis.updateRemoteStatusIndicator();\n\t\t};\n\n\t\tthis._register(this.legacyIndicatorMenu.onDidChange(updateRemoteActions));\n\t\tthis._register(this.remoteIndicatorMenu.onDidChange(updateRemoteActions));\n\n\t\t// Update indicator when formatter changes as it may have an impact on the remote label\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => this.updateRemoteStatusIndicator()));\n\n\t\t// Update based on remote indicator changes if any\n\t\tconst remoteIndicator = this.environmentService.options?.windowIndicator;\n\t\tif (remoteIndicator) {\n\t\t\tthis._register(remoteIndicator.onDidChange(() => this.updateRemoteStatusIndicator()));\n\t\t}\n\n\t\t// Listen to changes of the connection\n\t\tif (this.remoteAuthority) {\n\t\t\tconst connection = this.remoteAgentService.getConnection();\n\t\t\tif (connection) {\n\t\t\t\tthis._register(connection.onDidStateChange((e) => {\n\t\t\t\t\tswitch (e.type) {\n\t\t\t\t\t\tcase PersistentConnectionEventType.ConnectionLost:\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionRunning:\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionWait:\n\t\t\t\t\t\t\tthis.setState('reconnecting');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionPermanentFailure:\n\t\t\t\t\t\t\tthis.setState('disconnected');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase PersistentConnectionEventType.ConnectionGain:\n\t\t\t\t\t\t\tthis.setState('connected');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._register(this.workspaceContextService.onDidChangeWorkbenchState(() => this.updateRemoteStatusIndicator()));\n\t\t}\n\t}\n\n\tprivate async updateWhenInstalledExtensionsRegistered(): Promise<void> {\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\tconst remoteAuthority = this.remoteAuthority;\n\t\tif (remoteAuthority) {\n\n\t\t\t// Try to resolve the authority to figure out connection state\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.remoteAuthorityResolverService.resolveAuthority(remoteAuthority);\n\n\t\t\t\t\tthis.setState('connected');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.setState('disconnected');\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\n\t\tthis.updateRemoteStatusIndicator();\n\t}\n\n\tprivate setState(newState: 'disconnected' | 'connected' | 'reconnecting'): void {\n\t\tif (this.connectionState !== newState) {\n\t\t\tthis.connectionState = newState;\n\n\t\t\t// simplify context key which doesn't support `connecting`\n\t\t\tif (this.connectionState === 'reconnecting') {\n\t\t\t\tthis.connectionStateContextKey.set('disconnected');\n\t\t\t} else {\n\t\t\t\tthis.connectionStateContextKey.set(this.connectionState);\n\t\t\t}\n\n\t\t\tthis.updateRemoteStatusIndicator();\n\t\t}\n\t}\n\n\tprivate validatedGroup(group: string) {\n\t\tif (!group.match(/^(remote|virtualfs)_(\\d\\d)_(([a-z][a-z0-9+\\-.]*)_(.*))$/)) {\n\t\t\tif (!this.loggedInvalidGroupNames[group]) {\n\t\t\t\tthis.loggedInvalidGroupNames[group] = true;\n\t\t\t\tthis.logService.warn(`Invalid group name used in \"statusBar/remoteIndicator\" menu contribution: ${group}. Entries ignored. Expected format: 'remote_$ORDER_$REMOTENAME_$GROUPING or 'virtualfs_$ORDER_$FILESCHEME_$GROUPING.`);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate getRemoteMenuActions(doNotUseCache?: boolean): ActionGroup[] {\n\t\tif (!this.remoteMenuActionsGroups || doNotUseCache) {\n\t\t\tthis.remoteMenuActionsGroups = this.remoteIndicatorMenu.getActions().filter(a => this.validatedGroup(a[0])).concat(this.legacyIndicatorMenu.getActions());\n\t\t}\n\t\treturn this.remoteMenuActionsGroups;\n\t}\n\n\tprivate updateRemoteStatusIndicator(): void {\n\n\t\t// Remote Indicator: show if provided via options\n\t\tconst remoteIndicator = this.environmentService.options?.windowIndicator;\n\t\tif (remoteIndicator) {\n\t\t\tthis.renderRemoteStatusIndicator(truncate(remoteIndicator.label, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH), remoteIndicator.tooltip, remoteIndicator.command);\n\t\t\treturn;\n\t\t}\n\n\t\t// Remote Authority: show connection state\n\t\tif (this.remoteAuthority) {\n\t\t\tconst hostLabel = this.labelService.getHostLabel(Schemas.vscodeRemote, this.remoteAuthority) || this.remoteAuthority;\n\t\t\tswitch (this.connectionState) {\n\t\t\t\tcase 'initializing':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(nls.localize('host.open', \"Opening Remote...\"), nls.localize('host.open', \"Opening Remote...\"), undefined, true /* progress */);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'reconnecting':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`${nls.localize('host.reconnecting', \"Reconnecting to {0}...\", truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH))}`, nls.localize('host.tooltipReconnecting', \"Reconnecting to {0}...\", hostLabel), undefined, true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'disconnected':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`$(alert) ${nls.localize('disconnectedFrom', \"Disconnected from {0}\", truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH))}`, nls.localize('host.tooltipDisconnected', \"Disconnected from {0}\", hostLabel));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`$(remote) ${truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH)}`, nls.localize('host.tooltip', \"Editing on {0}\", hostLabel));\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Workspace with label: indicate editing source\n\t\tconst workspaceLabel = this.getWorkspaceLabel();\n\t\tif (workspaceLabel) {\n\t\t\tthis.renderRemoteStatusIndicator(`$(remote) ${truncate(workspaceLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH)}`, nls.localize('workspace.tooltip', \"Editing on {0}\", workspaceLabel));\n\t\t\treturn;\n\t\t}\n\n\t\t// Remote actions: offer menu\n\t\tif (this.getRemoteMenuActions().length > 0) {\n\t\t\tthis.renderRemoteStatusIndicator(`$(remote)`, nls.localize('noHost.tooltip', \"Open a Remote Window\"));\n\t\t\treturn;\n\t\t}\n\n\t\t// No Remote Extensions: hide status indicator\n\t\tdispose(this.remoteStatusEntry);\n\t\tthis.remoteStatusEntry = undefined;\n\t}\n\n\tprivate getWorkspaceLabel() {\n\t\tconst workspace = this.workspaceContextService.getWorkspace();\n\t\tconst workspaceLocation = getVirtualWorkspaceLocation(workspace);\n\t\tif (workspaceLocation) {\n\t\t\treturn this.labelService.getHostLabel(workspaceLocation.scheme, workspaceLocation.authority);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate renderRemoteStatusIndicator(text: string, tooltip?: string, command?: string, showProgress?: boolean): void {\n\t\tconst name = nls.localize('remoteHost', \"Remote Host\");\n\t\tif (typeof command !== 'string' && this.getRemoteMenuActions().length > 0) {\n\t\t\tcommand = RemoteStatusIndicator.REMOTE_ACTIONS_COMMAND_ID;\n\t\t}\n\n\t\tconst ariaLabel = getCodiconAriaLabel(text);\n\t\tconst properties: IStatusbarEntry = {\n\t\t\tbackgroundColor: themeColorFromId(STATUS_BAR_HOST_NAME_BACKGROUND),\n\t\t\tcolor: themeColorFromId(STATUS_BAR_HOST_NAME_FOREGROUND),\n\t\t\tariaLabel,\n\t\t\ttext,\n\t\t\tshowProgress,\n\t\t\ttooltip,\n\t\t\tcommand\n\t\t};\n\n\t\tif (this.remoteStatusEntry) {\n\t\t\tthis.remoteStatusEntry.update(properties);\n\t\t} else {\n\t\t\tthis.remoteStatusEntry = this.statusbarService.addEntry(properties, 'status.host', name, StatusbarAlignment.LEFT, Number.MAX_VALUE /* first entry */);\n\t\t}\n\t}\n\n\tprivate showRemoteMenu() {\n\t\tconst getCategoryLabel = (action: MenuItemAction) => {\n\t\t\tif (action.item.category) {\n\t\t\t\treturn typeof action.item.category === 'string' ? action.item.category : action.item.category.value;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst computeItems = () => {\n\t\t\tconst actionGroups = this.getRemoteMenuActions(true);\n\n\t\t\tconst items: (IQuickPickItem | IQuickPickSeparator)[] = [];\n\n\t\t\tlet lastCategoryName: string | undefined = undefined;\n\n\t\t\tfor (let actionGroup of actionGroups) {\n\t\t\t\tlet hasGroupCategory = false;\n\t\t\t\tfor (let action of actionGroup[1]) {\n\t\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\t\tif (!hasGroupCategory) {\n\t\t\t\t\t\t\tconst category = getCategoryLabel(action);\n\t\t\t\t\t\t\tif (category !== lastCategoryName) {\n\t\t\t\t\t\t\t\titems.push({ type: 'separator', label: category });\n\t\t\t\t\t\t\t\tlastCategoryName = category;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thasGroupCategory = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet label = typeof action.item.title === 'string' ? action.item.title : action.item.title.value;\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\ttype: 'item',\n\t\t\t\t\t\t\tid: action.item.id,\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (RemoteStatusIndicator.SHOW_CLOSE_REMOTE_COMMAND_ID && this.remoteAuthority) {\n\t\t\t\tif (items.length) {\n\t\t\t\t\titems.push({ type: 'separator' });\n\t\t\t\t}\n\n\t\t\t\titems.push({\n\t\t\t\t\ttype: 'item',\n\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\tlabel: nls.localize('closeRemote.title', 'Close Remote Connection')\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn items;\n\t\t};\n\n\t\tconst quickPick = this.quickInputService.createQuickPick();\n\t\tquickPick.items = computeItems();\n\t\tquickPick.sortByLabel = false;\n\t\tquickPick.canSelectMany = false;\n\t\tonce(quickPick.onDidAccept)((_ => {\n\t\t\tconst selectedItems = quickPick.selectedItems;\n\t\t\tif (selectedItems.length === 1) {\n\t\t\t\tthis.commandService.executeCommand(selectedItems[0].id!);\n\t\t\t}\n\n\t\t\tquickPick.hide();\n\t\t}));\n\n\t\t// refresh the items when actions change\n\t\tconst legacyItemUpdater = this.legacyIndicatorMenu.onDidChange(() => quickPick.items = computeItems());\n\t\tquickPick.onDidHide(legacyItemUpdater.dispose);\n\n\t\tconst itemUpdater = this.remoteIndicatorMenu.onDidChange(() => quickPick.items = computeItems());\n\t\tquickPick.onDidHide(itemUpdater.dispose);\n\n\t\tquickPick.show();\n\t}\n}\n"]}