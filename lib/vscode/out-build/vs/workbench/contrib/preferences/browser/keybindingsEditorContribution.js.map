{"version":3,"sources":["vs/workbench/contrib/preferences/browser/keybindingsEditorContribution.ts"],"names":[],"mappings":"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","file":"keybindingsEditorContribution.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { KeyCode, KeyMod, KeyChord, SimpleKeybinding } from 'vs/base/common/keyCodes';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { registerEditorContribution, ServicesAccessor, registerEditorCommand, EditorCommand } from 'vs/editor/browser/editorExtensions';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/snippetController2';\nimport { SmartSnippetInserter } from 'vs/workbench/contrib/preferences/common/smartSnippetInserter';\nimport { DefineKeybindingOverlayWidget } from 'vs/workbench/contrib/preferences/browser/keybindingWidgets';\nimport { FloatingClickWidget } from 'vs/workbench/browser/codeeditor';\nimport { parseTree, Node } from 'vs/base/common/json';\nimport { ScanCodeBinding } from 'vs/base/common/scanCode';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { WindowsNativeResolvedKeybinding } from 'vs/workbench/services/keybinding/common/windowsKeyboardMapper';\nimport { themeColorFromId, ThemeColor } from 'vs/platform/theme/common/themeService';\nimport { overviewRulerInfo, overviewRulerError } from 'vs/editor/common/view/editorColorRegistry';\nimport { IModelDeltaDecoration, ITextModel, TrackedRangeStickiness, OverviewRulerLane } from 'vs/editor/common/model';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { KeybindingParser } from 'vs/base/common/keybindingParser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { equals } from 'vs/base/common/arrays';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { isEqual } from 'vs/base/common/resources';\n\nconst NLS_LAUNCH_MESSAGE = nls.localize('defineKeybinding.start', \"Define Keybinding\");\nconst NLS_KB_LAYOUT_ERROR_MESSAGE = nls.localize('defineKeybinding.kbLayoutErrorMessage', \"You won't be able to produce this key combination under your current keyboard layout.\");\n\nexport class DefineKeybindingController extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.defineKeybinding';\n\n\tstatic get(editor: ICodeEditor): DefineKeybindingController {\n\t\treturn editor.getContribution<DefineKeybindingController>(DefineKeybindingController.ID);\n\t}\n\n\tprivate _keybindingWidgetRenderer?: KeybindingWidgetRenderer;\n\tprivate _keybindingDecorationRenderer?: KeybindingEditorDecorationsRenderer;\n\n\tconstructor(\n\t\tprivate _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IEnvironmentService private readonly _environmentService: IEnvironmentService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editor.onDidChangeModel(e => this._update()));\n\t\tthis._update();\n\t}\n\n\tget keybindingWidgetRenderer(): KeybindingWidgetRenderer | undefined {\n\t\treturn this._keybindingWidgetRenderer;\n\t}\n\n\toverride dispose(): void {\n\t\tthis._disposeKeybindingWidgetRenderer();\n\t\tthis._disposeKeybindingDecorationRenderer();\n\t\tsuper.dispose();\n\t}\n\n\tprivate _update(): void {\n\t\tif (!isInterestingEditorModel(this._editor, this._environmentService)) {\n\t\t\tthis._disposeKeybindingWidgetRenderer();\n\t\t\tthis._disposeKeybindingDecorationRenderer();\n\t\t\treturn;\n\t\t}\n\n\t\t// Decorations are shown for the default keybindings.json **and** for the user keybindings.json\n\t\tthis._createKeybindingDecorationRenderer();\n\n\t\t// The button to define keybindings is shown only for the user keybindings.json\n\t\tif (!this._editor.getOption(EditorOption.readOnly)) {\n\t\t\tthis._createKeybindingWidgetRenderer();\n\t\t} else {\n\t\t\tthis._disposeKeybindingWidgetRenderer();\n\t\t}\n\t}\n\n\tprivate _createKeybindingWidgetRenderer(): void {\n\t\tif (!this._keybindingWidgetRenderer) {\n\t\t\tthis._keybindingWidgetRenderer = this._instantiationService.createInstance(KeybindingWidgetRenderer, this._editor);\n\t\t}\n\t}\n\n\tprivate _disposeKeybindingWidgetRenderer(): void {\n\t\tif (this._keybindingWidgetRenderer) {\n\t\t\tthis._keybindingWidgetRenderer.dispose();\n\t\t\tthis._keybindingWidgetRenderer = undefined;\n\t\t}\n\t}\n\n\tprivate _createKeybindingDecorationRenderer(): void {\n\t\tif (!this._keybindingDecorationRenderer) {\n\t\t\tthis._keybindingDecorationRenderer = this._instantiationService.createInstance(KeybindingEditorDecorationsRenderer, this._editor);\n\t\t}\n\t}\n\n\tprivate _disposeKeybindingDecorationRenderer(): void {\n\t\tif (this._keybindingDecorationRenderer) {\n\t\t\tthis._keybindingDecorationRenderer.dispose();\n\t\t\tthis._keybindingDecorationRenderer = undefined;\n\t\t}\n\t}\n}\n\nexport class KeybindingWidgetRenderer extends Disposable {\n\n\tprivate _launchWidget: FloatingClickWidget;\n\tprivate _defineWidget: DefineKeybindingOverlayWidget;\n\n\tconstructor(\n\t\tprivate _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._launchWidget = this._register(this._instantiationService.createInstance(FloatingClickWidget, this._editor, NLS_LAUNCH_MESSAGE, DefineKeybindingCommand.ID));\n\t\tthis._register(this._launchWidget.onClick(() => this.showDefineKeybindingWidget()));\n\t\tthis._defineWidget = this._register(this._instantiationService.createInstance(DefineKeybindingOverlayWidget, this._editor));\n\n\t\tthis._launchWidget.render();\n\t}\n\n\tshowDefineKeybindingWidget(): void {\n\t\tthis._defineWidget.start().then(keybinding => this._onAccepted(keybinding));\n\t}\n\n\tprivate _onAccepted(keybinding: string | null): void {\n\t\tthis._editor.focus();\n\t\tif (keybinding && this._editor.hasModel()) {\n\t\t\tconst regexp = new RegExp(/\\\\/g);\n\t\t\tconst backslash = regexp.test(keybinding);\n\t\t\tif (backslash) {\n\t\t\t\tkeybinding = keybinding.slice(0, -1) + '\\\\\\\\';\n\t\t\t}\n\t\t\tlet snippetText = [\n\t\t\t\t'{',\n\t\t\t\t'\\t\"key\": ' + JSON.stringify(keybinding) + ',',\n\t\t\t\t'\\t\"command\": \"${1:commandId}\",',\n\t\t\t\t'\\t\"when\": \"${2:editorTextFocus}\"',\n\t\t\t\t'}$0'\n\t\t\t].join('\\n');\n\n\t\t\tconst smartInsertInfo = SmartSnippetInserter.insertSnippet(this._editor.getModel(), this._editor.getPosition());\n\t\t\tsnippetText = smartInsertInfo.prepend + snippetText + smartInsertInfo.append;\n\t\t\tthis._editor.setPosition(smartInsertInfo.position);\n\n\t\t\tSnippetController2.get(this._editor).insert(snippetText, { overwriteBefore: 0, overwriteAfter: 0 });\n\t\t}\n\t}\n}\n\nexport class KeybindingEditorDecorationsRenderer extends Disposable {\n\n\tprivate _updateDecorations: RunOnceScheduler;\n\tprivate _dec: string[] = [];\n\n\tconstructor(\n\t\tprivate _editor: ICodeEditor,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._updateDecorations = this._register(new RunOnceScheduler(() => this._updateDecorationsNow(), 500));\n\n\t\tconst model = assertIsDefined(this._editor.getModel());\n\t\tthis._register(model.onDidChangeContent(() => this._updateDecorations.schedule()));\n\t\tthis._register(this._keybindingService.onDidUpdateKeybindings((e) => this._updateDecorations.schedule()));\n\t\tthis._register({\n\t\t\tdispose: () => {\n\t\t\t\tthis._dec = this._editor.deltaDecorations(this._dec, []);\n\t\t\t\tthis._updateDecorations.cancel();\n\t\t\t}\n\t\t});\n\t\tthis._updateDecorations.schedule();\n\t}\n\n\tprivate _updateDecorationsNow(): void {\n\t\tconst model = assertIsDefined(this._editor.getModel());\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\n\t\tconst root = parseTree(model.getValue());\n\t\tif (root && Array.isArray(root.children)) {\n\t\t\tfor (let i = 0, len = root.children.length; i < len; i++) {\n\t\t\t\tconst entry = root.children[i];\n\t\t\t\tconst dec = this._getDecorationForEntry(model, entry);\n\t\t\t\tif (dec !== null) {\n\t\t\t\t\tnewDecorations.push(dec);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._dec = this._editor.deltaDecorations(this._dec, newDecorations);\n\t}\n\n\tprivate _getDecorationForEntry(model: ITextModel, entry: Node): IModelDeltaDecoration | null {\n\t\tif (!Array.isArray(entry.children)) {\n\t\t\treturn null;\n\t\t}\n\t\tfor (let i = 0, len = entry.children.length; i < len; i++) {\n\t\t\tconst prop = entry.children[i];\n\t\t\tif (prop.type !== 'property') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!Array.isArray(prop.children) || prop.children.length !== 2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst key = prop.children[0];\n\t\t\tif (key.value !== 'key') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst value = prop.children[1];\n\t\t\tif (value.type !== 'string') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst resolvedKeybindings = this._keybindingService.resolveUserBinding(value.value);\n\t\t\tif (resolvedKeybindings.length === 0) {\n\t\t\t\treturn this._createDecoration(true, null, null, model, value);\n\t\t\t}\n\t\t\tconst resolvedKeybinding = resolvedKeybindings[0];\n\t\t\tlet usLabel: string | null = null;\n\t\t\tif (resolvedKeybinding instanceof WindowsNativeResolvedKeybinding) {\n\t\t\t\tusLabel = resolvedKeybinding.getUSLabel();\n\t\t\t}\n\t\t\tif (!resolvedKeybinding.isWYSIWYG()) {\n\t\t\t\tconst uiLabel = resolvedKeybinding.getLabel();\n\t\t\t\tif (typeof uiLabel === 'string' && value.value.toLowerCase() === uiLabel.toLowerCase()) {\n\t\t\t\t\t// coincidentally, this is actually WYSIWYG\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn this._createDecoration(false, resolvedKeybinding.getLabel(), usLabel, model, value);\n\t\t\t}\n\t\t\tif (/abnt_|oem_/.test(value.value)) {\n\t\t\t\treturn this._createDecoration(false, resolvedKeybinding.getLabel(), usLabel, model, value);\n\t\t\t}\n\t\t\tconst expectedUserSettingsLabel = resolvedKeybinding.getUserSettingsLabel();\n\t\t\tif (typeof expectedUserSettingsLabel === 'string' && !KeybindingEditorDecorationsRenderer._userSettingsFuzzyEquals(value.value, expectedUserSettingsLabel)) {\n\t\t\t\treturn this._createDecoration(false, resolvedKeybinding.getLabel(), usLabel, model, value);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic _userSettingsFuzzyEquals(a: string, b: string): boolean {\n\t\ta = a.trim().toLowerCase();\n\t\tb = b.trim().toLowerCase();\n\n\t\tif (a === b) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst aParts = KeybindingParser.parseUserBinding(a);\n\t\tconst bParts = KeybindingParser.parseUserBinding(b);\n\t\treturn equals(aParts, bParts, (a, b) => this._userBindingEquals(a, b));\n\t}\n\n\tprivate static _userBindingEquals(a: SimpleKeybinding | ScanCodeBinding, b: SimpleKeybinding | ScanCodeBinding): boolean {\n\t\tif (a === null && b === null) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (a instanceof SimpleKeybinding && b instanceof SimpleKeybinding) {\n\t\t\treturn a.equals(b);\n\t\t}\n\n\t\tif (a instanceof ScanCodeBinding && b instanceof ScanCodeBinding) {\n\t\t\treturn a.equals(b);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate _createDecoration(isError: boolean, uiLabel: string | null, usLabel: string | null, model: ITextModel, keyNode: Node): IModelDeltaDecoration {\n\t\tlet msg: MarkdownString;\n\t\tlet className: string;\n\t\tlet overviewRulerColor: ThemeColor;\n\n\t\tif (isError) {\n\t\t\t// this is the error case\n\t\t\tmsg = new MarkdownString().appendText(NLS_KB_LAYOUT_ERROR_MESSAGE);\n\t\t\tclassName = 'keybindingError';\n\t\t\toverviewRulerColor = themeColorFromId(overviewRulerError);\n\t\t} else {\n\t\t\t// this is the info case\n\t\t\tif (usLabel && uiLabel !== usLabel) {\n\t\t\t\tmsg = new MarkdownString(\n\t\t\t\t\tnls.localize({\n\t\t\t\t\t\tkey: 'defineKeybinding.kbLayoutLocalAndUSMessage',\n\t\t\t\t\t\tcomment: [\n\t\t\t\t\t\t\t'Please translate maintaining the stars (*) around the placeholders such that they will be rendered in bold.',\n\t\t\t\t\t\t\t'The placeholders will contain a keyboard combination e.g. Ctrl+Shift+/'\n\t\t\t\t\t\t]\n\t\t\t\t\t}, \"**{0}** for your current keyboard layout (**{1}** for US standard).\", uiLabel, usLabel)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tmsg = new MarkdownString(\n\t\t\t\t\tnls.localize({\n\t\t\t\t\t\tkey: 'defineKeybinding.kbLayoutLocalMessage',\n\t\t\t\t\t\tcomment: [\n\t\t\t\t\t\t\t'Please translate maintaining the stars (*) around the placeholder such that it will be rendered in bold.',\n\t\t\t\t\t\t\t'The placeholder will contain a keyboard combination e.g. Ctrl+Shift+/'\n\t\t\t\t\t\t]\n\t\t\t\t\t}, \"**{0}** for your current keyboard layout.\", uiLabel)\n\t\t\t\t);\n\t\t\t}\n\t\t\tclassName = 'keybindingInfo';\n\t\t\toverviewRulerColor = themeColorFromId(overviewRulerInfo);\n\t\t}\n\n\t\tconst startPosition = model.getPositionAt(keyNode.offset);\n\t\tconst endPosition = model.getPositionAt(keyNode.offset + keyNode.length);\n\t\tconst range = new Range(\n\t\t\tstartPosition.lineNumber, startPosition.column,\n\t\t\tendPosition.lineNumber, endPosition.column\n\t\t);\n\n\t\t// icon + highlight + message decoration\n\t\treturn {\n\t\t\trange: range,\n\t\t\toptions: {\n\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\tclassName: className,\n\t\t\t\thoverMessage: msg,\n\t\t\t\toverviewRuler: {\n\t\t\t\t\tcolor: overviewRulerColor,\n\t\t\t\t\tposition: OverviewRulerLane.Right\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n}\n\nclass DefineKeybindingCommand extends EditorCommand {\n\n\tstatic readonly ID = 'editor.action.defineKeybinding';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: DefineKeybindingCommand.ID,\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.languageId.isEqualTo('jsonc')),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KEY_K, KeyMod.CtrlCmd | KeyCode.KEY_K),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\trunEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tif (!isInterestingEditorModel(editor, accessor.get(IEnvironmentService)) || editor.getOption(EditorOption.readOnly)) {\n\t\t\treturn;\n\t\t}\n\t\tconst controller = DefineKeybindingController.get(editor);\n\t\tif (controller && controller.keybindingWidgetRenderer) {\n\t\t\tcontroller.keybindingWidgetRenderer.showDefineKeybindingWidget();\n\t\t}\n\t}\n}\n\nfunction isInterestingEditorModel(editor: ICodeEditor, environmentService: IEnvironmentService): boolean {\n\tconst model = editor.getModel();\n\tif (!model) {\n\t\treturn false;\n\t}\n\treturn isEqual(model.uri, environmentService.keybindingsResource);\n}\n\nregisterEditorContribution(DefineKeybindingController.ID, DefineKeybindingController);\nregisterEditorCommand(new DefineKeybindingCommand());\n"]}