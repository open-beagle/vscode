{"version":3,"sources":["vs/workbench/contrib/format/browser/formatActionsMultiple.ts"],"names":[],"mappings":"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","file":"formatActionsMultiple.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, registerEditorAction, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { DocumentRangeFormattingEditProviderRegistry, DocumentFormattingEditProvider, DocumentRangeFormattingEditProvider } from 'vs/editor/common/modes';\nimport * as nls from 'vs/nls';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { IQuickInputService, IQuickPickItem } from 'vs/platform/quickinput/common/quickInput';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { formatDocumentRangesWithProvider, formatDocumentWithProvider, getRealAndSyntheticDocumentFormattersOrdered, FormattingConflicts, FormattingMode } from 'vs/editor/contrib/format/format';\nimport { Range } from 'vs/editor/common/core/range';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ExtensionIdentifier } from 'vs/platform/extensions/common/extensions';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from 'vs/platform/configuration/common/configurationRegistry';\nimport { Extensions as WorkbenchExtensions, IWorkbenchContributionsRegistry, IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IExtensionService, toExtension } from 'vs/workbench/services/extensions/common/extensions';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IWorkbenchExtensionEnablementService } from 'vs/workbench/services/extensionManagement/common/extensionManagement';\nimport { editorConfigurationBaseNode } from 'vs/editor/common/config/commonEditorConfig';\nimport { IDialogService } from 'vs/platform/dialogs/common/dialogs';\n\ntype FormattingEditProvider = DocumentFormattingEditProvider | DocumentRangeFormattingEditProvider;\n\nclass DefaultFormatter extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly configName = 'editor.defaultFormatter';\n\n\tstatic extensionIds: (string | null)[] = [];\n\tstatic extensionItemLabels: string[] = [];\n\tstatic extensionDescriptions: string[] = [];\n\n\tconstructor(\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t\t@IWorkbenchExtensionEnablementService private readonly _extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@IModeService private readonly _modeService: IModeService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) {\n\t\tsuper();\n\t\tthis._register(this._extensionService.onDidChangeExtensions(this._updateConfigValues, this));\n\t\tthis._register(FormattingConflicts.setFormatterSelector((formatter, document, mode) => this._selectFormatter(formatter, document, mode)));\n\t\tthis._updateConfigValues();\n\t}\n\n\tprivate async _updateConfigValues(): Promise<void> {\n\t\tlet extensions = await this._extensionService.getExtensions();\n\n\t\textensions = extensions.sort((a, b) => {\n\t\t\tlet boostA = a.categories?.find(cat => cat === 'Formatters' || cat === 'Programming Languages');\n\t\t\tlet boostB = b.categories?.find(cat => cat === 'Formatters' || cat === 'Programming Languages');\n\n\t\t\tif (boostA && !boostB) {\n\t\t\t\treturn -1;\n\t\t\t} else if (!boostA && boostB) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t}\n\t\t});\n\n\t\tDefaultFormatter.extensionIds.length = 0;\n\t\tDefaultFormatter.extensionItemLabels.length = 0;\n\t\tDefaultFormatter.extensionDescriptions.length = 0;\n\n\t\tDefaultFormatter.extensionIds.push(null);\n\t\tDefaultFormatter.extensionItemLabels.push(nls.localize('null', 'None'));\n\t\tDefaultFormatter.extensionDescriptions.push(nls.localize('nullFormatterDescription', \"None\"));\n\n\t\tfor (const extension of extensions) {\n\t\t\tif (extension.main || extension.browser) {\n\t\t\t\tDefaultFormatter.extensionIds.push(extension.identifier.value);\n\t\t\t\tDefaultFormatter.extensionItemLabels.push(extension.displayName ?? '');\n\t\t\t\tDefaultFormatter.extensionDescriptions.push(extension.description ?? '');\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _maybeQuotes(s: string): string {\n\t\treturn s.match(/\\s/) ? `'${s}'` : s;\n\t}\n\n\tprivate async _selectFormatter<T extends FormattingEditProvider>(formatter: T[], document: ITextModel, mode: FormattingMode): Promise<T | undefined> {\n\n\t\tconst defaultFormatterId = this._configService.getValue<string>(DefaultFormatter.configName, {\n\t\t\tresource: document.uri,\n\t\t\toverrideIdentifier: document.getModeId()\n\t\t});\n\n\t\tif (defaultFormatterId) {\n\t\t\t// good -> formatter configured\n\t\t\tconst defaultFormatter = formatter.find(formatter => ExtensionIdentifier.equals(formatter.extensionId, defaultFormatterId));\n\t\t\tif (defaultFormatter) {\n\t\t\t\t// formatter available\n\t\t\t\treturn defaultFormatter;\n\t\t\t}\n\n\t\t\t// bad -> formatter gone\n\t\t\tconst extension = await this._extensionService.getExtension(defaultFormatterId);\n\t\t\tif (extension && this._extensionEnablementService.isEnabled(toExtension(extension))) {\n\t\t\t\t// formatter does not target this file\n\t\t\t\tconst label = this._labelService.getUriLabel(document.uri, { relative: true });\n\t\t\t\tconst message = nls.localize('miss', \"Extension '{0}' cannot format '{1}'\", extension.displayName || extension.name, label);\n\t\t\t\tthis._notificationService.status(message, { hideAfter: 4000 });\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else if (formatter.length === 1) {\n\t\t\t// ok -> nothing configured but only one formatter available\n\t\t\treturn formatter[0];\n\t\t}\n\n\t\tconst langName = this._modeService.getLanguageName(document.getModeId()) || document.getModeId();\n\t\tconst message = !defaultFormatterId\n\t\t\t? nls.localize('config.needed', \"There are multiple formatters for '{0}' files. Select a default formatter to continue.\", DefaultFormatter._maybeQuotes(langName))\n\t\t\t: nls.localize('config.bad', \"Extension '{0}' is configured as formatter but not available. Select a different default formatter to continue.\", defaultFormatterId);\n\n\t\tif (mode !== FormattingMode.Silent) {\n\t\t\t// running from a user action -> show modal dialog so that users configure\n\t\t\t// a default formatter\n\t\t\tconst result = await this._dialogService.confirm({\n\t\t\t\tmessage,\n\t\t\t\tprimaryButton: nls.localize('do.config', \"Configure...\"),\n\t\t\t\tsecondaryButton: nls.localize('cancel', \"Cancel\")\n\t\t\t});\n\t\t\tif (result.confirmed) {\n\t\t\t\treturn this._pickAndPersistDefaultFormatter(formatter, document);\n\t\t\t}\n\n\t\t} else {\n\t\t\t// no user action -> show a silent notification and proceed\n\t\t\tthis._notificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tmessage,\n\t\t\t\t[{ label: nls.localize('do.config', \"Configure...\"), run: () => this._pickAndPersistDefaultFormatter(formatter, document) }],\n\t\t\t\t{ silent: true }\n\t\t\t);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async _pickAndPersistDefaultFormatter<T extends FormattingEditProvider>(formatter: T[], document: ITextModel): Promise<T | undefined> {\n\t\tconst picks = formatter.map((formatter, index): IIndexedPick => {\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\tlabel: formatter.displayName || (formatter.extensionId ? formatter.extensionId.value : '?'),\n\t\t\t\tdescription: formatter.extensionId && formatter.extensionId.value\n\t\t\t};\n\t\t});\n\t\tconst langName = this._modeService.getLanguageName(document.getModeId()) || document.getModeId();\n\t\tconst pick = await this._quickInputService.pick(picks, { placeHolder: nls.localize('select', \"Select a default formatter for '{0}' files\", DefaultFormatter._maybeQuotes(langName)) });\n\t\tif (!pick || !formatter[pick.index].extensionId) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._configService.updateValue(DefaultFormatter.configName, formatter[pick.index].extensionId!.value, {\n\t\t\tresource: document.uri,\n\t\t\toverrideIdentifier: document.getModeId()\n\t\t});\n\t\treturn formatter[pick.index];\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(\n\tDefaultFormatter,\n\tLifecyclePhase.Restored\n);\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\t...editorConfigurationBaseNode,\n\tproperties: {\n\t\t[DefaultFormatter.configName]: {\n\t\t\tdescription: nls.localize('formatter.default', \"Defines a default formatter which takes precedence over all other formatter settings. Must be the identifier of an extension contributing a formatter.\"),\n\t\t\ttype: ['string', 'null'],\n\t\t\tdefault: null,\n\t\t\tenum: DefaultFormatter.extensionIds,\n\t\t\tenumItemLabels: DefaultFormatter.extensionItemLabels,\n\t\t\tmarkdownEnumDescriptions: DefaultFormatter.extensionDescriptions\n\t\t}\n\t}\n});\n\ninterface IIndexedPick extends IQuickPickItem {\n\tindex: number;\n}\n\nfunction logFormatterTelemetry<T extends { extensionId?: ExtensionIdentifier }>(telemetryService: ITelemetryService, mode: 'document' | 'range', options: T[], pick?: T) {\n\n\tfunction extKey(obj: T): string {\n\t\treturn obj.extensionId ? ExtensionIdentifier.toKey(obj.extensionId) : 'unknown';\n\t}\n\t/*\n\t * __GDPR__\n\t\t\"formatterpick\" : {\n\t\t\t\"mode\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\"extensions\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\"pick\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t}\n\t */\n\ttelemetryService.publicLog('formatterpick', {\n\t\tmode,\n\t\textensions: options.map(extKey),\n\t\tpick: pick ? extKey(pick) : 'none'\n\t});\n}\n\nasync function showFormatterPick(accessor: ServicesAccessor, model: ITextModel, formatters: FormattingEditProvider[]): Promise<number | undefined> {\n\tconst quickPickService = accessor.get(IQuickInputService);\n\tconst configService = accessor.get(IConfigurationService);\n\tconst modeService = accessor.get(IModeService);\n\n\tconst overrides = { resource: model.uri, overrideIdentifier: model.getModeId() };\n\tconst defaultFormatter = configService.getValue<string>(DefaultFormatter.configName, overrides);\n\n\tlet defaultFormatterPick: IIndexedPick | undefined;\n\n\tconst picks = formatters.map((provider, index) => {\n\t\tconst isDefault = ExtensionIdentifier.equals(provider.extensionId, defaultFormatter);\n\t\tconst pick: IIndexedPick = {\n\t\t\tindex,\n\t\t\tlabel: provider.displayName || '',\n\t\t\tdescription: isDefault ? nls.localize('def', \"(default)\") : undefined,\n\t\t};\n\n\t\tif (isDefault) {\n\t\t\t// autofocus default pick\n\t\t\tdefaultFormatterPick = pick;\n\t\t}\n\n\t\treturn pick;\n\t});\n\n\tconst configurePick: IQuickPickItem = {\n\t\tlabel: nls.localize('config', \"Configure Default Formatter...\")\n\t};\n\n\tconst pick = await quickPickService.pick([...picks, { type: 'separator' }, configurePick],\n\t\t{\n\t\t\tplaceHolder: nls.localize('format.placeHolder', \"Select a formatter\"),\n\t\t\tactiveItem: defaultFormatterPick\n\t\t}\n\t);\n\tif (!pick) {\n\t\t// dismissed\n\t\treturn undefined;\n\n\t} else if (pick === configurePick) {\n\t\t// config default\n\t\tconst langName = modeService.getLanguageName(model.getModeId()) || model.getModeId();\n\t\tconst pick = await quickPickService.pick(picks, { placeHolder: nls.localize('select', \"Select a default formatter for '{0}' files\", DefaultFormatter._maybeQuotes(langName)) });\n\t\tif (pick && formatters[pick.index].extensionId) {\n\t\t\tconfigService.updateValue(DefaultFormatter.configName, formatters[pick.index].extensionId!.value, overrides);\n\t\t}\n\t\treturn undefined;\n\n\t} else {\n\t\t// picked one\n\t\treturn (<IIndexedPick>pick).index;\n\t}\n\n}\n\nregisterEditorAction(class FormatDocumentMultipleAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.formatDocument.multiple',\n\t\t\tlabel: nls.localize('formatDocument.label.multiple', \"Format Document With...\"),\n\t\t\talias: 'Format Document...',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasMultipleDocumentFormattingProvider),\n\t\t\tcontextMenuOpts: {\n\t\t\t\tgroup: '1_modification',\n\t\t\t\torder: 1.3\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, editor: ICodeEditor, args: any): Promise<void> {\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst model = editor.getModel();\n\t\tconst provider = getRealAndSyntheticDocumentFormattersOrdered(model);\n\t\tconst pick = await instaService.invokeFunction(showFormatterPick, model, provider);\n\t\tif (typeof pick === 'number') {\n\t\t\tawait instaService.invokeFunction(formatDocumentWithProvider, provider[pick], editor, FormattingMode.Explicit, CancellationToken.None);\n\t\t}\n\t\tlogFormatterTelemetry(telemetryService, 'document', provider, typeof pick === 'number' && provider[pick] || undefined);\n\t}\n});\n\nregisterEditorAction(class FormatSelectionMultipleAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.formatSelection.multiple',\n\t\t\tlabel: nls.localize('formatSelection.label.multiple', \"Format Selection With...\"),\n\t\t\talias: 'Format Code...',\n\t\t\tprecondition: ContextKeyExpr.and(ContextKeyExpr.and(EditorContextKeys.writable), EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider),\n\t\t\tcontextMenuOpts: {\n\t\t\t\twhen: ContextKeyExpr.and(EditorContextKeys.hasNonEmptySelection),\n\t\t\t\tgroup: '1_modification',\n\t\t\t\torder: 1.31\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\n\t\tconst model = editor.getModel();\n\t\tlet range: Range = editor.getSelection();\n\t\tif (range.isEmpty()) {\n\t\t\trange = new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber));\n\t\t}\n\n\t\tconst provider = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n\t\tconst pick = await instaService.invokeFunction(showFormatterPick, model, provider);\n\t\tif (typeof pick === 'number') {\n\t\t\tawait instaService.invokeFunction(formatDocumentRangesWithProvider, provider[pick], editor, range, CancellationToken.None);\n\t\t}\n\n\t\tlogFormatterTelemetry(telemetryService, 'range', provider, typeof pick === 'number' && provider[pick] || undefined);\n\t}\n});\n"]}