{"version":3,"sources":["vs/workbench/contrib/format/browser/formatActionsNone.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAgBhG,KAAK,UAAU,kBAAkB,CAAC,cAA+B,EAAE,KAAa;QAC/E,MAAM,OAAO,GAAG,MAAM,cAAc,CAAC,WAAW,CAAC,uBAAU,EAAE,IAAI,CAAC,CAAC;QACnE,IAAI,OAAO,EAAE;YACZ,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,oBAAoB,EAAmC,CAAA,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAChF;IACF,CAAC;IAED,CAAA,GAAA,uCAAoB,CAAA,CAAC,MAAM,4BAA6B,SAAQ,+BAAY;QAE3E;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,mCAAmC;gBACvC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA+B,EAAE,IAAiB,CAAC;gBACvE,KAAK,EAAE,iBAAiB;gBACxB,YAAY,EAAE,2BAAc,CAAC,GAAG,CAAC,qCAAiB,CAAC,QAAQ,EAAE,qCAAiB,CAAC,6BAA6B,CAAC,SAAS,EAAE,CAAC;gBACzH,MAAM,EAAE;oBACP,MAAM,EAAE,qCAAiB,CAAC,eAAe;oBACzC,OAAO,EAAE,gCAAyB,iBAAgB;oBAClD,KAAK,EAAE,EAAE,OAAO,EAAE,qCAA6B,iBAAgB,EAAE;oBACjE,MAAM,yBAAgC;iBACtC;aACD,CAAC,CAAC;QACJ,CAAC;QAED,KAAK,CAAC,GAAG,CAAC,QAA0B,EAAE,MAAmB;YACxD,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE;gBACvB,OAAO;aACP;YAED,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,0BAAe,CAAC,CAAC;YACrD,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,yBAAe,CAAC,CAAC;YACrD,MAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,mCAAoB,CAAC,CAAC;YAC/D,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAc,CAAC,CAAC;YAEnD,MAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;YAChC,MAAM,cAAc,GAAG,8CAAsC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC;YAEhF,IAAI,cAAc,GAAG,CAAC,EAAE;gBACvB,OAAO,cAAc,CAAC,cAAc,CAAC,uCAAuC,CAAC,CAAC;aAC9E;iBAAM,IAAI,cAAc,KAAK,CAAC,EAAE;gBAChC,OAAO,cAAc,CAAC,cAAc,CAAC,8BAA8B,CAAC,CAAC;aACrE;iBAAM,IAAI,KAAK,CAAC,oBAAoB,EAAE,EAAE;gBACxC,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAW,EAAE,IAAuD,CAAC,CAAC,CAAC;aAC7G;iBAAM;gBACN,MAAM,QAAQ,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC;gBACxD,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAa,EAAE,IAAkD,EAAE,QAAQ,CAAC,CAAC;gBAC1G,MAAM,GAAG,GAAG,MAAM,aAAa,CAAC,IAAI,CACnC,uBAAQ,CAAC,IAAI,EACb,OAAO,EACP,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAQ,EAAE,IAAQ,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAmB,EAAE,IAAsB,CAAC,CAAC,CAC7F,CAAC;gBACF,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE;oBACrB,kBAAkB,CAAC,cAAc,EAAE,uBAAuB,QAAQ,EAAE,CAAC,CAAC;iBACtE;aACD;QACF,CAAC;KACD,CAAC,CAAC","file":"formatActionsNone.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, registerEditorAction, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { DocumentFormattingEditProviderRegistry } from 'vs/editor/common/modes';\nimport * as nls from 'vs/nls';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IViewletService } from 'vs/workbench/services/viewlet/browser/viewlet';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { VIEWLET_ID, IExtensionsViewPaneContainer } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { IDialogService } from 'vs/platform/dialogs/common/dialogs';\n\nasync function showExtensionQuery(viewletService: IViewletService, query: string) {\n\tconst viewlet = await viewletService.openViewlet(VIEWLET_ID, true);\n\tif (viewlet) {\n\t\t(viewlet?.getViewPaneContainer() as IExtensionsViewPaneContainer).search(query);\n\t}\n}\n\nregisterEditorAction(class FormatDocumentMultipleAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.formatDocument.none',\n\t\t\tlabel: nls.localize('formatDocument.label.multiple', \"Format Document\"),\n\t\t\talias: 'Format Document',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider.toNegated()),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyMod.Shift | KeyMod.Alt | KeyCode.KEY_F,\n\t\t\t\tlinux: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KEY_I },\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst viewletService = accessor.get(IViewletService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\n\t\tconst model = editor.getModel();\n\t\tconst formatterCount = DocumentFormattingEditProviderRegistry.all(model).length;\n\n\t\tif (formatterCount > 1) {\n\t\t\treturn commandService.executeCommand('editor.action.formatDocument.multiple');\n\t\t} else if (formatterCount === 1) {\n\t\t\treturn commandService.executeCommand('editor.action.formatDocument');\n\t\t} else if (model.isTooLargeForSyncing()) {\n\t\t\tnotificationService.warn(nls.localize('too.large', \"This file cannot be formatted because it is too large\"));\n\t\t} else {\n\t\t\tconst langName = model.getLanguageIdentifier().language;\n\t\t\tconst message = nls.localize('no.provider', \"There is no formatter for '{0}' files installed.\", langName);\n\t\t\tconst res = await dialogService.show(\n\t\t\t\tSeverity.Info,\n\t\t\t\tmessage,\n\t\t\t\t[nls.localize('cancel', \"Cancel\"), nls.localize('install.formatter', \"Install Formatter...\")]\n\t\t\t);\n\t\t\tif (res.choice === 1) {\n\t\t\t\tshowExtensionQuery(viewletService, `category:formatters ${langName}`);\n\t\t\t}\n\t\t}\n\t}\n});\n"]}