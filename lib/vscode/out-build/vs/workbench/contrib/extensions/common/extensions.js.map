{"version":3,"file":"extensions.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/extensions/common/extensions.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAenF,QAAA,UAAU,GAAG,2BAA2B,CAAC;IAYtD,IAAkB,cAKjB;IALD,WAAkB,cAAc;QAC/B,+DAAU,CAAA;QACV,6DAAS,CAAA;QACT,mEAAY,CAAA;QACZ,iEAAW,CAAA;IACZ,CAAC,EALiB,cAAc,GAAd,sBAAc,KAAd,sBAAc,QAK/B;IAuCY,QAAA,UAAU,GAAG,4BAA4B,CAAC;IAE1C,QAAA,2BAA2B,GAAG,CAAA,GAAA,+BAAe,CAAA,CAA8B,kBAAU,CAAC,CAAC;IA0BvF,QAAA,gBAAgB,GAAG,YAAY,CAAC;IAChC,QAAA,0BAA0B,GAAG,uBAAuB,CAAC;IACrD,QAAA,gCAAgC,GAAG,6BAA6B,CAAC;IACjE,QAAA,oCAAoC,GAAG,8CAA8C,CAAC;IAenG,IAAa,mBAAmB,GAAhC,MAAa,mBAAoB,SAAQ,sBAAU;QAElD,YACkB,UAAiC,EACrB,0BAAuD;YAEpF,KAAK,EAAE,CAAC;YAHS,eAAU,GAAV,UAAU,CAAuB;YAIlD,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;QACxE,CAAC;QAED,IAAI,SAAS,CAAC,SAAqB;YAClC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC;QACvD,CAAC;QAEO,MAAM,CAAC,SAAiC;YAC/C,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE;gBACxC,IAAI,SAAS,IAAI,SAAS,CAAC,SAAS,EAAE;oBACrC,IAAI,CAAA,GAAA,2CAAiB,CAAA,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE;wBAC5E,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,EAAE;4BACtG,IAAI,SAAS,CAAC,iCAAiC,EAAE;gCAChD,SAAS,CAAC,MAAM,EAAE,CAAC;6BACnB;yBACD;6BAAM;4BACN,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC;yBAChC;qBACD;iBACD;qBAAM;oBACN,SAAS,CAAC,MAAM,EAAE,CAAC;iBACnB;aACD;QACF,CAAC;KACD,CAAA;IA/BY,mBAAmB;QAI7B,WAAA,mCAA2B,CAAA;OAJjB,mBAAmB,CA+B/B;IA/BY,kDAAmB;IAiCnB,QAAA,iCAAiC,GAAG,qDAAqD,CAAC;IAC1F,QAAA,iCAAiC,GAAG,mDAAmD,CAAC;IACxF,QAAA,wCAAwC,GAAG,yCAAyC,CAAC;IACrF,QAAA,sCAAsC,GAAG,8CAA8C,CAAC;IAErG,eAAe;IACF,QAAA,mBAAmB,GAAG,IAAI,0BAAa,CAAU,uBAAuB,EAAE,IAAI,CAAC,CAAC;IAChF,QAAA,uBAAuB,GAAG,IAAI,0BAAa,CAAS,uBAAuB,EAAE,EAAE,CAAC,CAAC;IACjF,QAAA,4BAA4B,GAAG,IAAI,0BAAa,CAAU,uBAAuB,EAAE,KAAK,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { Event } from 'vs/base/common/event';\nimport { IPager } from 'vs/base/common/paging';\nimport { IQueryOptions, ILocalExtension, IGalleryExtension, IExtensionIdentifier, InstallOptions } from 'vs/platform/extensionManagement/common/extensionManagement';\nimport { EnablementState, IExtensionManagementServer } from 'vs/workbench/services/extensionManagement/common/extensionManagement';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { areSameExtensions } from 'vs/platform/extensionManagement/common/extensionManagementUtil';\nimport { IExtensionManifest, ExtensionType } from 'vs/platform/extensions/common/extensions';\nimport { URI } from 'vs/base/common/uri';\nimport { IView, IViewPaneContainer } from 'vs/workbench/common/views';\nimport { RawContextKey } from 'vs/platform/contextkey/common/contextkey';\n\nexport const VIEWLET_ID = 'workbench.view.extensions';\n\nexport interface IExtensionsViewPaneContainer extends IViewPaneContainer {\n\treadonly searchValue: string | undefined;\n\tsearch(text: string): void;\n\trefresh(): Promise<void>;\n}\n\nexport interface IWorkspaceRecommendedExtensionsView extends IView {\n\tinstallWorkspaceRecommendations(): Promise<void>;\n}\n\nexport const enum ExtensionState {\n\tInstalling,\n\tInstalled,\n\tUninstalling,\n\tUninstalled\n}\n\nexport interface IExtension {\n\treadonly type: ExtensionType;\n\treadonly isBuiltin: boolean;\n\treadonly state: ExtensionState;\n\treadonly name: string;\n\treadonly displayName: string;\n\treadonly identifier: IExtensionIdentifier;\n\treadonly publisher: string;\n\treadonly publisherDisplayName: string;\n\treadonly version: string;\n\treadonly latestVersion: string;\n\treadonly description: string;\n\treadonly url?: string;\n\treadonly repository?: string;\n\treadonly iconUrl: string;\n\treadonly iconUrlFallback: string;\n\treadonly licenseUrl?: string;\n\treadonly installCount?: number;\n\treadonly rating?: number;\n\treadonly ratingCount?: number;\n\treadonly outdated: boolean;\n\treadonly enablementState: EnablementState;\n\treadonly dependencies: string[];\n\treadonly extensionPack: string[];\n\treadonly telemetryData: any;\n\treadonly preview: boolean;\n\tgetManifest(token: CancellationToken): Promise<IExtensionManifest | null>;\n\tgetReadme(token: CancellationToken): Promise<string>;\n\thasReadme(): boolean;\n\tgetChangelog(token: CancellationToken): Promise<string>;\n\thasChangelog(): boolean;\n\treadonly server?: IExtensionManagementServer;\n\treadonly local?: ILocalExtension;\n\tgallery?: IGalleryExtension;\n\treadonly isMalicious: boolean;\n}\n\nexport const SERVICE_ID = 'extensionsWorkbenchService';\n\nexport const IExtensionsWorkbenchService = createDecorator<IExtensionsWorkbenchService>(SERVICE_ID);\n\nexport interface IExtensionsWorkbenchService {\n\treadonly _serviceBrand: undefined;\n\tonChange: Event<IExtension | undefined>;\n\tlocal: IExtension[];\n\tinstalled: IExtension[];\n\toutdated: IExtension[];\n\tqueryLocal(server?: IExtensionManagementServer): Promise<IExtension[]>;\n\tqueryGallery(token: CancellationToken): Promise<IPager<IExtension>>;\n\tqueryGallery(options: IQueryOptions, token: CancellationToken): Promise<IPager<IExtension>>;\n\tcanInstall(extension: IExtension): boolean;\n\tinstall(vsix: URI): Promise<IExtension>;\n\tinstall(extension: IExtension, installOptins?: InstallOptions): Promise<IExtension>;\n\tuninstall(extension: IExtension): Promise<void>;\n\tinstallVersion(extension: IExtension, version: string): Promise<IExtension>;\n\treinstall(extension: IExtension): Promise<IExtension>;\n\tsetEnablement(extensions: IExtension | IExtension[], enablementState: EnablementState): Promise<void>;\n\topen(extension: IExtension, options?: { sideByside?: boolean, preserveFocus?: boolean, pinned?: boolean }): Promise<any>;\n\tcheckForUpdates(): Promise<void>;\n\n\t// Sync APIs\n\tisExtensionIgnoredToSync(extension: IExtension): boolean;\n\ttoggleExtensionIgnoredToSync(extension: IExtension): Promise<void>;\n}\n\nexport const ConfigurationKey = 'extensions';\nexport const AutoUpdateConfigurationKey = 'extensions.autoUpdate';\nexport const AutoCheckUpdatesConfigurationKey = 'extensions.autoCheckUpdates';\nexport const CloseExtensionDetailsOnViewChangeKey = 'extensions.closeExtensionDetailsOnViewChange';\n\nexport interface IExtensionsConfiguration {\n\tautoUpdate: boolean;\n\tautoCheckUpdates: boolean;\n\tignoreRecommendations: boolean;\n\tcloseExtensionDetailsOnViewChange: boolean;\n}\n\nexport interface IExtensionContainer {\n\textension: IExtension | null;\n\tupdateWhenCounterExtensionChanges?: boolean;\n\tupdate(): void;\n}\n\nexport class ExtensionContainers extends Disposable {\n\n\tconstructor(\n\t\tprivate readonly containers: IExtensionContainer[],\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService\n\t) {\n\t\tsuper();\n\t\tthis._register(extensionsWorkbenchService.onChange(this.update, this));\n\t}\n\n\tset extension(extension: IExtension) {\n\t\tthis.containers.forEach(c => c.extension = extension);\n\t}\n\n\tprivate update(extension: IExtension | undefined): void {\n\t\tfor (const container of this.containers) {\n\t\t\tif (extension && container.extension) {\n\t\t\t\tif (areSameExtensions(container.extension.identifier, extension.identifier)) {\n\t\t\t\t\tif (container.extension.server && extension.server && container.extension.server !== extension.server) {\n\t\t\t\t\t\tif (container.updateWhenCounterExtensionChanges) {\n\t\t\t\t\t\t\tcontainer.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer.extension = extension;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcontainer.update();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const WORKSPACE_RECOMMENDATIONS_VIEW_ID = 'workbench.views.extensions.workspaceRecommendations';\nexport const TOGGLE_IGNORE_EXTENSION_ACTION_ID = 'workbench.extensions.action.toggleIgnoreExtension';\nexport const SELECT_INSTALL_VSIX_EXTENSION_COMMAND_ID = 'workbench.extensions.action.installVSIX';\nexport const INSTALL_EXTENSION_FROM_VSIX_COMMAND_ID = 'workbench.extensions.command.installFromVSIX';\n\n// Context Keys\nexport const DefaultViewsContext = new RawContextKey<boolean>('defaultExtensionViews', true);\nexport const ExtensionsSortByContext = new RawContextKey<string>('extensionsSortByValue', '');\nexport const HasOutdatedExtensionsContext = new RawContextKey<boolean>('hasOutdatedExtensions', false);\n"]}