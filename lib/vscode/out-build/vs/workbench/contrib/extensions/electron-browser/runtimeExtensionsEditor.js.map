{"version":3,"sources":["vs/workbench/contrib/extensions/electron-browser/runtimeExtensionsEditor.ts"],"names":[],"mappings":"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","file":"runtimeExtensionsEditor.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { Action } from 'vs/base/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IInstantiationService, createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { IExtensionsWorkbenchService } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IExtensionService, IExtensionHostProfile } from 'vs/workbench/services/extensions/common/extensions';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { Event } from 'vs/base/common/event';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IContextKeyService, RawContextKey, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ExtensionIdentifier } from 'vs/platform/extensions/common/extensions';\nimport { SlowExtensionAction } from 'vs/workbench/contrib/extensions/electron-browser/extensionsSlowActions';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { ReportExtensionIssueAction } from 'vs/workbench/contrib/extensions/electron-browser/reportExtensionIssueAction';\nimport { AbstractRuntimeExtensionsEditor, IRuntimeExtension } from 'vs/workbench/contrib/extensions/browser/abstractRuntimeExtensionsEditor';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { URI } from 'vs/base/common/uri';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { INativeHostService } from 'vs/platform/native/electron-sandbox/native';\n\nexport const IExtensionHostProfileService = createDecorator<IExtensionHostProfileService>('extensionHostProfileService');\nexport const CONTEXT_PROFILE_SESSION_STATE = new RawContextKey<string>('profileSessionState', 'none');\nexport const CONTEXT_EXTENSION_HOST_PROFILE_RECORDED = new RawContextKey<boolean>('extensionHostProfileRecorded', false);\n\nexport enum ProfileSessionState {\n\tNone = 0,\n\tStarting = 1,\n\tRunning = 2,\n\tStopping = 3\n}\n\nexport interface IExtensionHostProfileService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeState: Event<void>;\n\treadonly onDidChangeLastProfile: Event<void>;\n\n\treadonly state: ProfileSessionState;\n\treadonly lastProfile: IExtensionHostProfile | null;\n\n\tstartProfiling(): void;\n\tstopProfiling(): void;\n\n\tgetUnresponsiveProfile(extensionId: ExtensionIdentifier): IExtensionHostProfile | undefined;\n\tsetUnresponsiveProfile(extensionId: ExtensionIdentifier, profile: IExtensionHostProfile): void;\n}\n\nexport class RuntimeExtensionsEditor extends AbstractRuntimeExtensionsEditor {\n\n\tprivate _profileInfo: IExtensionHostProfile | null;\n\tprivate _extensionsHostRecorded: IContextKey<boolean>;\n\tprivate _profileSessionState: IContextKey<string>;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IExtensionHostProfileService private readonly _extensionHostProfileService: IExtensionHostProfileService,\n\t) {\n\t\tsuper(telemetryService, themeService, contextKeyService, extensionsWorkbenchService, extensionService, notificationService, contextMenuService, instantiationService, storageService, labelService, environmentService);\n\t\tthis._profileInfo = this._extensionHostProfileService.lastProfile;\n\t\tthis._extensionsHostRecorded = CONTEXT_EXTENSION_HOST_PROFILE_RECORDED.bindTo(contextKeyService);\n\t\tthis._profileSessionState = CONTEXT_PROFILE_SESSION_STATE.bindTo(contextKeyService);\n\n\t\tthis._register(this._extensionHostProfileService.onDidChangeLastProfile(() => {\n\t\t\tthis._profileInfo = this._extensionHostProfileService.lastProfile;\n\t\t\tthis._extensionsHostRecorded.set(!!this._profileInfo);\n\t\t\tthis._updateExtensions();\n\t\t}));\n\t\tthis._register(this._extensionHostProfileService.onDidChangeState(() => {\n\t\t\tconst state = this._extensionHostProfileService.state;\n\t\t\tthis._profileSessionState.set(ProfileSessionState[state].toLowerCase());\n\t\t}));\n\t}\n\n\tprotected _getProfileInfo(): IExtensionHostProfile | null {\n\t\treturn this._profileInfo;\n\t}\n\n\tprotected _getUnresponsiveProfile(extensionId: ExtensionIdentifier): IExtensionHostProfile | undefined {\n\t\treturn this._extensionHostProfileService.getUnresponsiveProfile(extensionId);\n\t}\n\n\tprotected _createSlowExtensionAction(element: IRuntimeExtension): Action | null {\n\t\tif (element.unresponsiveProfile) {\n\t\t\treturn this._instantiationService.createInstance(SlowExtensionAction, element.description, element.unresponsiveProfile);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected _createReportExtensionIssueAction(element: IRuntimeExtension): Action | null {\n\t\treturn this._instantiationService.createInstance(ReportExtensionIssueAction, element);\n\t}\n\n\tprotected _createSaveExtensionHostProfileAction(): Action | null {\n\t\treturn this._instantiationService.createInstance(SaveExtensionHostProfileAction, SaveExtensionHostProfileAction.ID, SaveExtensionHostProfileAction.LABEL);\n\t}\n\n\tprotected _createProfileAction(): Action | null {\n\t\tconst state = this._extensionHostProfileService.state;\n\t\tconst profileAction = (\n\t\t\tstate === ProfileSessionState.Running\n\t\t\t\t? this._instantiationService.createInstance(StopExtensionHostProfileAction, StopExtensionHostProfileAction.ID, StopExtensionHostProfileAction.LABEL)\n\t\t\t\t: this._instantiationService.createInstance(StartExtensionHostProfileAction, StartExtensionHostProfileAction.ID, StartExtensionHostProfileAction.LABEL)\n\t\t);\n\t\treturn profileAction;\n\t}\n}\n\nexport class StartExtensionHostProfileAction extends Action {\n\tstatic readonly ID = 'workbench.extensions.action.extensionHostProfile';\n\tstatic readonly LABEL = nls.localize('extensionHostProfileStart', \"Start Extension Host Profile\");\n\n\tconstructor(\n\t\tid: string = StartExtensionHostProfileAction.ID, label: string = StartExtensionHostProfileAction.LABEL,\n\t\t@IExtensionHostProfileService private readonly _extensionHostProfileService: IExtensionHostProfileService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<any> {\n\t\tthis._extensionHostProfileService.startProfiling();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class StopExtensionHostProfileAction extends Action {\n\tstatic readonly ID = 'workbench.extensions.action.stopExtensionHostProfile';\n\tstatic readonly LABEL = nls.localize('stopExtensionHostProfileStart', \"Stop Extension Host Profile\");\n\n\tconstructor(\n\t\tid: string = StartExtensionHostProfileAction.ID, label: string = StartExtensionHostProfileAction.LABEL,\n\t\t@IExtensionHostProfileService private readonly _extensionHostProfileService: IExtensionHostProfileService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<any> {\n\t\tthis._extensionHostProfileService.stopProfiling();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class SaveExtensionHostProfileAction extends Action {\n\n\tstatic readonly LABEL = nls.localize('saveExtensionHostProfile', \"Save Extension Host Profile\");\n\tstatic readonly ID = 'workbench.extensions.action.saveExtensionHostProfile';\n\n\tconstructor(\n\t\tid: string = SaveExtensionHostProfileAction.ID, label: string = SaveExtensionHostProfileAction.LABEL,\n\t\t@INativeHostService private readonly _nativeHostService: INativeHostService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IExtensionHostProfileService private readonly _extensionHostProfileService: IExtensionHostProfileService,\n\t\t@IFileService private readonly _fileService: IFileService\n\t) {\n\t\tsuper(id, label, undefined, false);\n\t\tthis._extensionHostProfileService.onDidChangeLastProfile(() => {\n\t\t\tthis.enabled = (this._extensionHostProfileService.lastProfile !== null);\n\t\t});\n\t}\n\n\toverride run(): Promise<any> {\n\t\treturn Promise.resolve(this._asyncRun());\n\t}\n\n\tprivate async _asyncRun(): Promise<any> {\n\t\tlet picked = await this._nativeHostService.showSaveDialog({\n\t\t\ttitle: 'Save Extension Host Profile',\n\t\t\tbuttonLabel: 'Save',\n\t\t\tdefaultPath: `CPU-${new Date().toISOString().replace(/[\\-:]/g, '')}.cpuprofile`,\n\t\t\tfilters: [{\n\t\t\t\tname: 'CPU Profiles',\n\t\t\t\textensions: ['cpuprofile', 'txt']\n\t\t\t}]\n\t\t});\n\n\t\tif (!picked || !picked.filePath || picked.canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst profileInfo = this._extensionHostProfileService.lastProfile;\n\t\tlet dataToWrite: object = profileInfo ? profileInfo.data : {};\n\n\t\tlet savePath = picked.filePath;\n\n\t\tif (this._environmentService.isBuilt) {\n\t\t\tconst profiler = await import('v8-inspect-profiler');\n\t\t\t// when running from a not-development-build we remove\n\t\t\t// absolute filenames because we don't want to reveal anything\n\t\t\t// about users. We also append the `.txt` suffix to make it\n\t\t\t// easier to attach these files to GH issues\n\t\t\tlet tmp = profiler.rewriteAbsolutePaths({ profile: dataToWrite as any }, 'piiRemoved');\n\t\t\tdataToWrite = tmp.profile;\n\n\t\t\tsavePath = savePath + '.txt';\n\t\t}\n\n\t\treturn this._fileService.writeFile(URI.file(savePath), VSBuffer.fromString(JSON.stringify(profileInfo ? profileInfo.data : {}, null, '\\t')));\n\t}\n}\n"]}