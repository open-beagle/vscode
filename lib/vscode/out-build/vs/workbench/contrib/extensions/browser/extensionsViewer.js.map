{"version":3,"sources":["vs/workbench/contrib/extensions/browser/extensionsViewer.ts"],"names":[],"mappings":"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","file":"extensionsViewer.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { localize } from 'vs/nls';\nimport { IDisposable, dispose, Disposable, DisposableStore, toDisposable } from 'vs/base/common/lifecycle';\nimport { Action } from 'vs/base/common/actions';\nimport { IExtensionsWorkbenchService, IExtension } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { Event } from 'vs/base/common/event';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IListService, WorkbenchAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IThemeService, registerThemingParticipant, IColorTheme, ICssStyleCollector } from 'vs/platform/theme/common/themeService';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { IAsyncDataSource, ITreeNode } from 'vs/base/browser/ui/tree/tree';\nimport { IListVirtualDelegate, IListRenderer } from 'vs/base/browser/ui/list/list';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { isNonEmptyArray } from 'vs/base/common/arrays';\nimport { IColorMapping } from 'vs/platform/theme/common/styler';\nimport { Delegate, Renderer } from 'vs/workbench/contrib/extensions/browser/extensionsList';\nimport { listFocusForeground, listFocusBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\n\nexport class ExtensionsGridView extends Disposable {\n\n\treadonly element: HTMLElement;\n\tprivate readonly renderer: Renderer;\n\tprivate readonly delegate: Delegate;\n\tprivate readonly disposableStore: DisposableStore;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\tdelegate: Delegate,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis.element = dom.append(parent, dom.$('.extensions-grid-view'));\n\t\tthis.renderer = this.instantiationService.createInstance(Renderer, { onFocus: Event.None, onBlur: Event.None });\n\t\tthis.delegate = delegate;\n\t\tthis.disposableStore = this._register(new DisposableStore());\n\t}\n\n\tsetExtensions(extensions: IExtension[]): void {\n\t\tthis.disposableStore.clear();\n\t\textensions.forEach((e, index) => this.renderExtension(e, index));\n\t}\n\n\tprivate renderExtension(extension: IExtension, index: number): void {\n\t\tconst extensionContainer = dom.append(this.element, dom.$('.extension-container'));\n\t\textensionContainer.style.height = `${this.delegate.getHeight()}px`;\n\t\textensionContainer.setAttribute('tabindex', '0');\n\n\t\tconst template = this.renderer.renderTemplate(extensionContainer);\n\t\tthis.disposableStore.add(toDisposable(() => this.renderer.disposeTemplate(template)));\n\n\t\tconst openExtensionAction = this.instantiationService.createInstance(OpenExtensionAction);\n\t\topenExtensionAction.extension = extension;\n\t\ttemplate.name.setAttribute('tabindex', '0');\n\n\t\tconst handleEvent = (e: StandardMouseEvent | StandardKeyboardEvent) => {\n\t\t\tif (e instanceof StandardKeyboardEvent && e.keyCode !== KeyCode.Enter) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topenExtensionAction.run(e.ctrlKey || e.metaKey);\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t};\n\n\t\tthis.disposableStore.add(dom.addDisposableListener(template.name, dom.EventType.CLICK, (e: MouseEvent) => handleEvent(new StandardMouseEvent(e))));\n\t\tthis.disposableStore.add(dom.addDisposableListener(template.name, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => handleEvent(new StandardKeyboardEvent(e))));\n\t\tthis.disposableStore.add(dom.addDisposableListener(extensionContainer, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => handleEvent(new StandardKeyboardEvent(e))));\n\n\t\tthis.renderer.renderElement(extension, index, template);\n\t}\n}\n\nexport interface IExtensionTemplateData {\n\ticon: HTMLImageElement;\n\tname: HTMLElement;\n\tidentifier: HTMLElement;\n\tauthor: HTMLElement;\n\textensionDisposables: IDisposable[];\n\textensionData: IExtensionData;\n}\n\nexport interface IUnknownExtensionTemplateData {\n\tidentifier: HTMLElement;\n}\n\nexport interface IExtensionData {\n\textension: IExtension;\n\thasChildren: boolean;\n\tgetChildren: () => Promise<IExtensionData[] | null>;\n\tparent: IExtensionData | null;\n}\n\nexport class AsyncDataSource implements IAsyncDataSource<IExtensionData, any> {\n\n\tpublic hasChildren({ hasChildren }: IExtensionData): boolean {\n\t\treturn hasChildren;\n\t}\n\n\tpublic getChildren(extensionData: IExtensionData): Promise<any> {\n\t\treturn extensionData.getChildren();\n\t}\n\n}\n\nexport class VirualDelegate implements IListVirtualDelegate<IExtensionData> {\n\n\tpublic getHeight(element: IExtensionData): number {\n\t\treturn 62;\n\t}\n\tpublic getTemplateId({ extension }: IExtensionData): string {\n\t\treturn extension ? ExtensionRenderer.TEMPLATE_ID : UnknownExtensionRenderer.TEMPLATE_ID;\n\t}\n}\n\nexport class ExtensionRenderer implements IListRenderer<ITreeNode<IExtensionData>, IExtensionTemplateData> {\n\n\tstatic readonly TEMPLATE_ID = 'extension-template';\n\n\tconstructor(@IInstantiationService private readonly instantiationService: IInstantiationService) {\n\t}\n\n\tpublic get templateId(): string {\n\t\treturn ExtensionRenderer.TEMPLATE_ID;\n\t}\n\n\tpublic renderTemplate(container: HTMLElement): IExtensionTemplateData {\n\t\tcontainer.classList.add('extension');\n\n\t\tconst icon = dom.append(container, dom.$<HTMLImageElement>('img.icon'));\n\t\tconst details = dom.append(container, dom.$('.details'));\n\n\t\tconst header = dom.append(details, dom.$('.header'));\n\t\tconst name = dom.append(header, dom.$('span.name'));\n\t\tconst openExtensionAction = this.instantiationService.createInstance(OpenExtensionAction);\n\t\tconst extensionDisposables = [dom.addDisposableListener(name, 'click', (e: MouseEvent) => {\n\t\t\topenExtensionAction.run(e.ctrlKey || e.metaKey);\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t})];\n\t\tconst identifier = dom.append(header, dom.$('span.identifier'));\n\n\t\tconst footer = dom.append(details, dom.$('.footer'));\n\t\tconst author = dom.append(footer, dom.$('.author'));\n\t\treturn {\n\t\t\ticon,\n\t\t\tname,\n\t\t\tidentifier,\n\t\t\tauthor,\n\t\t\textensionDisposables,\n\t\t\tset extensionData(extensionData: IExtensionData) {\n\t\t\t\topenExtensionAction.extension = extensionData.extension;\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic renderElement(node: ITreeNode<IExtensionData>, index: number, data: IExtensionTemplateData): void {\n\t\tconst extension = node.element.extension;\n\t\tconst onError = Event.once(domEvent(data.icon, 'error'));\n\t\tonError(() => data.icon.src = extension.iconUrlFallback, null, data.extensionDisposables);\n\t\tdata.icon.src = extension.iconUrl;\n\n\t\tif (!data.icon.complete) {\n\t\t\tdata.icon.style.visibility = 'hidden';\n\t\t\tdata.icon.onload = () => data.icon.style.visibility = 'inherit';\n\t\t} else {\n\t\t\tdata.icon.style.visibility = 'inherit';\n\t\t}\n\n\t\tdata.name.textContent = extension.displayName;\n\t\tdata.identifier.textContent = extension.identifier.id;\n\t\tdata.author.textContent = extension.publisherDisplayName;\n\t\tdata.extensionData = node.element;\n\t}\n\n\tpublic disposeTemplate(templateData: IExtensionTemplateData): void {\n\t\ttemplateData.extensionDisposables = dispose((<IExtensionTemplateData>templateData).extensionDisposables);\n\t}\n}\n\nexport class UnknownExtensionRenderer implements IListRenderer<ITreeNode<IExtensionData>, IUnknownExtensionTemplateData> {\n\n\tstatic readonly TEMPLATE_ID = 'unknown-extension-template';\n\n\tpublic get templateId(): string {\n\t\treturn UnknownExtensionRenderer.TEMPLATE_ID;\n\t}\n\n\tpublic renderTemplate(container: HTMLElement): IUnknownExtensionTemplateData {\n\t\tconst messageContainer = dom.append(container, dom.$('div.unknown-extension'));\n\t\tdom.append(messageContainer, dom.$('span.error-marker')).textContent = localize('error', \"Error\");\n\t\tdom.append(messageContainer, dom.$('span.message')).textContent = localize('Unknown Extension', \"Unknown Extension:\");\n\n\t\tconst identifier = dom.append(messageContainer, dom.$('span.message'));\n\t\treturn { identifier };\n\t}\n\n\tpublic renderElement(node: ITreeNode<IExtensionData>, index: number, data: IUnknownExtensionTemplateData): void {\n\t\tdata.identifier.textContent = node.element.extension.identifier.id;\n\t}\n\n\tpublic disposeTemplate(data: IUnknownExtensionTemplateData): void {\n\t}\n}\n\nclass OpenExtensionAction extends Action {\n\n\tprivate _extension: IExtension | undefined;\n\n\tconstructor(@IExtensionsWorkbenchService private readonly extensionsWorkdbenchService: IExtensionsWorkbenchService) {\n\t\tsuper('extensions.action.openExtension', '');\n\t}\n\n\tpublic set extension(extension: IExtension) {\n\t\tthis._extension = extension;\n\t}\n\n\toverride run(sideByside: boolean): Promise<any> {\n\t\tif (this._extension) {\n\t\t\treturn this.extensionsWorkdbenchService.open(this._extension, { sideByside });\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class ExtensionsTree extends WorkbenchAsyncDataTree<IExtensionData, IExtensionData> {\n\n\tconstructor(\n\t\tinput: IExtensionData,\n\t\tcontainer: HTMLElement,\n\t\toverrideStyles: IColorMapping,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@IExtensionsWorkbenchService extensionsWorkdbenchService: IExtensionsWorkbenchService\n\t) {\n\t\tconst delegate = new VirualDelegate();\n\t\tconst dataSource = new AsyncDataSource();\n\t\tconst renderers = [instantiationService.createInstance(ExtensionRenderer), instantiationService.createInstance(UnknownExtensionRenderer)];\n\t\tconst identityProvider = {\n\t\t\tgetId({ extension, parent }: IExtensionData): string {\n\t\t\t\treturn parent ? this.getId(parent) + '/' + extension.identifier.id : extension.identifier.id;\n\t\t\t}\n\t\t};\n\n\t\tsuper(\n\t\t\t'ExtensionsTree',\n\t\t\tcontainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\tdataSource,\n\t\t\t{\n\t\t\t\tindent: 40,\n\t\t\t\tidentityProvider,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\toverrideStyles,\n\t\t\t\taccessibilityProvider: <IListAccessibilityProvider<IExtensionData>>{\n\t\t\t\t\tgetAriaLabel(extensionData: IExtensionData): string {\n\t\t\t\t\t\tconst extension = extensionData.extension;\n\t\t\t\t\t\treturn localize('extension.arialabel', \"{0}, {1}, {2}, {3}\", extension.displayName, extension.version, extension.publisherDisplayName, extension.description);\n\t\t\t\t\t},\n\t\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\t\treturn localize('extensions', \"Extensions\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService\n\t\t);\n\n\t\tthis.setInput(input);\n\n\t\tthis.disposables.add(this.onDidChangeSelection(event => {\n\t\t\tif (event.browserEvent && event.browserEvent instanceof KeyboardEvent) {\n\t\t\t\textensionsWorkdbenchService.open(event.elements[0].extension, { sideByside: false });\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport class ExtensionData implements IExtensionData {\n\n\treadonly extension: IExtension;\n\treadonly parent: IExtensionData | null;\n\tprivate readonly getChildrenExtensionIds: (extension: IExtension) => string[];\n\tprivate readonly childrenExtensionIds: string[];\n\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService;\n\n\tconstructor(extension: IExtension, parent: IExtensionData | null, getChildrenExtensionIds: (extension: IExtension) => string[], extensionsWorkbenchService: IExtensionsWorkbenchService) {\n\t\tthis.extension = extension;\n\t\tthis.parent = parent;\n\t\tthis.getChildrenExtensionIds = getChildrenExtensionIds;\n\t\tthis.extensionsWorkbenchService = extensionsWorkbenchService;\n\t\tthis.childrenExtensionIds = this.getChildrenExtensionIds(extension);\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn isNonEmptyArray(this.childrenExtensionIds);\n\t}\n\n\tasync getChildren(): Promise<IExtensionData[] | null> {\n\t\tif (this.hasChildren) {\n\t\t\tconst result: IExtension[] = await getExtensions(this.childrenExtensionIds, this.extensionsWorkbenchService);\n\t\t\treturn result.map(extension => new ExtensionData(extension, this, this.getChildrenExtensionIds, this.extensionsWorkbenchService));\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport async function getExtensions(extensions: string[], extensionsWorkbenchService: IExtensionsWorkbenchService): Promise<IExtension[]> {\n\tconst localById = extensionsWorkbenchService.local.reduce((result, e) => { result.set(e.identifier.id.toLowerCase(), e); return result; }, new Map<string, IExtension>());\n\tconst result: IExtension[] = [];\n\tconst toQuery: string[] = [];\n\tfor (const extensionId of extensions) {\n\t\tconst id = extensionId.toLowerCase();\n\t\tconst local = localById.get(id);\n\t\tif (local) {\n\t\t\tresult.push(local);\n\t\t} else {\n\t\t\ttoQuery.push(id);\n\t\t}\n\t}\n\tif (toQuery.length) {\n\t\tconst galleryResult = await extensionsWorkbenchService.queryGallery({ names: toQuery, pageSize: toQuery.length }, CancellationToken.None);\n\t\tresult.push(...galleryResult.firstPage);\n\t}\n\treturn result;\n}\n\nregisterThemingParticipant((theme: IColorTheme, collector: ICssStyleCollector) => {\n\tconst focusBackground = theme.getColor(listFocusBackground);\n\tif (focusBackground) {\n\t\tcollector.addRule(`.extensions-grid-view .extension-container:focus { background-color: ${focusBackground}; outline: none; }`);\n\t}\n\tconst focusForeground = theme.getColor(listFocusForeground);\n\tif (focusForeground) {\n\t\tcollector.addRule(`.extensions-grid-view .extension-container:focus { color: ${focusForeground}; }`);\n\t}\n});\n"]}