{"version":3,"sources":["vs/workbench/contrib/webviewPanel/browser/webviewCommands.ts"],"names":[],"mappings":"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","file":"webviewCommands.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport * as nls from 'vs/nls';\nimport { Action2, MenuId } from 'vs/platform/actions/common/actions';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { CATEGORIES } from 'vs/workbench/common/actions';\nimport { KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE, Webview } from 'vs/workbench/contrib/webview/browser/webview';\nimport { WebviewEditor } from 'vs/workbench/contrib/webviewPanel/browser/webviewEditor';\nimport { WebviewInput } from 'vs/workbench/contrib/webviewPanel/browser/webviewEditorInput';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\n\nconst webviewActiveContextKeyExpr = ContextKeyExpr.and(ContextKeyExpr.equals('activeEditor', WebviewEditor.ID), EditorContextKeys.focus.toNegated() /* https://github.com/microsoft/vscode/issues/58668 */)!;\n\nexport class ShowWebViewEditorFindWidgetAction extends Action2 {\n\tpublic static readonly ID = 'editor.action.webvieweditor.showFind';\n\tpublic static readonly LABEL = nls.localize('editor.action.webvieweditor.showFind', \"Show find\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ShowWebViewEditorFindWidgetAction.ID,\n\t\t\ttitle: ShowWebViewEditorFindWidgetAction.LABEL,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(webviewActiveContextKeyExpr, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KEY_F,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor): void {\n\t\tgetActiveWebviewEditor(accessor)?.showFind();\n\t}\n}\n\nexport class HideWebViewEditorFindCommand extends Action2 {\n\tpublic static readonly ID = 'editor.action.webvieweditor.hideFind';\n\tpublic static readonly LABEL = nls.localize('editor.action.webvieweditor.hideFind', \"Stop find\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: HideWebViewEditorFindCommand.ID,\n\t\t\ttitle: HideWebViewEditorFindCommand.LABEL,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(webviewActiveContextKeyExpr, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE),\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor): void {\n\t\tgetActiveWebviewEditor(accessor)?.hideFind();\n\t}\n}\n\nexport class WebViewEditorFindNextCommand extends Action2 {\n\tpublic static readonly ID = 'editor.action.webvieweditor.findNext';\n\tpublic static readonly LABEL = nls.localize('editor.action.webvieweditor.findNext', 'Find next');\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: WebViewEditorFindNextCommand.ID,\n\t\t\ttitle: WebViewEditorFindNextCommand.LABEL,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(webviewActiveContextKeyExpr, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor): void {\n\t\tgetActiveWebviewEditor(accessor)?.runFindAction(false);\n\t}\n}\n\nexport class WebViewEditorFindPreviousCommand extends Action2 {\n\tpublic static readonly ID = 'editor.action.webvieweditor.findPrevious';\n\tpublic static readonly LABEL = nls.localize('editor.action.webvieweditor.findPrevious', 'Find previous');\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: WebViewEditorFindPreviousCommand.ID,\n\t\t\ttitle: WebViewEditorFindPreviousCommand.LABEL,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(webviewActiveContextKeyExpr, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED),\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor): void {\n\t\tgetActiveWebviewEditor(accessor)?.runFindAction(true);\n\t}\n}\n\nexport class ReloadWebviewAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.webview.reloadWebviewAction';\n\tstatic readonly LABEL = nls.localize('refreshWebviewLabel', \"Reload Webviews\");\n\n\tpublic constructor() {\n\t\tsuper({\n\t\t\tid: ReloadWebviewAction.ID,\n\t\t\ttitle: { value: ReloadWebviewAction.LABEL, original: 'Reload Webviews' },\n\t\t\tcategory: CATEGORIES.Developer,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.CommandPalette\n\t\t\t}]\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tfor (const editor of editorService.visibleEditors) {\n\t\t\tif (editor instanceof WebviewInput) {\n\t\t\t\teditor.webview.reload();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getActiveWebviewEditor(accessor: ServicesAccessor): Webview | undefined {\n\tconst editorService = accessor.get(IEditorService);\n\tconst activeEditor = editorService.activeEditor;\n\treturn activeEditor instanceof WebviewInput ? activeEditor.webview : undefined;\n}\n"]}