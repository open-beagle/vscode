{"version":3,"file":"debugUtils.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/debug/test/browser/debugUtils.test.ts"],"names":[],"mappings":"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CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAEzC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { formatPII, getExactExpressionStartAndEnd, getVisibleAndSorted } from 'vs/workbench/contrib/debug/common/debugUtils';\nimport { IConfig } from 'vs/workbench/contrib/debug/common/debug';\n\nsuite('Debug - Utils', () => {\n\ttest('formatPII', () => {\n\t\tassert.strictEqual(formatPII('Foo Bar', false, {}), 'Foo Bar');\n\t\tassert.strictEqual(formatPII('Foo {key} Bar', false, {}), 'Foo {key} Bar');\n\t\tassert.strictEqual(formatPII('Foo {key} Bar', false, { 'key': 'yes' }), 'Foo yes Bar');\n\t\tassert.strictEqual(formatPII('Foo {_0} Bar {_0}', true, { '_0': 'yes' }), 'Foo yes Bar yes');\n\t\tassert.strictEqual(formatPII('Foo {0} Bar {1}{2}', false, { '0': 'yes' }), 'Foo yes Bar {1}{2}');\n\t\tassert.strictEqual(formatPII('Foo {0} Bar {1}{2}', false, { '0': 'yes', '1': 'undefined' }), 'Foo yes Bar undefined{2}');\n\t\tassert.strictEqual(formatPII('Foo {_key0} Bar {key1}{key2}', true, { '_key0': 'yes', 'key1': '5', 'key2': 'false' }), 'Foo yes Bar {key1}{key2}');\n\t\tassert.strictEqual(formatPII('Foo {_key0} Bar {key1}{key2}', false, { '_key0': 'yes', 'key1': '5', 'key2': 'false' }), 'Foo yes Bar 5false');\n\t\tassert.strictEqual(formatPII('Unable to display threads:\"{e}\"', false, { 'e': 'detached from process' }), 'Unable to display threads:\"detached from process\"');\n\t});\n\n\ttest('getExactExpressionStartAndEnd', () => {\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('foo', 1, 2), { start: 1, end: 3 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('foo', 1, 3), { start: 1, end: 3 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('foo', 1, 4), { start: 1, end: 3 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('this.name = \"John\"', 1, 10), { start: 1, end: 9 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('this.name = \"John\"', 6, 10), { start: 1, end: 9 });\n\t\t// Hovers over \"address\" should pick up this->address\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('this->address = \"Main street\"', 6, 10), { start: 1, end: 13 });\n\t\t// Hovers over \"name\" should pick up a.b.c.d.name\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('var t = a.b.c.d.name', 16, 20), { start: 9, end: 20 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('MyClass::StaticProp', 10, 20), { start: 1, end: 19 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('largeNumber = myVar?.prop', 21, 25), { start: 15, end: 25 });\n\n\t\t// For example in expression 'a.b.c.d', hover was under 'b', 'a.b' should be the exact range\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('var t = a.b.c.d.name', 11, 12), { start: 9, end: 11 });\n\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('var t = a.b;c.d.name', 16, 20), { start: 13, end: 20 });\n\t\tassert.deepStrictEqual(getExactExpressionStartAndEnd('var t = a.b.c-d.name', 16, 20), { start: 15, end: 20 });\n\t});\n\n\ttest('config presentation', () => {\n\t\tconst configs: IConfig[] = [];\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'p'\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'a'\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'b',\n\t\t\tpresentation: {\n\t\t\t\thidden: false\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'c',\n\t\t\tpresentation: {\n\t\t\t\thidden: true\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'd',\n\t\t\tpresentation: {\n\t\t\t\tgroup: '2_group',\n\t\t\t\torder: 5\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'e',\n\t\t\tpresentation: {\n\t\t\t\tgroup: '2_group',\n\t\t\t\torder: 52\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'f',\n\t\t\tpresentation: {\n\t\t\t\tgroup: '1_group',\n\t\t\t\torder: 500\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'g',\n\t\t\tpresentation: {\n\t\t\t\tgroup: '5_group',\n\t\t\t\torder: 500\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'h',\n\t\t\tpresentation: {\n\t\t\t\torder: 700\n\t\t\t}\n\t\t});\n\t\tconfigs.push({\n\t\t\ttype: 'node',\n\t\t\trequest: 'launch',\n\t\t\tname: 'i',\n\t\t\tpresentation: {\n\t\t\t\torder: 1000\n\t\t\t}\n\t\t});\n\n\t\tconst sorted = getVisibleAndSorted(configs);\n\t\tassert.strictEqual(sorted.length, 9);\n\t\tassert.strictEqual(sorted[0].name, 'f');\n\t\tassert.strictEqual(sorted[1].name, 'd');\n\t\tassert.strictEqual(sorted[2].name, 'e');\n\t\tassert.strictEqual(sorted[3].name, 'g');\n\t\tassert.strictEqual(sorted[4].name, 'h');\n\t\tassert.strictEqual(sorted[5].name, 'i');\n\t\tassert.strictEqual(sorted[6].name, 'b');\n\t\tassert.strictEqual(sorted[7].name, 'p');\n\t\tassert.strictEqual(sorted[8].name, 'a');\n\n\t});\n});\n"]}