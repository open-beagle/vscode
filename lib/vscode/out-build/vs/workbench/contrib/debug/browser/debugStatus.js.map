{"version":3,"sources":["vs/workbench/contrib/debug/browser/debugStatus.ts"],"names":[],"mappings":"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","file":"debugStatus.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { IDebugService, State, IDebugConfiguration } from 'vs/workbench/contrib/debug/common/debug';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IStatusbarEntry, IStatusbarService, StatusbarAlignment, IStatusbarEntryAccessor } from 'vs/workbench/services/statusbar/common/statusbar';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\n\nexport class DebugStatusContribution implements IWorkbenchContribution {\n\n\tprivate showInStatusBar!: 'never' | 'always' | 'onFirstSessionStart';\n\tprivate toDispose: IDisposable[] = [];\n\tprivate entryAccessor: IStatusbarEntryAccessor | undefined;\n\n\tconstructor(\n\t\t@IStatusbarService private readonly statusBarService: IStatusbarService,\n\t\t@IDebugService readonly debugService: IDebugService,\n\t\t@IConfigurationService readonly configurationService: IConfigurationService\n\t) {\n\n\t\tconst addStatusBarEntry = () => {\n\t\t\tthis.entryAccessor = this.statusBarService.addEntry(this.entry, 'status.debug', nls.localize('status.debug', \"Debug\"), StatusbarAlignment.LEFT, 30 /* Low Priority */);\n\t\t};\n\n\t\tconst setShowInStatusBar = () => {\n\t\t\tthis.showInStatusBar = configurationService.getValue<IDebugConfiguration>('debug').showInStatusBar;\n\t\t\tif (this.showInStatusBar === 'always' && !this.entryAccessor) {\n\t\t\t\taddStatusBarEntry();\n\t\t\t}\n\t\t};\n\t\tsetShowInStatusBar();\n\n\t\tthis.toDispose.push(this.debugService.onDidChangeState(state => {\n\t\t\tif (state !== State.Inactive && this.showInStatusBar === 'onFirstSessionStart' && !this.entryAccessor) {\n\t\t\t\taddStatusBarEntry();\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('debug.showInStatusBar')) {\n\t\t\t\tsetShowInStatusBar();\n\t\t\t\tif (this.entryAccessor && this.showInStatusBar === 'never') {\n\t\t\t\t\tthis.entryAccessor.dispose();\n\t\t\t\t\tthis.entryAccessor = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(this.debugService.getConfigurationManager().onDidSelectConfiguration(e => {\n\t\t\tif (this.entryAccessor) {\n\t\t\t\tthis.entryAccessor.update(this.entry);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate get entry(): IStatusbarEntry {\n\t\tlet text = '';\n\t\tconst manager = this.debugService.getConfigurationManager();\n\t\tconst name = manager.selectedConfiguration.name || '';\n\t\tconst nameAndLaunchPresent = name && manager.selectedConfiguration.launch;\n\t\tif (nameAndLaunchPresent) {\n\t\t\ttext = (manager.getLaunches().length > 1 ? `${name} (${manager.selectedConfiguration.launch!.name})` : name);\n\t\t}\n\n\t\treturn {\n\t\t\ttext: '$(debug-alt-small) ' + text,\n\t\t\tariaLabel: nls.localize('debugTarget', \"Debug: {0}\", text),\n\t\t\ttooltip: nls.localize('selectAndStartDebug', \"Select and start debug configuration\"),\n\t\t\tcommand: 'workbench.action.debug.selectandstart'\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tif (this.entryAccessor) {\n\t\t\tthis.entryAccessor.dispose();\n\t\t}\n\t\tdispose(this.toDispose);\n\t}\n}\n"]}