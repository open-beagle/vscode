{"version":3,"sources":["vs/workbench/contrib/debug/common/debugModel.ts"],"names":[],"mappings":"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","file":"debugModel.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { URI as uri } from 'vs/base/common/uri';\nimport * as resources from 'vs/base/common/resources';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { generateUuid } from 'vs/base/common/uuid';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { isString, isUndefinedOrNull } from 'vs/base/common/types';\nimport { distinct, lastIndex } from 'vs/base/common/arrays';\nimport { Range, IRange } from 'vs/editor/common/core/range';\nimport {\n\tITreeElement, IExpression, IExpressionContainer, IDebugSession, IStackFrame, IExceptionBreakpoint, IBreakpoint, IFunctionBreakpoint, IDebugModel,\n\tIThread, IRawModelUpdate, IScope, IRawStoppedDetails, IEnablement, IBreakpointData, IExceptionInfo, IBreakpointsChangeEvent, IBreakpointUpdateData, IBaseBreakpoint, State, IDataBreakpoint\n} from 'vs/workbench/contrib/debug/common/debug';\nimport { Source, UNKNOWN_SOURCE_LABEL, getUriFromSource } from 'vs/workbench/contrib/debug/common/debugSource';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { ITextEditorPane } from 'vs/workbench/common/editor';\nimport { mixin } from 'vs/base/common/objects';\nimport { DebugStorage } from 'vs/workbench/contrib/debug/common/debugStorage';\nimport { CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\n\ninterface IDebugProtocolVariableWithContext extends DebugProtocol.Variable {\n\t__vscodeVariableMenuContext?: string;\n}\n\nexport class ExpressionContainer implements IExpressionContainer {\n\n\tpublic static readonly allValues = new Map<string, string>();\n\t// Use chunks to support variable paging #9537\n\tprivate static readonly BASE_CHUNK_SIZE = 100;\n\n\tpublic type: string | undefined;\n\tpublic valueChanged = false;\n\tprivate _value: string = '';\n\tprotected children?: Promise<IExpression[]>;\n\n\tconstructor(\n\t\tprotected session: IDebugSession | undefined,\n\t\tprotected threadId: number | undefined,\n\t\tprivate _reference: number | undefined,\n\t\tprivate id: string,\n\t\tpublic namedVariables: number | undefined = 0,\n\t\tpublic indexedVariables: number | undefined = 0,\n\t\tprivate startOfVariables: number | undefined = 0\n\t) { }\n\n\tget reference(): number | undefined {\n\t\treturn this._reference;\n\t}\n\n\tset reference(value: number | undefined) {\n\t\tthis._reference = value;\n\t\tthis.children = undefined; // invalidate children cache\n\t}\n\n\tgetChildren(): Promise<IExpression[]> {\n\t\tif (!this.children) {\n\t\t\tthis.children = this.doGetChildren();\n\t\t}\n\n\t\treturn this.children;\n\t}\n\n\tprivate async doGetChildren(): Promise<IExpression[]> {\n\t\tif (!this.hasChildren) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.getChildrenInChunks) {\n\t\t\treturn this.fetchVariables(undefined, undefined, undefined);\n\t\t}\n\n\t\t// Check if object has named variables, fetch them independent from indexed variables #9670\n\t\tconst children = this.namedVariables ? await this.fetchVariables(undefined, undefined, 'named') : [];\n\n\t\t// Use a dynamic chunk size based on the number of elements #9774\n\t\tlet chunkSize = ExpressionContainer.BASE_CHUNK_SIZE;\n\t\twhile (!!this.indexedVariables && this.indexedVariables > chunkSize * ExpressionContainer.BASE_CHUNK_SIZE) {\n\t\t\tchunkSize *= ExpressionContainer.BASE_CHUNK_SIZE;\n\t\t}\n\n\t\tif (!!this.indexedVariables && this.indexedVariables > chunkSize) {\n\t\t\t// There are a lot of children, create fake intermediate values that represent chunks #9537\n\t\t\tconst numberOfChunks = Math.ceil(this.indexedVariables / chunkSize);\n\t\t\tfor (let i = 0; i < numberOfChunks; i++) {\n\t\t\t\tconst start = (this.startOfVariables || 0) + i * chunkSize;\n\t\t\t\tconst count = Math.min(chunkSize, this.indexedVariables - i * chunkSize);\n\t\t\t\tchildren.push(new Variable(this.session, this.threadId, this, this.reference, `[${start}..${start + count - 1}]`, '', '', undefined, count, { kind: 'virtual' }, undefined, undefined, true, start));\n\t\t\t}\n\n\t\t\treturn children;\n\t\t}\n\n\t\tconst variables = await this.fetchVariables(this.startOfVariables, this.indexedVariables, 'indexed');\n\t\treturn children.concat(variables);\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tgetSession(): IDebugSession | undefined {\n\t\treturn this.session;\n\t}\n\n\tget value(): string {\n\t\treturn this._value;\n\t}\n\n\tget hasChildren(): boolean {\n\t\t// only variables with reference > 0 have children.\n\t\treturn !!this.reference && this.reference > 0;\n\t}\n\n\tprivate async fetchVariables(start: number | undefined, count: number | undefined, filter: 'indexed' | 'named' | undefined): Promise<Variable[]> {\n\t\ttry {\n\t\t\tconst response = await this.session!.variables(this.reference || 0, this.threadId, filter, start, count);\n\t\t\tif (!response || !response.body || !response.body.variables) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst nameCount = new Map<string, number>();\n\t\t\treturn response.body.variables.filter(v => !!v).map((v: IDebugProtocolVariableWithContext) => {\n\t\t\t\tif (isString(v.value) && isString(v.name) && typeof v.variablesReference === 'number') {\n\t\t\t\t\tconst count = nameCount.get(v.name) || 0;\n\t\t\t\t\tconst idDuplicationIndex = count > 0 ? count.toString() : '';\n\t\t\t\t\tnameCount.set(v.name, count + 1);\n\t\t\t\t\treturn new Variable(this.session, this.threadId, this, v.variablesReference, v.name, v.evaluateName, v.value, v.namedVariables, v.indexedVariables, v.presentationHint, v.type, v.__vscodeVariableMenuContext, true, 0, idDuplicationIndex);\n\t\t\t\t}\n\t\t\t\treturn new Variable(this.session, this.threadId, this, 0, '', undefined, nls.localize('invalidVariableAttributes', \"Invalid variable attributes\"), 0, 0, { kind: 'virtual' }, undefined, undefined, false);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\treturn [new Variable(this.session, this.threadId, this, 0, '', undefined, e.message, 0, 0, { kind: 'virtual' }, undefined, undefined, false)];\n\t\t}\n\t}\n\n\t// The adapter explicitly sents the children count of an expression only if there are lots of children which should be chunked.\n\tprivate get getChildrenInChunks(): boolean {\n\t\treturn !!this.indexedVariables;\n\t}\n\n\tset value(value: string) {\n\t\tthis._value = value;\n\t\tthis.valueChanged = !!ExpressionContainer.allValues.get(this.getId()) &&\n\t\t\tExpressionContainer.allValues.get(this.getId()) !== Expression.DEFAULT_VALUE && ExpressionContainer.allValues.get(this.getId()) !== value;\n\t\tExpressionContainer.allValues.set(this.getId(), value);\n\t}\n\n\ttoString(): string {\n\t\treturn this.value;\n\t}\n\n\tasync evaluateExpression(\n\t\texpression: string,\n\t\tsession: IDebugSession | undefined,\n\t\tstackFrame: IStackFrame | undefined,\n\t\tcontext: string): Promise<boolean> {\n\n\t\tif (!session || (!stackFrame && context !== 'repl')) {\n\t\t\tthis.value = context === 'repl' ? nls.localize('startDebugFirst', \"Please start a debug session to evaluate expressions\") : Expression.DEFAULT_VALUE;\n\t\t\tthis.reference = 0;\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.session = session;\n\t\ttry {\n\t\t\tconst response = await session.evaluate(expression, stackFrame ? stackFrame.frameId : undefined, context);\n\n\t\t\tif (response && response.body) {\n\t\t\t\tthis.value = response.body.result || '';\n\t\t\t\tthis.reference = response.body.variablesReference;\n\t\t\t\tthis.namedVariables = response.body.namedVariables;\n\t\t\t\tthis.indexedVariables = response.body.indexedVariables;\n\t\t\t\tthis.type = response.body.type || this.type;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t} catch (e) {\n\t\t\tthis.value = e.message || '';\n\t\t\tthis.reference = 0;\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nexport class Expression extends ExpressionContainer implements IExpression {\n\tstatic readonly DEFAULT_VALUE = nls.localize('notAvailable', \"not available\");\n\n\tpublic available: boolean;\n\n\tconstructor(public name: string, id = generateUuid()) {\n\t\tsuper(undefined, undefined, 0, id);\n\t\tthis.available = false;\n\t\t// name is not set if the expression is just being added\n\t\t// in that case do not set default value to prevent flashing #14499\n\t\tif (name) {\n\t\t\tthis.value = Expression.DEFAULT_VALUE;\n\t\t}\n\t}\n\n\tasync evaluate(session: IDebugSession | undefined, stackFrame: IStackFrame | undefined, context: string): Promise<void> {\n\t\tthis.available = await this.evaluateExpression(this.name, session, stackFrame, context);\n\t}\n\n\toverride toString(): string {\n\t\treturn `${this.name}\\n${this.value}`;\n\t}\n}\n\nexport class Variable extends ExpressionContainer implements IExpression {\n\n\t// Used to show the error message coming from the adapter when setting the value #7807\n\tpublic errorMessage: string | undefined;\n\n\tconstructor(\n\t\tsession: IDebugSession | undefined,\n\t\tthreadId: number | undefined,\n\t\tpublic parent: IExpressionContainer,\n\t\treference: number | undefined,\n\t\tpublic name: string,\n\t\tpublic evaluateName: string | undefined,\n\t\tvalue: string | undefined,\n\t\tnamedVariables: number | undefined,\n\t\tindexedVariables: number | undefined,\n\t\tpublic presentationHint: DebugProtocol.VariablePresentationHint | undefined,\n\t\ttype: string | undefined = undefined,\n\t\tpublic variableMenuContext: string | undefined = undefined,\n\t\tpublic available = true,\n\t\tstartOfVariables = 0,\n\t\tidDuplicationIndex = '',\n\t) {\n\t\tsuper(session, threadId, reference, `variable:${parent.getId()}:${name}:${idDuplicationIndex}`, namedVariables, indexedVariables, startOfVariables);\n\t\tthis.value = value || '';\n\t\tthis.type = type;\n\t}\n\n\tasync setVariable(value: string): Promise<any> {\n\t\tif (!this.session) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await this.session.setVariable((<ExpressionContainer>this.parent).reference, this.name, value);\n\t\t\tif (response && response.body) {\n\t\t\t\tthis.value = response.body.value || '';\n\t\t\t\tthis.type = response.body.type || this.type;\n\t\t\t\tthis.reference = response.body.variablesReference;\n\t\t\t\tthis.namedVariables = response.body.namedVariables;\n\t\t\t\tthis.indexedVariables = response.body.indexedVariables;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.errorMessage = err.message;\n\t\t}\n\t}\n\n\toverride toString(): string {\n\t\treturn this.name ? `${this.name}: ${this.value}` : this.value;\n\t}\n\n\ttoDebugProtocolObject(): DebugProtocol.Variable {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tvariablesReference: this.reference || 0,\n\t\t\tvalue: this.value,\n\t\t\tevaluateName: this.evaluateName\n\t\t};\n\t}\n}\n\nexport class Scope extends ExpressionContainer implements IScope {\n\n\tconstructor(\n\t\tstackFrame: IStackFrame,\n\t\tindex: number,\n\t\tpublic name: string,\n\t\treference: number,\n\t\tpublic expensive: boolean,\n\t\tnamedVariables?: number,\n\t\tindexedVariables?: number,\n\t\tpublic range?: IRange\n\t) {\n\t\tsuper(stackFrame.thread.session, stackFrame.thread.threadId, reference, `scope:${name}:${index}`, namedVariables, indexedVariables);\n\t}\n\n\toverride toString(): string {\n\t\treturn this.name;\n\t}\n\n\ttoDebugProtocolObject(): DebugProtocol.Scope {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tvariablesReference: this.reference || 0,\n\t\t\texpensive: this.expensive\n\t\t};\n\t}\n}\n\nexport class ErrorScope extends Scope {\n\n\tconstructor(\n\t\tstackFrame: IStackFrame,\n\t\tindex: number,\n\t\tmessage: string,\n\t) {\n\t\tsuper(stackFrame, index, message, 0, false);\n\t}\n\n\toverride toString(): string {\n\t\treturn this.name;\n\t}\n}\n\nexport class StackFrame implements IStackFrame {\n\n\tprivate scopes: Promise<Scope[]> | undefined;\n\n\tconstructor(\n\t\tpublic thread: IThread,\n\t\tpublic frameId: number,\n\t\tpublic source: Source,\n\t\tpublic name: string,\n\t\tpublic presentationHint: string | undefined,\n\t\tpublic range: IRange,\n\t\tprivate index: number,\n\t\tpublic canRestart: boolean\n\t) { }\n\n\tgetId(): string {\n\t\treturn `stackframe:${this.thread.getId()}:${this.index}:${this.source.name}`;\n\t}\n\n\tgetScopes(): Promise<IScope[]> {\n\t\tif (!this.scopes) {\n\t\t\tthis.scopes = this.thread.session.scopes(this.frameId, this.thread.threadId).then(response => {\n\t\t\t\tif (!response || !response.body || !response.body.scopes) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tconst scopeNameIndexes = new Map<string, number>();\n\t\t\t\treturn response.body.scopes.map(rs => {\n\t\t\t\t\tconst previousIndex = scopeNameIndexes.get(rs.name);\n\t\t\t\t\tconst index = typeof previousIndex === 'number' ? previousIndex + 1 : 0;\n\t\t\t\t\tscopeNameIndexes.set(rs.name, index);\n\t\t\t\t\treturn new Scope(this, index, rs.name, rs.variablesReference, rs.expensive, rs.namedVariables, rs.indexedVariables,\n\t\t\t\t\t\trs.line && rs.column && rs.endLine && rs.endColumn ? new Range(rs.line, rs.column, rs.endLine, rs.endColumn) : undefined);\n\n\t\t\t\t});\n\t\t\t}, err => [new ErrorScope(this, 0, err.message)]);\n\t\t}\n\n\t\treturn this.scopes;\n\t}\n\n\tasync getMostSpecificScopes(range: IRange): Promise<IScope[]> {\n\t\tconst scopes = await this.getScopes();\n\t\tconst nonExpensiveScopes = scopes.filter(s => !s.expensive);\n\t\tconst haveRangeInfo = nonExpensiveScopes.some(s => !!s.range);\n\t\tif (!haveRangeInfo) {\n\t\t\treturn nonExpensiveScopes;\n\t\t}\n\n\t\tconst scopesContainingRange = nonExpensiveScopes.filter(scope => scope.range && Range.containsRange(scope.range, range))\n\t\t\t.sort((first, second) => (first.range!.endLineNumber - first.range!.startLineNumber) - (second.range!.endLineNumber - second.range!.startLineNumber));\n\t\treturn scopesContainingRange.length ? scopesContainingRange : nonExpensiveScopes;\n\t}\n\n\trestart(): Promise<void> {\n\t\treturn this.thread.session.restartFrame(this.frameId, this.thread.threadId);\n\t}\n\n\tforgetScopes(): void {\n\t\tthis.scopes = undefined;\n\t}\n\n\ttoString(): string {\n\t\tconst lineNumberToString = typeof this.range.startLineNumber === 'number' ? `:${this.range.startLineNumber}` : '';\n\t\tconst sourceToString = `${this.source.inMemory ? this.source.name : this.source.uri.fsPath}${lineNumberToString}`;\n\n\t\treturn sourceToString === UNKNOWN_SOURCE_LABEL ? this.name : `${this.name} (${sourceToString})`;\n\t}\n\n\tasync openInEditor(editorService: IEditorService, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean): Promise<ITextEditorPane | undefined> {\n\t\tif (this.source.available) {\n\t\t\treturn this.source.openInEditor(editorService, this.range, preserveFocus, sideBySide, pinned);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tequals(other: IStackFrame): boolean {\n\t\treturn (this.name === other.name) && (other.thread === this.thread) && (this.frameId === other.frameId) && (other.source === this.source) && (Range.equalsRange(this.range, other.range));\n\t}\n}\n\nexport class Thread implements IThread {\n\tprivate callStack: IStackFrame[];\n\tprivate staleCallStack: IStackFrame[];\n\tprivate callStackCancellationTokens: CancellationTokenSource[] = [];\n\tpublic stoppedDetails: IRawStoppedDetails | undefined;\n\tpublic stopped: boolean;\n\tpublic reachedEndOfCallStack = false;\n\n\tconstructor(public session: IDebugSession, public name: string, public threadId: number) {\n\t\tthis.callStack = [];\n\t\tthis.staleCallStack = [];\n\t\tthis.stopped = false;\n\t}\n\n\tgetId(): string {\n\t\treturn `thread:${this.session.getId()}:${this.threadId}`;\n\t}\n\n\tclearCallStack(): void {\n\t\tif (this.callStack.length) {\n\t\t\tthis.staleCallStack = this.callStack;\n\t\t}\n\t\tthis.callStack = [];\n\t\tthis.callStackCancellationTokens.forEach(c => c.dispose(true));\n\t\tthis.callStackCancellationTokens = [];\n\t}\n\n\tgetCallStack(): IStackFrame[] {\n\t\treturn this.callStack;\n\t}\n\n\tgetStaleCallStack(): ReadonlyArray<IStackFrame> {\n\t\treturn this.staleCallStack;\n\t}\n\n\tgetTopStackFrame(): IStackFrame | undefined {\n\t\tconst callStack = this.getCallStack();\n\t\tconst firstAvailableStackFrame = callStack.find(sf => !!(sf && sf.source && sf.source.available && sf.source.presentationHint !== 'deemphasize'));\n\t\treturn firstAvailableStackFrame || (callStack.length > 0 ? callStack[0] : undefined);\n\t}\n\n\tget stateLabel(): string {\n\t\tif (this.stoppedDetails) {\n\t\t\treturn this.stoppedDetails.description ||\n\t\t\t\t(this.stoppedDetails.reason ? nls.localize({ key: 'pausedOn', comment: ['indicates reason for program being paused'] }, \"Paused on {0}\", this.stoppedDetails.reason) : nls.localize('paused', \"Paused\"));\n\t\t}\n\n\t\treturn nls.localize({ key: 'running', comment: ['indicates state'] }, \"Running\");\n\t}\n\n\t/**\n\t * Queries the debug adapter for the callstack and returns a promise\n\t * which completes once the call stack has been retrieved.\n\t * If the thread is not stopped, it returns a promise to an empty array.\n\t * Only fetches the first stack frame for performance reasons. Calling this method consecutive times\n\t * gets the remainder of the call stack.\n\t */\n\tasync fetchCallStack(levels = 20): Promise<void> {\n\t\tif (this.stopped) {\n\t\t\tconst start = this.callStack.length;\n\t\t\tconst callStack = await this.getCallStackImpl(start, levels);\n\t\t\tthis.reachedEndOfCallStack = callStack.length < levels;\n\t\t\tif (start < this.callStack.length) {\n\t\t\t\t// Set the stack frames for exact position we requested. To make sure no concurrent requests create duplicate stack frames #30660\n\t\t\t\tthis.callStack.splice(start, this.callStack.length - start);\n\t\t\t}\n\t\t\tthis.callStack = this.callStack.concat(callStack || []);\n\t\t\tif (typeof this.stoppedDetails?.totalFrames === 'number' && this.stoppedDetails.totalFrames === this.callStack.length) {\n\t\t\t\tthis.reachedEndOfCallStack = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async getCallStackImpl(startFrame: number, levels: number): Promise<IStackFrame[]> {\n\t\ttry {\n\t\t\tconst tokenSource = new CancellationTokenSource();\n\t\t\tthis.callStackCancellationTokens.push(tokenSource);\n\t\t\tconst response = await this.session.stackTrace(this.threadId, startFrame, levels, tokenSource.token);\n\t\t\tif (!response || !response.body || tokenSource.token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tif (this.stoppedDetails) {\n\t\t\t\tthis.stoppedDetails.totalFrames = response.body.totalFrames;\n\t\t\t}\n\n\t\t\treturn response.body.stackFrames.map((rsf, index) => {\n\t\t\t\tconst source = this.session.getSource(rsf.source);\n\n\t\t\t\treturn new StackFrame(this, rsf.id, source, rsf.name, rsf.presentationHint, new Range(\n\t\t\t\t\trsf.line,\n\t\t\t\t\trsf.column,\n\t\t\t\t\trsf.endLine || rsf.line,\n\t\t\t\t\trsf.endColumn || rsf.column\n\t\t\t\t), startFrame + index, typeof rsf.canRestart === 'boolean' ? rsf.canRestart : true);\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tif (this.stoppedDetails) {\n\t\t\t\tthis.stoppedDetails.framesErrorMessage = err.message;\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Returns exception info promise if the exception was thrown, otherwise undefined\n\t */\n\tget exceptionInfo(): Promise<IExceptionInfo | undefined> {\n\t\tif (this.stoppedDetails && this.stoppedDetails.reason === 'exception') {\n\t\t\tif (this.session.capabilities.supportsExceptionInfoRequest) {\n\t\t\t\treturn this.session.exceptionInfo(this.threadId);\n\t\t\t}\n\t\t\treturn Promise.resolve({\n\t\t\t\tdescription: this.stoppedDetails.text,\n\t\t\t\tbreakMode: null\n\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tnext(): Promise<any> {\n\t\treturn this.session.next(this.threadId);\n\t}\n\n\tstepIn(): Promise<any> {\n\t\treturn this.session.stepIn(this.threadId);\n\t}\n\n\tstepOut(): Promise<any> {\n\t\treturn this.session.stepOut(this.threadId);\n\t}\n\n\tstepBack(): Promise<any> {\n\t\treturn this.session.stepBack(this.threadId);\n\t}\n\n\tcontinue(): Promise<any> {\n\t\treturn this.session.continue(this.threadId);\n\t}\n\n\tpause(): Promise<any> {\n\t\treturn this.session.pause(this.threadId);\n\t}\n\n\tterminate(): Promise<any> {\n\t\treturn this.session.terminateThreads([this.threadId]);\n\t}\n\n\treverseContinue(): Promise<any> {\n\t\treturn this.session.reverseContinue(this.threadId);\n\t}\n}\n\nexport class Enablement implements IEnablement {\n\tconstructor(\n\t\tpublic enabled: boolean,\n\t\tprivate id: string\n\t) { }\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n}\n\ninterface IBreakpointSessionData extends DebugProtocol.Breakpoint {\n\tsupportsConditionalBreakpoints: boolean;\n\tsupportsHitConditionalBreakpoints: boolean;\n\tsupportsLogPoints: boolean;\n\tsupportsFunctionBreakpoints: boolean;\n\tsupportsDataBreakpoints: boolean;\n\tsessionId: string;\n}\n\nfunction toBreakpointSessionData(data: DebugProtocol.Breakpoint, capabilities: DebugProtocol.Capabilities): IBreakpointSessionData {\n\treturn mixin({\n\t\tsupportsConditionalBreakpoints: !!capabilities.supportsConditionalBreakpoints,\n\t\tsupportsHitConditionalBreakpoints: !!capabilities.supportsHitConditionalBreakpoints,\n\t\tsupportsLogPoints: !!capabilities.supportsLogPoints,\n\t\tsupportsFunctionBreakpoints: !!capabilities.supportsFunctionBreakpoints,\n\t\tsupportsDataBreakpoints: !!capabilities.supportsDataBreakpoints\n\t}, data);\n}\n\nexport abstract class BaseBreakpoint extends Enablement implements IBaseBreakpoint {\n\n\tprivate sessionData = new Map<string, IBreakpointSessionData>();\n\tprotected data: IBreakpointSessionData | undefined;\n\n\tconstructor(\n\t\tenabled: boolean,\n\t\tpublic hitCondition: string | undefined,\n\t\tpublic condition: string | undefined,\n\t\tpublic logMessage: string | undefined,\n\t\tid: string\n\t) {\n\t\tsuper(enabled, id);\n\t\tif (enabled === undefined) {\n\t\t\tthis.enabled = true;\n\t\t}\n\t}\n\n\tsetSessionData(sessionId: string, data: IBreakpointSessionData | undefined): void {\n\t\tif (!data) {\n\t\t\tthis.sessionData.delete(sessionId);\n\t\t} else {\n\t\t\tdata.sessionId = sessionId;\n\t\t\tthis.sessionData.set(sessionId, data);\n\t\t}\n\n\t\tconst allData = Array.from(this.sessionData.values());\n\t\tconst verifiedData = distinct(allData.filter(d => d.verified), d => `${d.line}:${d.column}`);\n\t\tif (verifiedData.length) {\n\t\t\t// In case multiple session verified the breakpoint and they provide different data show the intial data that the user set (corner case)\n\t\t\tthis.data = verifiedData.length === 1 ? verifiedData[0] : undefined;\n\t\t} else {\n\t\t\t// No session verified the breakpoint\n\t\t\tthis.data = allData.length ? allData[0] : undefined;\n\t\t}\n\t}\n\n\tget message(): string | undefined {\n\t\tif (!this.data) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn this.data.message;\n\t}\n\n\tget verified(): boolean {\n\t\treturn this.data ? this.data.verified : true;\n\t}\n\n\tget sessionsThatVerified() {\n\t\tconst sessionIds: string[] = [];\n\t\tfor (const [sessionId, data] of this.sessionData) {\n\t\t\tif (data.verified) {\n\t\t\t\tsessionIds.push(sessionId);\n\t\t\t}\n\t\t}\n\n\t\treturn sessionIds;\n\t}\n\n\tabstract get supported(): boolean;\n\n\tgetIdFromAdapter(sessionId: string): number | undefined {\n\t\tconst data = this.sessionData.get(sessionId);\n\t\treturn data ? data.id : undefined;\n\t}\n\n\tgetDebugProtocolBreakpoint(sessionId: string): DebugProtocol.Breakpoint | undefined {\n\t\tconst data = this.sessionData.get(sessionId);\n\t\tif (data) {\n\t\t\tconst bp: DebugProtocol.Breakpoint = {\n\t\t\t\tid: data.id,\n\t\t\t\tverified: data.verified,\n\t\t\t\tmessage: data.message,\n\t\t\t\tsource: data.source,\n\t\t\t\tline: data.line,\n\t\t\t\tcolumn: data.column,\n\t\t\t\tendLine: data.endLine,\n\t\t\t\tendColumn: data.endColumn,\n\t\t\t\tinstructionReference: data.instructionReference,\n\t\t\t\toffset: data.offset\n\t\t\t};\n\t\t\treturn bp;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\ttoJSON(): any {\n\t\tconst result = Object.create(null);\n\t\tresult.enabled = this.enabled;\n\t\tresult.condition = this.condition;\n\t\tresult.hitCondition = this.hitCondition;\n\t\tresult.logMessage = this.logMessage;\n\n\t\treturn result;\n\t}\n}\n\nexport class Breakpoint extends BaseBreakpoint implements IBreakpoint {\n\n\tconstructor(\n\t\tprivate _uri: uri,\n\t\tprivate _lineNumber: number,\n\t\tprivate _column: number | undefined,\n\t\tenabled: boolean,\n\t\tcondition: string | undefined,\n\t\thitCondition: string | undefined,\n\t\tlogMessage: string | undefined,\n\t\tprivate _adapterData: any,\n\t\tprivate readonly textFileService: ITextFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tid = generateUuid()\n\t) {\n\t\tsuper(enabled, hitCondition, condition, logMessage, id);\n\t}\n\n\tget lineNumber(): number {\n\t\treturn this.verified && this.data && typeof this.data.line === 'number' ? this.data.line : this._lineNumber;\n\t}\n\n\toverride get verified(): boolean {\n\t\tif (this.data) {\n\t\t\treturn this.data.verified && !this.textFileService.isDirty(this._uri);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget uri(): uri {\n\t\treturn this.verified && this.data && this.data.source ? getUriFromSource(this.data.source, this.data.source.path, this.data.sessionId, this.uriIdentityService) : this._uri;\n\t}\n\n\tget column(): number | undefined {\n\t\treturn this.verified && this.data && typeof this.data.column === 'number' ? this.data.column : this._column;\n\t}\n\n\toverride get message(): string | undefined {\n\t\tif (this.textFileService.isDirty(this.uri)) {\n\t\t\treturn nls.localize('breakpointDirtydHover', \"Unverified breakpoint. File is modified, please restart debug session.\");\n\t\t}\n\n\t\treturn super.message;\n\t}\n\n\tget adapterData(): any {\n\t\treturn this.data && this.data.source && this.data.source.adapterData ? this.data.source.adapterData : this._adapterData;\n\t}\n\n\tget endLineNumber(): number | undefined {\n\t\treturn this.verified && this.data ? this.data.endLine : undefined;\n\t}\n\n\tget endColumn(): number | undefined {\n\t\treturn this.verified && this.data ? this.data.endColumn : undefined;\n\t}\n\n\tget sessionAgnosticData(): { lineNumber: number, column: number | undefined } {\n\t\treturn {\n\t\t\tlineNumber: this._lineNumber,\n\t\t\tcolumn: this._column\n\t\t};\n\t}\n\n\tget supported(): boolean {\n\t\tif (!this.data) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.logMessage && !this.data.supportsLogPoints) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.condition && !this.data.supportsConditionalBreakpoints) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.hitCondition && !this.data.supportsHitConditionalBreakpoints) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\n\toverride setSessionData(sessionId: string, data: IBreakpointSessionData | undefined): void {\n\t\tsuper.setSessionData(sessionId, data);\n\t\tif (!this._adapterData) {\n\t\t\tthis._adapterData = this.adapterData;\n\t\t}\n\t}\n\n\toverride toJSON(): any {\n\t\tconst result = super.toJSON();\n\t\tresult.uri = this._uri;\n\t\tresult.lineNumber = this._lineNumber;\n\t\tresult.column = this._column;\n\t\tresult.adapterData = this.adapterData;\n\n\t\treturn result;\n\t}\n\n\toverride toString(): string {\n\t\treturn `${resources.basenameOrAuthority(this.uri)} ${this.lineNumber}`;\n\t}\n\n\tupdate(data: IBreakpointUpdateData): void {\n\t\tif (!isUndefinedOrNull(data.lineNumber)) {\n\t\t\tthis._lineNumber = data.lineNumber;\n\t\t}\n\t\tif (!isUndefinedOrNull(data.column)) {\n\t\t\tthis._column = data.column;\n\t\t}\n\t\tif (!isUndefinedOrNull(data.condition)) {\n\t\t\tthis.condition = data.condition;\n\t\t}\n\t\tif (!isUndefinedOrNull(data.hitCondition)) {\n\t\t\tthis.hitCondition = data.hitCondition;\n\t\t}\n\t\tif (!isUndefinedOrNull(data.logMessage)) {\n\t\t\tthis.logMessage = data.logMessage;\n\t\t}\n\t}\n}\n\nexport class FunctionBreakpoint extends BaseBreakpoint implements IFunctionBreakpoint {\n\n\tconstructor(\n\t\tpublic name: string,\n\t\tenabled: boolean,\n\t\thitCondition: string | undefined,\n\t\tcondition: string | undefined,\n\t\tlogMessage: string | undefined,\n\t\tid = generateUuid()\n\t) {\n\t\tsuper(enabled, hitCondition, condition, logMessage, id);\n\t}\n\n\toverride toJSON(): any {\n\t\tconst result = super.toJSON();\n\t\tresult.name = this.name;\n\n\t\treturn result;\n\t}\n\n\tget supported(): boolean {\n\t\tif (!this.data) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.data.supportsFunctionBreakpoints;\n\t}\n\n\toverride toString(): string {\n\t\treturn this.name;\n\t}\n}\n\nexport class DataBreakpoint extends BaseBreakpoint implements IDataBreakpoint {\n\n\tconstructor(\n\t\tpublic description: string,\n\t\tpublic dataId: string,\n\t\tpublic canPersist: boolean,\n\t\tenabled: boolean,\n\t\thitCondition: string | undefined,\n\t\tcondition: string | undefined,\n\t\tlogMessage: string | undefined,\n\t\tpublic accessTypes: DebugProtocol.DataBreakpointAccessType[] | undefined,\n\t\tpublic accessType: DebugProtocol.DataBreakpointAccessType,\n\t\tid = generateUuid()\n\t) {\n\t\tsuper(enabled, hitCondition, condition, logMessage, id);\n\t}\n\n\toverride toJSON(): any {\n\t\tconst result = super.toJSON();\n\t\tresult.description = this.description;\n\t\tresult.dataId = this.dataId;\n\t\tresult.accessTypes = this.accessTypes;\n\t\tresult.accessType = this.accessType;\n\t\treturn result;\n\t}\n\n\tget supported(): boolean {\n\t\tif (!this.data) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.data.supportsDataBreakpoints;\n\t}\n\n\toverride toString(): string {\n\t\treturn this.description;\n\t}\n}\n\nexport class ExceptionBreakpoint extends BaseBreakpoint implements IExceptionBreakpoint {\n\n\tconstructor(\n\t\tpublic filter: string,\n\t\tpublic label: string,\n\t\tenabled: boolean,\n\t\tpublic supportsCondition: boolean,\n\t\tcondition: string | undefined,\n\t\tpublic description: string | undefined,\n\t\tpublic conditionDescription: string | undefined\n\t) {\n\t\tsuper(enabled, undefined, condition, undefined, generateUuid());\n\t}\n\n\toverride toJSON(): any {\n\t\tconst result = Object.create(null);\n\t\tresult.filter = this.filter;\n\t\tresult.label = this.label;\n\t\tresult.enabled = this.enabled;\n\t\tresult.supportsCondition = this.supportsCondition;\n\t\tresult.condition = this.condition;\n\n\t\treturn result;\n\t}\n\n\tget supported(): boolean {\n\t\treturn true;\n\t}\n\n\toverride toString(): string {\n\t\treturn this.label;\n\t}\n}\n\nexport class ThreadAndSessionIds implements ITreeElement {\n\tconstructor(public sessionId: string, public threadId: number) { }\n\n\tgetId(): string {\n\t\treturn `${this.sessionId}:${this.threadId}`;\n\t}\n}\n\nexport class DebugModel implements IDebugModel {\n\n\tprivate sessions: IDebugSession[];\n\tprivate schedulers = new Map<string, RunOnceScheduler>();\n\tprivate breakpointsActivated = true;\n\tprivate readonly _onDidChangeBreakpoints = new Emitter<IBreakpointsChangeEvent | undefined>();\n\tprivate readonly _onDidChangeCallStack = new Emitter<void>();\n\tprivate readonly _onDidChangeWatchExpressions = new Emitter<IExpression | undefined>();\n\tprivate breakpoints: Breakpoint[];\n\tprivate functionBreakpoints: FunctionBreakpoint[];\n\tprivate exceptionBreakpoints: ExceptionBreakpoint[];\n\tprivate dataBreakopints: DataBreakpoint[];\n\tprivate watchExpressions: Expression[];\n\n\tconstructor(\n\t\tdebugStorage: DebugStorage,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tthis.breakpoints = debugStorage.loadBreakpoints();\n\t\tthis.functionBreakpoints = debugStorage.loadFunctionBreakpoints();\n\t\tthis.exceptionBreakpoints = debugStorage.loadExceptionBreakpoints();\n\t\tthis.dataBreakopints = debugStorage.loadDataBreakpoints();\n\t\tthis.watchExpressions = debugStorage.loadWatchExpressions();\n\t\tthis.sessions = [];\n\t}\n\n\tgetId(): string {\n\t\treturn 'root';\n\t}\n\n\tgetSession(sessionId: string | undefined, includeInactive = false): IDebugSession | undefined {\n\t\tif (sessionId) {\n\t\t\treturn this.getSessions(includeInactive).find(s => s.getId() === sessionId);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetSessions(includeInactive = false): IDebugSession[] {\n\t\t// By default do not return inactive sesions.\n\t\t// However we are still holding onto inactive sessions due to repl and debug service session revival (eh scenario)\n\t\treturn this.sessions.filter(s => includeInactive || s.state !== State.Inactive);\n\t}\n\n\taddSession(session: IDebugSession): void {\n\t\tthis.sessions = this.sessions.filter(s => {\n\t\t\tif (s.getId() === session.getId()) {\n\t\t\t\t// Make sure to de-dupe if a session is re-intialized. In case of EH debugging we are adding a session again after an attach.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (s.state === State.Inactive && s.configuration.name === session.configuration.name) {\n\t\t\t\t// Make sure to remove all inactive sessions that are using the same configuration as the new session\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\tlet i = 1;\n\t\twhile (this.sessions.some(s => s.getLabel() === session.getLabel())) {\n\t\t\tsession.setName(`${session.configuration.name} ${++i}`);\n\t\t}\n\n\t\tlet index = -1;\n\t\tif (session.parentSession) {\n\t\t\t// Make sure that child sessions are placed after the parent session\n\t\t\tindex = lastIndex(this.sessions, s => s.parentSession === session.parentSession || s === session.parentSession);\n\t\t}\n\t\tif (index >= 0) {\n\t\t\tthis.sessions.splice(index + 1, 0, session);\n\t\t} else {\n\t\t\tthis.sessions.push(session);\n\t\t}\n\t\tthis._onDidChangeCallStack.fire(undefined);\n\t}\n\n\tget onDidChangeBreakpoints(): Event<IBreakpointsChangeEvent | undefined> {\n\t\treturn this._onDidChangeBreakpoints.event;\n\t}\n\n\tget onDidChangeCallStack(): Event<void> {\n\t\treturn this._onDidChangeCallStack.event;\n\t}\n\n\tget onDidChangeWatchExpressions(): Event<IExpression | undefined> {\n\t\treturn this._onDidChangeWatchExpressions.event;\n\t}\n\n\trawUpdate(data: IRawModelUpdate): void {\n\t\tlet session = this.sessions.find(p => p.getId() === data.sessionId);\n\t\tif (session) {\n\t\t\tsession.rawUpdate(data);\n\t\t\tthis._onDidChangeCallStack.fire(undefined);\n\t\t}\n\t}\n\n\tclearThreads(id: string, removeThreads: boolean, reference: number | undefined = undefined): void {\n\t\tconst session = this.sessions.find(p => p.getId() === id);\n\t\tthis.schedulers.forEach(scheduler => scheduler.dispose());\n\t\tthis.schedulers.clear();\n\n\t\tif (session) {\n\t\t\tsession.clearThreads(removeThreads, reference);\n\t\t\tthis._onDidChangeCallStack.fire(undefined);\n\t\t}\n\t}\n\n\tfetchCallStack(thread: Thread): { topCallStack: Promise<void>, wholeCallStack: Promise<void> } {\n\t\tif (thread.session.capabilities.supportsDelayedStackTraceLoading) {\n\t\t\t// For improved performance load the first stack frame and then load the rest async.\n\t\t\tlet topCallStack = Promise.resolve();\n\t\t\tconst wholeCallStack = new Promise<void>((c, e) => {\n\t\t\t\ttopCallStack = thread.fetchCallStack(1).then(() => {\n\t\t\t\t\tif (!this.schedulers.has(thread.getId())) {\n\t\t\t\t\t\tthis.schedulers.set(thread.getId(), new RunOnceScheduler(() => {\n\t\t\t\t\t\t\tthread.fetchCallStack(19).then(() => {\n\t\t\t\t\t\t\t\tconst stale = thread.getStaleCallStack();\n\t\t\t\t\t\t\t\tconst current = thread.getCallStack();\n\t\t\t\t\t\t\t\tlet bottomOfCallStackChanged = stale.length !== current.length;\n\t\t\t\t\t\t\t\tfor (let i = 1; i < stale.length && !bottomOfCallStackChanged; i++) {\n\t\t\t\t\t\t\t\t\tbottomOfCallStackChanged = !stale[i].equals(current[i]);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (bottomOfCallStackChanged) {\n\t\t\t\t\t\t\t\t\tthis._onDidChangeCallStack.fire();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tc();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 420));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.schedulers.get(thread.getId())!.schedule();\n\t\t\t\t});\n\t\t\t\tthis._onDidChangeCallStack.fire();\n\t\t\t});\n\n\t\t\treturn { topCallStack, wholeCallStack };\n\t\t}\n\n\t\tconst wholeCallStack = thread.fetchCallStack();\n\t\treturn { wholeCallStack, topCallStack: wholeCallStack };\n\t}\n\n\tgetBreakpoints(filter?: { uri?: uri, lineNumber?: number, column?: number, enabledOnly?: boolean }): IBreakpoint[] {\n\t\tif (filter) {\n\t\t\tconst uriStr = filter.uri ? filter.uri.toString() : undefined;\n\t\t\treturn this.breakpoints.filter(bp => {\n\t\t\t\tif (uriStr && bp.uri.toString() !== uriStr) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (filter.lineNumber && bp.lineNumber !== filter.lineNumber) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (filter.column && bp.column !== filter.column) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (filter.enabledOnly && (!this.breakpointsActivated || !bp.enabled)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\n\t\treturn this.breakpoints;\n\t}\n\n\tgetFunctionBreakpoints(): IFunctionBreakpoint[] {\n\t\treturn this.functionBreakpoints;\n\t}\n\n\tgetDataBreakpoints(): IDataBreakpoint[] {\n\t\treturn this.dataBreakopints;\n\t}\n\n\tgetExceptionBreakpoints(): IExceptionBreakpoint[] {\n\t\treturn this.exceptionBreakpoints;\n\t}\n\n\tsetExceptionBreakpoints(data: DebugProtocol.ExceptionBreakpointsFilter[]): void {\n\t\tif (data) {\n\t\t\tif (this.exceptionBreakpoints.length === data.length && this.exceptionBreakpoints.every((exbp, i) =>\n\t\t\t\texbp.filter === data[i].filter && exbp.label === data[i].label && exbp.supportsCondition === data[i].supportsCondition && exbp.conditionDescription === data[i].conditionDescription && exbp.description === data[i].description)) {\n\t\t\t\t// No change\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.exceptionBreakpoints = data.map(d => {\n\t\t\t\tconst ebp = this.exceptionBreakpoints.filter(ebp => ebp.filter === d.filter).pop();\n\t\t\t\treturn new ExceptionBreakpoint(d.filter, d.label, ebp ? ebp.enabled : !!d.default, !!d.supportsCondition, ebp?.condition, d.description, d.conditionDescription);\n\t\t\t});\n\t\t\tthis._onDidChangeBreakpoints.fire(undefined);\n\t\t}\n\t}\n\n\tsetExceptionBreakpointCondition(exceptionBreakpoint: IExceptionBreakpoint, condition: string | undefined): void {\n\t\t(exceptionBreakpoint as ExceptionBreakpoint).condition = condition;\n\t\tthis._onDidChangeBreakpoints.fire(undefined);\n\t}\n\n\tareBreakpointsActivated(): boolean {\n\t\treturn this.breakpointsActivated;\n\t}\n\n\tsetBreakpointsActivated(activated: boolean): void {\n\t\tthis.breakpointsActivated = activated;\n\t\tthis._onDidChangeBreakpoints.fire(undefined);\n\t}\n\n\taddBreakpoints(uri: uri, rawData: IBreakpointData[], fireEvent = true): IBreakpoint[] {\n\t\tconst newBreakpoints = rawData.map(rawBp => new Breakpoint(uri, rawBp.lineNumber, rawBp.column, rawBp.enabled === false ? false : true, rawBp.condition, rawBp.hitCondition, rawBp.logMessage, undefined, this.textFileService, this.uriIdentityService, rawBp.id));\n\t\tthis.breakpoints = this.breakpoints.concat(newBreakpoints);\n\t\tthis.breakpointsActivated = true;\n\t\tthis.sortAndDeDup();\n\n\t\tif (fireEvent) {\n\t\t\tthis._onDidChangeBreakpoints.fire({ added: newBreakpoints, sessionOnly: false });\n\t\t}\n\n\t\treturn newBreakpoints;\n\t}\n\n\tremoveBreakpoints(toRemove: IBreakpoint[]): void {\n\t\tthis.breakpoints = this.breakpoints.filter(bp => !toRemove.some(toRemove => toRemove.getId() === bp.getId()));\n\t\tthis._onDidChangeBreakpoints.fire({ removed: toRemove, sessionOnly: false });\n\t}\n\n\tupdateBreakpoints(data: Map<string, IBreakpointUpdateData>): void {\n\t\tconst updated: IBreakpoint[] = [];\n\t\tthis.breakpoints.forEach(bp => {\n\t\t\tconst bpData = data.get(bp.getId());\n\t\t\tif (bpData) {\n\t\t\t\tbp.update(bpData);\n\t\t\t\tupdated.push(bp);\n\t\t\t}\n\t\t});\n\t\tthis.sortAndDeDup();\n\t\tthis._onDidChangeBreakpoints.fire({ changed: updated, sessionOnly: false });\n\t}\n\n\tsetBreakpointSessionData(sessionId: string, capabilites: DebugProtocol.Capabilities, data: Map<string, DebugProtocol.Breakpoint> | undefined): void {\n\t\tthis.breakpoints.forEach(bp => {\n\t\t\tif (!data) {\n\t\t\t\tbp.setSessionData(sessionId, undefined);\n\t\t\t} else {\n\t\t\t\tconst bpData = data.get(bp.getId());\n\t\t\t\tif (bpData) {\n\t\t\t\t\tbp.setSessionData(sessionId, toBreakpointSessionData(bpData, capabilites));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.functionBreakpoints.forEach(fbp => {\n\t\t\tif (!data) {\n\t\t\t\tfbp.setSessionData(sessionId, undefined);\n\t\t\t} else {\n\t\t\t\tconst fbpData = data.get(fbp.getId());\n\t\t\t\tif (fbpData) {\n\t\t\t\t\tfbp.setSessionData(sessionId, toBreakpointSessionData(fbpData, capabilites));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.dataBreakopints.forEach(dbp => {\n\t\t\tif (!data) {\n\t\t\t\tdbp.setSessionData(sessionId, undefined);\n\t\t\t} else {\n\t\t\t\tconst dbpData = data.get(dbp.getId());\n\t\t\t\tif (dbpData) {\n\t\t\t\t\tdbp.setSessionData(sessionId, toBreakpointSessionData(dbpData, capabilites));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.exceptionBreakpoints.forEach(ebp => {\n\t\t\tif (!data) {\n\t\t\t\tebp.setSessionData(sessionId, undefined);\n\t\t\t} else {\n\t\t\t\tconst ebpData = data.get(ebp.getId());\n\t\t\t\tif (ebpData) {\n\t\t\t\t\tebp.setSessionData(sessionId, toBreakpointSessionData(ebpData, capabilites));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._onDidChangeBreakpoints.fire({\n\t\t\tsessionOnly: true\n\t\t});\n\t}\n\n\tgetDebugProtocolBreakpoint(breakpointId: string, sessionId: string): DebugProtocol.Breakpoint | undefined {\n\t\tconst bp = this.breakpoints.find(bp => bp.getId() === breakpointId);\n\t\tif (bp) {\n\t\t\treturn bp.getDebugProtocolBreakpoint(sessionId);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate sortAndDeDup(): void {\n\t\tthis.breakpoints = this.breakpoints.sort((first, second) => {\n\t\t\tif (first.uri.toString() !== second.uri.toString()) {\n\t\t\t\treturn resources.basenameOrAuthority(first.uri).localeCompare(resources.basenameOrAuthority(second.uri));\n\t\t\t}\n\t\t\tif (first.lineNumber === second.lineNumber) {\n\t\t\t\tif (first.column && second.column) {\n\t\t\t\t\treturn first.column - second.column;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn first.lineNumber - second.lineNumber;\n\t\t});\n\t\tthis.breakpoints = distinct(this.breakpoints, bp => `${bp.uri.toString()}:${bp.lineNumber}:${bp.column}`);\n\t}\n\n\tsetEnablement(element: IEnablement, enable: boolean): void {\n\t\tif (element instanceof Breakpoint || element instanceof FunctionBreakpoint || element instanceof ExceptionBreakpoint || element instanceof DataBreakpoint) {\n\t\t\tconst changed: Array<IBreakpoint | IFunctionBreakpoint | IDataBreakpoint> = [];\n\t\t\tif (element.enabled !== enable && (element instanceof Breakpoint || element instanceof FunctionBreakpoint || element instanceof DataBreakpoint)) {\n\t\t\t\tchanged.push(element);\n\t\t\t}\n\n\t\t\telement.enabled = enable;\n\t\t\tif (enable) {\n\t\t\t\tthis.breakpointsActivated = true;\n\t\t\t}\n\n\t\t\tthis._onDidChangeBreakpoints.fire({ changed: changed, sessionOnly: false });\n\t\t}\n\t}\n\n\tenableOrDisableAllBreakpoints(enable: boolean): void {\n\t\tconst changed: Array<IBreakpoint | IFunctionBreakpoint | IDataBreakpoint> = [];\n\n\t\tthis.breakpoints.forEach(bp => {\n\t\t\tif (bp.enabled !== enable) {\n\t\t\t\tchanged.push(bp);\n\t\t\t}\n\t\t\tbp.enabled = enable;\n\t\t});\n\t\tthis.functionBreakpoints.forEach(fbp => {\n\t\t\tif (fbp.enabled !== enable) {\n\t\t\t\tchanged.push(fbp);\n\t\t\t}\n\t\t\tfbp.enabled = enable;\n\t\t});\n\t\tthis.dataBreakopints.forEach(dbp => {\n\t\t\tif (dbp.enabled !== enable) {\n\t\t\t\tchanged.push(dbp);\n\t\t\t}\n\t\t\tdbp.enabled = enable;\n\t\t});\n\t\tif (enable) {\n\t\t\tthis.breakpointsActivated = true;\n\t\t}\n\n\t\tthis._onDidChangeBreakpoints.fire({ changed: changed, sessionOnly: false });\n\t}\n\n\taddFunctionBreakpoint(functionName: string, id?: string): IFunctionBreakpoint {\n\t\tconst newFunctionBreakpoint = new FunctionBreakpoint(functionName, true, undefined, undefined, undefined, id);\n\t\tthis.functionBreakpoints.push(newFunctionBreakpoint);\n\t\tthis._onDidChangeBreakpoints.fire({ added: [newFunctionBreakpoint], sessionOnly: false });\n\n\t\treturn newFunctionBreakpoint;\n\t}\n\n\tupdateFunctionBreakpoint(id: string, update: { name?: string, hitCondition?: string, condition?: string }): void {\n\t\tconst functionBreakpoint = this.functionBreakpoints.find(fbp => fbp.getId() === id);\n\t\tif (functionBreakpoint) {\n\t\t\tif (typeof update.name === 'string') {\n\t\t\t\tfunctionBreakpoint.name = update.name;\n\t\t\t}\n\t\t\tif (typeof update.condition === 'string') {\n\t\t\t\tfunctionBreakpoint.condition = update.condition;\n\t\t\t}\n\t\t\tif (typeof update.hitCondition === 'string') {\n\t\t\t\tfunctionBreakpoint.hitCondition = update.hitCondition;\n\t\t\t}\n\t\t\tthis._onDidChangeBreakpoints.fire({ changed: [functionBreakpoint], sessionOnly: false });\n\t\t}\n\t}\n\n\tremoveFunctionBreakpoints(id?: string): void {\n\t\tlet removed: FunctionBreakpoint[];\n\t\tif (id) {\n\t\t\tremoved = this.functionBreakpoints.filter(fbp => fbp.getId() === id);\n\t\t\tthis.functionBreakpoints = this.functionBreakpoints.filter(fbp => fbp.getId() !== id);\n\t\t} else {\n\t\t\tremoved = this.functionBreakpoints;\n\t\t\tthis.functionBreakpoints = [];\n\t\t}\n\t\tthis._onDidChangeBreakpoints.fire({ removed, sessionOnly: false });\n\t}\n\n\taddDataBreakpoint(label: string, dataId: string, canPersist: boolean, accessTypes: DebugProtocol.DataBreakpointAccessType[] | undefined, accessType: DebugProtocol.DataBreakpointAccessType): void {\n\t\tconst newDataBreakpoint = new DataBreakpoint(label, dataId, canPersist, true, undefined, undefined, undefined, accessTypes, accessType);\n\t\tthis.dataBreakopints.push(newDataBreakpoint);\n\t\tthis._onDidChangeBreakpoints.fire({ added: [newDataBreakpoint], sessionOnly: false });\n\t}\n\n\tremoveDataBreakpoints(id?: string): void {\n\t\tlet removed: DataBreakpoint[];\n\t\tif (id) {\n\t\t\tremoved = this.dataBreakopints.filter(fbp => fbp.getId() === id);\n\t\t\tthis.dataBreakopints = this.dataBreakopints.filter(fbp => fbp.getId() !== id);\n\t\t} else {\n\t\t\tremoved = this.dataBreakopints;\n\t\t\tthis.dataBreakopints = [];\n\t\t}\n\t\tthis._onDidChangeBreakpoints.fire({ removed, sessionOnly: false });\n\t}\n\n\tgetWatchExpressions(): Expression[] {\n\t\treturn this.watchExpressions;\n\t}\n\n\taddWatchExpression(name?: string): IExpression {\n\t\tconst we = new Expression(name || '');\n\t\tthis.watchExpressions.push(we);\n\t\tthis._onDidChangeWatchExpressions.fire(we);\n\n\t\treturn we;\n\t}\n\n\trenameWatchExpression(id: string, newName: string): void {\n\t\tconst filtered = this.watchExpressions.filter(we => we.getId() === id);\n\t\tif (filtered.length === 1) {\n\t\t\tfiltered[0].name = newName;\n\t\t\tthis._onDidChangeWatchExpressions.fire(filtered[0]);\n\t\t}\n\t}\n\n\tremoveWatchExpressions(id: string | null = null): void {\n\t\tthis.watchExpressions = id ? this.watchExpressions.filter(we => we.getId() !== id) : [];\n\t\tthis._onDidChangeWatchExpressions.fire(undefined);\n\t}\n\n\tmoveWatchExpression(id: string, position: number): void {\n\t\tconst we = this.watchExpressions.find(we => we.getId() === id);\n\t\tif (we) {\n\t\t\tthis.watchExpressions = this.watchExpressions.filter(we => we.getId() !== id);\n\t\t\tthis.watchExpressions = this.watchExpressions.slice(0, position).concat(we, this.watchExpressions.slice(position));\n\t\t\tthis._onDidChangeWatchExpressions.fire(undefined);\n\t\t}\n\t}\n\n\tsourceIsNotAvailable(uri: uri): void {\n\t\tthis.sessions.forEach(s => {\n\t\t\tconst source = s.getSourceForUri(uri);\n\t\t\tif (source) {\n\t\t\t\tsource.available = false;\n\t\t\t}\n\t\t});\n\t\tthis._onDidChangeCallStack.fire(undefined);\n\t}\n}\n"]}