{"version":3,"sources":["vs/workbench/contrib/search/browser/searchActions.ts"],"names":[],"mappings":"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","file":"searchActions.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { ITreeNavigator } from 'vs/base/browser/ui/tree/tree';\nimport { Action } from 'vs/base/common/actions';\nimport { createKeybinding, ResolvedKeybinding } from 'vs/base/common/keyCodes';\nimport { isWindows, OS } from 'vs/base/common/platform';\nimport * as nls from 'vs/nls';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { ICommandHandler, ICommandService } from 'vs/platform/commands/common/commands';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { getSelectionKeyboardEvent, WorkbenchObjectTree } from 'vs/platform/list/browser/listService';\nimport { ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { IViewsService } from 'vs/workbench/common/views';\nimport { searchRemoveIcon, searchReplaceAllIcon, searchReplaceIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport { SearchView } from 'vs/workbench/contrib/search/browser/searchView';\nimport * as Constants from 'vs/workbench/contrib/search/common/constants';\nimport { IReplaceService } from 'vs/workbench/contrib/search/common/replace';\nimport { ISearchHistoryService } from 'vs/workbench/contrib/search/common/searchHistoryService';\nimport { FileMatch, FolderMatch, FolderMatchWithResource, Match, RenderableMatch, searchMatchComparer, SearchResult } from 'vs/workbench/contrib/search/common/searchModel';\nimport { OpenEditorCommandId } from 'vs/workbench/contrib/searchEditor/browser/constants';\nimport { SearchEditor } from 'vs/workbench/contrib/searchEditor/browser/searchEditor';\nimport { OpenSearchEditorArgs } from 'vs/workbench/contrib/searchEditor/browser/searchEditor.contribution';\nimport { SearchEditorInput } from 'vs/workbench/contrib/searchEditor/browser/searchEditorInput';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { ISearchConfiguration, VIEW_ID } from 'vs/workbench/services/search/common/search';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\n\nexport function isSearchViewFocused(viewsService: IViewsService): boolean {\n\tconst searchView = getSearchView(viewsService);\n\tconst activeElement = document.activeElement;\n\treturn !!(searchView && activeElement && DOM.isAncestor(activeElement, searchView.getContainer()));\n}\n\nexport function appendKeyBindingLabel(label: string, inputKeyBinding: number | ResolvedKeybinding | undefined, keyBindingService2: IKeybindingService): string {\n\tif (typeof inputKeyBinding === 'number') {\n\t\tconst keybinding = createKeybinding(inputKeyBinding, OS);\n\t\tif (keybinding) {\n\t\t\tconst resolvedKeybindings = keyBindingService2.resolveKeybinding(keybinding);\n\t\t\treturn doAppendKeyBindingLabel(label, resolvedKeybindings.length > 0 ? resolvedKeybindings[0] : undefined);\n\t\t}\n\t\treturn doAppendKeyBindingLabel(label, undefined);\n\t} else {\n\t\treturn doAppendKeyBindingLabel(label, inputKeyBinding);\n\t}\n}\n\nexport function openSearchView(viewsService: IViewsService, focus?: boolean): Promise<SearchView | undefined> {\n\treturn viewsService.openView(VIEW_ID, focus).then(view => (view as SearchView ?? undefined));\n}\n\nexport function getSearchView(viewsService: IViewsService): SearchView | undefined {\n\treturn viewsService.getActiveViewWithId(VIEW_ID) as SearchView ?? undefined;\n}\n\nfunction doAppendKeyBindingLabel(label: string, keyBinding: ResolvedKeybinding | undefined): string {\n\treturn keyBinding ? label + ' (' + keyBinding.getLabel() + ')' : label;\n}\n\nexport const toggleCaseSensitiveCommand = (accessor: ServicesAccessor) => {\n\tconst searchView = getSearchView(accessor.get(IViewsService));\n\tif (searchView) {\n\t\tsearchView.toggleCaseSensitive();\n\t}\n};\n\nexport const toggleWholeWordCommand = (accessor: ServicesAccessor) => {\n\tconst searchView = getSearchView(accessor.get(IViewsService));\n\tif (searchView) {\n\t\tsearchView.toggleWholeWords();\n\t}\n};\n\nexport const toggleRegexCommand = (accessor: ServicesAccessor) => {\n\tconst searchView = getSearchView(accessor.get(IViewsService));\n\tif (searchView) {\n\t\tsearchView.toggleRegex();\n\t}\n};\n\nexport const togglePreserveCaseCommand = (accessor: ServicesAccessor) => {\n\tconst searchView = getSearchView(accessor.get(IViewsService));\n\tif (searchView) {\n\t\tsearchView.togglePreserveCase();\n\t}\n};\n\nexport class FocusNextInputAction extends Action {\n\n\tstatic readonly ID = 'search.focus.nextInputBox';\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst input = this.editorService.activeEditor;\n\t\tif (input instanceof SearchEditorInput) {\n\t\t\t// cast as we cannot import SearchEditor as a value b/c cyclic dependency.\n\t\t\t(this.editorService.activeEditorPane as SearchEditor).focusNextInput();\n\t\t}\n\n\t\tconst searchView = getSearchView(this.viewsService);\n\t\tif (searchView) {\n\t\t\tsearchView.focusNextInputBox();\n\t\t}\n\t}\n}\n\nexport class FocusPreviousInputAction extends Action {\n\n\tstatic readonly ID = 'search.focus.previousInputBox';\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst input = this.editorService.activeEditor;\n\t\tif (input instanceof SearchEditorInput) {\n\t\t\t// cast as we cannot import SearchEditor as a value b/c cyclic dependency.\n\t\t\t(this.editorService.activeEditorPane as SearchEditor).focusPrevInput();\n\t\t}\n\n\t\tconst searchView = getSearchView(this.viewsService);\n\t\tif (searchView) {\n\t\t\tsearchView.focusPreviousInputBox();\n\t\t}\n\t}\n}\n\nexport abstract class FindOrReplaceInFilesAction extends Action {\n\n\tconstructor(id: string, label: string, protected viewsService: IViewsService,\n\t\tprivate expandSearchReplaceWidget: boolean\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<any> {\n\t\treturn openSearchView(this.viewsService, false).then(openedView => {\n\t\t\tif (openedView) {\n\t\t\t\tconst searchAndReplaceWidget = openedView.searchAndReplaceWidget;\n\t\t\t\tsearchAndReplaceWidget.toggleReplace(this.expandSearchReplaceWidget);\n\n\t\t\t\tconst updatedText = openedView.updateTextFromFindWidgetOrSelection({ allowUnselectedWord: !this.expandSearchReplaceWidget });\n\t\t\t\topenedView.searchAndReplaceWidget.focus(undefined, updatedText, updatedText);\n\t\t\t}\n\t\t});\n\t}\n}\nexport interface IFindInFilesArgs {\n\tquery?: string;\n\treplace?: string;\n\tpreserveCase?: boolean;\n\ttriggerSearch?: boolean;\n\tfilesToInclude?: string;\n\tfilesToExclude?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tmatchWholeWord?: boolean;\n\tuseExcludeSettingsAndIgnoreFiles?: boolean;\n}\nexport const FindInFilesCommand: ICommandHandler = (accessor, args: IFindInFilesArgs = {}) => {\n\tconst searchConfig = accessor.get(IConfigurationService).getValue<ISearchConfiguration>().search;\n\tconst mode = searchConfig.mode;\n\tif (mode === 'view') {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\topenSearchView(viewsService, false).then(openedView => {\n\t\t\tif (openedView) {\n\t\t\t\tconst searchAndReplaceWidget = openedView.searchAndReplaceWidget;\n\t\t\t\tsearchAndReplaceWidget.toggleReplace(typeof args.replace === 'string');\n\t\t\t\tlet updatedText = false;\n\t\t\t\tif (typeof args.query === 'string') {\n\t\t\t\t\topenedView.setSearchParameters(args);\n\t\t\t\t} else {\n\t\t\t\t\tupdatedText = openedView.updateTextFromFindWidgetOrSelection({ allowUnselectedWord: typeof args.replace !== 'string' });\n\t\t\t\t}\n\t\t\t\topenedView.searchAndReplaceWidget.focus(undefined, updatedText, updatedText);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tconst convertArgs = (args: IFindInFilesArgs): OpenSearchEditorArgs => ({\n\t\t\tlocation: mode === 'newEditor' ? 'new' : 'reuse',\n\t\t\tquery: args.query,\n\t\t\tfilesToInclude: args.filesToInclude,\n\t\t\tfilesToExclude: args.filesToExclude,\n\t\t\tmatchWholeWord: args.matchWholeWord,\n\t\t\tisCaseSensitive: args.isCaseSensitive,\n\t\t\tisRegexp: args.isRegex,\n\t\t\tuseExcludeSettingsAndIgnoreFiles: args.useExcludeSettingsAndIgnoreFiles,\n\t\t\tshowIncludesExcludes: !!(args.filesToExclude || args.filesToExclude || !args.useExcludeSettingsAndIgnoreFiles),\n\t\t});\n\t\taccessor.get(ICommandService).executeCommand(OpenEditorCommandId, convertArgs(args));\n\t}\n};\n\nexport class ReplaceInFilesAction extends FindOrReplaceInFilesAction {\n\n\tstatic readonly ID = 'workbench.action.replaceInFiles';\n\tstatic readonly LABEL = nls.localize('replaceInFiles', \"Replace in Files\");\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService viewsService: IViewsService) {\n\t\tsuper(id, label, viewsService, /*expandSearchReplaceWidget=*/true);\n\t}\n}\n\nexport class CloseReplaceAction extends Action {\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService private readonly viewsService: IViewsService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<any> {\n\t\tconst searchView = getSearchView(this.viewsService);\n\t\tif (searchView) {\n\t\t\tsearchView.searchAndReplaceWidget.toggleReplace(false);\n\t\t\tsearchView.searchAndReplaceWidget.focus();\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n}\n\n// --- Toggle Search On Type\n\nexport class ToggleSearchOnTypeAction extends Action {\n\n\tstatic readonly ID = 'workbench.action.toggleSearchOnType';\n\tstatic readonly LABEL = nls.localize('toggleTabs', \"Toggle Search on Type\");\n\n\tprivate static readonly searchOnTypeKey = 'search.searchOnType';\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<any> {\n\t\tconst searchOnType = this.configurationService.getValue<boolean>(ToggleSearchOnTypeAction.searchOnTypeKey);\n\t\treturn this.configurationService.updateValue(ToggleSearchOnTypeAction.searchOnTypeKey, !searchOnType);\n\t}\n}\n\nexport function expandAll(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tconst viewer = searchView.getControl();\n\t\tviewer.expandAll();\n\t\tviewer.domFocus();\n\t\tviewer.focusFirst();\n\t}\n}\n\nexport function clearSearchResults(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tsearchView.clearSearchResults();\n\t}\n}\n\nexport function cancelSearch(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tsearchView.cancelSearch();\n\t}\n}\n\nexport function refreshSearch(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tsearchView.triggerQueryChange({ preserveFocus: false });\n\t}\n}\n\nexport function collapseDeepestExpandedLevel(accessor: ServicesAccessor) {\n\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tconst viewer = searchView.getControl();\n\n\t\t/**\n\t\t * one level to collapse so collapse everything. If FolderMatch, check if there are visible grandchildren,\n\t\t * i.e. if Matches are returned by the navigator, and if so, collapse to them, otherwise collapse all levels.\n\t\t */\n\t\tconst navigator = viewer.navigate();\n\t\tlet node = navigator.first();\n\t\tlet collapseFileMatchLevel = false;\n\t\tif (node instanceof FolderMatch) {\n\t\t\twhile (node = navigator.next()) {\n\t\t\t\tif (node instanceof Match) {\n\t\t\t\t\tcollapseFileMatchLevel = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (collapseFileMatchLevel) {\n\t\t\tnode = navigator.first();\n\t\t\tdo {\n\t\t\t\tif (node instanceof FileMatch) {\n\t\t\t\t\tviewer.collapse(node);\n\t\t\t\t}\n\t\t\t} while (node = navigator.next());\n\t\t} else {\n\t\t\tviewer.collapseAll();\n\t\t}\n\n\t\tviewer.domFocus();\n\t\tviewer.focusFirst();\n\t}\n}\n\nexport class FocusNextSearchResultAction extends Action {\n\tstatic readonly ID = 'search.action.focusNextSearchResult';\n\tstatic readonly LABEL = nls.localize('FocusNextSearchResult.label', \"Focus Next Search Result\");\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst input = this.editorService.activeEditor;\n\t\tif (input instanceof SearchEditorInput) {\n\t\t\t// cast as we cannot import SearchEditor as a value b/c cyclic dependency.\n\t\t\treturn (this.editorService.activeEditorPane as SearchEditor).focusNextResult();\n\t\t}\n\n\t\treturn openSearchView(this.viewsService).then(searchView => {\n\t\t\tif (searchView) {\n\t\t\t\tsearchView.selectNextMatch();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class FocusPreviousSearchResultAction extends Action {\n\tstatic readonly ID = 'search.action.focusPreviousSearchResult';\n\tstatic readonly LABEL = nls.localize('FocusPreviousSearchResult.label', \"Focus Previous Search Result\");\n\n\tconstructor(id: string, label: string,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst input = this.editorService.activeEditor;\n\t\tif (input instanceof SearchEditorInput) {\n\t\t\t// cast as we cannot import SearchEditor as a value b/c cyclic dependency.\n\t\t\treturn (this.editorService.activeEditorPane as SearchEditor).focusPreviousResult();\n\t\t}\n\n\t\treturn openSearchView(this.viewsService).then(searchView => {\n\t\t\tif (searchView) {\n\t\t\t\tsearchView.selectPreviousMatch();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport abstract class AbstractSearchAndReplaceAction extends Action {\n\n\t/**\n\t * Returns element to focus after removing the given element\n\t */\n\tgetElementToFocusAfterRemoved(viewer: WorkbenchObjectTree<RenderableMatch>, elementToBeRemoved: RenderableMatch): RenderableMatch {\n\t\tconst elementToFocus = this.getNextElementAfterRemoved(viewer, elementToBeRemoved);\n\t\treturn elementToFocus || this.getPreviousElementAfterRemoved(viewer, elementToBeRemoved);\n\t}\n\n\tgetNextElementAfterRemoved(viewer: WorkbenchObjectTree<RenderableMatch>, element: RenderableMatch): RenderableMatch {\n\t\tconst navigator: ITreeNavigator<any> = viewer.navigate(element);\n\t\tif (element instanceof FolderMatch) {\n\t\t\twhile (!!navigator.next() && !(navigator.current() instanceof FolderMatch)) { }\n\t\t} else if (element instanceof FileMatch) {\n\t\t\twhile (!!navigator.next() && !(navigator.current() instanceof FileMatch)) { }\n\t\t} else {\n\t\t\twhile (navigator.next() && !(navigator.current() instanceof Match)) {\n\t\t\t\tviewer.expand(navigator.current());\n\t\t\t}\n\t\t}\n\t\treturn navigator.current();\n\t}\n\n\tgetPreviousElementAfterRemoved(viewer: WorkbenchObjectTree<RenderableMatch>, element: RenderableMatch): RenderableMatch {\n\t\tconst navigator: ITreeNavigator<any> = viewer.navigate(element);\n\t\tlet previousElement = navigator.previous();\n\n\t\t// Hence take the previous element.\n\t\tconst parent = element.parent();\n\t\tif (parent === previousElement) {\n\t\t\tpreviousElement = navigator.previous();\n\t\t}\n\n\t\tif (parent instanceof FileMatch && parent.parent() === previousElement) {\n\t\t\tpreviousElement = navigator.previous();\n\t\t}\n\n\t\t// If the previous element is a File or Folder, expand it and go to its last child.\n\t\t// Spell out the two cases, would be too easy to create an infinite loop, like by adding another level...\n\t\tif (element instanceof Match && previousElement && previousElement instanceof FolderMatch) {\n\t\t\tnavigator.next();\n\t\t\tviewer.expand(previousElement);\n\t\t\tpreviousElement = navigator.previous();\n\t\t}\n\n\t\tif (element instanceof Match && previousElement && previousElement instanceof FileMatch) {\n\t\t\tnavigator.next();\n\t\t\tviewer.expand(previousElement);\n\t\t\tpreviousElement = navigator.previous();\n\t\t}\n\n\t\treturn previousElement;\n\t}\n}\n\nexport class RemoveAction extends AbstractSearchAndReplaceAction {\n\n\tstatic readonly LABEL = nls.localize('RemoveAction.label', \"Dismiss\");\n\n\tconstructor(\n\t\tprivate viewer: WorkbenchObjectTree<RenderableMatch>,\n\t\tprivate element: RenderableMatch\n\t) {\n\t\tsuper('remove', RemoveAction.LABEL, ThemeIcon.asClassName(searchRemoveIcon));\n\t}\n\n\toverride run(): Promise<any> {\n\t\tconst currentFocusElement = this.viewer.getFocus()[0];\n\t\tconst nextFocusElement = !currentFocusElement || currentFocusElement instanceof SearchResult || elementIsEqualOrParent(currentFocusElement, this.element) ?\n\t\t\tthis.getElementToFocusAfterRemoved(this.viewer, this.element) :\n\t\t\tnull;\n\n\t\tif (nextFocusElement) {\n\t\t\tthis.viewer.reveal(nextFocusElement);\n\t\t\tthis.viewer.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\tthis.viewer.setSelection([nextFocusElement], getSelectionKeyboardEvent());\n\t\t}\n\n\t\tthis.element.parent().remove(<any>this.element);\n\t\tthis.viewer.domFocus();\n\n\t\treturn Promise.resolve();\n\t}\n}\n\nfunction elementIsEqualOrParent(element: RenderableMatch, testParent: RenderableMatch | SearchResult): boolean {\n\tdo {\n\t\tif (element === testParent) {\n\t\t\treturn true;\n\t\t}\n\t} while (!(element.parent() instanceof SearchResult) && (element = <RenderableMatch>element.parent()));\n\n\treturn false;\n}\n\nexport class ReplaceAllAction extends AbstractSearchAndReplaceAction {\n\n\tstatic readonly LABEL = nls.localize('file.replaceAll.label', \"Replace All\");\n\n\tconstructor(\n\t\tprivate viewlet: SearchView,\n\t\tprivate fileMatch: FileMatch,\n\t\t@IKeybindingService keyBindingService: IKeybindingService\n\t) {\n\t\tsuper(Constants.ReplaceAllInFileActionId, appendKeyBindingLabel(ReplaceAllAction.LABEL, keyBindingService.lookupKeybinding(Constants.ReplaceAllInFileActionId), keyBindingService), ThemeIcon.asClassName(searchReplaceAllIcon));\n\t}\n\n\toverride run(): Promise<any> {\n\t\tconst tree = this.viewlet.getControl();\n\t\tconst nextFocusElement = this.getElementToFocusAfterRemoved(tree, this.fileMatch);\n\t\treturn this.fileMatch.parent().replace(this.fileMatch).then(() => {\n\t\t\tif (nextFocusElement) {\n\t\t\t\ttree.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t\ttree.setSelection([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t}\n\n\t\t\ttree.domFocus();\n\t\t\tthis.viewlet.open(this.fileMatch, true);\n\t\t});\n\t}\n}\n\nexport class ReplaceAllInFolderAction extends AbstractSearchAndReplaceAction {\n\n\tstatic readonly LABEL = nls.localize('file.replaceAll.label', \"Replace All\");\n\n\tconstructor(private viewer: WorkbenchObjectTree<RenderableMatch>, private folderMatch: FolderMatch,\n\t\t@IKeybindingService keyBindingService: IKeybindingService\n\t) {\n\t\tsuper(Constants.ReplaceAllInFolderActionId, appendKeyBindingLabel(ReplaceAllInFolderAction.LABEL, keyBindingService.lookupKeybinding(Constants.ReplaceAllInFolderActionId), keyBindingService), ThemeIcon.asClassName(searchReplaceAllIcon));\n\t}\n\n\toverride run(): Promise<any> {\n\t\tconst nextFocusElement = this.getElementToFocusAfterRemoved(this.viewer, this.folderMatch);\n\t\treturn this.folderMatch.replaceAll().then(() => {\n\t\t\tif (nextFocusElement) {\n\t\t\t\tthis.viewer.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t\tthis.viewer.setSelection([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t}\n\t\t\tthis.viewer.domFocus();\n\t\t});\n\t}\n}\n\nexport class ReplaceAction extends AbstractSearchAndReplaceAction {\n\n\tstatic readonly LABEL = nls.localize('match.replace.label', \"Replace\");\n\n\tstatic runQ = Promise.resolve();\n\n\tconstructor(private viewer: WorkbenchObjectTree<RenderableMatch>, private element: Match, private viewlet: SearchView,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t\t@IKeybindingService keyBindingService: IKeybindingService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tsuper(Constants.ReplaceActionId, appendKeyBindingLabel(ReplaceAction.LABEL, keyBindingService.lookupKeybinding(Constants.ReplaceActionId), keyBindingService), ThemeIcon.asClassName(searchReplaceIcon));\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tthis.enabled = false;\n\n\t\tawait this.element.parent().replace(this.element);\n\t\tconst elementToFocus = this.getElementToFocusAfterReplace();\n\t\tif (elementToFocus) {\n\t\t\tthis.viewer.setFocus([elementToFocus], getSelectionKeyboardEvent());\n\t\t\tthis.viewer.setSelection([elementToFocus], getSelectionKeyboardEvent());\n\t\t}\n\n\t\tconst elementToShowReplacePreview = this.getElementToShowReplacePreview(elementToFocus);\n\t\tthis.viewer.domFocus();\n\n\t\tconst useReplacePreview = this.configurationService.getValue<ISearchConfiguration>().search.useReplacePreview;\n\t\tif (!useReplacePreview || !elementToShowReplacePreview || this.hasToOpenFile()) {\n\t\t\tthis.viewlet.open(this.element, true);\n\t\t} else {\n\t\t\tthis.replaceService.openReplacePreview(elementToShowReplacePreview, true);\n\t\t}\n\t}\n\n\tprivate getElementToFocusAfterReplace(): RenderableMatch {\n\t\tconst navigator: ITreeNavigator<RenderableMatch | null> = this.viewer.navigate();\n\t\tlet fileMatched = false;\n\t\tlet elementToFocus: RenderableMatch | null = null;\n\t\tdo {\n\t\t\telementToFocus = navigator.current();\n\t\t\tif (elementToFocus instanceof Match) {\n\t\t\t\tif (elementToFocus.parent().id() === this.element.parent().id()) {\n\t\t\t\t\tfileMatched = true;\n\t\t\t\t\tif (this.element.range().getStartPosition().isBeforeOrEqual(elementToFocus.range().getStartPosition())) {\n\t\t\t\t\t\t// Closest next match in the same file\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (fileMatched) {\n\t\t\t\t\t// First match in the next file (if expanded)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (fileMatched) {\n\t\t\t\tif (this.viewer.isCollapsed(elementToFocus)) {\n\t\t\t\t\t// Next file match (if collapsed)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while (!!navigator.next());\n\t\treturn elementToFocus!;\n\t}\n\n\tprivate getElementToShowReplacePreview(elementToFocus: RenderableMatch): Match | null {\n\t\tif (this.hasSameParent(elementToFocus)) {\n\t\t\treturn <Match>elementToFocus;\n\t\t}\n\t\tconst previousElement = this.getPreviousElementAfterRemoved(this.viewer, this.element);\n\t\tif (this.hasSameParent(previousElement)) {\n\t\t\treturn <Match>previousElement;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate hasSameParent(element: RenderableMatch): boolean {\n\t\treturn element && element instanceof Match && this.uriIdentityService.extUri.isEqual(element.parent().resource, this.element.parent().resource);\n\t}\n\n\tprivate hasToOpenFile(): boolean {\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tconst file = activeEditor?.resource;\n\t\tif (file) {\n\t\t\treturn this.uriIdentityService.extUri.isEqual(file, this.element.parent().resource);\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport const copyPathCommand: ICommandHandler = async (accessor, fileMatch: FileMatch | FolderMatchWithResource | undefined) => {\n\tif (!fileMatch) {\n\t\tconst selection = getSelectedRow(accessor);\n\t\tif (!(selection instanceof FileMatch || selection instanceof FolderMatchWithResource)) {\n\t\t\treturn;\n\t\t}\n\n\t\tfileMatch = selection;\n\t}\n\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst labelService = accessor.get(ILabelService);\n\n\tconst text = labelService.getUriLabel(fileMatch.resource, { noPrefix: true });\n\tawait clipboardService.writeText(text);\n};\n\nfunction matchToString(match: Match, indent = 0): string {\n\tconst getFirstLinePrefix = () => `${match.range().startLineNumber},${match.range().startColumn}`;\n\tconst getOtherLinePrefix = (i: number) => match.range().startLineNumber + i + '';\n\n\tconst fullMatchLines = match.fullPreviewLines();\n\tconst largestPrefixSize = fullMatchLines.reduce((largest, _, i) => {\n\t\tconst thisSize = i === 0 ?\n\t\t\tgetFirstLinePrefix().length :\n\t\t\tgetOtherLinePrefix(i).length;\n\n\t\treturn Math.max(thisSize, largest);\n\t}, 0);\n\n\tconst formattedLines = fullMatchLines\n\t\t.map((line, i) => {\n\t\t\tconst prefix = i === 0 ?\n\t\t\t\tgetFirstLinePrefix() :\n\t\t\t\tgetOtherLinePrefix(i);\n\n\t\t\tconst paddingStr = ' '.repeat(largestPrefixSize - prefix.length);\n\t\t\tconst indentStr = ' '.repeat(indent);\n\t\t\treturn `${indentStr}${prefix}: ${paddingStr}${line}`;\n\t\t});\n\n\treturn formattedLines.join('\\n');\n}\n\nconst lineDelimiter = isWindows ? '\\r\\n' : '\\n';\nfunction fileMatchToString(fileMatch: FileMatch, maxMatches: number, labelService: ILabelService): { text: string, count: number } {\n\tconst matchTextRows = fileMatch.matches()\n\t\t.sort(searchMatchComparer)\n\t\t.slice(0, maxMatches)\n\t\t.map(match => matchToString(match, 2));\n\tconst uriString = labelService.getUriLabel(fileMatch.resource, { noPrefix: true });\n\treturn {\n\t\ttext: `${uriString}${lineDelimiter}${matchTextRows.join(lineDelimiter)}`,\n\t\tcount: matchTextRows.length\n\t};\n}\n\nfunction folderMatchToString(folderMatch: FolderMatchWithResource | FolderMatch, maxMatches: number, labelService: ILabelService): { text: string, count: number } {\n\tconst fileResults: string[] = [];\n\tlet numMatches = 0;\n\n\tconst matches = folderMatch.matches().sort(searchMatchComparer);\n\n\tfor (let i = 0; i < folderMatch.fileCount() && numMatches < maxMatches; i++) {\n\t\tconst fileResult = fileMatchToString(matches[i], maxMatches - numMatches, labelService);\n\t\tnumMatches += fileResult.count;\n\t\tfileResults.push(fileResult.text);\n\t}\n\n\treturn {\n\t\ttext: fileResults.join(lineDelimiter + lineDelimiter),\n\t\tcount: numMatches\n\t};\n}\n\nconst maxClipboardMatches = 1e4;\nexport const copyMatchCommand: ICommandHandler = async (accessor, match: RenderableMatch | undefined) => {\n\tif (!match) {\n\t\tconst selection = getSelectedRow(accessor);\n\t\tif (!selection) {\n\t\t\treturn;\n\t\t}\n\n\t\tmatch = selection;\n\t}\n\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst labelService = accessor.get(ILabelService);\n\n\tlet text: string | undefined;\n\tif (match instanceof Match) {\n\t\ttext = matchToString(match);\n\t} else if (match instanceof FileMatch) {\n\t\ttext = fileMatchToString(match, maxClipboardMatches, labelService).text;\n\t} else if (match instanceof FolderMatch) {\n\t\ttext = folderMatchToString(match, maxClipboardMatches, labelService).text;\n\t}\n\n\tif (text) {\n\t\tawait clipboardService.writeText(text);\n\t}\n};\n\nfunction allFolderMatchesToString(folderMatches: Array<FolderMatchWithResource | FolderMatch>, maxMatches: number, labelService: ILabelService): string {\n\tconst folderResults: string[] = [];\n\tlet numMatches = 0;\n\tfolderMatches = folderMatches.sort(searchMatchComparer);\n\tfor (let i = 0; i < folderMatches.length && numMatches < maxMatches; i++) {\n\t\tconst folderResult = folderMatchToString(folderMatches[i], maxMatches - numMatches, labelService);\n\t\tif (folderResult.count) {\n\t\t\tnumMatches += folderResult.count;\n\t\t\tfolderResults.push(folderResult.text);\n\t\t}\n\t}\n\n\treturn folderResults.join(lineDelimiter + lineDelimiter);\n}\n\nfunction getSelectedRow(accessor: ServicesAccessor): RenderableMatch | undefined | null {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\treturn searchView?.getControl().getSelection()[0];\n}\n\nexport const copyAllCommand: ICommandHandler = async (accessor) => {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst labelService = accessor.get(ILabelService);\n\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tconst root = searchView.searchResult;\n\n\t\tconst text = allFolderMatchesToString(root.folderMatches(), maxClipboardMatches, labelService);\n\t\tawait clipboardService.writeText(text);\n\t}\n};\n\nexport const clearHistoryCommand: ICommandHandler = accessor => {\n\tconst searchHistoryService = accessor.get(ISearchHistoryService);\n\tsearchHistoryService.clearHistory();\n};\n\nexport const focusSearchListCommand: ICommandHandler = accessor => {\n\tconst viewsService = accessor.get(IViewsService);\n\topenSearchView(viewsService).then(searchView => {\n\t\tif (searchView) {\n\t\t\tsearchView.moveFocusToResults();\n\t\t}\n\t});\n};\n"]}