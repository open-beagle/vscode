{"version":3,"sources":["vs/workbench/contrib/search/browser/searchWidget.ts"],"names":[],"mappings":"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","file":"searchWidget.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { Button, IButtonOptions } from 'vs/base/browser/ui/button/button';\nimport { FindInput, IFindInputOptions } from 'vs/base/browser/ui/findinput/findInput';\nimport { ReplaceInput } from 'vs/base/browser/ui/findinput/replaceInput';\nimport { IMessage, InputBox } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Action } from 'vs/base/common/actions';\nimport { Delayer } from 'vs/base/common/async';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { CONTEXT_FIND_WIDGET_NOT_VISIBLE } from 'vs/editor/contrib/find/findModel';\nimport * as nls from 'vs/nls';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingsRegistry, KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { ISearchConfigurationProperties } from 'vs/workbench/services/search/common/search';\nimport { attachFindReplaceInputBoxStyler, attachInputBoxStyler } from 'vs/platform/theme/common/styler';\nimport { IThemeService, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from 'vs/platform/browser/contextScopedHistoryWidget';\nimport { appendKeyBindingLabel, isSearchViewFocused, getSearchView } from 'vs/workbench/contrib/search/browser/searchActions';\nimport * as Constants from 'vs/workbench/contrib/search/common/constants';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport { Checkbox } from 'vs/base/browser/ui/checkbox/checkbox';\nimport { IViewsService } from 'vs/workbench/common/views';\nimport { searchReplaceAllIcon, searchHideReplaceIcon, searchShowContextIcon, searchShowReplaceIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport { ToggleSearchEditorContextLinesCommandId } from 'vs/workbench/contrib/searchEditor/browser/constants';\n\n/** Specified in searchview.css */\nexport const SingleLineInputHeight = 24;\n\nexport interface ISearchWidgetOptions {\n\tvalue?: string;\n\treplaceValue?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tisWholeWords?: boolean;\n\tsearchHistory?: string[];\n\treplaceHistory?: string[];\n\tpreserveCase?: boolean;\n\t_hideReplaceToggle?: boolean; // TODO: Search Editor's replace experience\n\tshowContextToggle?: boolean;\n}\n\nclass ReplaceAllAction extends Action {\n\n\tstatic readonly ID: string = 'search.action.replaceAll';\n\n\tconstructor(private _searchWidget: SearchWidget) {\n\t\tsuper(ReplaceAllAction.ID, '', ThemeIcon.asClassName(searchReplaceAllIcon), false);\n\t}\n\n\tset searchWidget(searchWidget: SearchWidget) {\n\t\tthis._searchWidget = searchWidget;\n\t}\n\n\toverride run(): Promise<any> {\n\t\tif (this._searchWidget) {\n\t\t\treturn this._searchWidget.triggerReplaceAll();\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nconst ctrlKeyMod = (isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\n\nfunction stopPropagationForMultiLineUpwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionStart > 0) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionEnd < textarea.value.length) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nexport class SearchWidget extends Widget {\n\tprivate static readonly INPUT_MAX_HEIGHT = 134;\n\n\tprivate static readonly REPLACE_ALL_DISABLED_LABEL = nls.localize('search.action.replaceAll.disabled.label', \"Replace All (Submit Search to Enable)\");\n\tprivate static readonly REPLACE_ALL_ENABLED_LABEL = (keyBindingService2: IKeybindingService): string => {\n\t\tconst kb = keyBindingService2.lookupKeybinding(ReplaceAllAction.ID);\n\t\treturn appendKeyBindingLabel(nls.localize('search.action.replaceAll.enabled.label', \"Replace All\"), kb, keyBindingService2);\n\t};\n\n\tdomNode!: HTMLElement;\n\n\tsearchInput!: FindInput;\n\tsearchInputFocusTracker!: dom.IFocusTracker;\n\tprivate searchInputBoxFocused: IContextKey<boolean>;\n\n\tprivate replaceContainer!: HTMLElement;\n\treplaceInput!: ReplaceInput;\n\treplaceInputFocusTracker!: dom.IFocusTracker;\n\tprivate replaceInputBoxFocused: IContextKey<boolean>;\n\tprivate toggleReplaceButton!: Button;\n\tprivate replaceAllAction!: ReplaceAllAction;\n\tprivate replaceActive: IContextKey<boolean>;\n\tprivate replaceActionBar!: ActionBar;\n\tprivate _replaceHistoryDelayer: Delayer<void>;\n\tprivate ignoreGlobalFindBufferOnNextFocus = false;\n\tprivate previousGlobalFindBufferValue: string | null = null;\n\n\tprivate _onSearchSubmit = this._register(new Emitter<{ triggeredOnType: boolean, delay: number }>());\n\treadonly onSearchSubmit: Event<{ triggeredOnType: boolean, delay: number }> = this._onSearchSubmit.event;\n\n\tprivate _onSearchCancel = this._register(new Emitter<{ focus: boolean }>());\n\treadonly onSearchCancel: Event<{ focus: boolean }> = this._onSearchCancel.event;\n\n\tprivate _onReplaceToggled = this._register(new Emitter<void>());\n\treadonly onReplaceToggled: Event<void> = this._onReplaceToggled.event;\n\n\tprivate _onReplaceStateChange = this._register(new Emitter<boolean>());\n\treadonly onReplaceStateChange: Event<boolean> = this._onReplaceStateChange.event;\n\n\tprivate _onPreserveCaseChange = this._register(new Emitter<boolean>());\n\treadonly onPreserveCaseChange: Event<boolean> = this._onPreserveCaseChange.event;\n\n\tprivate _onReplaceValueChanged = this._register(new Emitter<void>());\n\treadonly onReplaceValueChanged: Event<void> = this._onReplaceValueChanged.event;\n\n\tprivate _onReplaceAll = this._register(new Emitter<void>());\n\treadonly onReplaceAll: Event<void> = this._onReplaceAll.event;\n\n\tprivate _onBlur = this._register(new Emitter<void>());\n\treadonly onBlur: Event<void> = this._onBlur.event;\n\n\tprivate _onDidHeightChange = this._register(new Emitter<void>());\n\treadonly onDidHeightChange: Event<void> = this._onDidHeightChange.event;\n\n\tprivate readonly _onDidToggleContext = new Emitter<void>();\n\treadonly onDidToggleContext: Event<void> = this._onDidToggleContext.event;\n\n\tprivate showContextCheckbox!: Checkbox;\n\tpublic contextLinesInput!: InputBox;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly keyBindingService: IKeybindingService,\n\t\t@IClipboardService private readonly clipboardServce: IClipboardService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper();\n\t\tthis.replaceActive = Constants.ReplaceActiveKey.bindTo(this.contextKeyService);\n\t\tthis.searchInputBoxFocused = Constants.SearchInputBoxFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.replaceInputBoxFocused = Constants.ReplaceInputBoxFocusedKey.bindTo(this.contextKeyService);\n\n\t\tthis._replaceHistoryDelayer = new Delayer<void>(500);\n\n\t\tthis.render(container, options);\n\n\t\tthis.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t}\n\t\t});\n\t\tthis.accessibilityService.onDidChangeScreenReaderOptimized(() => this.updateAccessibilitySupport());\n\t\tthis.updateAccessibilitySupport();\n\t}\n\n\tfocus(select: boolean = true, focusReplace: boolean = false, suppressGlobalSearchBuffer = false): void {\n\t\tthis.ignoreGlobalFindBufferOnNextFocus = suppressGlobalSearchBuffer;\n\n\t\tif (focusReplace && this.isReplaceShown()) {\n\t\t\tthis.replaceInput.focus();\n\t\t\tif (select) {\n\t\t\t\tthis.replaceInput.select();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.searchInput.focus();\n\t\t\tif (select) {\n\t\t\t\tthis.searchInput.select();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetWidth(width: number) {\n\t\tthis.searchInput.inputBox.layout();\n\t\tthis.replaceInput.width = width - 28;\n\t\tthis.replaceInput.inputBox.layout();\n\t}\n\n\tclear() {\n\t\tthis.searchInput.clear();\n\t\tthis.replaceInput.setValue('');\n\t\tthis.setReplaceAllActionState(false);\n\t}\n\n\tisReplaceShown(): boolean {\n\t\treturn !this.replaceContainer.classList.contains('disabled');\n\t}\n\n\tisReplaceActive(): boolean {\n\t\treturn !!this.replaceActive.get();\n\t}\n\n\tgetReplaceValue(): string {\n\t\treturn this.replaceInput.getValue();\n\t}\n\n\ttoggleReplace(show?: boolean): void {\n\t\tif (show === undefined || show !== this.isReplaceShown()) {\n\t\t\tthis.onToggleReplaceButton();\n\t\t}\n\t}\n\n\tgetSearchHistory(): string[] {\n\t\treturn this.searchInput.inputBox.getHistory();\n\t}\n\n\tgetReplaceHistory(): string[] {\n\t\treturn this.replaceInput.inputBox.getHistory();\n\t}\n\n\tclearHistory(): void {\n\t\tthis.searchInput.inputBox.clearHistory();\n\t}\n\n\tshowNextSearchTerm() {\n\t\tthis.searchInput.inputBox.showNextValue();\n\t}\n\n\tshowPreviousSearchTerm() {\n\t\tthis.searchInput.inputBox.showPreviousValue();\n\t}\n\n\tshowNextReplaceTerm() {\n\t\tthis.replaceInput.inputBox.showNextValue();\n\t}\n\n\tshowPreviousReplaceTerm() {\n\t\tthis.replaceInput.inputBox.showPreviousValue();\n\t}\n\n\tsearchInputHasFocus(): boolean {\n\t\treturn !!this.searchInputBoxFocused.get();\n\t}\n\n\treplaceInputHasFocus(): boolean {\n\t\treturn this.replaceInput.inputBox.hasFocus();\n\t}\n\n\tfocusReplaceAllAction(): void {\n\t\tthis.replaceActionBar.focus(true);\n\t}\n\n\tfocusRegexAction(): void {\n\t\tthis.searchInput.focusOnRegex();\n\t}\n\n\tprivate render(container: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.domNode = dom.append(container, dom.$('.search-widget'));\n\t\tthis.domNode.style.position = 'relative';\n\n\t\tif (!options._hideReplaceToggle) {\n\t\t\tthis.renderToggleReplaceButton(this.domNode);\n\t\t}\n\n\t\tthis.renderSearchInput(this.domNode, options);\n\t\tthis.renderReplaceInput(this.domNode, options);\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tthis.searchInput.setFocusInputOnOptionClick(!this.accessibilityService.isScreenReaderOptimized());\n\t}\n\n\tprivate renderToggleReplaceButton(parent: HTMLElement): void {\n\t\tconst opts: IButtonOptions = {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined\n\t\t};\n\t\tthis.toggleReplaceButton = this._register(new Button(parent, opts));\n\t\tthis.toggleReplaceButton.element.setAttribute('aria-expanded', 'false');\n\t\tthis.toggleReplaceButton.element.classList.add('toggle-replace-button');\n\t\tthis.toggleReplaceButton.icon = searchHideReplaceIcon;\n\t\t// TODO@joao need to dispose this listener eventually\n\t\tthis.toggleReplaceButton.onDidClick(() => this.onToggleReplaceButton());\n\t\tthis.toggleReplaceButton.element.title = nls.localize('search.replace.toggle.button.title', \"Toggle Replace\");\n\t}\n\n\tprivate renderSearchInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tconst inputOptions: IFindInputOptions = {\n\t\t\tlabel: nls.localize('label.Search', 'Search: Type Search Term and press Enter to search'),\n\t\t\tvalidation: (value: string) => this.validateSearchInput(value),\n\t\t\tplaceholder: nls.localize('search.placeHolder', \"Search\"),\n\t\t\tappendCaseSensitiveLabel: appendKeyBindingLabel('', this.keyBindingService.lookupKeybinding(Constants.ToggleCaseSensitiveCommandId), this.keyBindingService),\n\t\t\tappendWholeWordsLabel: appendKeyBindingLabel('', this.keyBindingService.lookupKeybinding(Constants.ToggleWholeWordCommandId), this.keyBindingService),\n\t\t\tappendRegexLabel: appendKeyBindingLabel('', this.keyBindingService.lookupKeybinding(Constants.ToggleRegexCommandId), this.keyBindingService),\n\t\t\thistory: options.searchHistory,\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT\n\t\t};\n\n\t\tconst searchInputContainer = dom.append(parent, dom.$('.search-container.input-box'));\n\t\tthis.searchInput = this._register(new ContextScopedFindInput(searchInputContainer, this.contextViewService, inputOptions, this.contextKeyService, true));\n\t\tthis._register(attachFindReplaceInputBoxStyler(this.searchInput, this.themeService));\n\t\tthis.searchInput.onKeyDown((keyboardEvent: IKeyboardEvent) => this.onSearchInputKeyDown(keyboardEvent));\n\t\tthis.searchInput.setValue(options.value || '');\n\t\tthis.searchInput.setRegex(!!options.isRegex);\n\t\tthis.searchInput.setCaseSensitive(!!options.isCaseSensitive);\n\t\tthis.searchInput.setWholeWords(!!options.isWholeWords);\n\t\tthis._register(this.searchInput.onCaseSensitiveKeyDown((keyboardEvent: IKeyboardEvent) => this.onCaseSensitiveKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.onRegexKeyDown((keyboardEvent: IKeyboardEvent) => this.onRegexKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.inputBox.onDidChange(() => this.onSearchInputChanged()));\n\t\tthis._register(this.searchInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis._register(this.onReplaceValueChanged(() => {\n\t\t\tthis._replaceHistoryDelayer.trigger(() => this.replaceInput.inputBox.addToHistory());\n\t\t}));\n\n\t\tthis.searchInputFocusTracker = this._register(dom.trackFocus(this.searchInput.inputBox.inputElement));\n\t\tthis._register(this.searchInputFocusTracker.onDidFocus(async () => {\n\t\t\tthis.searchInputBoxFocused.set(true);\n\n\t\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\t\tif (!this.ignoreGlobalFindBufferOnNextFocus && useGlobalFindBuffer) {\n\t\t\t\tconst globalBufferText = await this.clipboardServce.readFindText();\n\t\t\t\tif (globalBufferText && this.previousGlobalFindBufferValue !== globalBufferText) {\n\t\t\t\t\tthis.searchInput.inputBox.addToHistory();\n\t\t\t\t\tthis.searchInput.setValue(globalBufferText);\n\t\t\t\t\tthis.searchInput.select();\n\t\t\t\t}\n\n\t\t\t\tthis.previousGlobalFindBufferValue = globalBufferText;\n\t\t\t}\n\n\t\t\tthis.ignoreGlobalFindBufferOnNextFocus = false;\n\t\t}));\n\t\tthis._register(this.searchInputFocusTracker.onDidBlur(() => this.searchInputBoxFocused.set(false)));\n\n\n\t\tthis.showContextCheckbox = new Checkbox({\n\t\t\tisChecked: false,\n\t\t\ttitle: appendKeyBindingLabel(nls.localize('showContext', \"Toggle Context Lines\"), this.keyBindingService.lookupKeybinding(ToggleSearchEditorContextLinesCommandId), this.keyBindingService),\n\t\t\ticon: searchShowContextIcon\n\t\t});\n\t\tthis._register(this.showContextCheckbox.onChange(() => this.onContextLinesChanged()));\n\n\t\tif (options.showContextToggle) {\n\t\t\tthis.contextLinesInput = new InputBox(searchInputContainer, this.contextViewService, { type: 'number' });\n\t\t\tthis.contextLinesInput.element.classList.add('context-lines-input');\n\t\t\tthis.contextLinesInput.value = '' + (this.configurationService.getValue<ISearchConfigurationProperties>('search').searchEditor.defaultNumberOfContextLines ?? 1);\n\t\t\tthis._register(this.contextLinesInput.onDidChange(() => this.onContextLinesChanged()));\n\t\t\tthis._register(attachInputBoxStyler(this.contextLinesInput, this.themeService));\n\t\t\tdom.append(searchInputContainer, this.showContextCheckbox.domNode);\n\t\t}\n\t}\n\n\tprivate onContextLinesChanged() {\n\t\tthis.domNode.classList.toggle('show-context', this.showContextCheckbox.checked);\n\t\tthis._onDidToggleContext.fire();\n\n\t\tif (this.contextLinesInput.value.includes('-')) {\n\t\t\tthis.contextLinesInput.value = '0';\n\t\t}\n\n\t\tthis._onDidToggleContext.fire();\n\t}\n\n\tpublic setContextLines(lines: number) {\n\t\tif (!this.contextLinesInput) { return; }\n\t\tif (lines === 0) {\n\t\t\tthis.showContextCheckbox.checked = false;\n\t\t} else {\n\t\t\tthis.showContextCheckbox.checked = true;\n\t\t\tthis.contextLinesInput.value = '' + lines;\n\t\t}\n\t\tthis.domNode.classList.toggle('show-context', this.showContextCheckbox.checked);\n\t}\n\n\tprivate renderReplaceInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.replaceContainer = dom.append(parent, dom.$('.replace-container.disabled'));\n\t\tconst replaceBox = dom.append(this.replaceContainer, dom.$('.replace-input'));\n\n\t\tthis.replaceInput = this._register(new ContextScopedReplaceInput(replaceBox, this.contextViewService, {\n\t\t\tlabel: nls.localize('label.Replace', 'Replace: Type replace term and press Enter to preview'),\n\t\t\tplaceholder: nls.localize('search.replace.placeHolder', \"Replace\"),\n\t\t\tappendPreserveCaseLabel: appendKeyBindingLabel('', this.keyBindingService.lookupKeybinding(Constants.TogglePreserveCaseId), this.keyBindingService),\n\t\t\thistory: options.replaceHistory,\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT\n\t\t}, this.contextKeyService, true));\n\n\t\tthis._register(this.replaceInput.onDidOptionChange(viaKeyboard => {\n\t\t\tif (!viaKeyboard) {\n\t\t\t\tthis._onPreserveCaseChange.fire(this.replaceInput.getPreserveCase());\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(attachFindReplaceInputBoxStyler(this.replaceInput, this.themeService));\n\t\tthis.replaceInput.onKeyDown((keyboardEvent) => this.onReplaceInputKeyDown(keyboardEvent));\n\t\tthis.replaceInput.setValue(options.replaceValue || '');\n\t\tthis._register(this.replaceInput.inputBox.onDidChange(() => this._onReplaceValueChanged.fire()));\n\t\tthis._register(this.replaceInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis.replaceAllAction = new ReplaceAllAction(this);\n\t\tthis.replaceAllAction.label = SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\tthis.replaceActionBar = this._register(new ActionBar(this.replaceContainer));\n\t\tthis.replaceActionBar.push([this.replaceAllAction], { icon: true, label: false });\n\t\tthis.onkeydown(this.replaceActionBar.domNode, (keyboardEvent) => this.onReplaceActionbarKeyDown(keyboardEvent));\n\n\t\tthis.replaceInputFocusTracker = this._register(dom.trackFocus(this.replaceInput.inputBox.inputElement));\n\t\tthis._register(this.replaceInputFocusTracker.onDidFocus(() => this.replaceInputBoxFocused.set(true)));\n\t\tthis._register(this.replaceInputFocusTracker.onDidBlur(() => this.replaceInputBoxFocused.set(false)));\n\t\tthis._register(this.replaceInput.onPreserveCaseKeyDown((keyboardEvent: IKeyboardEvent) => this.onPreserveCaseKeyDown(keyboardEvent)));\n\t}\n\n\ttriggerReplaceAll(): Promise<any> {\n\t\tthis._onReplaceAll.fire();\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate onToggleReplaceButton(): void {\n\t\tthis.replaceContainer.classList.toggle('disabled');\n\t\tif (this.isReplaceShown()) {\n\t\t\tthis.toggleReplaceButton.element.classList.remove(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t\tthis.toggleReplaceButton.element.classList.add(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t} else {\n\t\t\tthis.toggleReplaceButton.element.classList.remove(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t\tthis.toggleReplaceButton.element.classList.add(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t}\n\t\tthis.toggleReplaceButton.element.setAttribute('aria-expanded', this.isReplaceShown() ? 'true' : 'false');\n\t\tthis.updateReplaceActiveState();\n\t\tthis._onReplaceToggled.fire();\n\t}\n\n\tsetValue(value: string) {\n\t\tthis.searchInput.setValue(value);\n\t}\n\n\tsetReplaceAllActionState(enabled: boolean): void {\n\t\tif (this.replaceAllAction.enabled !== enabled) {\n\t\t\tthis.replaceAllAction.enabled = enabled;\n\t\t\tthis.replaceAllAction.label = enabled ? SearchWidget.REPLACE_ALL_ENABLED_LABEL(this.keyBindingService) : SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\t\tthis.updateReplaceActiveState();\n\t\t}\n\t}\n\n\tprivate updateReplaceActiveState(): void {\n\t\tconst currentState = this.isReplaceActive();\n\t\tconst newState = this.isReplaceShown() && this.replaceAllAction.enabled;\n\t\tif (currentState !== newState) {\n\t\t\tthis.replaceActive.set(newState);\n\t\t\tthis._onReplaceStateChange.fire(newState);\n\t\t\tthis.replaceInput.inputBox.layout();\n\t\t}\n\t}\n\n\tprivate validateSearchInput(value: string): IMessage | null {\n\t\tif (value.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!this.searchInput.getRegex()) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tnew RegExp(value, 'u');\n\t\t} catch (e) {\n\t\t\treturn { content: e.message };\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate onSearchInputChanged(): void {\n\t\tthis.searchInput.clearMessage();\n\t\tthis.setReplaceAllActionState(false);\n\n\t\tif (this.searchConfiguration.searchOnType) {\n\t\t\tif (this.searchInput.getRegex()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst regex = new RegExp(this.searchInput.getValue(), 'ug');\n\t\t\t\t\tconst matchienessHeuristic = `\n\t\t\t\t\t\t\t\t~!@#$%^&*()_+\n\t\t\t\t\t\t\t\t\\`1234567890-=\n\t\t\t\t\t\t\t\tqwertyuiop[]\\\\\n\t\t\t\t\t\t\t\tQWERTYUIOP{}|\n\t\t\t\t\t\t\t\tasdfghjkl;'\n\t\t\t\t\t\t\t\tASDFGHJKL:\"\n\t\t\t\t\t\t\t\tzxcvbnm,./\n\t\t\t\t\t\t\t\tZXCVBNM<>? `.match(regex)?.length ?? 0;\n\n\t\t\t\t\tconst delayMultiplier =\n\t\t\t\t\t\tmatchienessHeuristic < 50 ? 1 :\n\t\t\t\t\t\t\tmatchienessHeuristic < 100 ? 5 : // expressions like `.` or `\\w`\n\t\t\t\t\t\t\t\t10; // only things matching empty string\n\n\t\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod * delayMultiplier);\n\t\t\t\t} catch {\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSearchInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.searchInput.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.searchInput.onSearchSubmit();\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Escape)) {\n\t\t\tthis._onSearchCancel.fire({ focus: true });\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchInput.focusOnCaseSensitive();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.searchInput.getValue(), this.searchInput.domNode.querySelector('textarea'));\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.searchInput.getValue(), this.searchInput.domNode.querySelector('textarea'));\n\t\t}\n\t}\n\n\tprivate onCaseSensitiveKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onRegexKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput.focusOnPreserve();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onPreserveCaseKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceActive()) {\n\t\t\t\tthis.focusReplaceAllAction();\n\t\t\t} else {\n\t\t\t\tthis._onBlur.fire();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate onReplaceInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.replaceInput.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tthis.searchInput.focusOnCaseSensitive();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.searchInput.focus();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.replaceInput.getValue(), this.replaceInput.domNode.querySelector('textarea'));\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.replaceInput.getValue(), this.replaceInput.domNode.querySelector('textarea'));\n\t\t}\n\t}\n\n\tprivate onReplaceActionbarKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate async submitSearch(triggeredOnType = false, delay: number = 0): Promise<void> {\n\t\tthis.searchInput.validate();\n\t\tif (!this.searchInput.inputBox.isInputValid()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.searchInput.getValue();\n\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\tif (value && useGlobalFindBuffer) {\n\t\t\tawait this.clipboardServce.writeFindText(value);\n\t\t}\n\t\tthis._onSearchSubmit.fire({ triggeredOnType, delay });\n\t}\n\n\tgetContextLines() {\n\t\treturn this.showContextCheckbox.checked ? +this.contextLinesInput.value : 0;\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tconst current = +this.contextLinesInput.value;\n\t\tconst modified = current + (increase ? 1 : -1);\n\t\tthis.showContextCheckbox.checked = modified !== 0;\n\t\tthis.contextLinesInput.value = '' + modified;\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.showContextCheckbox.checked = !this.showContextCheckbox.checked;\n\t\tthis.onContextLinesChanged();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setReplaceAllActionState(false);\n\t\tsuper.dispose();\n\t}\n\n\tprivate get searchConfiguration(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n}\n\nexport function registerContributions() {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\tid: ReplaceAllAction.ID,\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\twhen: ContextKeyExpr.and(Constants.SearchViewVisibleKey, Constants.ReplaceActiveKey, CONTEXT_FIND_WIDGET_NOT_VISIBLE),\n\t\tprimary: KeyMod.Alt | KeyMod.CtrlCmd | KeyCode.Enter,\n\t\thandler: accessor => {\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tif (isSearchViewFocused(viewsService)) {\n\t\t\t\tconst searchView = getSearchView(viewsService);\n\t\t\t\tif (searchView) {\n\t\t\t\t\tnew ReplaceAllAction(searchView.searchAndReplaceWidget).run();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n"]}