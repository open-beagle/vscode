{"version":3,"file":"snippetsService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/snippets/test/browser/snippetsService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { SnippetCompletionProvider } from 'vs/workbench/contrib/snippets/browser/snippetCompletionProvider';\nimport { Position } from 'vs/editor/common/core/position';\nimport { ModesRegistry } from 'vs/editor/common/modes/modesRegistry';\nimport { ModeServiceImpl } from 'vs/editor/common/services/modeServiceImpl';\nimport { createTextModel } from 'vs/editor/test/common/editorTestUtils';\nimport { ISnippetsService } from 'vs/workbench/contrib/snippets/browser/snippets.contribution';\nimport { Snippet, SnippetSource } from 'vs/workbench/contrib/snippets/browser/snippetsFile';\nimport { LanguageConfigurationRegistry } from 'vs/editor/common/modes/languageConfigurationRegistry';\nimport { CompletionContext, CompletionTriggerKind } from 'vs/editor/common/modes';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\n\nclass SimpleSnippetService implements ISnippetsService {\n\tdeclare readonly _serviceBrand: undefined;\n\tconstructor(readonly snippets: Snippet[]) { }\n\tgetSnippets() {\n\t\treturn Promise.resolve(this.getSnippetsSync());\n\t}\n\tgetSnippetsSync(): Snippet[] {\n\t\treturn this.snippets;\n\t}\n\tgetSnippetFiles(): any {\n\t\tthrow new Error();\n\t}\n\tisEnabled(): boolean {\n\t\tthrow new Error();\n\t}\n\tupdateEnablement(): void {\n\t\tthrow new Error();\n\t}\n}\n\nsuite('SnippetsService', function () {\n\tconst disposableStore: DisposableStore = new DisposableStore();\n\tconst context: CompletionContext = { triggerKind: CompletionTriggerKind.Invoke };\n\n\tsuiteSetup(function () {\n\t\tModesRegistry.registerLanguage({\n\t\t\tid: 'fooLang',\n\t\t\textensions: ['.fooLang',]\n\t\t});\n\t});\n\n\tsuiteTeardown(function () {\n\t\tdisposableStore.dispose();\n\t});\n\n\tlet modeService: ModeServiceImpl;\n\tlet snippetService: ISnippetsService;\n\n\tsetup(function () {\n\t\tmodeService = new ModeServiceImpl();\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t'barCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t), new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bazzTest',\n\t\t\t'bazz',\n\t\t\t'',\n\t\t\t'bazzCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\t});\n\n\ttest('snippet completions - simple', function () {\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\t\tconst model = createTextModel('', undefined, modeService.getLanguageIdentifier('fooLang'));\n\n\t\treturn provider.provideCompletionItems(model, new Position(1, 1), context)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t});\n\t});\n\n\ttest('snippet completions - with prefix', function () {\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\t\tconst model = createTextModel('bar', undefined, modeService.getLanguageIdentifier('fooLang'));\n\n\t\treturn provider.provideCompletionItems(model, new Position(1, 4), context)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tname: 'bar',\n\t\t\t\ttype: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 1);\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 'barCodeSnippet');\n\t\t});\n\t});\n\n\ttest('snippet completions - with different prefixes', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t's1',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t), new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'name',\n\t\t\t'bar-bar',\n\t\t\t'',\n\t\t\t's2',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\t\tconst model = createTextModel('bar-bar', undefined, modeService.getLanguageIdentifier('fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 3), context)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tname: 'bar',\n\t\t\t\ttype: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 1);\n\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\tname: 'bar-bar',\n\t\t\t\ttype: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\tassert.strictEqual((result.suggestions[1].range as any).insert.startColumn, 1);\n\t\t});\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 5), context)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tname: 'bar-bar',\n\t\t\t\ttype: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's2');\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 1);\n\t\t});\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 6), context)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tname: 'bar',\n\t\t\t\ttype: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 5);\n\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\tname: 'bar-bar',\n\t\t\t\ttype: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\tassert.strictEqual((result.suggestions[1].range as any).insert.startColumn, 1);\n\t\t});\n\t});\n\n\ttest('Cannot use \"<?php\" as user snippet prefix anymore, #26275', function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'<?php',\n\t\t\t'',\n\t\t\t'insert me',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('\\t<?php', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\treturn provider.provideCompletionItems(model, new Position(1, 7), context)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tmodel.dispose();\n\n\t\t\tmodel = createTextModel('\\t<?', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\t\treturn provider.provideCompletionItems(model, new Position(1, 4), context)!;\n\t\t}).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 2);\n\t\t\tmodel.dispose();\n\n\t\t\tmodel = createTextModel('a<?', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\t\treturn provider.provideCompletionItems(model, new Position(1, 4), context)!;\n\t\t}).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as any).insert.startColumn, 2);\n\t\t\tmodel.dispose();\n\t\t});\n\t});\n\n\ttest('No user snippets in suggestions, when inside the code, #30508', function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'foo',\n\t\t\t'',\n\t\t\t'<foo>$0</foo>',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('<head>\\n\\t\\n>/head>', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\treturn provider.provideCompletionItems(model, new Position(1, 1), context)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\treturn provider.provideCompletionItems(model, new Position(2, 2), context)!;\n\t\t}).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t});\n\n\ttest('SnippetSuggest - ensure extension snippets come last ', function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'second',\n\t\t\t'second',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.Extension\n\t\t), new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'first',\n\t\t\t'first',\n\t\t\t'',\n\t\t\t'first',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\treturn provider.provideCompletionItems(model, new Position(1, 1), context)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\tlet [first, second] = result.suggestions;\n\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\tname: 'first',\n\t\t\t\ttype: 'first'\n\t\t\t});\n\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\tname: 'second',\n\t\t\t\ttype: 'second'\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Dash in snippets prefix broken #53945', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'p-a',\n\t\t\t'p-a',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('p-', undefined, modeService.getLanguageIdentifier('fooLang'));\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 2), context)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t});\n\n\ttest('No snippets suggestion on long lines beyond character 100 #58807', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 158), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t});\n\n\ttest('Type colon will trigger snippet #60746', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel(':', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 2), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\t});\n\n\ttest('substring of prefix can\\'t trigger snippet #60737', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'mytemplate',\n\t\t\t'mytemplate',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('template', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 9), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\tname: 'mytemplate',\n\t\t\ttype: 'mytemplate'\n\t\t});\n\t});\n\n\ttest('No snippets suggestion beyond character 100 if not at end of line #60247', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b text_after_b', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 158), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t});\n\n\ttest('issue #61296: VS code freezes when editing CSS file with emoji', async function () {\n\t\tdisposableStore.add(LanguageConfigurationRegistry.register(modeService.getLanguageIdentifier('fooLang')!, {\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|(::?[\\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\\w-?]+%?|[@#!.])/g\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'-a-bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('.🐷-a-b', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 8), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t});\n\n\ttest('No snippets shown when triggering completions at whitespace on line that already has text #62335', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('a ', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t});\n\n\ttest('Snippet prefix with special chars and numbers does not work #62906', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'<<',\n\t\t\t'',\n\t\t\t'<= #dly\"',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t), new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'11',\n\t\t\t'',\n\t\t\t'eleven',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel(' <', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.startColumn, 2);\n\n\t\tmodel = createTextModel('1', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 2), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.startColumn, 1);\n\t});\n\n\ttest('Snippet replace range', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'notWordTest',\n\t\t\t'not word',\n\t\t\t'',\n\t\t\t'not word snippet',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('not wordFoo bar', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as any).replace.endColumn, 9);\n\n\t\tmodel = createTextModel('not woFoo bar', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as any).replace.endColumn, 3);\n\n\t\tmodel = createTextModel('not word', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 1), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.endColumn, 1);\n\t\tassert.strictEqual((first.range as any).replace.endColumn, 9);\n\t});\n\n\ttest('Snippet replace-range incorrect #108894', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'eng',\n\t\t\t'eng',\n\t\t\t'',\n\t\t\t'<span></span>',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('filler e KEEP ng filler', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 9), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.endColumn, 9);\n\t\tassert.strictEqual((first.range as any).replace.endColumn, 9);\n\t});\n\n\ttest('Snippet will replace auto-closing pair if specified in prefix', async function () {\n\t\tdisposableStore.add(LanguageConfigurationRegistry.register(modeService.getLanguageIdentifier('fooLang')!, {\n\t\t\tbrackets: [\n\t\t\t\t['{', '}'],\n\t\t\t\t['[', ']'],\n\t\t\t\t['(', ')'],\n\t\t\t]\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\t['fooLang'],\n\t\t\t'PSCustomObject',\n\t\t\t'[PSCustomObject]',\n\t\t\t'',\n\t\t\t'[PSCustomObject] @{ Key = Value }',\n\t\t\t'',\n\t\t\tSnippetSource.User\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(modeService, snippetService);\n\n\t\tlet model = createTextModel('[psc]', undefined, modeService.getLanguageIdentifier('fooLang'));\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 5), context)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as any).insert.endColumn, 5);\n\t\t// This is 6 because it should eat the `]` at the end of the text even if cursor is before it\n\t\tassert.strictEqual((first.range as any).replace.endColumn, 6);\n\t});\n});\n"]}