{"version":3,"sources":["vs/workbench/contrib/markers/browser/markersView.ts"],"names":[],"mappings":"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","file":"markersView.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/markers';\n\nimport { URI } from 'vs/base/common/uri';\nimport * as dom from 'vs/base/browser/dom';\nimport { IAction, Action, Separator } from 'vs/base/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport Constants from 'vs/workbench/contrib/markers/browser/constants';\nimport { Marker, ResourceMarkers, RelatedInformation, MarkerChangesEvent, MarkersModel, compareMarkersByUri, MarkerElement } from 'vs/workbench/contrib/markers/browser/markersModel';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { MarkersFilterActionViewItem, MarkersFilters, IMarkersFiltersChangeEvent } from 'vs/workbench/contrib/markers/browser/markersViewActions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport Messages from 'vs/workbench/contrib/markers/browser/messages';\nimport { RangeHighlightDecorations } from 'vs/workbench/browser/codeeditor';\nimport { IThemeService, registerThemingParticipant, IColorTheme, ICssStyleCollector } from 'vs/platform/theme/common/themeService';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { localize } from 'vs/nls';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { ITreeElement, ITreeNode, ITreeContextMenuEvent, ITreeRenderer } from 'vs/base/browser/ui/tree/tree';\nimport { Relay, Event, Emitter } from 'vs/base/common/event';\nimport { WorkbenchObjectTree, IListService, IWorkbenchObjectTreeOptions } from 'vs/platform/list/browser/listService';\nimport { FilterOptions } from 'vs/workbench/contrib/markers/browser/markersFilterOptions';\nimport { IExpression } from 'vs/base/common/glob';\nimport { deepClone } from 'vs/base/common/objects';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { FilterData, Filter, VirtualDelegate, ResourceMarkersRenderer, MarkerRenderer, RelatedInformationRenderer, MarkersTreeAccessibilityProvider, MarkersViewModel, ResourceDragAndDrop } from 'vs/workbench/contrib/markers/browser/markersTreeViewer';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { ActionBar, IActionViewItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { StandardKeyboardEvent, IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { domEvent } from 'vs/base/browser/event';\nimport { ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IMarker, IMarkerService, MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { withUndefinedAsNull } from 'vs/base/common/types';\nimport { MementoObject, Memento } from 'vs/workbench/common/memento';\nimport { IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { editorLightBulbForeground, editorLightBulbAutoFixForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { ViewPane, IViewPaneOptions } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { groupBy } from 'vs/base/common/arrays';\nimport { ResourceMap } from 'vs/base/common/map';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IMarkersView } from 'vs/workbench/contrib/markers/browser/markers';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\n\nfunction createResourceMarkersIterator(resourceMarkers: ResourceMarkers): Iterable<ITreeElement<MarkerElement>> {\n\treturn Iterable.map(resourceMarkers.markers, m => {\n\t\tconst relatedInformationIt = Iterable.from(m.relatedInformation);\n\t\tconst children = Iterable.map(relatedInformationIt, r => ({ element: r }));\n\n\t\treturn { element: m, children };\n\t});\n}\n\nexport class MarkersView extends ViewPane implements IMarkersView {\n\n\tprivate lastSelectedRelativeTop: number = 0;\n\tprivate currentActiveResource: URI | null = null;\n\n\tprivate readonly rangeHighlightDecorations: RangeHighlightDecorations;\n\tprivate readonly markersModel: MarkersModel;\n\tprivate readonly filter: Filter;\n\tprivate readonly onVisibleDisposables = this._register(new DisposableStore());\n\n\tprivate tree: MarkersTree | undefined;\n\tprivate filterActionBar: ActionBar | undefined;\n\tprivate messageBoxContainer: HTMLElement | undefined;\n\tprivate ariaLabelElement: HTMLElement | undefined;\n\treadonly filters: MarkersFilters;\n\n\tprivate readonly panelState: MementoObject;\n\n\tprivate _onDidChangeFilterStats = this._register(new Emitter<{ total: number, filtered: number }>());\n\treadonly onDidChangeFilterStats: Event<{ total: number, filtered: number }> = this._onDidChangeFilterStats.event;\n\tprivate cachedFilterStats: { total: number; filtered: number; } | undefined = undefined;\n\n\tprivate currentResourceGotAddedToMarkersData: boolean = false;\n\tprivate readonly markersViewModel: MarkersViewModel;\n\tprivate readonly smallLayoutContextKey: IContextKey<boolean>;\n\tprivate get smallLayout(): boolean { return !!this.smallLayoutContextKey.get(); }\n\tprivate set smallLayout(smallLayout: boolean) { this.smallLayoutContextKey.set(smallLayout); }\n\n\treadonly onDidChangeVisibility = this.onDidChangeBodyVisibility;\n\n\tprivate readonly _onDidFocusFilter: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidFocusFilter: Event<void> = this._onDidFocusFilter.event;\n\n\tprivate readonly _onDidClearFilterText: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidClearFilterText: Event<void> = this._onDidClearFilterText.event;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IMarkerService private readonly markerService: IMarkerService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\t\tthis.smallLayoutContextKey = Constants.MarkersViewSmallLayoutContextKey.bindTo(this.contextKeyService);\n\t\tthis.panelState = new Memento(Constants.MARKERS_VIEW_STORAGE_ID, storageService).getMemento(StorageScope.WORKSPACE, StorageTarget.USER);\n\n\t\tthis.markersModel = this._register(instantiationService.createInstance(MarkersModel));\n\t\tthis.markersViewModel = this._register(instantiationService.createInstance(MarkersViewModel, this.panelState['multiline']));\n\t\tthis._register(this.onDidChangeVisibility(visible => this.onDidChangeMarkersViewVisibility(visible)));\n\n\t\tthis.setCurrentActiveEditor();\n\n\t\tthis.filter = new Filter(FilterOptions.EMPTY(uriIdentityService));\n\t\tthis.rangeHighlightDecorations = this._register(this.instantiationService.createInstance(RangeHighlightDecorations));\n\n\t\tthis.filters = this._register(new MarkersFilters({\n\t\t\tfilterText: this.panelState['filter'] || '',\n\t\t\tfilterHistory: this.panelState['filterHistory'] || [],\n\t\t\tshowErrors: this.panelState['showErrors'] !== false,\n\t\t\tshowWarnings: this.panelState['showWarnings'] !== false,\n\t\t\tshowInfos: this.panelState['showInfos'] !== false,\n\t\t\texcludedFiles: !!this.panelState['useFilesExclude'],\n\t\t\tactiveFile: !!this.panelState['activeFile'],\n\t\t\tlayout: new dom.Dimension(0, 0)\n\t\t}));\n\t}\n\n\tpublic override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\n\t\tparent.classList.add('markers-panel');\n\n\t\tconst container = dom.append(parent, dom.$('.markers-panel-container'));\n\n\t\tthis.createFilterActionBar(container);\n\t\tthis.createArialLabelElement(container);\n\t\tthis.createMessageBox(container);\n\t\tthis.createTree(container);\n\n\t\tthis.updateFilter();\n\n\t\tthis.filterActionBar!.push(new Action(`workbench.actions.treeView.${this.id}.filter`));\n\t\tthis.renderContent();\n\t}\n\n\tpublic getTitle(): string {\n\t\treturn Messages.MARKERS_PANEL_TITLE_PROBLEMS;\n\t}\n\n\tpublic override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tconst wasSmallLayout = this.smallLayout;\n\t\tthis.smallLayout = width < 600 && height > 100;\n\t\tif (this.smallLayout !== wasSmallLayout) {\n\t\t\tif (this.filterActionBar) {\n\t\t\t\tthis.filterActionBar.getContainer().classList.toggle('hide', !this.smallLayout);\n\t\t\t}\n\t\t}\n\t\tconst contentHeight = this.smallLayout ? height - 44 : height;\n\t\tif (this.tree) {\n\t\t\tthis.tree.layout(contentHeight, width);\n\t\t}\n\t\tif (this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.style.height = `${contentHeight}px`;\n\t\t}\n\t\tthis.filters.layout = new dom.Dimension(this.smallLayout ? width : width - 200, height);\n\t}\n\n\tpublic override focus(): void {\n\t\tif (this.tree && this.tree.getHTMLElement() === document.activeElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.hasNoProblems() && this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.focus();\n\t\t} else if (this.tree) {\n\t\t\tthis.tree.domFocus();\n\t\t\tthis.setTreeSelection();\n\t\t}\n\t}\n\n\tpublic focusFilter(): void {\n\t\tthis._onDidFocusFilter.fire();\n\t}\n\n\tpublic clearFilterText(): void {\n\t\tthis._onDidClearFilterText.fire();\n\t}\n\n\tpublic showQuickFixes(marker: Marker): void {\n\t\tconst viewModel = this.markersViewModel.getViewModel(marker);\n\t\tif (viewModel) {\n\t\t\tviewModel.quickFixAction.run();\n\t\t}\n\t}\n\n\tpublic openFileAtElement(element: any, preserveFocus: boolean, sideByside: boolean, pinned: boolean): boolean {\n\t\tconst { resource, selection, event, data } = element instanceof Marker ? { resource: element.resource, selection: element.range, event: 'problems.selectDiagnostic', data: this.getTelemetryData(element.marker) } :\n\t\t\telement instanceof RelatedInformation ? { resource: element.raw.resource, selection: element.raw, event: 'problems.selectRelatedInformation', data: this.getTelemetryData(element.marker) } : { resource: null, selection: null, event: null, data: null };\n\t\tif (resource && selection && event) {\n\t\t\t/* __GDPR__\n\t\t\t\"problems.selectDiagnostic\" : {\n\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t\t*/\n\t\t\t/* __GDPR__\n\t\t\t\t\"problems.selectRelatedInformation\" : {\n\t\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryService.publicLog(event, data);\n\t\t\tthis.editorService.openEditor({\n\t\t\t\tresource,\n\t\t\t\toptions: {\n\t\t\t\t\tselection,\n\t\t\t\t\tpreserveFocus,\n\t\t\t\t\tpinned,\n\t\t\t\t\trevealIfVisible: true\n\t\t\t\t},\n\t\t\t}, sideByside ? SIDE_GROUP : ACTIVE_GROUP).then(editor => {\n\t\t\t\tif (editor && preserveFocus) {\n\t\t\t\t\tthis.rangeHighlightDecorations.highlightRange({ resource, range: selection }, <ICodeEditor>editor.getControl());\n\t\t\t\t} else {\n\t\t\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate refreshPanel(markerOrChange?: Marker | MarkerChangesEvent): void {\n\t\tif (this.isVisible() && this.tree) {\n\t\t\tconst hasSelection = this.tree.getSelection().length > 0;\n\t\t\tthis.cachedFilterStats = undefined;\n\n\t\t\tif (markerOrChange) {\n\t\t\t\tif (markerOrChange instanceof Marker) {\n\t\t\t\t\tthis.tree.rerender(markerOrChange);\n\t\t\t\t} else {\n\t\t\t\t\tif (markerOrChange.added.size || markerOrChange.removed.size) {\n\t\t\t\t\t\t// Reset complete tree\n\t\t\t\t\t\tthis.resetTree();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Update resource\n\t\t\t\t\t\tfor (const updated of markerOrChange.updated) {\n\t\t\t\t\t\t\tthis.tree.setChildren(updated, createResourceMarkersIterator(updated));\n\t\t\t\t\t\t\tthis.tree.rerender(updated);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Reset complete tree\n\t\t\t\tthis.resetTree();\n\t\t\t}\n\n\t\t\tconst { total, filtered } = this.getFilterStats();\n\t\t\tthis.tree.toggleVisibility(total === 0 || filtered === 0);\n\t\t\tthis.renderMessage();\n\t\t\tthis._onDidChangeFilterStats.fire(this.getFilterStats());\n\n\t\t\tif (hasSelection) {\n\t\t\t\tthis.setTreeSelection();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setTreeSelection(): void {\n\t\tif (this.tree && this.tree.isVisible() && this.tree.getSelection().length === 0) {\n\t\t\tconst firstVisibleElement = this.tree.firstVisibleElement;\n\t\t\tconst marker = firstVisibleElement ?\n\t\t\t\tfirstVisibleElement instanceof ResourceMarkers ? firstVisibleElement.markers[0] :\n\t\t\t\t\tfirstVisibleElement instanceof Marker ? firstVisibleElement : undefined\n\t\t\t\t: undefined;\n\t\t\tif (marker) {\n\t\t\t\tthis.tree.setFocus([marker]);\n\t\t\t\tthis.tree.setSelection([marker]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onDidChangeViewState(marker?: Marker): void {\n\t\tthis.refreshPanel(marker);\n\t}\n\n\tprivate resetTree(): void {\n\t\tif (!this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tlet resourceMarkers: ResourceMarkers[] = [];\n\t\tif (this.filters.activeFile) {\n\t\t\tif (this.currentActiveResource) {\n\t\t\t\tconst activeResourceMarkers = this.markersModel.getResourceMarkers(this.currentActiveResource);\n\t\t\t\tif (activeResourceMarkers) {\n\t\t\t\t\tresourceMarkers = [activeResourceMarkers];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresourceMarkers = this.markersModel.resourceMarkers;\n\t\t}\n\t\tthis.tree.setChildren(null, Iterable.map(resourceMarkers, m => ({ element: m, children: createResourceMarkersIterator(m) })));\n\t}\n\n\tprivate updateFilter() {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.filter.options = new FilterOptions(this.filters.filterText, this.getFilesExcludeExpressions(), this.filters.showWarnings, this.filters.showErrors, this.filters.showInfos, this.uriIdentityService);\n\t\tif (this.tree) {\n\t\t\tthis.tree.refilter();\n\t\t}\n\t\tthis._onDidChangeFilterStats.fire(this.getFilterStats());\n\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tif (this.tree) {\n\t\t\tthis.tree.toggleVisibility(total === 0 || filtered === 0);\n\t\t}\n\t\tthis.renderMessage();\n\t}\n\n\tprivate getFilesExcludeExpressions(): { root: URI, expression: IExpression }[] | IExpression {\n\t\tif (!this.filters.excludedFiles) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst workspaceFolders = this.workspaceContextService.getWorkspace().folders;\n\t\treturn workspaceFolders.length\n\t\t\t? workspaceFolders.map(workspaceFolder => ({ root: workspaceFolder.uri, expression: this.getFilesExclude(workspaceFolder.uri) }))\n\t\t\t: this.getFilesExclude();\n\t}\n\n\tprivate getFilesExclude(resource?: URI): IExpression {\n\t\treturn deepClone(this.configurationService.getValue('files.exclude', { resource })) || {};\n\t}\n\n\tprivate createFilterActionBar(parent: HTMLElement): void {\n\t\tthis.filterActionBar = this._register(new ActionBar(parent, { actionViewItemProvider: action => this.getActionViewItem(action) }));\n\t\tthis.filterActionBar.getContainer().classList.add('markers-panel-filter-container');\n\t\tthis.filterActionBar.getContainer().classList.toggle('hide', !this.smallLayout);\n\t}\n\n\tprivate createMessageBox(parent: HTMLElement): void {\n\t\tthis.messageBoxContainer = dom.append(parent, dom.$('.message-box-container'));\n\t\tthis.messageBoxContainer.setAttribute('aria-labelledby', 'markers-panel-arialabel');\n\t}\n\n\tprivate createArialLabelElement(parent: HTMLElement): void {\n\t\tthis.ariaLabelElement = dom.append(parent, dom.$(''));\n\t\tthis.ariaLabelElement.setAttribute('id', 'markers-panel-arialabel');\n\t}\n\n\tprivate createTree(parent: HTMLElement): void {\n\t\tconst onDidChangeRenderNodeCount = new Relay<ITreeNode<any, any>>();\n\n\t\tconst treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, this));\n\n\t\tconst virtualDelegate = new VirtualDelegate(this.markersViewModel);\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(ResourceMarkersRenderer, treeLabels, onDidChangeRenderNodeCount.event),\n\t\t\tthis.instantiationService.createInstance(MarkerRenderer, this.markersViewModel),\n\t\t\tthis.instantiationService.createInstance(RelatedInformationRenderer)\n\t\t];\n\t\tconst accessibilityProvider = this.instantiationService.createInstance(MarkersTreeAccessibilityProvider);\n\n\t\tconst identityProvider = {\n\t\t\tgetId(element: MarkerElement) {\n\t\t\t\treturn element.id;\n\t\t\t}\n\t\t};\n\n\t\tthis.tree = this._register(this.instantiationService.createInstance(MarkersTree,\n\t\t\t'MarkersView',\n\t\t\tdom.append(parent, dom.$('.tree-container.show-file-icons')),\n\t\t\tvirtualDelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\tfilter: this.filter,\n\t\t\t\taccessibilityProvider,\n\t\t\t\tidentityProvider,\n\t\t\t\tdnd: new ResourceDragAndDrop(this.instantiationService),\n\t\t\t\texpandOnlyOnTwistieClick: (e: MarkerElement) => e instanceof Marker && e.relatedInformation.length > 0,\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: this.getBackgroundColor()\n\t\t\t\t},\n\t\t\t\tselectionNavigation: true\n\t\t\t},\n\t\t));\n\n\t\tonDidChangeRenderNodeCount.input = this.tree.onDidChangeRenderNodeCount;\n\n\t\tconst markerFocusContextKey = Constants.MarkerFocusContextKey.bindTo(this.tree.contextKeyService);\n\t\tconst relatedInformationFocusContextKey = Constants.RelatedInformationFocusContextKey.bindTo(this.tree.contextKeyService);\n\t\tthis._register(this.tree.onDidChangeFocus(focus => {\n\t\t\tmarkerFocusContextKey.set(focus.elements.some(e => e instanceof Marker));\n\t\t\trelatedInformationFocusContextKey.set(focus.elements.some(e => e instanceof RelatedInformation));\n\t\t}));\n\n\t\tthis._register(Event.debounce(this.tree.onDidOpen, (last, event) => event, 75, true)(options => {\n\t\t\tthis.openFileAtElement(options.element, !!options.editorOptions.preserveFocus, options.sideBySide, !!options.editorOptions.pinned);\n\t\t}));\n\t\tthis._register(this.tree.onDidChangeCollapseState(({ node }) => {\n\t\t\tconst { element } = node;\n\t\t\tif (element instanceof RelatedInformation && !node.collapsed) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\"problems.expandRelatedInformation\" : {\n\t\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tthis.telemetryService.publicLog('problems.expandRelatedInformation', this.getTelemetryData(element.marker));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onContextMenu(this.onContextMenu, this));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (this.filters.excludedFiles && e.affectsConfiguration('files.exclude')) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t}));\n\n\t\t// move focus to input, whenever a key is pressed in the panel container\n\t\tthis._register(domEvent(parent, 'keydown')(e => {\n\t\t\tif (this.keybindingService.mightProducePrintableCharacter(new StandardKeyboardEvent(e))) {\n\t\t\t\tthis.focusFilter();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any<any>(this.tree.onDidChangeSelection, this.tree.onDidChangeFocus)(() => {\n\t\t\tconst elements = [...this.tree!.getSelection(), ...this.tree!.getFocus()];\n\t\t\tfor (const element of elements) {\n\t\t\t\tif (element instanceof Marker) {\n\t\t\t\t\tconst viewModel = this.markersViewModel.getViewModel(element);\n\t\t\t\t\tif (viewModel) {\n\t\t\t\t\t\tviewModel.showLightBulb();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidChangeSelection(() => this.onSelected()));\n\t}\n\n\tcollapseAll(): void {\n\t\tif (this.tree) {\n\t\t\tthis.tree.collapseAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.getHTMLElement().focus();\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tsetMultiline(multiline: boolean): void {\n\t\tthis.markersViewModel.multiline = multiline;\n\t}\n\n\tprivate onDidChangeMarkersViewVisibility(visible: boolean): void {\n\t\tthis.onVisibleDisposables.clear();\n\t\tif (visible) {\n\t\t\tfor (const disposable of this.reInitialize()) {\n\t\t\t\tthis.onVisibleDisposables.add(disposable);\n\t\t\t}\n\t\t\tthis.refreshPanel();\n\t\t}\n\t}\n\n\tprivate reInitialize(): IDisposable[] {\n\t\tconst disposables = [];\n\n\t\t// Markers Model\n\t\tconst readMarkers = (resource?: URI) => this.markerService.read({ resource, severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info });\n\t\tthis.markersModel.setResourceMarkers(groupBy(readMarkers(), compareMarkersByUri).map(group => [group[0].resource, group]));\n\t\tdisposables.push(Event.debounce<readonly URI[], ResourceMap<URI>>(this.markerService.onMarkerChanged, (resourcesMap, resources) => {\n\t\t\tresourcesMap = resourcesMap || new ResourceMap<URI>();\n\t\t\tresources.forEach(resource => resourcesMap!.set(resource, resource));\n\t\t\treturn resourcesMap;\n\t\t}, 64)(resourcesMap => {\n\t\t\tthis.markersModel.setResourceMarkers([...resourcesMap.values()].map(resource => [resource, readMarkers(resource)]));\n\t\t}));\n\t\tdisposables.push(Event.any<MarkerChangesEvent | void>(this.markersModel.onDidChange, this.editorService.onDidActiveEditorChange)(changes => {\n\t\t\tif (changes) {\n\t\t\t\tthis.onDidChangeModel(changes);\n\t\t\t} else {\n\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(toDisposable(() => this.markersModel.reset()));\n\n\t\t// Markers View Model\n\t\tthis.markersModel.resourceMarkers.forEach(resourceMarker => resourceMarker.markers.forEach(marker => this.markersViewModel.add(marker)));\n\t\tdisposables.push(this.markersViewModel.onDidChange(marker => this.onDidChangeViewState(marker)));\n\t\tdisposables.push(toDisposable(() => this.markersModel.resourceMarkers.forEach(resourceMarker => this.markersViewModel.remove(resourceMarker.resource))));\n\n\t\t// Markers Filters\n\t\tdisposables.push(this.filters.onDidChange((event: IMarkersFiltersChangeEvent) => {\n\t\t\tthis.reportFilteringUsed();\n\t\t\tif (event.activeFile) {\n\t\t\t\tthis.refreshPanel();\n\t\t\t} else if (event.filterText || event.excludedFiles || event.showWarnings || event.showErrors || event.showInfos) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t}));\n\t\tdisposables.push(toDisposable(() => { this.cachedFilterStats = undefined; }));\n\n\t\tdisposables.push(toDisposable(() => this.rangeHighlightDecorations.removeHighlightRange()));\n\n\t\treturn disposables;\n\t}\n\n\tprivate onDidChangeModel(change: MarkerChangesEvent): void {\n\t\tconst resourceMarkers = [...change.added, ...change.removed, ...change.updated];\n\t\tconst resources: URI[] = [];\n\t\tfor (const { resource } of resourceMarkers) {\n\t\t\tthis.markersViewModel.remove(resource);\n\t\t\tconst resourceMarkers = this.markersModel.getResourceMarkers(resource);\n\t\t\tif (resourceMarkers) {\n\t\t\t\tfor (const marker of resourceMarkers.markers) {\n\t\t\t\t\tthis.markersViewModel.add(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t\tresources.push(resource);\n\t\t}\n\t\tthis.currentResourceGotAddedToMarkersData = this.currentResourceGotAddedToMarkersData || this.isCurrentResourceGotAddedToMarkersData(resources);\n\t\tthis.refreshPanel(change);\n\t\tthis.updateRangeHighlights();\n\t\tif (this.currentResourceGotAddedToMarkersData) {\n\t\t\tthis.autoReveal();\n\t\t\tthis.currentResourceGotAddedToMarkersData = false;\n\t\t}\n\t}\n\n\tprivate isCurrentResourceGotAddedToMarkersData(changedResources: URI[]) {\n\t\tconst currentlyActiveResource = this.currentActiveResource;\n\t\tif (!currentlyActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resourceForCurrentActiveResource = this.getResourceForCurrentActiveResource();\n\t\tif (resourceForCurrentActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\treturn changedResources.some(r => r.toString() === currentlyActiveResource.toString());\n\t}\n\n\tprivate onActiveEditorChanged(): void {\n\t\tthis.setCurrentActiveEditor();\n\t\tif (this.filters.activeFile) {\n\t\t\tthis.refreshPanel();\n\t\t}\n\t\tthis.autoReveal();\n\t}\n\n\tprivate setCurrentActiveEditor(): void {\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tthis.currentActiveResource = activeEditor ? withUndefinedAsNull(EditorResourceAccessor.getOriginalUri(activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY })) : null;\n\t}\n\n\tprivate onSelected(): void {\n\t\tif (this.tree) {\n\t\t\tlet selection = this.tree.getSelection();\n\t\t\tif (selection && selection.length > 0) {\n\t\t\t\tthis.lastSelectedRelativeTop = this.tree!.getRelativeTop(selection[0]) || 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate hasNoProblems(): boolean {\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\treturn total === 0 || filtered === 0;\n\t}\n\n\tprivate renderContent(): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.resetTree();\n\t\tif (this.tree) {\n\t\t\tthis.tree.toggleVisibility(this.hasNoProblems());\n\t\t}\n\t\tthis.renderMessage();\n\t}\n\n\tprivate renderMessage(): void {\n\t\tif (!this.messageBoxContainer || !this.ariaLabelElement) {\n\t\t\treturn;\n\t\t}\n\t\tdom.clearNode(this.messageBoxContainer);\n\t\tconst { total, filtered } = this.getFilterStats();\n\n\t\tif (filtered === 0) {\n\t\t\tthis.messageBoxContainer.style.display = 'block';\n\t\t\tthis.messageBoxContainer.setAttribute('tabIndex', '0');\n\t\t\tif (this.filters.activeFile) {\n\t\t\t\tthis.renderFilterMessageForActiveFile(this.messageBoxContainer);\n\t\t\t} else {\n\t\t\t\tif (total > 0) {\n\t\t\t\t\tthis.renderFilteredByFilterMessage(this.messageBoxContainer);\n\t\t\t\t} else {\n\t\t\t\t\tthis.renderNoProblemsMessage(this.messageBoxContainer);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.messageBoxContainer.style.display = 'none';\n\t\t\tif (filtered === total) {\n\t\t\t\tthis.setAriaLabel(localize('No problems filtered', \"Showing {0} problems\", total));\n\t\t\t} else {\n\t\t\t\tthis.setAriaLabel(localize('problems filtered', \"Showing {0} of {1} problems\", filtered, total));\n\t\t\t}\n\t\t\tthis.messageBoxContainer.removeAttribute('tabIndex');\n\t\t}\n\t}\n\n\tprivate renderFilterMessageForActiveFile(container: HTMLElement): void {\n\t\tif (this.currentActiveResource && this.markersModel.getResourceMarkers(this.currentActiveResource)) {\n\t\t\tthis.renderFilteredByFilterMessage(container);\n\t\t} else {\n\t\t\tthis.renderNoProblemsMessageForActiveFile(container);\n\t\t}\n\t}\n\n\tprivate renderFilteredByFilterMessage(container: HTMLElement) {\n\t\tconst span1 = dom.append(container, dom.$('span'));\n\t\tspan1.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS;\n\t\tconst link = dom.append(container, dom.$('a.messageAction'));\n\t\tlink.textContent = localize('clearFilter', \"Clear Filters\");\n\t\tlink.setAttribute('tabIndex', '0');\n\t\tconst span2 = dom.append(container, dom.$('span'));\n\t\tspan2.textContent = '.';\n\t\tdom.addStandardDisposableListener(link, dom.EventType.CLICK, () => this.clearFilters());\n\t\tdom.addStandardDisposableListener(link, dom.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\tif (e.equals(KeyCode.Enter) || e.equals(KeyCode.Space)) {\n\t\t\t\tthis.clearFilters();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS);\n\t}\n\n\tprivate renderNoProblemsMessageForActiveFile(container: HTMLElement) {\n\t\tconst span = dom.append(container, dom.$('span'));\n\t\tspan.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT;\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT);\n\t}\n\n\tprivate renderNoProblemsMessage(container: HTMLElement) {\n\t\tconst span = dom.append(container, dom.$('span'));\n\t\tspan.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT;\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT);\n\t}\n\n\tprivate setAriaLabel(label: string): void {\n\t\tif (this.tree) {\n\t\t\tthis.tree.ariaLabel = label;\n\t\t}\n\t\tthis.ariaLabelElement!.setAttribute('aria-label', label);\n\t}\n\n\tprivate clearFilters(): void {\n\t\tthis.filters.filterText = '';\n\t\tthis.filters.excludedFiles = false;\n\t\tthis.filters.showErrors = true;\n\t\tthis.filters.showWarnings = true;\n\t\tthis.filters.showInfos = true;\n\t}\n\n\tprivate autoReveal(focus: boolean = false): void {\n\t\t// No need to auto reveal if active file filter is on\n\t\tif (this.filters.activeFile || !this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tlet autoReveal = this.configurationService.getValue<boolean>('problems.autoReveal');\n\t\tif (typeof autoReveal === 'boolean' && autoReveal) {\n\t\t\tlet currentActiveResource = this.getResourceForCurrentActiveResource();\n\t\t\tif (currentActiveResource) {\n\t\t\t\tif (this.tree.hasElement(currentActiveResource)) {\n\t\t\t\t\tif (!this.tree.isCollapsed(currentActiveResource) && this.hasSelectedMarkerFor(currentActiveResource)) {\n\t\t\t\t\t\tthis.tree.reveal(this.tree.getSelection()[0], this.lastSelectedRelativeTop);\n\t\t\t\t\t\tif (focus) {\n\t\t\t\t\t\t\tthis.tree.setFocus(this.tree.getSelection());\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.tree.expand(currentActiveResource);\n\t\t\t\t\t\tthis.tree.reveal(currentActiveResource, 0);\n\n\t\t\t\t\t\tif (focus) {\n\t\t\t\t\t\t\tthis.tree.setFocus([currentActiveResource]);\n\t\t\t\t\t\t\tthis.tree.setSelection([currentActiveResource]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (focus) {\n\t\t\t\tthis.tree.setSelection([]);\n\t\t\t\tthis.tree.focusFirst();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getResourceForCurrentActiveResource(): ResourceMarkers | null {\n\t\treturn this.currentActiveResource ? this.markersModel.getResourceMarkers(this.currentActiveResource) : null;\n\t}\n\n\tprivate hasSelectedMarkerFor(resource: ResourceMarkers): boolean {\n\t\tif (this.tree) {\n\t\t\tlet selectedElement = this.tree.getSelection();\n\t\t\tif (selectedElement && selectedElement.length > 0) {\n\t\t\t\tif (selectedElement[0] instanceof Marker) {\n\t\t\t\t\tif (resource.has((<Marker>selectedElement[0]).marker.resource)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate updateRangeHighlights() {\n\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\tif (this.tree && this.tree.getHTMLElement() === document.activeElement) {\n\t\t\tthis.highlightCurrentSelectedMarkerRange();\n\t\t}\n\t}\n\n\tprivate highlightCurrentSelectedMarkerRange() {\n\t\tconst selections = this.tree ? this.tree.getSelection() : [];\n\n\t\tif (selections.length !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selection = selections[0];\n\n\t\tif (!(selection instanceof Marker)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rangeHighlightDecorations.highlightRange(selection);\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<MarkerElement | null>): void {\n\t\tconst element = e.element;\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor!,\n\t\t\tgetActions: () => this.getMenuActions(element),\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree!.domFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getMenuActions(element: MarkerElement): IAction[] {\n\t\tconst result: IAction[] = [];\n\n\t\tif (element instanceof Marker) {\n\t\t\tconst viewModel = this.markersViewModel.getViewModel(element);\n\t\t\tif (viewModel) {\n\t\t\t\tconst quickFixActions = viewModel.quickFixAction.quickFixes;\n\t\t\t\tif (quickFixActions.length) {\n\t\t\t\t\tresult.push(...quickFixActions);\n\t\t\t\t\tresult.push(new Separator());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst menu = this.menuService.createMenu(MenuId.ProblemsPanelContext, this.tree!.contextKeyService);\n\t\tcreateAndFillInContextMenuActions(menu, undefined, result);\n\t\tmenu.dispose();\n\t\treturn result;\n\t}\n\n\tpublic getFocusElement(): MarkerElement | undefined {\n\t\treturn this.tree?.getFocus()[0] || undefined;\n\t}\n\n\tpublic override getActionViewItem(action: IAction): IActionViewItem | undefined {\n\t\tif (action.id === `workbench.actions.treeView.${this.id}.filter`) {\n\t\t\treturn this.instantiationService.createInstance(MarkersFilterActionViewItem, action, this);\n\t\t}\n\t\treturn super.getActionViewItem(action);\n\t}\n\n\tgetFilterStats(): { total: number; filtered: number; } {\n\t\tif (!this.cachedFilterStats) {\n\t\t\tthis.cachedFilterStats = this.computeFilterStats();\n\t\t}\n\n\t\treturn this.cachedFilterStats;\n\t}\n\n\tprivate computeFilterStats(): { total: number; filtered: number; } {\n\t\tlet filtered = 0;\n\t\tif (this.tree) {\n\t\t\tconst root = this.tree.getNode();\n\n\t\t\tfor (const resourceMarkerNode of root.children) {\n\t\t\t\tfor (const markerNode of resourceMarkerNode.children) {\n\t\t\t\t\tif (resourceMarkerNode.visible && markerNode.visible) {\n\t\t\t\t\t\tfiltered++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { total: this.markersModel.total, filtered };\n\t}\n\n\tprivate getTelemetryData({ source, code }: IMarker): any {\n\t\treturn { source, code };\n\t}\n\n\tprivate reportFilteringUsed(): void {\n\t\tconst data = {\n\t\t\terrors: this.filters.showErrors,\n\t\t\twarnings: this.filters.showWarnings,\n\t\t\tinfos: this.filters.showInfos,\n\t\t\tactiveFile: this.filters.activeFile,\n\t\t\texcludedFiles: this.filters.excludedFiles,\n\t\t};\n\t\t/* __GDPR__\n\t\t\t\"problems.filter\" : {\n\t\t\t\t\"errors\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"warnings\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"infos\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"activeFile\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"excludedFiles\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryService.publicLog('problems.filter', data);\n\t}\n\n\toverride saveState(): void {\n\t\tthis.panelState['filter'] = this.filters.filterText;\n\t\tthis.panelState['filterHistory'] = this.filters.filterHistory;\n\t\tthis.panelState['showErrors'] = this.filters.showErrors;\n\t\tthis.panelState['showWarnings'] = this.filters.showWarnings;\n\t\tthis.panelState['showInfos'] = this.filters.showInfos;\n\t\tthis.panelState['useFilesExclude'] = this.filters.excludedFiles;\n\t\tthis.panelState['activeFile'] = this.filters.activeFile;\n\t\tthis.panelState['multiline'] = this.markersViewModel.multiline;\n\n\t\tsuper.saveState();\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t}\n\n}\n\nclass MarkersTree extends WorkbenchObjectTree<MarkerElement, FilterData> {\n\n\tconstructor(\n\t\tuser: string,\n\t\treadonly container: HTMLElement,\n\t\tdelegate: IListVirtualDelegate<MarkerElement>,\n\t\trenderers: ITreeRenderer<MarkerElement, FilterData, any>[],\n\t\toptions: IWorkbenchObjectTreeOptions<MarkerElement, FilterData>,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper(user, container, delegate, renderers, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService);\n\t}\n\n\toverride layout(height: number, width: number): void {\n\t\tthis.container.style.height = `${height}px`;\n\t\tsuper.layout(height, width);\n\t}\n\n\ttoggleVisibility(hide: boolean): void {\n\t\tthis.container.classList.toggle('hidden', hide);\n\t}\n\n\tisVisible(): boolean {\n\t\treturn !this.container.classList.contains('hidden');\n\t}\n\n}\n\nregisterThemingParticipant((theme: IColorTheme, collector: ICssStyleCollector) => {\n\n\t// Lightbulb Icon\n\tconst editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n\tif (editorLightBulbForegroundColor) {\n\t\tcollector.addRule(`\n\t\t.monaco-workbench .markers-panel-container ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t}`);\n\t}\n\n\t// Lightbulb Auto Fix Icon\n\tconst editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n\tif (editorLightBulbAutoFixForegroundColor) {\n\t\tcollector.addRule(`\n\t\t.monaco-workbench .markers-panel-container ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t}`);\n\t}\n\n});\n"]}