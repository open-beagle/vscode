{"version":3,"sources":["vs/workbench/contrib/searchEditor/browser/searchEditor.ts"],"names":[],"mappings":"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","file":"searchEditor.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { Delayer } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { URI } from 'vs/base/common/uri';\nimport 'vs/css!./media/searchEditor';\nimport { CodeEditorWidget } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { ICodeEditorViewState } from 'vs/editor/common/editorCommon';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfigurationService';\nimport { ReferencesController } from 'vs/editor/contrib/gotoSymbol/peek/referencesController';\nimport { localize } from 'vs/nls';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IEditorProgressService, LongRunningOperation } from 'vs/platform/progress/common/progress';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { inputBorder, registerColor, searchEditorFindMatch, searchEditorFindMatchBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { attachInputBoxStyler, attachLinkStyler } from 'vs/platform/theme/common/styler';\nimport { IThemeService, registerThemingParticipant, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { BaseTextEditor } from 'vs/workbench/browser/parts/editor/textEditor';\nimport { EditorOptions, IEditorOpenContext } from 'vs/workbench/common/editor';\nimport { ExcludePatternInputWidget, IncludePatternInputWidget } from 'vs/workbench/contrib/search/browser/patternInputWidget';\nimport { SearchWidget } from 'vs/workbench/contrib/search/browser/searchWidget';\nimport { InputBoxFocusedKey } from 'vs/workbench/contrib/search/common/constants';\nimport { ITextQueryBuilderOptions, QueryBuilder } from 'vs/workbench/contrib/search/common/queryBuilder';\nimport { getOutOfWorkspaceEditorResources } from 'vs/workbench/contrib/search/common/search';\nimport { SearchModel, SearchResult } from 'vs/workbench/contrib/search/common/searchModel';\nimport { InSearchEditor, SearchEditorFindMatchClass, SearchEditorID } from 'vs/workbench/contrib/searchEditor/browser/constants';\nimport type { SearchConfiguration, SearchEditorInput } from 'vs/workbench/contrib/searchEditor/browser/searchEditorInput';\nimport { serializeSearchResultForEditor } from 'vs/workbench/contrib/searchEditor/browser/searchEditorSerialization';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IPatternInfo, ISearchConfigurationProperties, ITextQuery, SearchSortOrder, TextSearchCompleteMessageType } from 'vs/workbench/services/search/common/search';\nimport { searchDetailsIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { parseLinkedText } from 'vs/base/common/linkedText';\nimport { Link } from 'vs/platform/opener/browser/link';\nimport { MessageType } from 'vs/base/browser/ui/inputbox/inputBox';\n\nconst RESULT_LINE_REGEX = /^(\\s+)(\\d+)(:| )(\\s+)(.*)$/;\nconst FILE_LINE_REGEX = /^(\\S.*):$/;\n\ntype SearchEditorViewState = ICodeEditorViewState & { focused: 'input' | 'editor' };\n\nexport class SearchEditor extends BaseTextEditor {\n\tstatic readonly ID: string = SearchEditorID;\n\n\tstatic readonly SEARCH_EDITOR_VIEW_STATE_PREFERENCE_KEY = 'searchEditorViewState';\n\n\tprivate queryEditorWidget!: SearchWidget;\n\tprivate searchResultEditor!: CodeEditorWidget;\n\tprivate queryEditorContainer!: HTMLElement;\n\tprivate dimension?: DOM.Dimension;\n\tprivate inputPatternIncludes!: IncludePatternInputWidget;\n\tprivate inputPatternExcludes!: ExcludePatternInputWidget;\n\tprivate includesExcludesContainer!: HTMLElement;\n\tprivate toggleQueryDetailsButton!: HTMLElement;\n\tprivate messageBox!: HTMLElement;\n\n\tprivate runSearchDelayer = new Delayer(0);\n\tprivate pauseSearching: boolean = false;\n\tprivate showingIncludesExcludes: boolean = false;\n\tprivate inSearchEditorContextKey: IContextKey<boolean>;\n\tprivate inputFocusContextKey: IContextKey<boolean>;\n\tprivate searchOperation: LongRunningOperation;\n\tprivate searchHistoryDelayer: Delayer<void>;\n\tprivate messageDisposables: DisposableStore;\n\tprivate container: HTMLElement;\n\tprivate searchModel: SearchModel;\n\tprivate ongoingOperations: number = 0;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IContextKeyService readonly contextKeyService: IContextKeyService,\n\t\t@IEditorProgressService readonly progressService: IEditorProgressService,\n\t\t@ITextResourceConfigurationService textResourceService: ITextResourceConfigurationService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IConfigurationService protected configurationService: IConfigurationService,\n\t\t@IFileService private readonly fileService: IFileService\n\t) {\n\t\tsuper(SearchEditor.ID, telemetryService, instantiationService, storageService, textResourceService, themeService, editorService, editorGroupService);\n\t\tthis.container = DOM.$('.search-editor');\n\n\n\t\tconst scopedContextKeyService = contextKeyService.createScoped(this.container);\n\t\tthis.instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, scopedContextKeyService]));\n\n\t\tthis.inSearchEditorContextKey = InSearchEditor.bindTo(scopedContextKeyService);\n\t\tthis.inSearchEditorContextKey.set(true);\n\t\tthis.inputFocusContextKey = InputBoxFocusedKey.bindTo(scopedContextKeyService);\n\t\tthis.searchOperation = this._register(new LongRunningOperation(progressService));\n\t\tthis._register(this.messageDisposables = new DisposableStore());\n\n\t\tthis.searchHistoryDelayer = new Delayer<void>(2000);\n\n\t\tthis.searchModel = this._register(this.instantiationService.createInstance(SearchModel));\n\t}\n\n\toverride createEditor(parent: HTMLElement) {\n\t\tDOM.append(parent, this.container);\n\n\t\tthis.createQueryEditor(this.container);\n\t\tthis.createResultsEditor(this.container);\n\t}\n\n\tprivate createQueryEditor(parent: HTMLElement) {\n\t\tthis.queryEditorContainer = DOM.append(parent, DOM.$('.query-container'));\n\t\tthis.queryEditorWidget = this._register(this.instantiationService.createInstance(SearchWidget, this.queryEditorContainer, { _hideReplaceToggle: true, showContextToggle: true }));\n\t\tthis._register(this.queryEditorWidget.onReplaceToggled(() => this.reLayout()));\n\t\tthis._register(this.queryEditorWidget.onDidHeightChange(() => this.reLayout()));\n\t\tthis.queryEditorWidget.onSearchSubmit(({ delay }) => this.triggerSearch({ delay }));\n\t\tthis.queryEditorWidget.searchInput.onDidOptionChange(() => this.triggerSearch({ resetCursor: false }));\n\t\tthis.queryEditorWidget.onDidToggleContext(() => this.triggerSearch({ resetCursor: false }));\n\n\t\t// Includes/Excludes Dropdown\n\t\tthis.includesExcludesContainer = DOM.append(this.queryEditorContainer, DOM.$('.includes-excludes'));\n\n\t\t// Toggle query details button\n\t\tthis.toggleQueryDetailsButton = DOM.append(this.includesExcludesContainer, DOM.$('.expand' + ThemeIcon.asCSSSelector(searchDetailsIcon), { tabindex: 0, role: 'button', title: localize('moreSearch', \"Toggle Search Details\") }));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.CLICK, e => {\n\t\t\tDOM.EventHelper.stop(e);\n\t\t\tthis.toggleIncludesExcludes();\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t\tthis.toggleIncludesExcludes();\n\t\t\t}\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this.queryEditorWidget.isReplaceActive()) {\n\t\t\t\t\tthis.queryEditorWidget.focusReplaceAllAction();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.queryEditorWidget.isReplaceShown() ? this.queryEditorWidget.replaceInput.focusOnPreserve() : this.queryEditorWidget.focusRegexAction();\n\t\t\t\t}\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t}\n\t\t}));\n\n\t\t// Includes\n\t\tconst folderIncludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.includes'));\n\t\tconst filesToIncludeTitle = localize('searchScope.includes', \"files to include\");\n\t\tDOM.append(folderIncludesList, DOM.$('h4', undefined, filesToIncludeTitle));\n\t\tthis.inputPatternIncludes = this._register(this.instantiationService.createInstance(IncludePatternInputWidget, folderIncludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.includes', 'Search Include Patterns'),\n\t\t}));\n\t\tthis.inputPatternIncludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternIncludes.onChangeSearchInEditorsBox(() => this.triggerSearch()));\n\n\t\t// Excludes\n\t\tconst excludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.excludes'));\n\t\tconst excludesTitle = localize('searchScope.excludes', \"files to exclude\");\n\t\tDOM.append(excludesList, DOM.$('h4', undefined, excludesTitle));\n\t\tthis.inputPatternExcludes = this._register(this.instantiationService.createInstance(ExcludePatternInputWidget, excludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.excludes', 'Search Exclude Patterns'),\n\t\t}));\n\t\tthis.inputPatternExcludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternExcludes.onChangeIgnoreBox(() => this.triggerSearch()));\n\n\t\t[this.queryEditorWidget.searchInput, this.inputPatternIncludes, this.inputPatternExcludes, this.queryEditorWidget.contextLinesInput].map(input =>\n\t\t\tthis._register(attachInputBoxStyler(input, this.themeService, { inputBorder: searchEditorTextInputBorder })));\n\n\t\t// Messages\n\t\tthis.messageBox = DOM.append(this.queryEditorContainer, DOM.$('.messages'));\n\t}\n\n\tprivate toggleRunAgainMessage(show: boolean) {\n\t\tDOM.clearNode(this.messageBox);\n\t\tthis.messageDisposables.clear();\n\n\t\tif (show) {\n\t\t\tconst runAgainLink = DOM.append(this.messageBox, DOM.$('a.pointer.prominent.message', {}, localize('runSearch', \"Run Search\")));\n\t\t\tthis.messageDisposables.add(DOM.addDisposableListener(runAgainLink, DOM.EventType.CLICK, async () => {\n\t\t\t\tawait this.triggerSearch();\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate createResultsEditor(parent: HTMLElement) {\n\t\tconst searchResultContainer = DOM.append(parent, DOM.$('.search-results'));\n\t\tsuper.createEditor(searchResultContainer);\n\t\tthis.searchResultEditor = super.getControl() as CodeEditorWidget;\n\t\tthis.searchResultEditor.onMouseUp(e => {\n\t\t\tif (e.event.detail === 2) {\n\t\t\t\tconst behaviour = this.searchConfig.searchEditor.doubleClickBehaviour;\n\t\t\t\tconst position = e.target.position;\n\t\t\t\tif (position && behaviour !== 'selectWord') {\n\t\t\t\t\tconst line = this.searchResultEditor.getModel()?.getLineContent(position.lineNumber) ?? '';\n\t\t\t\t\tif (line.match(RESULT_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand(behaviour === 'goToLocation' ? 'editor.action.goToDeclaration' : 'editor.action.openDeclarationToTheSide');\n\t\t\t\t\t} else if (line.match(FILE_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand('editor.action.peekDefinition');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._register(this.onDidBlur(() => this.saveViewState()));\n\n\t\tthis._register(this.searchResultEditor.onDidChangeModelContent(() => this.getInput()?.setDirty(true)));\n\n\t\t[this.queryEditorWidget.searchInputFocusTracker, this.queryEditorWidget.replaceInputFocusTracker, this.inputPatternExcludes.inputFocusTracker, this.inputPatternIncludes.inputFocusTracker]\n\t\t\t.forEach(tracker => {\n\t\t\t\tthis._register(tracker.onDidFocus(() => setTimeout(() => this.inputFocusContextKey.set(true), 0)));\n\t\t\t\tthis._register(tracker.onDidBlur(() => this.inputFocusContextKey.set(false)));\n\t\t\t});\n\t}\n\n\toverride getControl() {\n\t\treturn this.searchResultEditor;\n\t}\n\n\toverride focus() {\n\t\tconst viewState = this.loadViewState();\n\t\tif (viewState && viewState.focused === 'editor') {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else {\n\t\t\tthis.queryEditorWidget.focus();\n\t\t}\n\t}\n\n\tfocusSearchInput() {\n\t\tthis.queryEditorWidget.searchInput.focus();\n\t}\n\n\tfocusNextInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tif (this.showingIncludesExcludes) {\n\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.inputPatternExcludes.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// pass\n\t\t}\n\t}\n\n\tfocusPrevInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus(); // wrap\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.queryEditorWidget.searchInput.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.inputPatternIncludes.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// unreachable.\n\t\t}\n\t}\n\n\tsetQuery(query: string) {\n\t\tthis.queryEditorWidget.searchInput.setValue(query);\n\t}\n\n\tselectQuery() {\n\t\tthis.queryEditorWidget.searchInput.select();\n\t}\n\n\ttoggleWholeWords() {\n\t\tthis.queryEditorWidget.searchInput.setWholeWords(!this.queryEditorWidget.searchInput.getWholeWords());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleRegex() {\n\t\tthis.queryEditorWidget.searchInput.setRegex(!this.queryEditorWidget.searchInput.getRegex());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleCaseSensitive() {\n\t\tthis.queryEditorWidget.searchInput.setCaseSensitive(!this.queryEditorWidget.searchInput.getCaseSensitive());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.queryEditorWidget.toggleContextLines();\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tthis.queryEditorWidget.modifyContextLines(increase);\n\t}\n\n\ttoggleQueryDetails() {\n\t\tthis.toggleIncludesExcludes();\n\t}\n\n\tdeleteResultBlock() {\n\t\tconst linesToDelete = new Set<number>();\n\n\t\tconst selections = this.searchResultEditor.getSelections();\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!(selections && model)) { return; }\n\n\t\tconst maxLine = model.getLineCount();\n\t\tconst minLine = 1;\n\n\t\tconst deleteUp = (start: number) => {\n\t\t\tfor (let cursor = start; cursor >= minLine; cursor--) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst deleteDown = (start: number): number | undefined => {\n\t\t\tlinesToDelete.add(start);\n\t\t\tfor (let cursor = start + 1; cursor <= maxLine; cursor++) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\treturn cursor;\n\t\t\t\t}\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\n\t\tconst endingCursorLines: Array<number | undefined> = [];\n\t\tfor (const selection of selections) {\n\t\t\tconst lineNumber = selection.startLineNumber;\n\t\t\tendingCursorLines.push(deleteDown(lineNumber));\n\t\t\tdeleteUp(lineNumber);\n\t\t\tfor (let inner = selection.startLineNumber; inner <= selection.endLineNumber; inner++) {\n\t\t\t\tlinesToDelete.add(inner);\n\t\t\t}\n\t\t}\n\n\t\tif (endingCursorLines.length === 0) { endingCursorLines.push(1); }\n\n\t\tconst isDefined = <T>(x: T | undefined): x is T => x !== undefined;\n\n\t\tmodel.pushEditOperations(this.searchResultEditor.getSelections(),\n\t\t\t[...linesToDelete].map(line => ({ range: new Range(line, 1, line + 1, 1), text: '' })),\n\t\t\t() => endingCursorLines.filter(isDefined).map(line => new Selection(line, 1, line, 1)));\n\t}\n\n\tcleanState() {\n\t\tthis.getInput()?.setDirty(false);\n\t}\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate iterateThroughMatches(reverse: boolean) {\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!model) { return; }\n\n\t\tconst lastLine = model.getLineCount() ?? 1;\n\t\tconst lastColumn = model.getLineLength(lastLine);\n\n\t\tconst fallbackStart = reverse ? new Position(lastLine, lastColumn) : new Position(1, 1);\n\n\t\tconst currentPosition = this.searchResultEditor.getSelection()?.getStartPosition() ?? fallbackStart;\n\n\t\tconst matchRanges = this.getInput()?.getMatchRanges();\n\t\tif (!matchRanges) { return; }\n\n\t\tconst matchRange = (reverse ? findPrevRange : findNextRange)(matchRanges, currentPosition);\n\n\t\tthis.searchResultEditor.setSelection(matchRange);\n\t\tthis.searchResultEditor.revealLineInCenterIfOutsideViewport(matchRange.startLineNumber);\n\t\tthis.searchResultEditor.focus();\n\n\t\tconst matchLineText = model.getLineContent(matchRange.startLineNumber);\n\t\tconst matchText = model.getValueInRange(matchRange);\n\t\tlet file = '';\n\t\tfor (let line = matchRange.startLineNumber; line >= 1; line--) {\n\t\t\tconst lineText = model.getValueInRange(new Range(line, 1, line, 2));\n\t\t\tif (lineText !== ' ') { file = model.getLineContent(line); break; }\n\t\t}\n\t\talert(localize('searchResultItem', \"Matched {0} at {1} in file {2}\", matchText, matchLineText, file.slice(0, file.length - 1)));\n\t}\n\n\tfocusNextResult() {\n\t\tthis.iterateThroughMatches(false);\n\t}\n\n\tfocusPreviousResult() {\n\t\tthis.iterateThroughMatches(true);\n\t}\n\n\tfocusAllResults() {\n\t\tthis.searchResultEditor\n\t\t\t.setSelections((this.getInput()?.getMatchRanges() ?? []).map(\n\t\t\t\trange => new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)));\n\t\tthis.searchResultEditor.focus();\n\t}\n\n\tasync triggerSearch(_options?: { resetCursor?: boolean; delay?: number; focusResults?: boolean }) {\n\t\tconst options = { resetCursor: true, delay: 0, ..._options };\n\n\t\tif (!this.pauseSearching) {\n\t\t\tawait this.runSearchDelayer.trigger(async () => {\n\t\t\t\tthis.toggleRunAgainMessage(false);\n\t\t\t\tawait this.doRunSearch();\n\t\t\t\tif (options.resetCursor) {\n\t\t\t\t\tthis.searchResultEditor.setPosition(new Position(1, 1));\n\t\t\t\t\tthis.searchResultEditor.setScrollPosition({ scrollTop: 0, scrollLeft: 0 });\n\t\t\t\t}\n\t\t\t\tif (options.focusResults) {\n\t\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t\t}\n\t\t\t}, options.delay);\n\t\t}\n\t}\n\n\tprivate readConfigFromWidget(): SearchConfiguration {\n\t\treturn {\n\t\t\tisCaseSensitive: this.queryEditorWidget.searchInput.getCaseSensitive(),\n\t\t\tcontextLines: this.queryEditorWidget.getContextLines(),\n\t\t\tfilesToExclude: this.inputPatternExcludes.getValue(),\n\t\t\tfilesToInclude: this.inputPatternIncludes.getValue(),\n\t\t\tquery: this.queryEditorWidget.searchInput.getValue(),\n\t\t\tisRegexp: this.queryEditorWidget.searchInput.getRegex(),\n\t\t\tmatchWholeWord: this.queryEditorWidget.searchInput.getWholeWords(),\n\t\t\tuseExcludeSettingsAndIgnoreFiles: this.inputPatternExcludes.useExcludesAndIgnoreFiles(),\n\t\t\tonlyOpenEditors: this.inputPatternIncludes.onlySearchInOpenEditors(),\n\t\t\tshowIncludesExcludes: this.showingIncludesExcludes\n\t\t};\n\t}\n\n\tprivate async doRunSearch() {\n\t\tthis.searchModel.cancelSearch(true);\n\n\t\tconst startInput = this.getInput();\n\n\t\tthis.searchHistoryDelayer.trigger(() => {\n\t\t\tthis.queryEditorWidget.searchInput.onSearchSubmit();\n\t\t\tthis.inputPatternExcludes.onSearchSubmit();\n\t\t\tthis.inputPatternIncludes.onSearchSubmit();\n\t\t});\n\n\t\tconst config = this.readConfigFromWidget();\n\n\t\tif (!config.query) { return; }\n\n\t\tconst content: IPatternInfo = {\n\t\t\tpattern: config.query,\n\t\t\tisRegExp: config.isRegexp,\n\t\t\tisCaseSensitive: config.isCaseSensitive,\n\t\t\tisWordMatch: config.matchWholeWord,\n\t\t};\n\n\t\tconst options: ITextQueryBuilderOptions = {\n\t\t\t_reason: 'searchEditor',\n\t\t\textraFileResources: this.instantiationService.invokeFunction(getOutOfWorkspaceEditorResources),\n\t\t\tmaxResults: 10000,\n\t\t\tdisregardIgnoreFiles: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\tdisregardExcludeSettings: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\texcludePattern: config.filesToExclude,\n\t\t\tincludePattern: config.filesToInclude,\n\t\t\tonlyOpenEditors: config.onlyOpenEditors,\n\t\t\tpreviewOptions: {\n\t\t\t\tmatchLines: 1,\n\t\t\t\tcharsPerLine: 1000\n\t\t\t},\n\t\t\tafterContext: config.contextLines,\n\t\t\tbeforeContext: config.contextLines,\n\t\t\tisSmartCase: this.searchConfig.smartCase,\n\t\t\texpandPatterns: true\n\t\t};\n\n\t\tconst folderResources = this.contextService.getWorkspace().folders;\n\t\tlet query: ITextQuery;\n\t\ttry {\n\t\t\tconst queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\t\tquery = queryBuilder.text(content, folderResources.map(folder => folder.uri), options);\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.searchOperation.start(500);\n\t\tthis.ongoingOperations++;\n\t\tconst exit = await this.searchModel.search(query).finally(() => {\n\t\t\tthis.ongoingOperations--;\n\t\t\tif (this.ongoingOperations === 0) {\n\t\t\t\tthis.searchOperation.stop();\n\t\t\t}\n\t\t});\n\n\t\tconst input = this.getInput();\n\t\tif (!input ||\n\t\t\tinput !== startInput ||\n\t\t\tJSON.stringify(config) !== JSON.stringify(this.readConfigFromWidget())) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sortOrder = this.searchConfig.sortOrder;\n\t\tif (sortOrder === SearchSortOrder.Modified) {\n\t\t\tawait this.retrieveFileStats(this.searchModel.searchResult);\n\t\t}\n\n\t\tconst controller = ReferencesController.get(this.searchResultEditor);\n\t\tcontroller.closeWidget(false);\n\t\tconst labelFormatter = (uri: URI): string => this.labelService.getUriLabel(uri, { relative: true });\n\t\tconst results = serializeSearchResultForEditor(this.searchModel.searchResult, config.filesToInclude, config.filesToExclude, config.contextLines, labelFormatter, sortOrder, exit?.limitHit);\n\t\tconst { body } = await input.getModels();\n\t\tthis.modelService.updateModel(body, results.text);\n\n\t\tlet warningMessage = '';\n\n\t\tif (exit && exit.limitHit) {\n\t\t\twarningMessage += localize('searchMaxResultsWarning', \"The result set only contains a subset of all matches. Be more specific in your search to narrow down the results.\");\n\t\t}\n\n\t\tif (exit && exit.messages) {\n\t\t\tfor (const message of exit.messages) {\n\t\t\t\tif (message.type === TextSearchCompleteMessageType.Information) {\n\t\t\t\t\tthis.addMessage(message.text);\n\t\t\t\t}\n\t\t\t\telse if (message.type === TextSearchCompleteMessageType.Warning) {\n\t\t\t\t\twarningMessage += (warningMessage ? ' - ' : '') + message.text;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (warningMessage) {\n\t\t\tthis.queryEditorWidget.searchInput.showMessage({\n\t\t\t\tcontent: warningMessage,\n\t\t\t\ttype: MessageType.WARNING\n\t\t\t});\n\t\t}\n\n\t\tinput.config = config;\n\n\t\tinput.setDirty(!input.isUntitled());\n\t\tinput.setMatchRanges(results.matchRanges);\n\t}\n\n\tprivate addMessage(message: string) {\n\t\tconst linkedText = parseLinkedText(message);\n\n\t\tlet messageBox: HTMLElement;\n\t\tif (this.messageBox.firstChild) {\n\t\t\tmessageBox = this.messageBox.firstChild as HTMLElement;\n\t\t} else {\n\t\t\tmessageBox = DOM.append(this.messageBox, DOM.$('.message'));\n\t\t}\n\n\t\tif (messageBox.innerText) {\n\t\t\tDOM.append(messageBox, document.createTextNode(' - '));\n\t\t}\n\n\t\tfor (const node of linkedText.nodes) {\n\t\t\tif (typeof node === 'string') {\n\t\t\t\tDOM.append(messageBox, document.createTextNode(node));\n\t\t\t} else {\n\t\t\t\tconst link = this.instantiationService.createInstance(Link, node);\n\t\t\t\tDOM.append(messageBox, link.el);\n\t\t\t\tthis.messageDisposables.add(link);\n\t\t\t\tthis.messageDisposables.add(attachLinkStyler(link, this.themeService));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async retrieveFileStats(searchResult: SearchResult): Promise<void> {\n\t\tconst files = searchResult.matches().filter(f => !f.fileStat).map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\toverride layout(dimension: DOM.Dimension) {\n\t\tthis.dimension = dimension;\n\t\tthis.reLayout();\n\t}\n\n\tgetSelected() {\n\t\tconst selection = this.searchResultEditor.getSelection();\n\t\tif (selection) {\n\t\t\treturn this.searchResultEditor.getModel()?.getValueInRange(selection) ?? '';\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate reLayout() {\n\t\tif (this.dimension) {\n\t\t\tthis.queryEditorWidget.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.searchResultEditor.layout({ height: this.dimension.height - DOM.getTotalHeight(this.queryEditorContainer), width: this.dimension.width });\n\t\t\tthis.inputPatternExcludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.inputPatternIncludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t}\n\t}\n\n\tprivate getInput(): SearchEditorInput | undefined {\n\t\treturn this._input as SearchEditorInput;\n\t}\n\n\tsetSearchConfig(config: Partial<Readonly<SearchConfiguration>>) {\n\t\tif (config.query !== undefined) { this.queryEditorWidget.setValue(config.query); }\n\t\tif (config.isCaseSensitive !== undefined) { this.queryEditorWidget.searchInput.setCaseSensitive(config.isCaseSensitive); }\n\t\tif (config.isRegexp !== undefined) { this.queryEditorWidget.searchInput.setRegex(config.isRegexp); }\n\t\tif (config.matchWholeWord !== undefined) { this.queryEditorWidget.searchInput.setWholeWords(config.matchWholeWord); }\n\t\tif (config.contextLines !== undefined) { this.queryEditorWidget.setContextLines(config.contextLines); }\n\t\tif (config.filesToExclude !== undefined) { this.inputPatternExcludes.setValue(config.filesToExclude); }\n\t\tif (config.filesToInclude !== undefined) { this.inputPatternIncludes.setValue(config.filesToInclude); }\n\t\tif (config.onlyOpenEditors !== undefined) { this.inputPatternIncludes.setOnlySearchInOpenEditors(config.onlyOpenEditors); }\n\t\tif (config.useExcludeSettingsAndIgnoreFiles !== undefined) { this.inputPatternExcludes.setUseExcludesAndIgnoreFiles(config.useExcludeSettingsAndIgnoreFiles); }\n\t\tif (config.showIncludesExcludes !== undefined) { this.toggleIncludesExcludes(config.showIncludesExcludes); }\n\t}\n\n\toverride async setInput(newInput: SearchEditorInput, options: EditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tthis.saveViewState();\n\n\t\tawait super.setInput(newInput, options, context, token);\n\t\tif (token.isCancellationRequested) { return; }\n\n\t\tconst { body, config } = await newInput.getModels();\n\t\tif (token.isCancellationRequested) { return; }\n\n\t\tthis.searchResultEditor.setModel(body);\n\t\tthis.pauseSearching = true;\n\n\t\tthis.toggleRunAgainMessage(body.getLineCount() === 1 && body.getValue() === '' && config.query !== '');\n\n\t\tthis.setSearchConfig(config);\n\n\t\tthis.restoreViewState();\n\n\t\tif (!options?.preserveFocus) {\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.pauseSearching = false;\n\t}\n\n\tprivate toggleIncludesExcludes(_shouldShow?: boolean): void {\n\t\tconst cls = 'expanded';\n\t\tconst shouldShow = _shouldShow ?? !this.includesExcludesContainer.classList.contains(cls);\n\n\t\tif (shouldShow) {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'true');\n\t\t\tthis.includesExcludesContainer.classList.add(cls);\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'false');\n\t\t\tthis.includesExcludesContainer.classList.remove(cls);\n\t\t}\n\n\t\tthis.showingIncludesExcludes = this.includesExcludesContainer.classList.contains(cls);\n\n\t\tthis.reLayout();\n\t}\n\n\toverride saveState() {\n\t\tthis.saveViewState();\n\t\tsuper.saveState();\n\t}\n\n\tprivate saveViewState() {\n\t\tconst resource = this.getInput()?.modelUri;\n\t\tif (resource) { this.saveTextEditorViewState(resource); }\n\t}\n\n\tprotected override retrieveTextEditorViewState(resource: URI): SearchEditorViewState | null {\n\t\tconst control = this.getControl();\n\t\tconst editorViewState = control.saveViewState();\n\t\tif (!editorViewState) { return null; }\n\t\tif (resource.toString() !== this.getInput()?.modelUri.toString()) { return null; }\n\n\t\treturn { ...editorViewState, focused: this.searchResultEditor.hasWidgetFocus() ? 'editor' : 'input' };\n\t}\n\n\tprivate loadViewState() {\n\t\tconst resource = assertIsDefined(this.getInput()?.modelUri);\n\t\treturn this.loadTextEditorViewState(resource) as SearchEditorViewState;\n\t}\n\n\tprivate restoreViewState() {\n\t\tconst viewState = this.loadViewState();\n\t\tif (viewState) { this.searchResultEditor.restoreViewState(viewState); }\n\t}\n\n\toverride clearInput() {\n\t\tthis.saveViewState();\n\t\tsuper.clearInput();\n\t}\n\n\tgetAriaLabel() {\n\t\treturn this.getInput()?.getName() ?? localize('searchEditor', \"Search\");\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tcollector.addRule(`.monaco-editor .${SearchEditorFindMatchClass} { background-color: ${theme.getColor(searchEditorFindMatch)}; }`);\n\n\tconst findMatchHighlightBorder = theme.getColor(searchEditorFindMatchBorder);\n\tif (findMatchHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .${SearchEditorFindMatchClass} { border: 1px ${theme.type === 'hc' ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n\t}\n});\n\nexport const searchEditorTextInputBorder = registerColor('searchEditor.textInputBorder', { dark: inputBorder, light: inputBorder, hc: inputBorder }, localize('textInputBoxBorder', \"Search editor text input box border.\"));\n\nfunction findNextRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (const matchRange of matchRanges) {\n\t\tif (Position.isBefore(currentPosition, matchRange.getStartPosition())) {\n\t\t\treturn matchRange;\n\t\t}\n\t}\n\treturn matchRanges[0];\n}\n\nfunction findPrevRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (let i = matchRanges.length - 1; i >= 0; i--) {\n\t\tconst matchRange = matchRanges[i];\n\t\tif (Position.isBefore(matchRange.getStartPosition(), currentPosition)) {\n\t\t\t{\n\t\t\t\treturn matchRange;\n\t\t\t}\n\t\t}\n\t}\n\treturn matchRanges[matchRanges.length - 1];\n}\n"]}