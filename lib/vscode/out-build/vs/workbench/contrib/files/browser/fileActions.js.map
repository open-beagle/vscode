{"version":3,"sources":["vs/workbench/contrib/files/browser/fileActions.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAyDnF,QAAA,mBAAmB,GAAG,kBAAkB,CAAC;IACzC,QAAA,cAAc,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAS,EAAE,IAAU,CAAC,CAAC;IACrD,QAAA,qBAAqB,GAAG,oBAAoB,CAAC;IAC7C,QAAA,gBAAgB,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAW,EAAE,IAAY,CAAC,CAAC;IAC3D,QAAA,oBAAoB,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAQ,EAAE,IAAQ,CAAC,CAAC;IACxD,QAAA,wBAAwB,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAQ,EAAE,IAAQ,CAAC,CAAC;IAC5D,QAAA,eAAe,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAU,EAAE,IAAM,CAAC,CAAC;IACnD,QAAA,gBAAgB,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAW,EAAE,IAAO,CAAC,CAAC;IACtD,QAAA,iBAAiB,GAAG,IAAI,0BAAa,CAAU,YAAY,EAAE,KAAK,CAAC,CAAC;IACpE,QAAA,cAAc,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAU,EAAE,IAAa,CAAC,CAAC;IACtE,MAAM,0BAA0B,GAAG,wBAAwB,CAAC;IAC5D,MAAM,kBAAkB,GAAG,OAAO,CAAC,CAAC,MAAM;IAE1C,SAAS,OAAO,CAAC,mBAAyC,EAAE,KAAU;QACrE,IAAI,KAAK,CAAC,OAAO,KAAK,QAAQ,EAAE;YAC/B,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC;SACtB;QAED,mBAAmB,CAAC,KAAK,CAAC,CAAA,GAAA,6BAAc,CAAA,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;IACzD,CAAC;IAED,KAAK,UAAU,kBAAkB,CAAC,KAAa,EAAE,eAAiC;QACjF,IAAI,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YACvE,0FAA0F;YAC1F,MAAM,eAAe,CAAC,OAAO,EAAE,CAAC;SAChC;IACF,CAAC;IAED,KAAK,UAAU,WAAW,CAAC,eAAiC,EAAE,sBAA+C,EAAE,aAA6B,EAAE,oBAA2C,EAAE,QAAwB,EAAE,QAAiB,EAAE,WAAW,GAAG,KAAK;QAC1P,IAAI,aAAqB,CAAC;QAC1B,IAAI,QAAQ,EAAE;YACb,aAAa,GAAG,oBAAS,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAA6B,EAAE,IAAuB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAqE,CAAnE,CAAqE,EAAlE,EAAE,AAAiF,CAAC,CAAC,sBAA3D,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;SACnL;aAAM;YACN,aAAa,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAgE,CAA9D,CAAgE,EAA7D,EAAE,AAAqE,CAAC,CAAC,iBAApD,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;SAC3F;QAED,eAAe;QACf,MAAM,gBAAgB,GAAG,SAAS,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;QAC9E,MAAM,kBAAkB,GAAG,IAAI,GAAG,EAAgB,CAAC;QACnD,KAAK,MAAM,eAAe,IAAI,gBAAgB,EAAE;YAC/C,KAAK,MAAM,gBAAgB,IAAI,sBAAsB,CAAC,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC,EAAE;gBACzF,kBAAkB,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;aACzC;SACD;QACD,IAAI,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,kBAAkB,CAAC,IAAI,EAAE;YAC5B,IAAI,OAAe,CAAC;YACpB,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;gBAChC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAyB,EAAE,IAAuE,CAAC,CAAC;aAC3H;iBAAM,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;gBAC3C,IAAI,kBAAkB,CAAC,IAAI,KAAK,CAAC,EAAE;oBAClC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,EAA6B,EAAE,IAAwF,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;iBAC1K;qBAAM;oBACN,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,EAA0B,EAAE,IAA2F,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,kBAAkB,CAAC,IAAI,CAAC,CAAC;iBACnM;aACD;iBAAM;gBACN,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAwB,EAAE,IAAqE,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;aAClJ;YAED,MAAM,QAAQ,GAAG,MAAM,aAAa,CAAC,OAAO,CAAC;gBAC5C,OAAO;gBACP,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAc,EAAE,IAAmD,CAAC;gBACzF,aAAa;aACb,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;gBACxB,SAAS,GAAG,KAAK,CAAC;aAClB;iBAAM;gBACN,WAAW,GAAG,IAAI,CAAC;aACnB;SACD;QAED,kEAAkE;QAClE,IAAI,CAAC,SAAS,EAAE;YACf,OAAO;SACP;QAED,IAAI,YAAiC,CAAC;QACtC,uFAAuF;QACvF,MAAM,YAAY,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAc,EAAE,IAA8B,CAAC,CAAC,CAAC;YAC9H,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAe,EAAE,IAAoD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAS,EAAE,IAAkD,CAAC,CAAC;QAEjM,kDAAkD;QAClD,IAAI,WAAW,IAAI,CAAC,QAAQ,IAAI,oBAAoB,CAAC,QAAQ,CAAU,0BAA0B,CAAC,KAAK,KAAK,CAAC,EAAE;YAC9G,YAAY,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;SACnC;QAED,8BAA8B;aACzB,IAAI,QAAQ,EAAE;YAClB,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,qBAAqB,CAAC,gBAAgB,CAAC,CAAC;YAClE,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YAC7B,IAAI,oBAAS,EAAE;gBACd,MAAM,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAc,EAAE,IAAmD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAS,EAAE,IAAiD,CAAC,CAAC;aACvM;iBAAM;gBACN,MAAM,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAgB,EAAE,IAA6C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAW,EAAE,IAA2C,CAAC,CAAC;aAC/L;YAED,YAAY,GAAG,MAAM,aAAa,CAAC,OAAO,CAAC;gBAC1C,OAAO;gBACP,MAAM;gBACN,aAAa;gBACb,QAAQ,EAAE;oBACT,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAe,EAAE,IAAqB,CAAC;iBAC3D;gBACD,IAAI,EAAE,UAAU;aAChB,CAAC,CAAC;SACH;QAED,mCAAmC;aAC9B;YACJ,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;YAC7D,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YAC7B,MAAM,IAAI,YAAY,CAAC;YACvB,YAAY,GAAG,MAAM,aAAa,CAAC,OAAO,CAAC;gBAC1C,OAAO;gBACP,MAAM;gBACN,aAAa;gBACb,IAAI,EAAE,SAAS;aACf,CAAC,CAAC;SACH;QAED,kCAAkC;QAClC,IAAI,YAAY,CAAC,SAAS,IAAI,YAAY,CAAC,eAAe,KAAK,IAAI,EAAE;YACpE,MAAM,oBAAoB,CAAC,WAAW,CAAC,0BAA0B,EAAE,KAAK,CAAC,CAAC;SAC1E;QAED,yBAAyB;QACzB,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE;YAC5B,OAAO;SACP;QAED,gBAAgB;QAChB,IAAI;YACH,MAAM,iBAAiB,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,kCAAgB,CAAC,CAAC,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,WAAW,EAAE,YAAY,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAC,CAAC;YACnM,MAAM,OAAO,GAAG;gBACf,SAAS,EAAE,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,AAAiG,EAAE,CAAhG,EAAE,CAAgH,EAAE,aAAlG,EAAE,CAAgH,CAAC,KAA1G,CAAgH,CAA9G,AAA+G,CAA9G,AAA+G,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,AAAsG,EAAE,CAArG,EAAE,CAA+G,EAAE,gBAAgB,CAA7G,AAA8G,CAAC,CAA7G,AAA8G,CAAC,IAAI,CAAC,CAA7G,EAAE,CAAC,OAAxG,CAAC,sDAAqK,CAAC;gBAC7T,aAAa,EAAE,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,AAAmG,EAAE,CAAlG,EAAE,CAAoH,EAAE,eAApG,CAAoH,CAAlH,AAAmH,MAAM,CAAlH,AAAmH,CAAC,CAAlH,AAAmH,CAAlH,AAAmH,GAAG,CAAC,QAAQ,CAAC,EAAE,AAAwG,EAAE,CAAvG,EAAE,CAAmH,EAAE,gBAAgB,CAAC,CAAC,CAAjH,AAAkH,CAAC,CAAjH,GAAqH,CAAC,GAA/G,EAAE,CAAC,OAA5G,CAAC,sDAAyK,CAAC;aACvU,CAAC;YACF,MAAM,eAAe,CAAC,aAAa,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;SAChE;QAAC,OAAO,KAAK,EAAE;YAEf,kEAAkE;YAClE,IAAI,YAAoB,CAAC;YACzB,IAAI,aAAiC,CAAC;YACtC,IAAI,aAAqB,CAAC;YAC1B,IAAI,QAAQ,EAAE;gBACb,YAAY,GAAG,oBAAS,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAW,EAAE,IAAoF,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAa,EAAE,IAA8E,CAAC,CAAC;gBACzP,aAAa,GAAG,YAAY,CAAC;gBAC7B,aAAa,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAE,AAAyE,EAAE,CAAxE,EAAE,CAA4F,CAAC,CAAC,2BAAhE,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;aACtG;iBAAM;gBACN,YAAY,GAAG,CAAA,GAAA,6BAAc,CAAA,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;gBAC5C,aAAa,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAE,AAA6D,EAAE,CAA5D,EAAE,CAAmE,CAAC,CAAC,eAAnD,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;aAC1F;YAED,MAAM,GAAG,GAAG,MAAM,aAAa,CAAC,OAAO,CAAC;gBACvC,OAAO,EAAE,YAAY;gBACrB,MAAM,EAAE,aAAa;gBACrB,IAAI,EAAE,SAAS;gBACf,aAAa;aACb,CAAC,CAAC;YAEH,IAAI,GAAG,CAAC,SAAS,EAAE;gBAClB,IAAI,QAAQ,EAAE;oBACb,QAAQ,GAAG,KAAK,CAAC,CAAC,qBAAqB;iBACvC;gBAED,WAAW,GAAG,IAAI,CAAC;gBAEnB,OAAO,WAAW,CAAC,eAAe,EAAE,sBAAsB,EAAE,aAAa,EAAE,oBAAoB,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;aAClI;SACD;IACF,CAAC;IAED,SAAS,qBAAqB,CAAC,gBAAgC;QAC9D,IAAI,4BAA4B,CAAC,gBAAgB,CAAC,EAAE;YACnD,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4C,EAAE,IAAyF,EAAE,gBAAgB,CAAC,MAAM,CAAC;gBACvL,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;aAClE,CAAC;SACF;QAED,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;YAChC,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;gBACpC,OAAO;oBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4C,EAAE,IAAmF,EAAE,gBAAgB,CAAC,MAAM,CAAC;oBACjL,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;iBAClE,CAAC;aACF;YAED,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAiC,EAAE,IAA0D,EAAE,gBAAgB,CAAC,MAAM,CAAC;gBAC7I,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;aAClE,CAAC;SACF;QAED,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;YACpC,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA+B,EAAE,IAAyD,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;SACnK;QAED,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA6B,EAAE,IAAwC,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;IACjJ,CAAC;IAED,SAAS,gBAAgB,CAAC,gBAAgC;QACzD,IAAI,4BAA4B,CAAC,gBAAgB,CAAC,EAAE;YACnD,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAyC,EAAE,IAAqG,EAAE,gBAAgB,CAAC,MAAM,CAAC;gBAChM,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;aAClE,CAAC;SACF;QAED,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;YAChC,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;gBACpC,OAAO;oBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAyC,EAAE,IAA+F,EAAE,gBAAgB,CAAC,MAAM,CAAC;oBAC1L,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;iBAClE,CAAC;aACF;YAED,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA8B,EAAE,IAAsE,EAAE,gBAAgB,CAAC,MAAM,CAAC;gBACtJ,MAAM,EAAE,CAAA,GAAA,6BAAmB,CAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;aAClE,CAAC;SACF;QAED,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE;YACpC,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4B,EAAE,IAAqE,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;SAC5K;QAED,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA0B,EAAE,IAAoD,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;IAC1J,CAAC;IAED,SAAS,4BAA4B,CAAC,gBAAgC;QACrE,MAAM,SAAS,GAAG,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACxE,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAEpE,OAAO,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC;IAC9B,CAAC;IAGD,SAAgB,wBAAwB,CAAC,eAAiC,EAAE,YAA0B,EAAE,WAA8E,EAAE,iBAAqC;QAC5N,IAAI,IAAI,GAAG,SAAS,CAAC,mBAAmB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAE/D,IAAI,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAChE,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE;YAC3C,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE;gBAC5C,MAAM;aACN;YAED,IAAI,GAAG,iBAAiB,CAAC,IAAI,EAAE,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;YAC7E,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SAC5D;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;IAdD,4DAcC;IAED,SAAgB,iBAAiB,CAAC,IAAY,EAAE,QAAiB,EAAE,iBAAqC;QACvG,IAAI,iBAAiB,KAAK,QAAQ,EAAE;YACnC,IAAI,UAAU,GAAG,IAAI,CAAC;YACtB,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,EAAE;gBACd,SAAS,GAAG,CAAA,GAAA,cAAO,CAAA,CAAC,IAAI,CAAC,CAAC;gBAC1B,UAAU,GAAG,CAAA,GAAA,eAAQ,CAAA,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;aACvC;YAED,yCAAyC;YACzC,uCAAuC;YACvC,MAAM,WAAW,GAAG,oBAAoB,CAAC;YACzC,IAAI,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBACjC,OAAO,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAG,EAAE,EAAE;oBAC1D,IAAI,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrC,OAAO,MAAM,KAAK,CAAC;wBAClB,CAAC,CAAC,GAAG,EAAE,EAAE;wBACT,CAAC,CAAC,CAAC,MAAM,0CAAmC;4BAC3C,CAAC,CAAC,GAAG,EAAE,IAAI,MAAM,GAAG,CAAC,EAAE;4BACvB,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;gBACxB,CAAC,CAAC,GAAG,SAAS,CAAC;aACf;YAED,gCAAgC;YAChC,OAAO,GAAG,UAAU,QAAQ,SAAS,EAAE,CAAC;SACxC;QAED,MAAM,UAAU,GAAG,WAAW,CAAC;QAC/B,MAAM,SAAS,0CAAmC,CAAC;QAEnD,yBAAyB;QACzB,IAAI,eAAe,GAAG,MAAM,CAAC,KAAK,GAAG,UAAU,GAAG,iBAAiB,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAG,EAAE,EAAG,EAAE,EAAE;gBAC7D,IAAI,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE;oBACvD,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;SACH;QAED,yBAAyB;QACzB,IAAI,eAAe,GAAG,MAAM,CAAC,SAAS,GAAG,UAAU,GAAG,aAAa,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAG,EAAE,EAAG,EAAE,EAAE;gBAC7D,IAAI,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE;oBACvD,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;SACH;QAED,eAAe;QACf,IAAI,qBAAqB,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;QACrD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE;YACnD,OAAO,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAG,EAAE,EAAE;gBAC9D,IAAI,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE;oBAClD,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC;YACnB,CAAC,CAAC,CAAC;SACH;QAED,uBAAuB;QACvB,MAAM,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,IAAI,cAAc,IAAI,CAAC,EAAE;YACrC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,cAAc,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;SAC3E;QAED,aAAa;QACb,IAAI,sBAAsB,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,IAAI,cAAc,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAAE;YAC7E,OAAO,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAE;gBAC1D,IAAI,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC1B,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC;oBAC7C,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC;YACd,CAAC,CAAC,CAAC;SACH;QAED,gBAAgB;QAChB,iBAAiB;QACjB,IAAI,gBAAgB,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,IAAI,cAAc,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE;YACvE,OAAO,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,KAAK,EAAE,EAAG,EAAE,EAAG,EAAE,EAAE;gBACzD,IAAI,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC1B,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE;oBAClB,MAAM,GAAG,CAAC,CAAC;iBACX;gBACD,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC;oBAClD,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;YACnB,CAAC,CAAC,CAAC;SACH;QAED,qBAAqB;QACrB,IAAI,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;YACrC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,GAAG,MAAM,EAAE,EAAE;gBAClD,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC;oBACpD,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;YACrB,CAAC,CAAC,CAAC;SACH;QAED,qBAAqB;QACrB,IAAI,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;YACrC,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,GAAG,MAAM,EAAE,EAAE;gBACvD,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,OAAO,MAAM,GAAG,SAAS;oBACxB,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;oBAChE,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;YACjC,CAAC,CAAC,CAAC;SACH;QAED,+BAA+B;QAC/B,OAAO,GAAG,IAAI,IAAI,CAAC;IACpB,CAAC;IArHD,8CAqHC;IAED,sBAAsB;IACtB,IAAa,4BAA4B,GAAzC,MAAa,4BAA6B,SAAQ,gBAAM;QAKvD,YACC,EAAU,EACV,KAAa,EACwB,iBAAqC,EACzC,aAA6B,EAC1B,gBAAmC,EAC9B,qBAA6C;YAEtF,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YALoB,sBAAiB,GAAjB,iBAAiB,CAAoB;YACzC,kBAAa,GAAb,aAAa,CAAgB;YAC1B,qBAAgB,GAAhB,gBAAgB,CAAmB;YAC9B,0BAAqB,GAArB,qBAAqB,CAAwB;QAGvF,CAAC;QAEQ,KAAK,CAAC,GAAG;YACjB,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC;YACpD,MAAM,cAAc,GAAG,+BAAsB,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC1E,IAAI,cAAc,IAAI,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,cAAc,CAAC,EAAE;gBAE9E,uDAAuD;gBACvD,oDAAoD;gBACpD,sCAAsC;gBACtC,MAAM,wBAAwB,GAAG,IAAI,CAAC,qBAAqB,CAAC,yBAAyB,CAAC,GAAG,EAAE;oBAC1F,EAAE,EAAE,4BAA4B,CAAC,EAAE;oBACnC,KAAK,EAAE,4BAA4B,CAAC,KAAK;oBACzC,QAAQ,EAAE,iDAAyB,CAAC,SAAS;oBAC7C,MAAM,EAAE,EAAE;oBACV,SAAS,EAAE,GAAG,EAAE,CAAC,KAAK;iBACtB,EAAE,EAAE,EAAE,QAAQ,CAAC,EAAE;oBAEjB,aAAa;oBACb,wBAAwB,CAAC,OAAO,EAAE,CAAC;oBAEnC,sDAAsD;oBACtD,2CAA2C;oBAC3C,IAAI,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE;wBACtD,OAAO;4BACN,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC;gCAC5C,YAAY,EAAE,cAAc;gCAC5B,aAAa,EAAE,QAAQ;gCACvB,OAAO,EAAE,EAAE,QAAQ,EAAE,uBAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE;6BAC5D,CAAC;yBACF,CAAC;qBACF;oBAED,qCAAqC;oBACrC,OAAO;wBACN,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC;4BAC5C,QAAQ,EAAE,cAAc;4BACxB,OAAO,EAAE,EAAE,QAAQ,EAAE,uBAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE;yBAC5D,CAAC;qBACF,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,CAAA,GAAA,iBAAI,CAAA,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;oBAC/C,MAAM,CAAA,GAAA,eAAO,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,qCAAqC;oBACvD,wBAAwB,CAAC,OAAO,EAAE,CAAC;gBACpC,CAAC,CAAC,CAAC,CAAC;gBAEJ,wBAAwB;gBACxB,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,cAAc,EAAE,2BAAc,CAAC,MAAM,EAAE,CAAC,CAAC;aACvF;QACF,CAAC;KACD,CAAA;IA/DgB,+BAAE,GAAG,wCAAwC,CAAC;IAC9C,kCAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAmB,EAAE,IAA6B,CAAC,CAAC;IAH7E,4BAA4B;QAQtC,WAAA,+BAAkB,CAAA;QAClB,WAAA,8BAAc,CAAA;QACd,WAAA,mCAAiB,CAAA;QACjB,WAAA,8CAAsB,CAAA;OAXZ,4BAA4B,CAiExC;IAjEY,oEAA4B;IAmEzC,IAAa,oBAAoB,GAAjC,MAAa,oBAAqB,SAAQ,gBAAM;QAI/C,YACC,EAAU,EACV,KAAa,EACgC,yBAAqD;YAElG,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAF4B,8BAAyB,GAAzB,yBAAyB,CAA4B;QAGnG,CAAC;QAEQ,GAAG;YACX,OAAO,IAAI,CAAC,yBAAyB,CAAC,cAAc,EAAE,CAAC;QACxD,CAAC;KACD,CAAA;IAdgB,uBAAE,GAAG,iCAAiC,CAAC;IACvC,0BAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAgB,EAAE,IAAkB,CAAC,CAAC;IAF/D,oBAAoB;QAO9B,WAAA,sDAA0B,CAAA;OAPhB,oBAAoB,CAehC;IAfY,oDAAoB;IAiBjC,IAAsB,iBAAiB,GAAvC,MAAsB,iBAAkB,SAAQ,gBAAM;QAGrD,YACC,EAAU,EACV,KAAa,EACc,cAA+B,EAC5B,mBAAyC,EACjC,kBAAuC;YAE7E,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAJU,mBAAc,GAAd,cAAc,CAAiB;YAC5B,wBAAmB,GAAnB,mBAAmB,CAAsB;YACjC,uBAAkB,GAAlB,kBAAkB,CAAqB;YAI7E,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YACvD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC;YAEnC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC;QAIO,iBAAiB;YAExB,kDAAkD;YAClD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC7G,CAAC;QAEO,gBAAgB,CAAC,WAAyB;YACjD,MAAM,QAAQ,GAAG,WAAW,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC3E,IAAI,IAAI,CAAC,cAAc,KAAK,QAAQ,EAAE;gBACrC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;gBACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC;aACnC;QACF,CAAC;QAEQ,KAAK,CAAC,GAAG,CAAC,OAAiB;YACnC,IAAI;gBACH,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aAC1B;YAAC,OAAO,KAAK,EAAE;gBACf,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;aACzC;QACF,CAAC;KACD,CAAA;IAzCqB,iBAAiB;QAMpC,WAAA,0BAAe,CAAA;QACf,WAAA,mCAAoB,CAAA;QACpB,WAAA,wCAAmB,CAAA;OARA,iBAAiB,CAyCtC;IAzCqB,8CAAiB;IA2CvC,MAAa,oBAAqB,SAAQ,iBAAiB;QAK1D,IAAa,KAAK;YACjB,OAAO,kBAAkB,GAAG,kBAAO,CAAC,OAAO,CAAC,UAAU,CAAC;QACxD,CAAC;QAES,KAAK,CAAC,OAAgB;YAC/B,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,2CAA4B,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;QACtF,CAAC;;IAXF,oDAYC;IAVgB,uBAAE,GAAG,uCAAuC,CAAC;IAC7C,0BAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAgB,EAAE,IAAmB,CAAC,CAAC;IAW7E,IAAa,gBAAgB,GAA7B,MAAa,gBAAiB,SAAQ,gBAAM;QAK3C,YAAY,EAAU,EAAE,KAAa,EAAoC,cAA+B;YACvG,KAAK,CAAC,EAAE,EAAE,KAAK,EAAE,kBAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAD0B,mBAAc,GAAd,cAAc,CAAiB;QAExG,CAAC;QAEQ,GAAG,CAAC,OAAiB;YAC7B,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,mDAAkC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;QAC5F,CAAC;KACD,CAAA;IAVgB,mBAAE,GAAG,mCAAmC,CAAC;IACzC,sBAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAY,EAAE,IAAa,CAAC,CAAC;IAHtD,gBAAgB;QAKY,WAAA,0BAAe,CAAA;OAL3C,gBAAgB,CAY5B;IAZY,4CAAgB;IAc7B,IAAa,kBAAkB,GAA/B,MAAa,kBAAmB,SAAQ,gBAAM;QAK7C,YACC,EAAU,EACV,KAAa,EACqB,cAA+B;YAEjE,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAFiB,mBAAc,GAAd,cAAc,CAAiB;QAGlE,CAAC;QAEQ,KAAK,CAAC,GAAG;YACjB,MAAM,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,kBAAU,EAAE,IAAI,CAAC,CAAC;QACzD,CAAC;KACD,CAAA;IAdgB,qBAAE,GAAG,2CAA2C,CAAC;IACjD,wBAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAoB,EAAE,IAAyB,CAAC,CAAC;IAH1E,kBAAkB;QAQ5B,WAAA,yBAAe,CAAA;OARL,kBAAkB,CAgB9B;IAhBY,gDAAkB;IAkB/B,IAAa,wBAAwB,GAArC,MAAa,wBAAyB,SAAQ,gBAAM;QAKnD,YACC,EAAU,EACV,KAAa,EACoB,aAA6B,EAC5B,cAA+B;YAEjE,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAHgB,kBAAa,GAAb,aAAa,CAAgB;YAC5B,mBAAc,GAAd,cAAc,CAAiB;QAGlE,CAAC;QAEQ,KAAK,CAAC,GAAG;YACjB,MAAM,QAAQ,GAAG,+BAAsB,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,EAAE,iBAAiB,EAAE,yBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC;YACzI,IAAI,QAAQ,EAAE;gBACb,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,4CAA6B,EAAE,QAAQ,CAAC,CAAC;aAC5E;QACF,CAAC;KACD,CAAA;IAlBgB,2BAAE,GAAG,iDAAiD,CAAC;IACvD,8BAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAgB,EAAE,IAAgC,CAAC,CAAC;IAH7E,wBAAwB;QAQlC,WAAA,8BAAc,CAAA;QACd,WAAA,0BAAe,CAAA;OATL,wBAAwB,CAoBpC;IApBY,4DAAwB;IAsBrC,IAAa,yBAAyB,GAAtC,MAAa,yBAA0B,SAAQ,gBAAM;QAKpD,YACC,EAAU,EACV,KAAa,EACoB,aAA6B,EAC/B,WAAyB,EACjB,mBAAyC,EACjD,WAAyB;YAExD,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YALgB,kBAAa,GAAb,aAAa,CAAgB;YAC/B,gBAAW,GAAX,WAAW,CAAc;YACjB,wBAAmB,GAAnB,mBAAmB,CAAsB;YACjD,gBAAW,GAAX,WAAW,CAAc;QAGzD,CAAC;QAEQ,KAAK,CAAC,GAAG;YACjB,MAAM,YAAY,GAAG,+BAAsB,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,EAAE,iBAAiB,EAAE,yBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC;YAC7I,IAAI,YAAY,EAAE;gBACjB,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,YAAY,CAAC,EAAE;oBACrD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC;iBACnF;qBAAM;oBACN,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,6CAA6C,EAAE,sDAAsD,CAAC,CAAC,CAAC;iBACnJ;aACD;QACF,CAAC;KACD,CAAA;IAxBgB,4BAAE,GAAG,kDAAkD,CAAC;IACxD,+BAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,EAAqB,EAAE,IAAgC,CAAC,CAAC;IAHlF,yBAAyB;QAQnC,WAAA,8BAAc,CAAA;QACd,WAAA,mBAAY,CAAA;QACZ,WAAA,mCAAoB,CAAA;QACpB,WAAA,oBAAY,CAAA;OAXF,yBAAyB,CA0BrC;IA1BY,8DAAyB;IA4BtC,SAAgB,gBAAgB,CAAC,IAAkB,EAAE,IAAY;QAChE,kCAAkC;QAClC,IAAI,GAAG,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAEnC,oBAAoB;QACpB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACrD,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,oBAAoB,EAAE,yCAAyC,CAAC;gBACtF,QAAQ,EAAE,uBAAQ,CAAC,KAAK;aACxB,CAAC;SACF;QAED,sBAAsB;QACtB,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;YACxC,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,8BAA8B,EAAE,kDAAkD,CAAC;gBACzG,QAAQ,EAAE,uBAAQ,CAAC,KAAK;aACxB,CAAC;SACF;QAED,MAAM,KAAK,GAAG,CAAA,GAAA,iBAAQ,CAAA,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAE3B,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE;YACvB,0CAA0C;YAC1C,MAAM,KAAK,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,EAAE;gBAC5B,OAAO;oBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,qBAAqB,EAAE,2FAA2F,EAAE,IAAI,CAAC;oBAC/I,QAAQ,EAAE,uBAAQ,CAAC,KAAK;iBACxB,CAAC;aACF;SACD;QAED,oBAAoB;QACpB,MAAM,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,iBAAO,CAAC,IAAI,IAAI,oBAAS,CAAC;QACnF,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,EAAE,uBAAuB,CAAC,CAAC,EAAE;YAC9F,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,sBAAsB,EAAE,yFAAyF,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;gBAC5J,QAAQ,EAAE,uBAAQ,CAAC,KAAK;aACxB,CAAC;SACF;QAED,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;YAC7C,OAAO;gBACN,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,2BAA2B,EAAE,iEAAiE,CAAC;gBACrH,QAAQ,EAAE,uBAAQ,CAAC,OAAO;aAC1B,CAAC;SACF;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAnDD,4CAmDC;IAED,SAAS,YAAY,CAAC,IAAY;QACjC,IAAI,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,IAAG,GAAG,EAAE;YACvB,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC;SACnC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAED,SAAgB,qBAAqB,CAAC,QAAgB;QACrD,IAAI,CAAC,QAAQ,EAAE;YACd,OAAO,QAAQ,CAAC;SAChB;QAED,YAAY;QACZ,QAAQ,GAAG,CAAA,GAAA,cAAI,CAAA,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEhC,mCAAmC;QACnC,QAAQ,GAAG,CAAA,GAAA,eAAK,CAAA,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAChC,QAAQ,GAAG,CAAA,GAAA,eAAK,CAAA,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAChC,QAAQ,GAAG,CAAA,GAAA,eAAK,CAAA,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEjC,OAAO,QAAQ,CAAC;IACjB,CAAC;IAdD,sDAcC;IAED,IAAa,0BAA0B,GAAvC,MAAa,0BAA2B,SAAQ,gBAAM;QAQrD,YACC,EAAU,EACV,KAAa,EACoB,aAA6B,EACtB,oBAA2C,EAC/C,gBAAmC,EACxC,WAAyB;YAExD,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YALgB,kBAAa,GAAb,aAAa,CAAgB;YACtB,yBAAoB,GAApB,oBAAoB,CAAuB;YAC/C,qBAAgB,GAAhB,gBAAgB,CAAmB;YACxC,gBAAW,GAAX,WAAW,CAAc;YAIxD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACrB,CAAC;QAEQ,KAAK,CAAC,GAAG;YACjB,MAAM,QAAQ,GAAG,+BAAsB,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,EAAE,iBAAiB,EAAE,yBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC;YACzI,MAAM,MAAM,GAAG,mBAAmB,0BAA0B,CAAC,cAAc,EAAE,EAAE,CAAC;YAChF,IAAI,QAAQ,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,MAAM,KAAK,iBAAO,CAAC,QAAQ,CAAC,EAAE;gBACvG,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE;oBAC/B,MAAM,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC;oBACpF,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;iBACrG;gBAED,MAAM,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAC1C,MAAM,WAAW,GAAG,GAAG,CAAC,QAAQ,CAAC,0BAA0B,EAAE,iBAAiB,EAAE,IAAI,CAAC,CAAC;gBAEtF,MAAM,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;oBACnC,YAAY,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC;oBACvC,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW;oBAC3C,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;iBACzB,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE;oBACf,CAAA,GAAA,mBAAO,CAAA,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;oBACnC,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC;gBACvC,CAAC,CAAC,CAAC;aACH;QACF,CAAC;QAEQ,OAAO;YACf,KAAK,CAAC,OAAO,EAAE,CAAC;YAEhB,CAAA,GAAA,mBAAO,CAAA,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YACnC,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC;QACvC,CAAC;KACD,CAAA;IAhDgB,6BAAE,GAAG,6CAA6C,CAAC;IACnD,gCAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,sBAAsB,EAAE,oCAAoC,CAAC,CAAC;IAGpF,yCAAc,GAAG,CAAC,CAAC;IANtB,0BAA0B;QAWpC,WAAA,8BAAc,CAAA;QACd,WAAA,qCAAqB,CAAA;QACrB,WAAA,mCAAiB,CAAA;QACjB,WAAA,oBAAY,CAAA;OAdF,0BAA0B,CAkDtC;IAlDY,gEAA0B;IAoDvC,IAAM,wBAAwB,GAA9B,MAAM,wBAAwB;QAC7B,YACqC,gBAAmC,EACxC,WAAyB,EACxB,YAA2B;YAFvB,qBAAgB,GAAhB,gBAAgB,CAAmB;YACxC,gBAAW,GAAX,WAAW,CAAc;YACxB,iBAAY,GAAZ,YAAY,CAAe;QACxD,CAAC;QAEL,KAAK,CAAC,kBAAkB,CAAC,QAAa;YACrC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;YACpD,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,2BAA2B,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,CAAC;YAEpH,OAAO,KAAK,CAAC;QACd,CAAC;KACD,CAAA;IAbK,wBAAwB;QAE3B,WAAA,oCAAiB,CAAA;QACjB,WAAA,0BAAY,CAAA;QACZ,WAAA,4BAAa,CAAA;OAJV,wBAAwB,CAa7B;IAED,SAAS,gBAAgB,CAAC,mBAAyC,EAAE,KAAc,EAAE,KAA6B;QACjH,mBAAmB,CAAC,MAAM,CAAC,uBAAQ,CAAC,KAAK,EAAE,CAAA,GAAA,6BAAc,CAAA,CAAC,KAAK,EAAE,KAAK,CAAC,EACtE,CAAC;gBACA,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC;gBACrC,GAAG,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE;aAClB,CAAC,CACF,CAAC;IACH,CAAC;IAED,KAAK,UAAU,qBAAqB,CAAC,QAA0B,EAAE,QAAiB;QACjF,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,oBAAY,CAAC,CAAC;QAC/C,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,8BAAc,CAAC,CAAC;QACnD,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAa,CAAC,CAAC;QACjD,MAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,mCAAoB,CAAC,CAAC;QAC/D,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,0BAAe,CAAC,CAAC;QAErD,MAAM,SAAS,GAAG,CAAC,YAAY,CAAC,aAAa,CAAC,eAAO,CAAC,CAAC;QACvD,MAAM,IAAI,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,eAAO,EAAE,IAAI,CAAC,CAAC;QACxD,IAAI,SAAS,EAAE;YACd,oDAAoD;YACpD,MAAM,CAAA,GAAA,eAAO,CAAA,CAAC,GAAG,CAAC,CAAC;SACnB;QACD,IAAI,CAAC,IAAI,EAAE;YACV,yFAAyF;YAEzF,IAAI,QAAQ,EAAE;gBACb,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;aACrD;YAED,OAAO,cAAc,CAAC,cAAc,CAAC,2CAA4B,CAAC,CAAC;SACnE;QAED,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAChD,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACrD,IAAI,MAAoB,CAAC;QACzB,IAAI,IAAI,EAAE;YACT,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7E;aAAM;YACN,MAAM,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SAClC;QAED,IAAI,MAAM,CAAC,UAAU,EAAE;YACtB,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;SAC9C;QAED,MAAM,OAAO,GAAG,IAAI,+BAAe,CAAC,WAAW,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;QACnE,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAEzB,MAAM,SAAS,GAAG,KAAK,EAAE,KAAa,EAAiB,EAAE;YACxD,IAAI;gBACH,MAAM,gBAAgB,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;gBACpE,MAAM,eAAe,CAAC,aAAa,CAAC,CAAC,IAAI,kCAAgB,CAAC,SAAS,EAAE,gBAAgB,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE;oBAC9G,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,gBAAgB,EAAE,YAAY,EAAE,KAAK,CAAC;oBAC9D,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,kBAAkB,EAAE,cAAc,EAAE,KAAK,CAAC;oBACtE,iBAAiB,EAAE,IAAI;iBACvB,CAAC,CAAC;gBACH,MAAM,kBAAkB,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;gBAEjD,IAAI,QAAQ,EAAE;oBACb,MAAM,eAAe,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;iBACrD;qBAAM;oBACN,MAAM,aAAa,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,gBAAgB,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;iBAC1F;aACD;YAAC,OAAO,KAAK,EAAE;gBACf,gBAAgB,CAAC,mBAAmB,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;aACrE;QACF,CAAC,CAAC;QAEF,MAAM,eAAe,CAAC,WAAW,CAAC,OAAO,EAAE;YAC1C,iBAAiB,EAAE,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC;YAC5D,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;gBAClC,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAC5B,MAAM,eAAe,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBACjD,IAAI,OAAO,EAAE;oBACZ,SAAS,CAAC,KAAK,CAAC,CAAC;iBACjB;YACF,CAAC;SACD,CAAC,CAAC;IACJ,CAAC;IAED,2BAAgB,CAAC,eAAe,CAAC;QAChC,EAAE,EAAE,2BAAmB;QACvB,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;YAC3B,MAAM,qBAAqB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC9C,CAAC;KACD,CAAC,CAAC;IAEH,2BAAgB,CAAC,eAAe,CAAC;QAChC,EAAE,EAAE,6BAAqB;QACzB,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;YAC3B,MAAM,qBAAqB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC7C,CAAC;KACD,CAAC,CAAC;IAEI,MAAM,aAAa,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QACjE,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,mCAAoB,CAAC,CAAC;QAE/D,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAChD,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACrD,IAAI,CAAC,IAAI,EAAE;YACV,OAAO;SACP;QAED,MAAM,eAAe,CAAC,WAAW,CAAC,IAAI,EAAE;YACvC,iBAAiB,EAAE,KAAK,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,CAAC;YACzD,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;gBAClC,IAAI,OAAO,EAAE;oBACZ,MAAM,cAAc,GAAG,IAAI,CAAC,MAAO,CAAC,QAAQ,CAAC;oBAC7C,MAAM,cAAc,GAAG,SAAS,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;oBACjE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,cAAc,CAAC,QAAQ,EAAE,EAAE;wBAC3D,IAAI;4BACH,MAAM,eAAe,CAAC,aAAa,CAAC,CAAC,IAAI,kCAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC,EAAE;gCAC1F,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,gBAAgB,EAAE,mBAAmB,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;gCAChF,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,kBAAkB,EAAE,qBAAqB,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;6BACxF,CAAC,CAAC;4BACH,MAAM,kBAAkB,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;yBACjD;wBAAC,OAAO,CAAC,EAAE;4BACX,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;yBAC7B;qBACD;iBACD;gBACD,MAAM,eAAe,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/C,CAAC;SACD,CAAC,CAAC;IACJ,CAAC,CAAC;IA/BW,QAAA,aAAa,iBA+BxB;IAEK,MAAM,sBAAsB,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QAC1E,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QACtE,IAAI,KAAK,CAAC,MAAM,EAAE;YACjB,MAAM,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,gDAAuB,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,wBAAc,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,qCAAqB,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;SACzK;IACF,CAAC,CAAC;IANW,QAAA,sBAAsB,0BAMjC;IAEK,MAAM,iBAAiB,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QACrE,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QAEtE,IAAI,KAAK,CAAC,MAAM,EAAE;YACjB,MAAM,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,gDAAuB,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,wBAAc,CAAC,EAAE,QAAQ,CAAC,GAAG,CAAC,qCAAqB,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SAC1K;IACF,CAAC,CAAC;IAPW,QAAA,iBAAiB,qBAO5B;IAEF,IAAI,eAAe,GAAG,KAAK,CAAC;IACrB,MAAM,eAAe,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QACnE,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,MAAM,eAAe,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAC9C,eAAe,GAAG,KAAK,CAAC;SACxB;IACF,CAAC,CAAC;IAPW,QAAA,eAAe,mBAO1B;IAEK,MAAM,cAAc,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QAClE,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,MAAM,eAAe,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC7C,eAAe,GAAG,IAAI,CAAC;SACvB;IACF,CAAC,CAAC;IAPW,QAAA,cAAc,kBAOzB;IAEW,QAAA,mBAAmB,GAAG,mBAAmB,CAAC;IACvD,MAAM,mBAAmB,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QAChE,MAAM,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,iBAAW,CAAC,CAAC;QAC7C,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,oBAAY,CAAC,CAAC;QAC/C,MAAM,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,4BAAkB,CAAC,CAAC;QAC3D,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,2BAAgB,CAAC,CAAC;QAEvD,MAAM,OAAO,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjD,MAAM,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC;QAEvE,MAAM,GAAG,GAAG,IAAI,sCAAuB,EAAE,CAAC;QAE1C,MAAM,eAAe,CAAC,YAAY,CAAC;YAClC,QAAQ,iBAAyB;YACjC,KAAK,EAAE,GAAG;YACV,WAAW,EAAE,gBAAK;YAClB,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,kBAAkB,EAAE,aAAa,CAAC;SACtD,EAAE,KAAK,EAAC,QAAQ,EAAC,EAAE;YACnB,OAAO,CAAA,GAAA,gBAAQ,CAAA,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,IAAI,EAAE;gBAC5D,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;oBACtC,OAAO;iBACP;gBAED,4DAA4D;gBAC5D,8BAA8B;gBAC9B,IAAI,gBAAK,EAAE;oBACV,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;oBAEzF,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;wBACtC,OAAO;qBACP;oBAED,MAAM,mBAAmB,GAAG,EAAE,GAAG,gBAAQ,CAAC,EAAE,CAAC,CAAC,kEAAkE;oBAChH,MAAM,6BAA6B,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI,GAAG,mBAAmB,CAAC;oBAE1F,+EAA+E;oBAC/E,IAAI,6BAA6B,IAAI,yBAAmB,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;wBAa3E,KAAK,UAAU,oBAAoB,CAAC,QAAa,EAAE,MAAoC,EAAE,SAA6B;4BACrH,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;4BAC5D,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;gCACtC,MAAM,CAAC,KAAK,EAAE,CAAC;gCACf,OAAO;6BACP;4BAED,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gCAC5C,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC;gCAEpC,MAAM,WAAW,GAAG,IAAI,2BAAe,EAAE,CAAC;gCAC1C,WAAW,CAAC,GAAG,CAAC,CAAA,GAAA,wBAAY,CAAA,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gCAEpD,IAAI,QAAQ,GAAG,KAAK,CAAC;gCACrB,WAAW,CAAC,GAAG,CAAC,CAAA,GAAA,wBAAY,CAAA,CAAC,GAAG,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC;gCAErD,WAAW,CAAC,GAAG,CAAC,CAAA,GAAA,iBAAI,CAAA,CAAC,GAAG,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,GAAG,EAAE;oCAC5D,WAAW,CAAC,OAAO,EAAE,CAAC;oCACtB,MAAM,EAAE,CAAC;gCACV,CAAC,CAAC,CAAC,CAAC;gCAEJ,CAAA,GAAA,qBAAY,CAAA,CAAC,YAAY,EAAE;oCAC1B,MAAM,EAAE,IAAI,CAAC,EAAE;wCACd,IAAI,CAAC,QAAQ,EAAE;4CACd,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;4CAC1B,cAAc,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;yCACzE;oCACF,CAAC;oCACD,OAAO,EAAE,KAAK,CAAC,EAAE;wCAChB,WAAW,CAAC,OAAO,EAAE,CAAC;wCACtB,MAAM,CAAC,KAAK,CAAC,CAAC;oCACf,CAAC;oCACD,KAAK,EAAE,GAAG,EAAE;wCACX,WAAW,CAAC,OAAO,EAAE,CAAC;wCACtB,OAAO,EAAE,CAAC;oCACX,CAAC;iCACD,CAAC,CAAC;4BACJ,CAAC,CAAC,CAAC;wBACJ,CAAC;wBAED,KAAK,UAAU,sBAAsB,CAAC,QAAa,EAAE,MAAoC,EAAE,SAA6B;4BACvH,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;4BACtD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;gCACvC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gCACpC,cAAc,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;6BACnF;4BAED,MAAM,CAAC,KAAK,EAAE,CAAC;wBAChB,CAAC;wBAED,KAAK,UAAU,YAAY,CAAC,YAAuC,EAAE,IAA2B,EAAE,SAA6B;4BAE9H,kBAAkB;4BAClB,SAAS,CAAC,eAAe,EAAE,CAAC;4BAC5B,SAAS,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC,sBAAsB;4BACzD,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC;4BAE3C,oBAAoB;4BACpB,MAAM,UAAU,GAAG,MAAM,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;4BACjF,MAAM,gBAAgB,GAAG,MAAM,UAAU,CAAC,cAAc,EAAE,CAAC;4BAE3D,gDAAgD;4BAChD,IAAI,IAAI,CAAC,IAAI,GAAG,gBAAQ,CAAC,EAAE,EAAE;gCAC5B,OAAO,oBAAoB,CAAC,IAAI,CAAC,QAAQ,EAAE,gBAAgB,EAAE,SAAS,CAAC,CAAC;6BACxE;4BAED,gEAAgE;4BAChE,OAAO,sBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,gBAAgB,EAAE,SAAS,CAAC,CAAC;wBAC3E,CAAC;wBAED,KAAK,UAAU,cAAc,CAAC,MAA6B,EAAE,YAAuC,EAAE,SAA6B;4BAClI,IAAI,MAAM,CAAC,QAAQ,EAAE;gCACpB,SAAS,CAAC,UAAU,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;gCAE5E,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,QAAQ,EAAE;oCACpC,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;wCACtC,OAAO;qCACP;oCAED,IAAI,KAAK,CAAC,MAAM,EAAE;wCACjB,MAAM,YAAY,CAAC,YAAY,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;qCACnD;yCAAM;wCACN,MAAM,WAAW,GAAG,MAAM,YAAY,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;wCACxF,MAAM,mBAAmB,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;wCAEjG,MAAM,cAAc,CAAC,mBAAmB,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;qCAClE;iCACD;6BACD;wBACF,CAAC;wBAED,SAAS,cAAc,CAAC,IAAY,EAAE,QAAgB,EAAE,eAAuB,EAAE,SAA6B;4BAC7G,SAAS,CAAC,mBAAmB,IAAI,eAAe,CAAC;4BACjD,SAAS,CAAC,oBAAoB,IAAI,eAAe,CAAC;4BAElD,MAAM,wBAAwB,GAAG,SAAS,CAAC,oBAAoB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,CAAC;4BAE9G,aAAa;4BACb,IAAI,OAAe,CAAC;4BACpB,IAAI,QAAQ,GAAG,gBAAQ,CAAC,EAAE,EAAE;gCAC3B,IAAI,SAAS,CAAC,UAAU,KAAK,CAAC,EAAE;oCAC/B,OAAO,GAAG,IAAI,CAAC;iCACf;qCAAM;oCACN,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,2BAA2B,EAAE,0BAA0B,EAAE,SAAS,CAAC,eAAe,EAAE,SAAS,CAAC,UAAU,EAAE,gBAAQ,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC;iCAChL;6BACD;4BAED,aAAa;iCACR;gCACJ,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,uBAAuB,EAAE,yBAAyB,EAAE,IAAI,EAAE,gBAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC,EAAE,gBAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,gBAAQ,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC;6BACnN;4BAED,2DAA2D;4BAC3D,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;wBAC/C,CAAC;wBAED,IAAI;4BACH,MAAM,YAAY,GAA8B,MAAM,MAAM,CAAC,mBAAmB,EAAE,CAAC;4BACnF,MAAM,SAAS,GAAuB;gCACrC,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;gCACrB,iBAAiB,EAAE,IAAI,qBAAa,CAAgB,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;gCAEjH,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCACpC,eAAe,EAAE,CAAC;gCAElB,oBAAoB,EAAE,CAAC;gCACvB,mBAAmB,EAAE,CAAC;6BACtB,CAAC;4BAEF,IAAI,IAAI,CAAC,WAAW,EAAE;gCACrB,MAAM,YAAY,GAAG,MAAM,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;gCACxF,MAAM,cAAc,CAAC,IAAI,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;6BACpD;iCAAM;gCACN,MAAM,YAAY,CAAC,YAAY,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;6BAClD;4BAED,SAAS,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;yBACtC;wBAAC,OAAO,KAAK,EAAE;4BACf,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;4BACvB,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,kEAAkE;yBAChF;qBACD;oBAED,mEAAmE;yBAC9D,IAAI,IAAI,CAAC,MAAM,EAAE;wBACrB,IAAI,WAA6B,CAAC;wBAClC,IAAI;4BACH,WAAW,GAAG,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,mBAAmB,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;yBAClH;wBAAC,OAAO,KAAK,EAAE;4BACf,WAAW,GAAG,oBAAU,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;yBACrD;wBAED,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE;4BACvC,CAAA,GAAA,qBAAe,CAAA,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;yBACxC;qBACD;iBACD;gBAED,+DAA+D;qBAC1D;oBACJ,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC;oBAEhD,IAAI,UAAU,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,iBAAiB,CAAC,iBAAiB,CAAC,iBAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,iBAAiB,CAAC,eAAe,CAAC,iBAAO,CAAC,IAAI,CAAC,CAAC;oBAC5J,UAAU,GAAG,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;oBAE/D,MAAM,WAAW,GAAG,MAAM,iBAAiB,CAAC,cAAc,CAAC;wBAC1D,oBAAoB,EAAE,CAAC,iBAAO,CAAC,IAAI,CAAC;wBACpC,SAAS,EAAE,CAAA,GAAA,4BAAmB,CAAA,CAAC,GAAG,CAAC,QAAQ,CAAC,gBAAgB,EAAE,UAAU,CAAC,CAAC;wBAC1E,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,uBAAuB,EAAE,0BAA0B,CAAC;wBACxE,UAAU;qBACV,CAAC,CAAC;oBAEH,IAAI,WAAW,EAAE;wBAChB,MAAM,eAAe,CAAC,aAAa,CAAC,CAAC,IAAI,kCAAgB,CAAC,YAAY,CAAC,QAAQ,EAAE,WAAW,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE;4BAChI,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,kBAAkB,EAAE,cAAc,EAAE,YAAY,CAAC,IAAI,CAAC;4BAC9E,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,qBAAqB,EAAE,iBAAiB,EAAE,YAAY,CAAC,IAAI,CAAC;4BACxF,gBAAgB,kBAA2B;yBAC3C,CAAC,CAAC;qBACH;yBAAM;wBACN,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,4HAA4H;qBAC1I;iBACD;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEF,2BAAgB,CAAC,eAAe,CAAC;QAChC,EAAE,EAAE,2BAAmB;QACvB,OAAO,EAAE,mBAAmB;KAC5B,CAAC,CAAC;IAEI,MAAM,gBAAgB,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QACpE,MAAM,gBAAgB,GAAG,QAAQ,CAAC,GAAG,CAAC,oCAAiB,CAAC,CAAC;QACzD,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,oBAAY,CAAC,CAAC;QAC/C,MAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,mCAAoB,CAAC,CAAC;QAC/D,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,8BAAc,CAAC,CAAC;QACnD,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,qCAAqB,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,QAAQ,CAAC,GAAG,CAAC,iCAAmB,CAAC,CAAC;QAE7D,MAAM,OAAO,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjD,MAAM,OAAO,GAAG,SAAS,CAAC,eAAe,CAAC,MAAM,gBAAgB,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC1F,MAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAEvE,IAAI;YACH,+CAA+C;YAC/C,MAAM,iBAAiB,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAC,WAAW,EAAC,EAAE;gBAE3E,IAAI,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,WAAW,CAAC,QAAQ,EAAE,IAAI,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE;oBACvH,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,gBAAgB,EAAE,wDAAwD,CAAC,CAAC,CAAC;iBAC1G;gBACD,MAAM,eAAe,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBAE/D,cAAc;gBACd,IAAI,MAAoB,CAAC;gBACzB,IAAI,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,EAAE;oBACrE,MAAM,GAAG,OAAO,CAAC,MAAO,CAAC;iBACzB;qBAAM;oBACN,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,MAAO,CAAC;iBACzD;gBAED,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,QAAQ,EAAuB,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBAC1G,MAAM,UAAU,GAAG,wBAAwB,CAAC,eAAe,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,eAAe,CAAC,WAAW,EAAE,cAAc,EAAE,eAAe,EAAE,EAAE,iBAAiB,CAAC,CAAC;gBAE9L,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;YACpD,CAAC,CAAC,CAAC,CAAC;YAEJ,IAAI,iBAAiB,CAAC,MAAM,IAAI,CAAC,EAAE;gBAClC,iBAAiB;gBACjB,IAAI,eAAe,EAAE;oBACpB,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,kCAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBACxG,MAAM,OAAO,GAAG;wBACf,aAAa,EAAE,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,gBAAgB,EAAE,OAAO,EAAE,CAAC,iEAAiE,CAAC,EAAE,EAAE,kBAAkB,EAAE,iBAAiB,CAAC,MAAM,CAAC;4BAChN,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,oBAAoB,EAAE,OAAO,EAAE,CAAC,6DAA6D,CAAC,EAAE,EAAE,YAAY,EAAE,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBAClM,SAAS,EAAE,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,cAAc,EAAE,OAAO,EAAE,CAAC,iEAAiE,CAAC,EAAE,EAAE,gBAAgB,EAAE,iBAAiB,CAAC,MAAM,CAAC;4BACxM,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,6DAA6D,CAAC,EAAE,EAAE,UAAU,EAAE,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;qBAC9L,CAAC;oBACF,MAAM,eAAe,CAAC,aAAa,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;iBAChE;qBAAM;oBACN,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,kCAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;oBACxH,MAAM,OAAO,GAAG;wBACf,aAAa,EAAE,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,iBAAiB,EAAE,OAAO,EAAE,CAAC,kEAAkE,CAAC,EAAE,EAAE,mBAAmB,EAAE,iBAAiB,CAAC,MAAM,CAAC;4BACnN,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,qBAAqB,EAAE,OAAO,EAAE,CAAC,8DAA8D,CAAC,EAAE,EAAE,aAAa,EAAE,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;wBACrM,SAAS,EAAE,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,cAAc,EAAE,OAAO,EAAE,CAAC,kEAAkE,CAAC,EAAE,EAAE,gBAAgB,EAAE,iBAAiB,CAAC,MAAM,CAAC;4BACzM,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,8DAA8D,CAAC,EAAE,EAAE,UAAU,EAAE,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;qBAC/L,CAAC;oBACF,MAAM,eAAe,CAAC,aAAa,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;iBAChE;gBAED,MAAM,IAAI,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC;gBAClC,MAAM,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC1C,IAAI,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;oBACnC,MAAM,IAAI,GAAG,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACtD,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;wBAC9B,MAAM,aAAa,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;qBAC5G;iBACD;aACD;SACD;QAAC,OAAO,CAAC,EAAE;YACX,OAAO,CAAC,mBAAmB,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,EAAE,4EAA4E,EAAE,CAAA,GAAA,wBAAe,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACvK;gBAAS;YACT,IAAI,eAAe,EAAE;gBACpB,6CAA6C;gBAC7C,MAAM,eAAe,CAAC,SAAS,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;gBAC3C,eAAe,GAAG,KAAK,CAAC;aACxB;SACD;IACF,CAAC,CAAC;IA5EW,QAAA,gBAAgB,oBA4E3B;IAEK,MAAM,4BAA4B,GAAG,KAAK,EAAE,QAA0B,EAAE,EAAE;QAChF,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,8BAAc,CAAC,CAAC;QACnD,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAgB,CAAC,CAAC;QACvD,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAE/C,MAAM,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC3E,QAAQ,EAAE,CAAC,CAAC,QAAQ;YACpB,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE;SAChC,CAAC,CAAC,CAAC,CAAC;IACN,CAAC,CAAC;IATW,QAAA,4BAA4B,gCASvC","file":"fileActions.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { isWindows, isWeb } from 'vs/base/common/platform';\nimport * as extpath from 'vs/base/common/extpath';\nimport { extname, basename } from 'vs/base/common/path';\nimport * as resources from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { toErrorMessage } from 'vs/base/common/errorMessage';\nimport { Action } from 'vs/base/common/actions';\nimport { DisposableStore, dispose, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { VIEWLET_ID, IFilesConfiguration, VIEW_ID } from 'vs/workbench/contrib/files/common/files';\nimport { ByteSize, IFileService, IFileStatWithMetadata } from 'vs/platform/files/common/files';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IQuickInputService, ItemActivation } from 'vs/platform/quickinput/common/quickInput';\nimport { IViewletService } from 'vs/workbench/services/viewlet/browser/viewlet';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { REVEAL_IN_EXPLORER_COMMAND_ID, SAVE_ALL_IN_GROUP_COMMAND_ID, NEW_UNTITLED_FILE_COMMAND_ID } from 'vs/workbench/contrib/files/browser/fileCommands';\nimport { ITextModelService, ITextModelContentProvider } from 'vs/editor/common/services/resolverService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { ICommandService, CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { FileAccess, Schemas } from 'vs/base/common/network';\nimport { IDialogService, IConfirmationResult, getFileNamesMessage, IFileDialogService } from 'vs/platform/dialogs/common/dialogs';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { Constants } from 'vs/base/common/uint';\nimport { CLOSE_EDITORS_AND_GROUP_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { coalesce } from 'vs/base/common/arrays';\nimport { ExplorerItem, NewExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { getErrorMessage } from 'vs/base/common/errors';\nimport { WebFileSystemAccess, triggerDownload } from 'vs/base/browser/dom';\nimport { mnemonicButtonLabel } from 'vs/base/common/labels';\nimport { IFilesConfigurationService } from 'vs/workbench/services/filesConfiguration/common/filesConfigurationService';\nimport { IWorkingCopyService } from 'vs/workbench/services/workingCopy/common/workingCopyService';\nimport { IWorkingCopy } from 'vs/workbench/services/workingCopy/common/workingCopy';\nimport { RunOnceWorker, sequence, timeout } from 'vs/base/common/async';\nimport { IWorkingCopyFileService } from 'vs/workbench/services/workingCopy/common/workingCopyFileService';\nimport { once } from 'vs/base/common/functional';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { IViewsService } from 'vs/workbench/common/views';\nimport { trim, rtrim } from 'vs/base/common/strings';\nimport { IProgressService, IProgressStep, ProgressLocation } from 'vs/platform/progress/common/progress';\nimport { CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { ResourceFileEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { IExplorerService } from 'vs/workbench/contrib/files/browser/files';\nimport { listenStream } from 'vs/base/common/stream';\nimport { EditorOverride } from 'vs/platform/editor/common/editor';\nimport { ContributedEditorPriority, IEditorOverrideService } from 'vs/workbench/services/editor/common/editorOverrideService';\n\nexport const NEW_FILE_COMMAND_ID = 'explorer.newFile';\nexport const NEW_FILE_LABEL = nls.localize('newFile', \"New File\");\nexport const NEW_FOLDER_COMMAND_ID = 'explorer.newFolder';\nexport const NEW_FOLDER_LABEL = nls.localize('newFolder', \"New Folder\");\nexport const TRIGGER_RENAME_LABEL = nls.localize('rename', \"Rename\");\nexport const MOVE_FILE_TO_TRASH_LABEL = nls.localize('delete', \"Delete\");\nexport const COPY_FILE_LABEL = nls.localize('copyFile', \"Copy\");\nexport const PASTE_FILE_LABEL = nls.localize('pasteFile', \"Paste\");\nexport const FileCopiedContext = new RawContextKey<boolean>('fileCopied', false);\nexport const DOWNLOAD_LABEL = nls.localize('download', \"Download...\");\nconst CONFIRM_DELETE_SETTING_KEY = 'explorer.confirmDelete';\nconst MAX_UNDO_FILE_SIZE = 5000000; // 5mb\n\nfunction onError(notificationService: INotificationService, error: any): void {\n\tif (error.message === 'string') {\n\t\terror = error.message;\n\t}\n\n\tnotificationService.error(toErrorMessage(error, false));\n}\n\nasync function refreshIfSeparator(value: string, explorerService: IExplorerService): Promise<void> {\n\tif (value && ((value.indexOf('/') >= 0) || (value.indexOf('\\\\') >= 0))) {\n\t\t// New input contains separator, multiple resources will get created workaround for #68204\n\t\tawait explorerService.refresh();\n\t}\n}\n\nasync function deleteFiles(explorerService: IExplorerService, workingCopyFileService: IWorkingCopyFileService, dialogService: IDialogService, configurationService: IConfigurationService, elements: ExplorerItem[], useTrash: boolean, skipConfirm = false): Promise<void> {\n\tlet primaryButton: string;\n\tif (useTrash) {\n\t\tprimaryButton = isWindows ? nls.localize('deleteButtonLabelRecycleBin', \"&&Move to Recycle Bin\") : nls.localize({ key: 'deleteButtonLabelTrash', comment: ['&& denotes a mnemonic'] }, \"&&Move to Trash\");\n\t} else {\n\t\tprimaryButton = nls.localize({ key: 'deleteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete\");\n\t}\n\n\t// Handle dirty\n\tconst distinctElements = resources.distinctParents(elements, e => e.resource);\n\tconst dirtyWorkingCopies = new Set<IWorkingCopy>();\n\tfor (const distinctElement of distinctElements) {\n\t\tfor (const dirtyWorkingCopy of workingCopyFileService.getDirty(distinctElement.resource)) {\n\t\t\tdirtyWorkingCopies.add(dirtyWorkingCopy);\n\t\t}\n\t}\n\tlet confirmed = true;\n\tif (dirtyWorkingCopies.size) {\n\t\tlet message: string;\n\t\tif (distinctElements.length > 1) {\n\t\t\tmessage = nls.localize('dirtyMessageFilesDelete', \"You are deleting files with unsaved changes. Do you want to continue?\");\n\t\t} else if (distinctElements[0].isDirectory) {\n\t\t\tif (dirtyWorkingCopies.size === 1) {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderOneDelete', \"You are deleting a folder {0} with unsaved changes in 1 file. Do you want to continue?\", distinctElements[0].name);\n\t\t\t} else {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderDelete', \"You are deleting a folder {0} with unsaved changes in {1} files. Do you want to continue?\", distinctElements[0].name, dirtyWorkingCopies.size);\n\t\t\t}\n\t\t} else {\n\t\t\tmessage = nls.localize('dirtyMessageFileDelete', \"You are deleting {0} with unsaved changes. Do you want to continue?\", distinctElements[0].name);\n\t\t}\n\n\t\tconst response = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\ttype: 'warning',\n\t\t\tdetail: nls.localize('dirtyWarning', \"Your changes will be lost if you don't save them.\"),\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (!response.confirmed) {\n\t\t\tconfirmed = false;\n\t\t} else {\n\t\t\tskipConfirm = true;\n\t\t}\n\t}\n\n\t// Check if file is dirty in editor and save it to avoid data loss\n\tif (!confirmed) {\n\t\treturn;\n\t}\n\n\tlet confirmation: IConfirmationResult;\n\t// We do not support undo of folders, so in that case the delete action is irreversible\n\tconst deleteDetail = distinctElements.some(e => e.isDirectory) ? nls.localize('irreversible', \"This action is irreversible!\") :\n\t\tdistinctElements.length > 1 ? nls.localize('restorePlural', \"You can restore these files using the Undo command\") : nls.localize('restore', \"You can restore this file using the Undo command\");\n\n\t// Check if we need to ask for confirmation at all\n\tif (skipConfirm || (useTrash && configurationService.getValue<boolean>(CONFIRM_DELETE_SETTING_KEY) === false)) {\n\t\tconfirmation = { confirmed: true };\n\t}\n\n\t// Confirm for moving to trash\n\telse if (useTrash) {\n\t\tlet { message, detail } = getMoveToTrashMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tif (isWindows) {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoBinFiles', \"You can restore these files from the Recycle Bin.\") : nls.localize('undoBin', \"You can restore this file from the Recycle Bin.\");\n\t\t} else {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoTrashFiles', \"You can restore these files from the Trash.\") : nls.localize('undoTrash', \"You can restore this file from the Trash.\");\n\t\t}\n\n\t\tconfirmation = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton,\n\t\t\tcheckbox: {\n\t\t\t\tlabel: nls.localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t},\n\t\t\ttype: 'question'\n\t\t});\n\t}\n\n\t// Confirm for deleting permanently\n\telse {\n\t\tlet { message, detail } = getDeleteMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tdetail += deleteDetail;\n\t\tconfirmation = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton,\n\t\t\ttype: 'warning'\n\t\t});\n\t}\n\n\t// Check for confirmation checkbox\n\tif (confirmation.confirmed && confirmation.checkboxChecked === true) {\n\t\tawait configurationService.updateValue(CONFIRM_DELETE_SETTING_KEY, false);\n\t}\n\n\t// Check for confirmation\n\tif (!confirmation.confirmed) {\n\t\treturn;\n\t}\n\n\t// Call function\n\ttry {\n\t\tconst resourceFileEdits = distinctElements.map(e => new ResourceFileEdit(e.resource, undefined, { recursive: true, folder: e.isDirectory, skipTrashBin: !useTrash, maxSize: MAX_UNDO_FILE_SIZE }));\n\t\tconst options = {\n\t\t\tundoLabel: distinctElements.length > 1 ? nls.localize({ key: 'deleteBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Delete {0} files\", distinctElements.length) : nls.localize({ key: 'deleteFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Delete {0}\", distinctElements[0].name),\n\t\t\tprogressLabel: distinctElements.length > 1 ? nls.localize({ key: 'deletingBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Deleting {0} files\", distinctElements.length) : nls.localize({ key: 'deletingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Deleting {0}\", distinctElements[0].name),\n\t\t};\n\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t} catch (error) {\n\n\t\t// Handle error to delete file(s) from a modal confirmation dialog\n\t\tlet errorMessage: string;\n\t\tlet detailMessage: string | undefined;\n\t\tlet primaryButton: string;\n\t\tif (useTrash) {\n\t\t\terrorMessage = isWindows ? nls.localize('binFailed', \"Failed to delete using the Recycle Bin. Do you want to permanently delete instead?\") : nls.localize('trashFailed', \"Failed to delete using the Trash. Do you want to permanently delete instead?\");\n\t\t\tdetailMessage = deleteDetail;\n\t\t\tprimaryButton = nls.localize({ key: 'deletePermanentlyButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete Permanently\");\n\t\t} else {\n\t\t\terrorMessage = toErrorMessage(error, false);\n\t\t\tprimaryButton = nls.localize({ key: 'retryButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Retry\");\n\t\t}\n\n\t\tconst res = await dialogService.confirm({\n\t\t\tmessage: errorMessage,\n\t\t\tdetail: detailMessage,\n\t\t\ttype: 'warning',\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (res.confirmed) {\n\t\t\tif (useTrash) {\n\t\t\t\tuseTrash = false; // Delete Permanently\n\t\t\t}\n\n\t\t\tskipConfirm = true;\n\n\t\t\treturn deleteFiles(explorerService, workingCopyFileService, dialogService, configurationService, elements, useTrash, skipConfirm);\n\t\t}\n\t}\n}\n\nfunction getMoveToTrashMessage(distinctElements: ExplorerItem[]): { message: string, detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageFilesAndDirectories', \"Are you sure you want to delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultipleDirectories', \"Are you sure you want to delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultiple', \"Are you sure you want to delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory) {\n\t\treturn { message: nls.localize('confirmMoveTrashMessageFolder', \"Are you sure you want to delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmMoveTrashMessageFile', \"Are you sure you want to delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction getDeleteMessage(distinctElements: ExplorerItem[]): { message: string, detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageFilesAndDirectories', \"Are you sure you want to permanently delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmDeleteMessageMultipleDirectories', \"Are you sure you want to permanently delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageMultiple', \"Are you sure you want to permanently delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory) {\n\t\treturn { message: nls.localize('confirmDeleteMessageFolder', \"Are you sure you want to permanently delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmDeleteMessageFile', \"Are you sure you want to permanently delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction containsBothDirectoryAndFile(distinctElements: ExplorerItem[]): boolean {\n\tconst directory = distinctElements.find(element => element.isDirectory);\n\tconst file = distinctElements.find(element => !element.isDirectory);\n\n\treturn !!directory && !!file;\n}\n\n\nexport function findValidPasteFileTarget(explorerService: IExplorerService, targetFolder: ExplorerItem, fileToPaste: { resource: URI, isDirectory?: boolean, allowOverwrite: boolean }, incrementalNaming: 'simple' | 'smart'): URI {\n\tlet name = resources.basenameOrAuthority(fileToPaste.resource);\n\n\tlet candidate = resources.joinPath(targetFolder.resource, name);\n\twhile (true && !fileToPaste.allowOverwrite) {\n\t\tif (!explorerService.findClosest(candidate)) {\n\t\t\tbreak;\n\t\t}\n\n\t\tname = incrementFileName(name, !!fileToPaste.isDirectory, incrementalNaming);\n\t\tcandidate = resources.joinPath(targetFolder.resource, name);\n\t}\n\n\treturn candidate;\n}\n\nexport function incrementFileName(name: string, isFolder: boolean, incrementalNaming: 'simple' | 'smart'): string {\n\tif (incrementalNaming === 'simple') {\n\t\tlet namePrefix = name;\n\t\tlet extSuffix = '';\n\t\tif (!isFolder) {\n\t\t\textSuffix = extname(name);\n\t\t\tnamePrefix = basename(name, extSuffix);\n\t\t}\n\n\t\t// name copy 5(.txt) => name copy 6(.txt)\n\t\t// name copy(.txt) => name copy 2(.txt)\n\t\tconst suffixRegex = /^(.+ copy)( \\d+)?$/;\n\t\tif (suffixRegex.test(namePrefix)) {\n\t\t\treturn namePrefix.replace(suffixRegex, (match, g1?, g2?) => {\n\t\t\t\tlet number = (g2 ? parseInt(g2) : 1);\n\t\t\t\treturn number === 0\n\t\t\t\t\t? `${g1}`\n\t\t\t\t\t: (number < Constants.MAX_SAFE_SMALL_INTEGER\n\t\t\t\t\t\t? `${g1} ${number + 1}`\n\t\t\t\t\t\t: `${g1}${g2} copy`);\n\t\t\t}) + extSuffix;\n\t\t}\n\n\t\t// name(.txt) => name copy(.txt)\n\t\treturn `${namePrefix} copy${extSuffix}`;\n\t}\n\n\tconst separators = '[\\\\.\\\\-_]';\n\tconst maxNumber = Constants.MAX_SAFE_SMALL_INTEGER;\n\n\t// file.1.txt=>file.2.txt\n\tlet suffixFileRegex = RegExp('(.*' + separators + ')(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(suffixFileRegex)) {\n\t\treturn name.replace(suffixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tlet number = parseInt(g2);\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0') + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.file.txt=>2.file.txt\n\tlet prefixFileRegex = RegExp('(\\\\d+)(' + separators + '.*)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileRegex)) {\n\t\treturn name.replace(prefixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tlet number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2 + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.txt=>2.txt\n\tlet prefixFileNoNameRegex = RegExp('(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileNoNameRegex)) {\n\t\treturn name.replace(prefixFileNoNameRegex, (match, g1?, g2?) => {\n\t\t\tlet number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2\n\t\t\t\t: `${g1}.1${g2}`;\n\t\t});\n\t}\n\n\t// file.txt=>file.1.txt\n\tconst lastIndexOfDot = name.lastIndexOf('.');\n\tif (!isFolder && lastIndexOfDot >= 0) {\n\t\treturn `${name.substr(0, lastIndexOfDot)}.1${name.substr(lastIndexOfDot)}`;\n\t}\n\n\t// 123 => 124\n\tlet noNameNoExtensionRegex = RegExp('(\\\\d+)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noNameNoExtensionRegex)) {\n\t\treturn name.replace(noNameNoExtensionRegex, (match, g1?) => {\n\t\t\tlet number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0')\n\t\t\t\t: `${g1}.1`;\n\t\t});\n\t}\n\n\t// file => file1\n\t// file1 => file2\n\tlet noExtensionRegex = RegExp('(.*)(\\\\d*)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noExtensionRegex)) {\n\t\treturn name.replace(noExtensionRegex, (match, g1?, g2?) => {\n\t\t\tlet number = parseInt(g2);\n\t\t\tif (isNaN(number)) {\n\t\t\t\tnumber = 0;\n\t\t\t}\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0')\n\t\t\t\t: `${g1}${g2}.1`;\n\t\t});\n\t}\n\n\t// folder.1=>folder.2\n\tif (isFolder && name.match(/(\\d+)$/)) {\n\t\treturn name.replace(/(\\d+)$/, (match, ...groups) => {\n\t\t\tlet number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0')\n\t\t\t\t: `${groups[0]}.1`;\n\t\t});\n\t}\n\n\t// 1.folder=>2.folder\n\tif (isFolder && name.match(/^(\\d+)/)) {\n\t\treturn name.replace(/^(\\d+)(.*)$/, (match, ...groups) => {\n\t\t\tlet number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0') + groups[1]\n\t\t\t\t: `${groups[0]}${groups[1]}.1`;\n\t\t});\n\t}\n\n\t// file/folder=>file.1/folder.1\n\treturn `${name}.1`;\n}\n\n// Global Compare with\nexport class GlobalCompareResourcesAction extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.compareFileWith';\n\tstatic readonly LABEL = nls.localize('globalCompareFile', \"Compare Active File With...\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@IEditorOverrideService private readonly editorOverrideService: IEditorOverrideService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst activeInput = this.editorService.activeEditor;\n\t\tconst activeResource = EditorResourceAccessor.getOriginalUri(activeInput);\n\t\tif (activeResource && this.textModelService.canHandleResource(activeResource)) {\n\n\t\t\t// Define a one-time override that has highest priority\n\t\t\t// and matches every resource to be able to create a\n\t\t\t// diff editor to show the comparison.\n\t\t\tconst editorOverrideDisposable = this.editorOverrideService.registerContributionPoint('*', {\n\t\t\t\tid: GlobalCompareResourcesAction.ID,\n\t\t\t\tlabel: GlobalCompareResourcesAction.LABEL,\n\t\t\t\tpriority: ContributedEditorPriority.exclusive,\n\t\t\t\tdetail: '',\n\t\t\t\tdescribes: () => false\n\t\t\t}, {}, resource => {\n\n\t\t\t\t// Only once!\n\t\t\t\teditorOverrideDisposable.dispose();\n\n\t\t\t\t// Open editor as diff if the selected editor resource\n\t\t\t\t// can be handled by the text model service\n\t\t\t\tif (this.textModelService.canHandleResource(resource)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: this.editorService.createEditorInput({\n\t\t\t\t\t\t\tleftResource: activeResource,\n\t\t\t\t\t\t\trightResource: resource,\n\t\t\t\t\t\t\toptions: { override: EditorOverride.DISABLED, pinned: true }\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Otherwise stay on current resource\n\t\t\t\treturn {\n\t\t\t\t\teditor: this.editorService.createEditorInput({\n\t\t\t\t\t\tresource: activeResource,\n\t\t\t\t\t\toptions: { override: EditorOverride.DISABLED, pinned: true }\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tonce(this.quickInputService.onHide)((async () => {\n\t\t\t\tawait timeout(0); // prevent race condition with editor\n\t\t\t\teditorOverrideDisposable.dispose();\n\t\t\t}));\n\n\t\t\t// Bring up quick access\n\t\t\tthis.quickInputService.quickAccess.show('', { itemActivation: ItemActivation.SECOND });\n\t\t}\n\t}\n}\n\nexport class ToggleAutoSaveAction extends Action {\n\tstatic readonly ID = 'workbench.action.toggleAutoSave';\n\tstatic readonly LABEL = nls.localize('toggleAutoSave', \"Toggle Auto Save\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IFilesConfigurationService private readonly filesConfigurationService: IFilesConfigurationService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride run(): Promise<void> {\n\t\treturn this.filesConfigurationService.toggleAutoSave();\n\t}\n}\n\nexport abstract class BaseSaveAllAction extends Action {\n\tprivate lastDirtyState: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@INotificationService private notificationService: INotificationService,\n\t\t@IWorkingCopyService private readonly workingCopyService: IWorkingCopyService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.lastDirtyState = this.workingCopyService.hasDirty;\n\t\tthis.enabled = this.lastDirtyState;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprotected abstract doRun(context: unknown): Promise<void>;\n\n\tprivate registerListeners(): void {\n\n\t\t// update enablement based on working copy changes\n\t\tthis._register(this.workingCopyService.onDidChangeDirty(workingCopy => this.updateEnablement(workingCopy)));\n\t}\n\n\tprivate updateEnablement(workingCopy: IWorkingCopy): void {\n\t\tconst hasDirty = workingCopy.isDirty() || this.workingCopyService.hasDirty;\n\t\tif (this.lastDirtyState !== hasDirty) {\n\t\t\tthis.enabled = hasDirty;\n\t\t\tthis.lastDirtyState = this.enabled;\n\t\t}\n\t}\n\n\toverride async run(context?: unknown): Promise<void> {\n\t\ttry {\n\t\t\tawait this.doRun(context);\n\t\t} catch (error) {\n\t\t\tonError(this.notificationService, error);\n\t\t}\n\t}\n}\n\nexport class SaveAllInGroupAction extends BaseSaveAllAction {\n\n\tstatic readonly ID = 'workbench.files.action.saveAllInGroup';\n\tstatic readonly LABEL = nls.localize('saveAllInGroup', \"Save All in Group\");\n\n\toverride get class(): string {\n\t\treturn 'explorer-action ' + Codicon.saveAll.classNames;\n\t}\n\n\tprotected doRun(context: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(SAVE_ALL_IN_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class CloseGroupAction extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.closeGroup';\n\tstatic readonly LABEL = nls.localize('closeGroup', \"Close Group\");\n\n\tconstructor(id: string, label: string, @ICommandService private readonly commandService: ICommandService) {\n\t\tsuper(id, label, Codicon.closeAll.classNames);\n\t}\n\n\toverride run(context?: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(CLOSE_EDITORS_AND_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class FocusFilesExplorer extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.focusFilesExplorer';\n\tstatic readonly LABEL = nls.localize('focusFilesExplorer', \"Focus on Files Explorer\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IViewletService private readonly viewletService: IViewletService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tawait this.viewletService.openViewlet(VIEWLET_ID, true);\n\t}\n}\n\nexport class ShowActiveFileInExplorer extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.showActiveFileInExplorer';\n\tstatic readonly LABEL = nls.localize('showInExplorer', \"Reveal Active File in Side Bar\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ICommandService private readonly commandService: ICommandService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource) {\n\t\t\tthis.commandService.executeCommand(REVEAL_IN_EXPLORER_COMMAND_ID, resource);\n\t\t}\n\t}\n}\n\nexport class ShowOpenedFileInNewWindow extends Action {\n\n\tstatic readonly ID = 'workbench.action.files.showOpenedFileInNewWindow';\n\tstatic readonly LABEL = nls.localize('openFileInNewWindow', \"Open Active File in New Window\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IFileService private readonly fileService: IFileService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst fileResource = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (fileResource) {\n\t\t\tif (this.fileService.canHandleResource(fileResource)) {\n\t\t\t\tthis.hostService.openWindow([{ fileUri: fileResource }], { forceNewWindow: true });\n\t\t\t} else {\n\t\t\t\tthis.notificationService.info(nls.localize('openFileToShowInNewWindow.unsupportedschema', \"The active editor must contain an openable resource.\"));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function validateFileName(item: ExplorerItem, name: string): { content: string, severity: Severity } | null {\n\t// Produce a well formed file name\n\tname = getWellFormedFileName(name);\n\n\t// Name not provided\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn {\n\t\t\tcontent: nls.localize('emptyFileNameError', \"A file or folder name must be provided.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\t// Relative paths only\n\tif (name[0] === '/' || name[0] === '\\\\') {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameStartsWithSlashError', \"A file or folder name cannot start with a slash.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tconst names = coalesce(name.split(/[\\\\/]/));\n\tconst parent = item.parent;\n\n\tif (name !== item.name) {\n\t\t// Do not allow to overwrite existing file\n\t\tconst child = parent?.getChild(name);\n\t\tif (child && child !== item) {\n\t\t\treturn {\n\t\t\t\tcontent: nls.localize('fileNameExistsError', \"A file or folder **{0}** already exists at this location. Please choose a different name.\", name),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\t}\n\n\t// Invalid File name\n\tconst windowsBasenameValidity = item.resource.scheme === Schemas.file && isWindows;\n\tif (names.some((folderName) => !extpath.isValidBasename(folderName, windowsBasenameValidity))) {\n\t\treturn {\n\t\t\tcontent: nls.localize('invalidFileNameError', \"The name **{0}** is not valid as a file or folder name. Please choose a different name.\", trimLongName(name)),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tif (names.some(name => /^\\s|\\s$/.test(name))) {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameWhitespaceWarning', \"Leading or trailing whitespace detected in file or folder name.\"),\n\t\t\tseverity: Severity.Warning\n\t\t};\n\t}\n\n\treturn null;\n}\n\nfunction trimLongName(name: string): string {\n\tif (name?.length > 255) {\n\t\treturn `${name.substr(0, 255)}...`;\n\t}\n\n\treturn name;\n}\n\nexport function getWellFormedFileName(filename: string): string {\n\tif (!filename) {\n\t\treturn filename;\n\t}\n\n\t// Trim tabs\n\tfilename = trim(filename, '\\t');\n\n\t// Remove trailing dots and slashes\n\tfilename = rtrim(filename, '.');\n\tfilename = rtrim(filename, '/');\n\tfilename = rtrim(filename, '\\\\');\n\n\treturn filename;\n}\n\nexport class CompareWithClipboardAction extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.compareWithClipboard';\n\tstatic readonly LABEL = nls.localize('compareWithClipboard', \"Compare Active File with Clipboard\");\n\n\tprivate registrationDisposal: IDisposable | undefined;\n\tprivate static SCHEME_COUNTER = 0;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@IFileService private readonly fileService: IFileService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tconst scheme = `clipboardCompare${CompareWithClipboardAction.SCHEME_COUNTER++}`;\n\t\tif (resource && (this.fileService.canHandleResource(resource) || resource.scheme === Schemas.untitled)) {\n\t\t\tif (!this.registrationDisposal) {\n\t\t\t\tconst provider = this.instantiationService.createInstance(ClipboardContentProvider);\n\t\t\t\tthis.registrationDisposal = this.textModelService.registerTextModelContentProvider(scheme, provider);\n\t\t\t}\n\n\t\t\tconst name = resources.basename(resource);\n\t\t\tconst editorLabel = nls.localize('clipboardComparisonLabel', \"Clipboard  {0}\", name);\n\n\t\t\tawait this.editorService.openEditor({\n\t\t\t\tleftResource: resource.with({ scheme }),\n\t\t\t\trightResource: resource, label: editorLabel,\n\t\t\t\toptions: { pinned: true }\n\t\t\t}).finally(() => {\n\t\t\t\tdispose(this.registrationDisposal);\n\t\t\t\tthis.registrationDisposal = undefined;\n\t\t\t});\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tdispose(this.registrationDisposal);\n\t\tthis.registrationDisposal = undefined;\n\t}\n}\n\nclass ClipboardContentProvider implements ITextModelContentProvider {\n\tconstructor(\n\t\t@IClipboardService private readonly clipboardService: IClipboardService,\n\t\t@IModeService private readonly modeService: IModeService,\n\t\t@IModelService private readonly modelService: IModelService\n\t) { }\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel> {\n\t\tconst text = await this.clipboardService.readText();\n\t\tconst model = this.modelService.createModel(text, this.modeService.createByFilepathOrFirstLine(resource), resource);\n\n\t\treturn model;\n\t}\n}\n\nfunction onErrorWithRetry(notificationService: INotificationService, error: unknown, retry: () => Promise<unknown>): void {\n\tnotificationService.prompt(Severity.Error, toErrorMessage(error, false),\n\t\t[{\n\t\t\tlabel: nls.localize('retry', \"Retry\"),\n\t\t\trun: () => retry()\n\t\t}]\n\t);\n}\n\nasync function openExplorerAndCreate(accessor: ServicesAccessor, isFolder: boolean): Promise<void> {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst viewsService = accessor.get(IViewsService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst commandService = accessor.get(ICommandService);\n\n\tconst wasHidden = !viewsService.isViewVisible(VIEW_ID);\n\tconst view = await viewsService.openView(VIEW_ID, true);\n\tif (wasHidden) {\n\t\t// Give explorer some time to resolve itself #111218\n\t\tawait timeout(500);\n\t}\n\tif (!view) {\n\t\t// Can happen in empty workspace case (https://github.com/microsoft/vscode/issues/100604)\n\n\t\tif (isFolder) {\n\t\t\tthrow new Error('Open a folder or workspace first.');\n\t\t}\n\n\t\treturn commandService.executeCommand(NEW_UNTITLED_FILE_COMMAND_ID);\n\t}\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tlet folder: ExplorerItem;\n\tif (stat) {\n\t\tfolder = stat.isDirectory ? stat : (stat.parent || explorerService.roots[0]);\n\t} else {\n\t\tfolder = explorerService.roots[0];\n\t}\n\n\tif (folder.isReadonly) {\n\t\tthrow new Error('Parent folder is readonly.');\n\t}\n\n\tconst newStat = new NewExplorerItem(fileService, folder, isFolder);\n\tfolder.addChild(newStat);\n\n\tconst onSuccess = async (value: string): Promise<void> => {\n\t\ttry {\n\t\t\tconst resourceToCreate = resources.joinPath(folder.resource, value);\n\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(undefined, resourceToCreate, { folder: isFolder })], {\n\t\t\t\tundoLabel: nls.localize('createBulkEdit', \"Create {0}\", value),\n\t\t\t\tprogressLabel: nls.localize('creatingBulkEdit', \"Creating {0}\", value),\n\t\t\t\tconfirmBeforeUndo: true\n\t\t\t});\n\t\t\tawait refreshIfSeparator(value, explorerService);\n\n\t\t\tif (isFolder) {\n\t\t\t\tawait explorerService.select(resourceToCreate, true);\n\t\t\t} else {\n\t\t\t\tawait editorService.openEditor({ resource: resourceToCreate, options: { pinned: true } });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tonErrorWithRetry(notificationService, error, () => onSuccess(value));\n\t\t}\n\t};\n\n\tawait explorerService.setEditable(newStat, {\n\t\tvalidationMessage: value => validateFileName(newStat, value),\n\t\tonFinish: async (value, success) => {\n\t\t\tfolder.removeChild(newStat);\n\t\t\tawait explorerService.setEditable(newStat, null);\n\t\t\tif (success) {\n\t\t\t\tonSuccess(value);\n\t\t\t}\n\t\t}\n\t});\n}\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FILE_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, false);\n\t}\n});\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FOLDER_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, true);\n\t}\n});\n\nexport const renameHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tif (!stat) {\n\t\treturn;\n\t}\n\n\tawait explorerService.setEditable(stat, {\n\t\tvalidationMessage: value => validateFileName(stat, value),\n\t\tonFinish: async (value, success) => {\n\t\t\tif (success) {\n\t\t\t\tconst parentResource = stat.parent!.resource;\n\t\t\t\tconst targetResource = resources.joinPath(parentResource, value);\n\t\t\t\tif (stat.resource.toString() !== targetResource.toString()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(stat.resource, targetResource)], {\n\t\t\t\t\t\t\tundoLabel: nls.localize('renameBulkEdit', \"Rename {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t\tprogressLabel: nls.localize('renamingBulkEdit', \"Renaming {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait refreshIfSeparator(value, explorerService);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tnotificationService.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait explorerService.setEditable(stat, null);\n\t\t}\n\t});\n};\n\nexport const moveFileToTrashHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), stats, true);\n\t}\n};\n\nexport const deleteFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), stats, false);\n\t}\n};\n\nlet pasteShouldMove = false;\nexport const copyFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, false);\n\t\tpasteShouldMove = false;\n\t}\n};\n\nexport const cutFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, true);\n\t\tpasteShouldMove = true;\n\t}\n};\n\nexport const DOWNLOAD_COMMAND_ID = 'explorer.download';\nconst downloadFileHandler = async (accessor: ServicesAccessor) => {\n\tconst logService = accessor.get(ILogService);\n\tconst fileService = accessor.get(IFileService);\n\tconst fileDialogService = accessor.get(IFileDialogService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst progressService = accessor.get(IProgressService);\n\n\tconst context = explorerService.getContext(true);\n\tconst explorerItems = context.length ? context : explorerService.roots;\n\n\tconst cts = new CancellationTokenSource();\n\n\tawait progressService.withProgress({\n\t\tlocation: ProgressLocation.Window,\n\t\tdelay: 800,\n\t\tcancellable: isWeb,\n\t\ttitle: nls.localize('downloadingFiles', \"Downloading\")\n\t}, async progress => {\n\t\treturn sequence(explorerItems.map(explorerItem => async () => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Web: use DOM APIs to download files with optional support\n\t\t\t// for folders and large files\n\t\t\tif (isWeb) {\n\t\t\t\tconst stat = await fileService.resolve(explorerItem.resource, { resolveMetadata: true });\n\n\t\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst maxBlobDownloadSize = 32 * ByteSize.MB; // avoid to download via blob-trick >32MB to avoid memory pressure\n\t\t\t\tconst preferFileSystemAccessWebApis = stat.isDirectory || stat.size > maxBlobDownloadSize;\n\n\t\t\t\t// Folder: use FS APIs to download files and folders if available and preferred\n\t\t\t\tif (preferFileSystemAccessWebApis && WebFileSystemAccess.supported(window)) {\n\n\t\t\t\t\tinterface IDownloadOperation {\n\t\t\t\t\t\tstartTime: number;\n\t\t\t\t\t\tprogressScheduler: RunOnceWorker<IProgressStep>;\n\n\t\t\t\t\t\tfilesTotal: number;\n\t\t\t\t\t\tfilesDownloaded: number;\n\n\t\t\t\t\t\ttotalBytesDownloaded: number;\n\t\t\t\t\t\tfileBytesDownloaded: number;\n\t\t\t\t\t}\n\n\t\t\t\t\tasync function downloadFileBuffered(resource: URI, target: FileSystemWritableFileStream, operation: IDownloadOperation): Promise<void> {\n\t\t\t\t\t\tconst contents = await fileService.readFileStream(resource);\n\t\t\t\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t\t\t\ttarget.close();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\t\t\t\tconst sourceStream = contents.value;\n\n\t\t\t\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\t\t\t\tdisposables.add(toDisposable(() => target.close()));\n\n\t\t\t\t\t\t\tlet disposed = false;\n\t\t\t\t\t\t\tdisposables.add(toDisposable(() => disposed = true));\n\n\t\t\t\t\t\t\tdisposables.add(once(cts.token.onCancellationRequested)(() => {\n\t\t\t\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\tlistenStream(sourceStream, {\n\t\t\t\t\t\t\t\tonData: data => {\n\t\t\t\t\t\t\t\t\tif (!disposed) {\n\t\t\t\t\t\t\t\t\t\ttarget.write(data.buffer);\n\t\t\t\t\t\t\t\t\t\treportProgress(contents.name, contents.size, data.byteLength, operation);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonError: error => {\n\t\t\t\t\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonEnd: () => {\n\t\t\t\t\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tasync function downloadFileUnbuffered(resource: URI, target: FileSystemWritableFileStream, operation: IDownloadOperation): Promise<void> {\n\t\t\t\t\t\tconst contents = await fileService.readFile(resource);\n\t\t\t\t\t\tif (!cts.token.isCancellationRequested) {\n\t\t\t\t\t\t\ttarget.write(contents.value.buffer);\n\t\t\t\t\t\t\treportProgress(contents.name, contents.size, contents.value.byteLength, operation);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget.close();\n\t\t\t\t\t}\n\n\t\t\t\t\tasync function downloadFile(targetFolder: FileSystemDirectoryHandle, file: IFileStatWithMetadata, operation: IDownloadOperation): Promise<void> {\n\n\t\t\t\t\t\t// Report progress\n\t\t\t\t\t\toperation.filesDownloaded++;\n\t\t\t\t\t\toperation.fileBytesDownloaded = 0; // reset for this file\n\t\t\t\t\t\treportProgress(file.name, 0, 0, operation);\n\n\t\t\t\t\t\t// Start to download\n\t\t\t\t\t\tconst targetFile = await targetFolder.getFileHandle(file.name, { create: true });\n\t\t\t\t\t\tconst targetFileWriter = await targetFile.createWritable();\n\n\t\t\t\t\t\t// For large files, write buffered using streams\n\t\t\t\t\t\tif (file.size > ByteSize.MB) {\n\t\t\t\t\t\t\treturn downloadFileBuffered(file.resource, targetFileWriter, operation);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// For small files prefer to write unbuffered to reduce overhead\n\t\t\t\t\t\treturn downloadFileUnbuffered(file.resource, targetFileWriter, operation);\n\t\t\t\t\t}\n\n\t\t\t\t\tasync function downloadFolder(folder: IFileStatWithMetadata, targetFolder: FileSystemDirectoryHandle, operation: IDownloadOperation): Promise<void> {\n\t\t\t\t\t\tif (folder.children) {\n\t\t\t\t\t\t\toperation.filesTotal += (folder.children.map(child => child.isFile)).length;\n\n\t\t\t\t\t\t\tfor (const child of folder.children) {\n\t\t\t\t\t\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (child.isFile) {\n\t\t\t\t\t\t\t\t\tawait downloadFile(targetFolder, child, operation);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconst childFolder = await targetFolder.getDirectoryHandle(child.name, { create: true });\n\t\t\t\t\t\t\t\t\tconst resolvedChildFolder = await fileService.resolve(child.resource, { resolveMetadata: true });\n\n\t\t\t\t\t\t\t\t\tawait downloadFolder(resolvedChildFolder, childFolder, operation);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction reportProgress(name: string, fileSize: number, bytesDownloaded: number, operation: IDownloadOperation): void {\n\t\t\t\t\t\toperation.fileBytesDownloaded += bytesDownloaded;\n\t\t\t\t\t\toperation.totalBytesDownloaded += bytesDownloaded;\n\n\t\t\t\t\t\tconst bytesDownloadedPerSecond = operation.totalBytesDownloaded / ((Date.now() - operation.startTime) / 1000);\n\n\t\t\t\t\t\t// Small file\n\t\t\t\t\t\tlet message: string;\n\t\t\t\t\t\tif (fileSize < ByteSize.MB) {\n\t\t\t\t\t\t\tif (operation.filesTotal === 1) {\n\t\t\t\t\t\t\t\tmessage = name;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmessage = nls.localize('downloadProgressSmallMany', \"{0} of {1} files ({2}/s)\", operation.filesDownloaded, operation.filesTotal, ByteSize.formatSize(bytesDownloadedPerSecond));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Large file\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmessage = nls.localize('downloadProgressLarge', \"{0} ({1} of {2}, {3}/s)\", name, ByteSize.formatSize(operation.fileBytesDownloaded), ByteSize.formatSize(fileSize), ByteSize.formatSize(bytesDownloadedPerSecond));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Report progress but limit to update only once per second\n\t\t\t\t\t\toperation.progressScheduler.work({ message });\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parentFolder: FileSystemDirectoryHandle = await window.showDirectoryPicker();\n\t\t\t\t\t\tconst operation: IDownloadOperation = {\n\t\t\t\t\t\t\tstartTime: Date.now(),\n\t\t\t\t\t\t\tprogressScheduler: new RunOnceWorker<IProgressStep>(steps => { progress.report(steps[steps.length - 1]); }, 1000),\n\n\t\t\t\t\t\t\tfilesTotal: stat.isDirectory ? 0 : 1, // folders increment filesTotal within downloadFolder method\n\t\t\t\t\t\t\tfilesDownloaded: 0,\n\n\t\t\t\t\t\t\ttotalBytesDownloaded: 0,\n\t\t\t\t\t\t\tfileBytesDownloaded: 0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (stat.isDirectory) {\n\t\t\t\t\t\t\tconst targetFolder = await parentFolder.getDirectoryHandle(stat.name, { create: true });\n\t\t\t\t\t\t\tawait downloadFolder(stat, targetFolder, operation);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait downloadFile(parentFolder, stat, operation);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toperation.progressScheduler.dispose();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tlogService.warn(error);\n\t\t\t\t\t\tcts.cancel(); // `showDirectoryPicker` will throw an error when the user cancels\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// File: use traditional download to circumvent browser limitations\n\t\t\t\telse if (stat.isFile) {\n\t\t\t\t\tlet bufferOrUri: Uint8Array | URI;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbufferOrUri = (await fileService.readFile(stat.resource, { limits: { size: maxBlobDownloadSize } })).value.buffer;\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tbufferOrUri = FileAccess.asBrowserUri(stat.resource);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!cts.token.isCancellationRequested) {\n\t\t\t\t\t\ttriggerDownload(bufferOrUri, stat.name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Native: use working copy file service to get at the contents\n\t\t\telse {\n\t\t\t\tprogress.report({ message: explorerItem.name });\n\n\t\t\t\tlet defaultUri = explorerItem.isDirectory ? await fileDialogService.defaultFolderPath(Schemas.file) : await fileDialogService.defaultFilePath(Schemas.file);\n\t\t\t\tdefaultUri = resources.joinPath(defaultUri, explorerItem.name);\n\n\t\t\t\tconst destination = await fileDialogService.showSaveDialog({\n\t\t\t\t\tavailableFileSystems: [Schemas.file],\n\t\t\t\t\tsaveLabel: mnemonicButtonLabel(nls.localize('downloadButton', \"Download\")),\n\t\t\t\t\ttitle: nls.localize('chooseWhereToDownload', \"Choose Where to Download\"),\n\t\t\t\t\tdefaultUri\n\t\t\t\t});\n\n\t\t\t\tif (destination) {\n\t\t\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(explorerItem.resource, destination, { overwrite: true, copy: true })], {\n\t\t\t\t\t\tundoLabel: nls.localize('downloadBulkEdit', \"Download {0}\", explorerItem.name),\n\t\t\t\t\t\tprogressLabel: nls.localize('downloadingBulkEdit', \"Downloading {0}\", explorerItem.name),\n\t\t\t\t\t\tprogressLocation: ProgressLocation.Explorer\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcts.cancel(); // User canceled a download. In case there were multiple files selected we should cancel the remainder of the prompts #86100\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}, () => cts.dispose(true));\n};\n\nCommandsRegistry.registerCommand({\n\tid: DOWNLOAD_COMMAND_ID,\n\thandler: downloadFileHandler\n});\n\nexport const pasteFileHandler = async (accessor: ServicesAccessor) => {\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst uriIdentityService = accessor.get(IUriIdentityService);\n\n\tconst context = explorerService.getContext(true);\n\tconst toPaste = resources.distinctParents(await clipboardService.readResources(), r => r);\n\tconst element = context.length ? context[0] : explorerService.roots[0];\n\n\ttry {\n\t\t// Check if target is ancestor of pasted folder\n\t\tconst sourceTargetPairs = await Promise.all(toPaste.map(async fileToPaste => {\n\n\t\t\tif (element.resource.toString() !== fileToPaste.toString() && resources.isEqualOrParent(element.resource, fileToPaste)) {\n\t\t\t\tthrow new Error(nls.localize('fileIsAncestor', \"File to paste is an ancestor of the destination folder\"));\n\t\t\t}\n\t\t\tconst fileToPasteStat = await fileService.resolve(fileToPaste);\n\n\t\t\t// Find target\n\t\t\tlet target: ExplorerItem;\n\t\t\tif (uriIdentityService.extUri.isEqual(element.resource, fileToPaste)) {\n\t\t\t\ttarget = element.parent!;\n\t\t\t} else {\n\t\t\t\ttarget = element.isDirectory ? element : element.parent!;\n\t\t\t}\n\n\t\t\tconst incrementalNaming = configurationService.getValue<IFilesConfiguration>().explorer.incrementalNaming;\n\t\t\tconst targetFile = findValidPasteFileTarget(explorerService, target, { resource: fileToPaste, isDirectory: fileToPasteStat.isDirectory, allowOverwrite: pasteShouldMove }, incrementalNaming);\n\n\t\t\treturn { source: fileToPaste, target: targetFile };\n\t\t}));\n\n\t\tif (sourceTargetPairs.length >= 1) {\n\t\t\t// Move/Copy File\n\t\t\tif (pasteShouldMove) {\n\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target));\n\t\t\t\tconst options = {\n\t\t\t\t\tprogressLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'movingBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Moving {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'movingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Moving {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target)),\n\t\t\t\t\tundoLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'moveBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Move {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'moveFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Move {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target))\n\t\t\t\t};\n\t\t\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t\t} else {\n\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target, { copy: true }));\n\t\t\t\tconst options = {\n\t\t\t\t\tprogressLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'copyingBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Copying {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'copyingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Copying {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target)),\n\t\t\t\t\tundoLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'copyBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Copy {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'copyFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Copy {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target))\n\t\t\t\t};\n\t\t\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t\t}\n\n\t\t\tconst pair = sourceTargetPairs[0];\n\t\t\tawait explorerService.select(pair.target);\n\t\t\tif (sourceTargetPairs.length === 1) {\n\t\t\t\tconst item = explorerService.findClosest(pair.target);\n\t\t\t\tif (item && !item.isDirectory) {\n\t\t\t\t\tawait editorService.openEditor({ resource: item.resource, options: { pinned: true, preserveFocus: true } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tonError(notificationService, new Error(nls.localize('fileDeleted', \"The file(s) to paste have been deleted or moved since you copied them. {0}\", getErrorMessage(e))));\n\t} finally {\n\t\tif (pasteShouldMove) {\n\t\t\t// Cut is done. Make sure to clear cut state.\n\t\t\tawait explorerService.setToCopy([], false);\n\t\t\tpasteShouldMove = false;\n\t\t}\n\t}\n};\n\nexport const openFilePreserveFocusHandler = async (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\n\tawait editorService.openEditors(stats.filter(s => !s.isDirectory).map(s => ({\n\t\tresource: s.resource,\n\t\toptions: { preserveFocus: true }\n\t})));\n};\n"]}