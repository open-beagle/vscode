{"version":3,"sources":["vs/workbench/contrib/files/browser/views/explorerViewer.ts"],"names":[],"mappings":"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","file":"explorerViewer.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport * as DOM from 'vs/base/browser/dom';\nimport * as glob from 'vs/base/common/glob';\nimport { IListVirtualDelegate, ListDragOverEffect } from 'vs/base/browser/ui/list/list';\nimport { IProgressService, ProgressLocation, IProgressStep, IProgress } from 'vs/platform/progress/common/progress';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IFileService, FileKind, FileOperationError, FileOperationResult, FileSystemProviderCapabilities, ByteSize } from 'vs/platform/files/common/files';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { IDisposable, Disposable, dispose, toDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { IFileLabelOptions, IResourceLabel, ResourceLabels } from 'vs/workbench/browser/labels';\nimport { ITreeNode, ITreeFilter, TreeVisibility, IAsyncDataSource, ITreeSorter, ITreeDragAndDrop, ITreeDragOverReaction, TreeDragOverBubble } from 'vs/base/browser/ui/tree/tree';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IFilesConfiguration, VIEW_ID } from 'vs/workbench/contrib/files/common/files';\nimport { dirname, joinPath, basename, distinctParents } from 'vs/base/common/resources';\nimport { InputBox, MessageType } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { localize } from 'vs/nls';\nimport { attachInputBoxStyler } from 'vs/platform/theme/common/styler';\nimport { once } from 'vs/base/common/functional';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { equals, deepClone } from 'vs/base/common/objects';\nimport * as path from 'vs/base/common/path';\nimport { ExplorerItem, NewExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { compareFileNamesDefault, compareFileExtensionsDefault } from 'vs/base/common/comparers';\nimport { fillResourceDataTransfers, CodeDataTransfers, extractResources, containsDragType } from 'vs/workbench/browser/dnd';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IDragAndDropData, DataTransfers } from 'vs/base/browser/dnd';\nimport { Schemas } from 'vs/base/common/network';\nimport { NativeDragAndDropData, ExternalElementsDragAndDropData, ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { isMacintosh, isWeb } from 'vs/base/common/platform';\nimport { IDialogService, IConfirmation, getFileNamesMessage } from 'vs/platform/dialogs/common/dialogs';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { IWorkspaceEditingService } from 'vs/workbench/services/workspaces/common/workspaceEditing';\nimport { URI } from 'vs/base/common/uri';\nimport { RunOnceWorker } from 'vs/base/common/async';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IWorkspaceFolderCreationData } from 'vs/platform/workspaces/common/workspaces';\nimport { findValidPasteFileTarget } from 'vs/workbench/contrib/files/browser/fileActions';\nimport { FuzzyScore, createMatches } from 'vs/base/common/filters';\nimport { Emitter, Event, EventMultiplexer } from 'vs/base/common/event';\nimport { ITreeCompressionDelegate } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { ICompressibleTreeRenderer } from 'vs/base/browser/ui/tree/objectTree';\nimport { ICompressedTreeNode } from 'vs/base/browser/ui/tree/compressedObjectTreeModel';\nimport { VSBuffer, newWriteableBufferStream } from 'vs/base/common/buffer';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { isNumber } from 'vs/base/common/types';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IEditableData } from 'vs/workbench/common/views';\nimport { IEditorInput } from 'vs/workbench/common/editor';\nimport { CancellationTokenSource, CancellationToken } from 'vs/base/common/cancellation';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { ResourceFileEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { IExplorerService } from 'vs/workbench/contrib/files/browser/files';\n\nexport class ExplorerDelegate implements IListVirtualDelegate<ExplorerItem> {\n\n\tstatic readonly ITEM_HEIGHT = 22;\n\n\tgetHeight(element: ExplorerItem): number {\n\t\treturn ExplorerDelegate.ITEM_HEIGHT;\n\t}\n\n\tgetTemplateId(element: ExplorerItem): string {\n\t\treturn FilesRenderer.ID;\n\t}\n}\n\nexport const explorerRootErrorEmitter = new Emitter<URI>();\nexport class ExplorerDataSource implements IAsyncDataSource<ExplorerItem | ExplorerItem[], ExplorerItem> {\n\n\tconstructor(\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService\n\t) { }\n\n\thasChildren(element: ExplorerItem | ExplorerItem[]): boolean {\n\t\treturn Array.isArray(element) || element.isDirectory;\n\t}\n\n\tgetChildren(element: ExplorerItem | ExplorerItem[]): Promise<ExplorerItem[]> {\n\t\tif (Array.isArray(element)) {\n\t\t\treturn Promise.resolve(element);\n\t\t}\n\n\t\tconst sortOrder = this.explorerService.sortOrder;\n\t\tconst promise = element.fetchChildren(sortOrder).then(undefined, e => {\n\n\t\t\tif (element instanceof ExplorerItem && element.isRoot) {\n\t\t\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\t\t\t// Single folder create a dummy explorer item to show error\n\t\t\t\t\tconst placeholder = new ExplorerItem(element.resource, this.fileService, undefined, false);\n\t\t\t\t\tplaceholder.isError = true;\n\t\t\t\t\treturn [placeholder];\n\t\t\t\t} else {\n\t\t\t\t\texplorerRootErrorEmitter.fire(element.resource);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Do not show error for roots since we already use an explorer decoration to notify user\n\t\t\t\tthis.notificationService.error(e);\n\t\t\t}\n\n\t\t\treturn []; // we could not resolve any children because of an error\n\t\t});\n\n\t\tthis.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Explorer,\n\t\t\tdelay: this.layoutService.isRestored() ? 800 : 1500 // reduce progress visibility when still restoring\n\t\t}, _progress => promise);\n\n\t\treturn promise;\n\t}\n}\n\nexport interface ICompressedNavigationController {\n\treadonly current: ExplorerItem;\n\treadonly currentId: string;\n\treadonly items: ExplorerItem[];\n\treadonly labels: HTMLElement[];\n\treadonly index: number;\n\treadonly count: number;\n\treadonly onDidChange: Event<void>;\n\tprevious(): void;\n\tnext(): void;\n\tfirst(): void;\n\tlast(): void;\n\tsetIndex(index: number): void;\n\tupdateCollapsed(collapsed: boolean): void;\n}\n\nexport class CompressedNavigationController implements ICompressedNavigationController, IDisposable {\n\n\tstatic ID = 0;\n\n\tprivate _index: number;\n\tprivate _labels!: HTMLElement[];\n\tprivate _updateLabelDisposable: IDisposable;\n\n\tget index(): number { return this._index; }\n\tget count(): number { return this.items.length; }\n\tget current(): ExplorerItem { return this.items[this._index]!; }\n\tget currentId(): string { return `${this.id}_${this.index}`; }\n\tget labels(): HTMLElement[] { return this._labels; }\n\n\tprivate _onDidChange = new Emitter<void>();\n\treadonly onDidChange = this._onDidChange.event;\n\n\tconstructor(private id: string, readonly items: ExplorerItem[], templateData: IFileTemplateData, private depth: number, private collapsed: boolean) {\n\t\tthis._index = items.length - 1;\n\n\t\tthis.updateLabels(templateData);\n\t\tthis._updateLabelDisposable = templateData.label.onDidRender(() => this.updateLabels(templateData));\n\t}\n\n\tprivate updateLabels(templateData: IFileTemplateData): void {\n\t\tthis._labels = Array.from(templateData.container.querySelectorAll('.label-name')) as HTMLElement[];\n\t\tlet parents = '';\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tconst ariaLabel = parents.length ? `${this.items[i].name}, compact, ${parents}` : this.items[i].name;\n\t\t\tthis.labels[i].setAttribute('aria-label', ariaLabel);\n\t\t\tthis.labels[i].setAttribute('aria-level', `${this.depth + i}`);\n\t\t\tparents = parents.length ? `${this.items[i].name} ${parents}` : this.items[i].name;\n\t\t}\n\t\tthis.updateCollapsed(this.collapsed);\n\n\t\tif (this._index < this.labels.length) {\n\t\t\tthis.labels[this._index].classList.add('active');\n\t\t}\n\t}\n\n\tprevious(): void {\n\t\tif (this._index <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setIndex(this._index - 1);\n\t}\n\n\tnext(): void {\n\t\tif (this._index >= this.items.length - 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setIndex(this._index + 1);\n\t}\n\n\tfirst(): void {\n\t\tif (this._index === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setIndex(0);\n\t}\n\n\tlast(): void {\n\t\tif (this._index === this.items.length - 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setIndex(this.items.length - 1);\n\t}\n\n\tsetIndex(index: number): void {\n\t\tif (index < 0 || index >= this.items.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.labels[this._index].classList.remove('active');\n\t\tthis._index = index;\n\t\tthis.labels[this._index].classList.add('active');\n\n\t\tthis._onDidChange.fire();\n\t}\n\n\tupdateCollapsed(collapsed: boolean): void {\n\t\tthis.collapsed = collapsed;\n\t\tfor (let i = 0; i < this.labels.length; i++) {\n\t\t\tthis.labels[i].setAttribute('aria-expanded', collapsed ? 'false' : 'true');\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis._onDidChange.dispose();\n\t\tthis._updateLabelDisposable.dispose();\n\t}\n}\n\nexport interface IFileTemplateData {\n\telementDisposable: IDisposable;\n\tlabel: IResourceLabel;\n\tcontainer: HTMLElement;\n}\n\nexport class FilesRenderer implements ICompressibleTreeRenderer<ExplorerItem, FuzzyScore, IFileTemplateData>, IListAccessibilityProvider<ExplorerItem>, IDisposable {\n\tstatic readonly ID = 'file';\n\n\tprivate config: IFilesConfiguration;\n\tprivate configListener: IDisposable;\n\tprivate compressedNavigationControllers = new Map<ExplorerItem, CompressedNavigationController>();\n\n\tprivate _onDidChangeActiveDescendant = new EventMultiplexer<void>();\n\treadonly onDidChangeActiveDescendant = this._onDidChangeActiveDescendant.event;\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels,\n\t\tprivate updateWidth: (stat: ExplorerItem) => void,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService\n\t) {\n\t\tthis.config = this.configurationService.getValue<IFilesConfiguration>();\n\t\tthis.configListener = this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('explorer')) {\n\t\t\t\tthis.config = this.configurationService.getValue();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('treeAriaLabel', \"Files Explorer\");\n\t}\n\n\tget templateId(): string {\n\t\treturn FilesRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): IFileTemplateData {\n\t\tconst elementDisposable = Disposable.None;\n\t\tconst label = this.labels.create(container, { supportHighlights: true });\n\n\t\treturn { elementDisposable, label, container };\n\t}\n\n\trenderElement(node: ITreeNode<ExplorerItem, FuzzyScore>, index: number, templateData: IFileTemplateData): void {\n\t\ttemplateData.elementDisposable.dispose();\n\t\tconst stat = node.element;\n\t\tconst editableData = this.explorerService.getEditableData(stat);\n\n\t\ttemplateData.label.element.classList.remove('compressed');\n\n\t\t// File Label\n\t\tif (!editableData) {\n\t\t\ttemplateData.label.element.style.display = 'flex';\n\t\t\ttemplateData.elementDisposable = this.renderStat(stat, stat.name, undefined, node.filterData, templateData);\n\t\t}\n\n\t\t// Input Box\n\t\telse {\n\t\t\ttemplateData.label.element.style.display = 'none';\n\t\t\ttemplateData.elementDisposable = this.renderInputBox(templateData.container, stat, editableData);\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ExplorerItem>, FuzzyScore>, index: number, templateData: IFileTemplateData, height: number | undefined): void {\n\t\ttemplateData.elementDisposable.dispose();\n\n\t\tconst stat = node.element.elements[node.element.elements.length - 1];\n\t\tconst editable = node.element.elements.filter(e => this.explorerService.isEditable(e));\n\t\tconst editableData = editable.length === 0 ? undefined : this.explorerService.getEditableData(editable[0]);\n\n\t\t// File Label\n\t\tif (!editableData) {\n\t\t\ttemplateData.label.element.classList.add('compressed');\n\t\t\ttemplateData.label.element.style.display = 'flex';\n\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst id = `compressed-explorer_${CompressedNavigationController.ID++}`;\n\n\t\t\tconst label = node.element.elements.map(e => e.name);\n\t\t\tdisposables.add(this.renderStat(stat, label, id, node.filterData, templateData));\n\n\t\t\tconst compressedNavigationController = new CompressedNavigationController(id, node.element.elements, templateData, node.depth, node.collapsed);\n\t\t\tdisposables.add(compressedNavigationController);\n\t\t\tthis.compressedNavigationControllers.set(stat, compressedNavigationController);\n\n\t\t\t// accessibility\n\t\t\tdisposables.add(this._onDidChangeActiveDescendant.add(compressedNavigationController.onDidChange));\n\n\t\t\tdomEvent(templateData.container, 'mousedown')(e => {\n\t\t\t\tconst result = getIconLabelNameFromHTMLElement(e.target);\n\n\t\t\t\tif (result) {\n\t\t\t\t\tcompressedNavigationController.setIndex(result.index);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\n\t\t\tdisposables.add(toDisposable(() => this.compressedNavigationControllers.delete(stat)));\n\n\t\t\ttemplateData.elementDisposable = disposables;\n\t\t}\n\n\t\t// Input Box\n\t\telse {\n\t\t\ttemplateData.label.element.classList.remove('compressed');\n\t\t\ttemplateData.label.element.style.display = 'none';\n\t\t\ttemplateData.elementDisposable = this.renderInputBox(templateData.container, editable[0], editableData);\n\t\t}\n\t}\n\n\tprivate renderStat(stat: ExplorerItem, label: string | string[], domId: string | undefined, filterData: FuzzyScore | undefined, templateData: IFileTemplateData): IDisposable {\n\t\ttemplateData.label.element.style.display = 'flex';\n\t\tconst extraClasses = ['explorer-item'];\n\t\tif (this.explorerService.isCut(stat)) {\n\t\t\textraClasses.push('cut');\n\t\t}\n\n\t\ttemplateData.label.setResource({ resource: stat.resource, name: label }, {\n\t\t\tfileKind: stat.isRoot ? FileKind.ROOT_FOLDER : stat.isDirectory ? FileKind.FOLDER : FileKind.FILE,\n\t\t\textraClasses,\n\t\t\tfileDecorations: this.config.explorer.decorations,\n\t\t\tmatches: createMatches(filterData),\n\t\t\tseparator: this.labelService.getSeparator(stat.resource.scheme, stat.resource.authority),\n\t\t\tdomId\n\t\t});\n\n\t\treturn templateData.label.onDidRender(() => {\n\t\t\ttry {\n\t\t\t\tthis.updateWidth(stat);\n\t\t\t} catch (e) {\n\t\t\t\t// noop since the element might no longer be in the tree, no update of width necessery\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate renderInputBox(container: HTMLElement, stat: ExplorerItem, editableData: IEditableData): IDisposable {\n\n\t\t// Use a file label only for the icon next to the input box\n\t\tconst label = this.labels.create(container);\n\t\tconst extraClasses = ['explorer-item', 'explorer-item-edited'];\n\t\tconst fileKind = stat.isRoot ? FileKind.ROOT_FOLDER : stat.isDirectory ? FileKind.FOLDER : FileKind.FILE;\n\t\tconst labelOptions: IFileLabelOptions = { hidePath: true, hideLabel: true, fileKind, extraClasses };\n\n\t\tconst parent = stat.name ? dirname(stat.resource) : stat.resource;\n\t\tconst value = stat.name || '';\n\n\t\tlabel.setFile(joinPath(parent, value || ' '), labelOptions); // Use icon for ' ' if name is empty.\n\n\t\t// hack: hide label\n\t\t(label.element.firstElementChild as HTMLElement).style.display = 'none';\n\n\t\t// Input field for name\n\t\tconst inputBox = new InputBox(label.element, this.contextViewService, {\n\t\t\tvalidationOptions: {\n\t\t\t\tvalidation: (value) => {\n\t\t\t\t\tconst message = editableData.validationMessage(value);\n\t\t\t\t\tif (!message || message.severity !== Severity.Error) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcontent: message.content,\n\t\t\t\t\t\tformatContent: true,\n\t\t\t\t\t\ttype: MessageType.ERROR\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tariaLabel: localize('fileInputAriaLabel', \"Type file name. Press Enter to confirm or Escape to cancel.\")\n\t\t});\n\t\tconst styler = attachInputBoxStyler(inputBox, this.themeService);\n\n\t\tconst lastDot = value.lastIndexOf('.');\n\n\t\tinputBox.value = value;\n\t\tinputBox.focus();\n\t\tinputBox.select({ start: 0, end: lastDot > 0 && !stat.isDirectory ? lastDot : value.length });\n\n\t\tconst done = once((success: boolean, finishEditing: boolean) => {\n\t\t\tlabel.element.style.display = 'none';\n\t\t\tconst value = inputBox.value;\n\t\t\tdispose(toDispose);\n\t\t\tlabel.element.remove();\n\t\t\tif (finishEditing) {\n\t\t\t\teditableData.onFinish(value, success);\n\t\t\t}\n\t\t});\n\n\t\tconst showInputBoxNotification = () => {\n\t\t\tif (inputBox.isInputValid()) {\n\t\t\t\tconst message = editableData.validationMessage(inputBox.value);\n\t\t\t\tif (message) {\n\t\t\t\t\tinputBox.showMessage({\n\t\t\t\t\t\tcontent: message.content,\n\t\t\t\t\t\tformatContent: true,\n\t\t\t\t\t\ttype: message.severity === Severity.Info ? MessageType.INFO : message.severity === Severity.Warning ? MessageType.WARNING : MessageType.ERROR\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tinputBox.hideMessage();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tshowInputBoxNotification();\n\n\t\tconst toDispose = [\n\t\t\tinputBox,\n\t\t\tinputBox.onDidChange(value => {\n\t\t\t\tlabel.setFile(joinPath(parent, value || ' '), labelOptions); // update label icon while typing!\n\t\t\t}),\n\t\t\tDOM.addStandardDisposableListener(inputBox.inputElement, DOM.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\t\tif (e.equals(KeyCode.Enter)) {\n\t\t\t\t\tif (!inputBox.validate()) {\n\t\t\t\t\t\tdone(true, true);\n\t\t\t\t\t}\n\t\t\t\t} else if (e.equals(KeyCode.Escape)) {\n\t\t\t\t\tdone(false, true);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tDOM.addStandardDisposableListener(inputBox.inputElement, DOM.EventType.KEY_UP, (e: IKeyboardEvent) => {\n\t\t\t\tshowInputBoxNotification();\n\t\t\t}),\n\t\t\tDOM.addDisposableListener(inputBox.inputElement, DOM.EventType.BLUR, () => {\n\t\t\t\tdone(inputBox.isInputValid(), true);\n\t\t\t}),\n\t\t\tlabel,\n\t\t\tstyler\n\t\t];\n\n\t\treturn toDisposable(() => {\n\t\t\tdone(false, false);\n\t\t});\n\t}\n\n\tdisposeElement(element: ITreeNode<ExplorerItem, FuzzyScore>, index: number, templateData: IFileTemplateData): void {\n\t\ttemplateData.elementDisposable.dispose();\n\t}\n\n\tdisposeCompressedElements(node: ITreeNode<ICompressedTreeNode<ExplorerItem>, FuzzyScore>, index: number, templateData: IFileTemplateData): void {\n\t\ttemplateData.elementDisposable.dispose();\n\t}\n\n\tdisposeTemplate(templateData: IFileTemplateData): void {\n\t\ttemplateData.elementDisposable.dispose();\n\t\ttemplateData.label.dispose();\n\t}\n\n\tgetCompressedNavigationController(stat: ExplorerItem): ICompressedNavigationController | undefined {\n\t\treturn this.compressedNavigationControllers.get(stat);\n\t}\n\n\t// IAccessibilityProvider\n\n\tgetAriaLabel(element: ExplorerItem): string {\n\t\treturn element.name;\n\t}\n\n\tgetAriaLevel(element: ExplorerItem): number {\n\t\t// We need to comput aria level on our own since children of compact folders will otherwise have an incorrect level\t#107235\n\t\tlet depth = 0;\n\t\tlet parent = element.parent;\n\t\twhile (parent) {\n\t\t\tparent = parent.parent;\n\t\t\tdepth++;\n\t\t}\n\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tdepth = depth + 1;\n\t\t}\n\n\t\treturn depth;\n\t}\n\n\tgetActiveDescendantId(stat: ExplorerItem): string | undefined {\n\t\tconst compressedNavigationController = this.compressedNavigationControllers.get(stat);\n\t\treturn compressedNavigationController?.currentId;\n\t}\n\n\tdispose(): void {\n\t\tthis.configListener.dispose();\n\t}\n}\n\ninterface CachedParsedExpression {\n\toriginal: glob.IExpression;\n\tparsed: glob.ParsedExpression;\n}\n\n/**\n * Respectes files.exclude setting in filtering out content from the explorer.\n * Makes sure that visible editors are always shown in the explorer even if they are filtered out by settings.\n */\nexport class FilesFilter implements ITreeFilter<ExplorerItem, FuzzyScore> {\n\tprivate hiddenExpressionPerRoot = new Map<string, CachedParsedExpression>();\n\tprivate editorsAffectingFilter = new Set<IEditorInput>();\n\tprivate _onDidChange = new Emitter<void>();\n\tprivate toDispose: IDisposable[] = [];\n\n\tconstructor(\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tthis.toDispose.push(this.contextService.onDidChangeWorkspaceFolders(() => this.updateConfiguration()));\n\t\tthis.toDispose.push(this.configurationService.onDidChangeConfiguration((e) => {\n\t\t\tif (e.affectsConfiguration('files.exclude')) {\n\t\t\t\tthis.updateConfiguration();\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(this.editorService.onDidVisibleEditorsChange(() => {\n\t\t\tconst editors = this.editorService.visibleEditors;\n\t\t\tlet shouldFire = false;\n\n\t\t\tfor (const e of editors) {\n\t\t\t\tif (!e.resource) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst stat = this.explorerService.findClosest(e.resource);\n\t\t\t\tif (stat && stat.isExcluded) {\n\t\t\t\t\t// A filtered resource suddenly became visible since user opened an editor\n\t\t\t\t\tshouldFire = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const e of this.editorsAffectingFilter) {\n\t\t\t\tif (!editors.includes(e)) {\n\t\t\t\t\t// Editor that was affecting filtering is no longer visible\n\t\t\t\t\tshouldFire = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (shouldFire) {\n\t\t\t\tthis.editorsAffectingFilter.clear();\n\t\t\t\tthis._onDidChange.fire();\n\t\t\t}\n\t\t}));\n\t\tthis.updateConfiguration();\n\t}\n\n\tget onDidChange(): Event<void> {\n\t\treturn this._onDidChange.event;\n\t}\n\n\tprivate updateConfiguration(): void {\n\t\tlet shouldFire = false;\n\t\tthis.contextService.getWorkspace().folders.forEach(folder => {\n\t\t\tconst configuration = this.configurationService.getValue<IFilesConfiguration>({ resource: folder.uri });\n\t\t\tconst excludesConfig: glob.IExpression = configuration?.files?.exclude || Object.create(null);\n\n\t\t\tif (!shouldFire) {\n\t\t\t\tconst cached = this.hiddenExpressionPerRoot.get(folder.uri.toString());\n\t\t\t\tshouldFire = !cached || !equals(cached.original, excludesConfig);\n\t\t\t}\n\n\t\t\tconst excludesConfigCopy = deepClone(excludesConfig); // do not keep the config, as it gets mutated under our hoods\n\n\t\t\tthis.hiddenExpressionPerRoot.set(folder.uri.toString(), { original: excludesConfigCopy, parsed: glob.parse(excludesConfigCopy) });\n\t\t});\n\n\t\tif (shouldFire) {\n\t\t\tthis.editorsAffectingFilter.clear();\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n\n\tfilter(stat: ExplorerItem, parentVisibility: TreeVisibility): boolean {\n\t\treturn this.isVisible(stat, parentVisibility);\n\t}\n\n\tprivate isVisible(stat: ExplorerItem, parentVisibility: TreeVisibility): boolean {\n\t\tstat.isExcluded = false;\n\t\tif (parentVisibility === TreeVisibility.Hidden) {\n\t\t\tstat.isExcluded = true;\n\t\t\treturn false;\n\t\t}\n\t\tif (this.explorerService.getEditableData(stat)) {\n\t\t\treturn true; // always visible\n\t\t}\n\n\t\t// Hide those that match Hidden Patterns\n\t\tconst cached = this.hiddenExpressionPerRoot.get(stat.root.resource.toString());\n\t\tif ((cached && cached.parsed(path.relative(stat.root.resource.path, stat.resource.path), stat.name, name => !!(stat.parent && stat.parent.getChild(name)))) || stat.parent?.isExcluded) {\n\t\t\tstat.isExcluded = true;\n\t\t\tconst editors = this.editorService.visibleEditors;\n\t\t\tconst editor = editors.find(e => e.resource && this.uriIdentityService.extUri.isEqualOrParent(e.resource, stat.resource));\n\t\t\tif (editor && stat.root === this.explorerService.findClosestRoot(stat.resource)) {\n\t\t\t\tthis.editorsAffectingFilter.add(editor);\n\t\t\t\treturn true; // Show all opened files and their parents\n\t\t\t}\n\n\t\t\treturn false; // hidden through pattern\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.toDispose);\n\t}\n}\n\n// Explorer Sorter\nexport class FileSorter implements ITreeSorter<ExplorerItem> {\n\n\tconstructor(\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService\n\t) { }\n\n\tcompare(statA: ExplorerItem, statB: ExplorerItem): number {\n\t\t// Do not sort roots\n\t\tif (statA.isRoot) {\n\t\t\tif (statB.isRoot) {\n\t\t\t\tconst workspaceA = this.contextService.getWorkspaceFolder(statA.resource);\n\t\t\t\tconst workspaceB = this.contextService.getWorkspaceFolder(statB.resource);\n\t\t\t\treturn workspaceA && workspaceB ? (workspaceA.index - workspaceB.index) : -1;\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (statB.isRoot) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst sortOrder = this.explorerService.sortOrder;\n\n\t\t// Sort Directories\n\t\tswitch (sortOrder) {\n\t\t\tcase 'type':\n\t\t\t\tif (statA.isDirectory && !statB.isDirectory) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif (statB.isDirectory && !statA.isDirectory) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tif (statA.isDirectory && statB.isDirectory) {\n\t\t\t\t\treturn compareFileNamesDefault(statA.name, statB.name);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'filesFirst':\n\t\t\t\tif (statA.isDirectory && !statB.isDirectory) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tif (statB.isDirectory && !statA.isDirectory) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'mixed':\n\t\t\t\tbreak; // not sorting when \"mixed\" is on\n\n\t\t\tdefault: /* 'default', 'modified' */\n\t\t\t\tif (statA.isDirectory && !statB.isDirectory) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif (statB.isDirectory && !statA.isDirectory) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Sort Files\n\t\tswitch (sortOrder) {\n\t\t\tcase 'type':\n\t\t\t\treturn compareFileExtensionsDefault(statA.name, statB.name);\n\n\t\t\tcase 'modified':\n\t\t\t\tif (statA.mtime !== statB.mtime) {\n\t\t\t\t\treturn (statA.mtime && statB.mtime && statA.mtime < statB.mtime) ? 1 : -1;\n\t\t\t\t}\n\n\t\t\t\treturn compareFileNamesDefault(statA.name, statB.name);\n\n\t\t\tdefault: /* 'default', 'mixed', 'filesFirst' */\n\t\t\t\treturn compareFileNamesDefault(statA.name, statB.name);\n\t\t}\n\t}\n}\n\nfunction getFileOverwriteConfirm(name: string): IConfirmation {\n\treturn {\n\t\tmessage: localize('confirmOverwrite', \"A file or folder with the name '{0}' already exists in the destination folder. Do you want to replace it?\", name),\n\t\tdetail: localize('irreversible', \"This action is irreversible!\"),\n\t\tprimaryButton: localize({ key: 'replaceButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n\t\ttype: 'warning'\n\t};\n}\n\nfunction getMultipleFilesOverwriteConfirm(files: URI[]): IConfirmation {\n\tif (files.length > 1) {\n\t\treturn {\n\t\t\tmessage: localize('confirmManyOverwrites', \"The following {0} files and/or folders already exist in the destination folder. Do you want to replace them?\", files.length),\n\t\t\tdetail: getFileNamesMessage(files) + '\\n' + localize('irreversible', \"This action is irreversible!\"),\n\t\t\tprimaryButton: localize({ key: 'replaceButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n\t\t\ttype: 'warning'\n\t\t};\n\t}\n\n\treturn getFileOverwriteConfirm(basename(files[0]));\n}\n\ninterface IWebkitDataTransfer {\n\titems: IWebkitDataTransferItem[];\n}\n\ninterface IWebkitDataTransferItem {\n\twebkitGetAsEntry(): IWebkitDataTransferItemEntry;\n}\n\ninterface IWebkitDataTransferItemEntry {\n\tname: string | undefined;\n\tisFile: boolean;\n\tisDirectory: boolean;\n\n\tfile(resolve: (file: File) => void, reject: () => void): void;\n\tcreateReader(): IWebkitDataTransferItemEntryReader;\n}\n\ninterface IWebkitDataTransferItemEntryReader {\n\treadEntries(resolve: (file: IWebkitDataTransferItemEntry[]) => void, reject: () => void): void\n}\n\ninterface IUploadOperation {\n\tstartTime: number;\n\tprogressScheduler: RunOnceWorker<IProgressStep>;\n\n\tfilesTotal: number;\n\tfilesUploaded: number;\n\n\ttotalBytesUploaded: number;\n}\n\nexport class FileDragAndDrop implements ITreeDragAndDrop<ExplorerItem> {\n\tprivate static readonly CONFIRM_DND_SETTING_KEY = 'explorer.confirmDragAndDrop';\n\n\tprivate compressedDragOverElement: HTMLElement | undefined;\n\tprivate compressedDropTargetDisposable: IDisposable = Disposable.None;\n\n\tprivate toDispose: IDisposable[];\n\tprivate dropEnabled = false;\n\n\tconstructor(\n\t\t@INotificationService private notificationService: INotificationService,\n\t\t@IExplorerService private explorerService: IExplorerService,\n\t\t@IEditorService private editorService: IEditorService,\n\t\t@IDialogService private dialogService: IDialogService,\n\t\t@IWorkspaceContextService private contextService: IWorkspaceContextService,\n\t\t@IFileService private fileService: IFileService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IHostService private hostService: IHostService,\n\t\t@IWorkspaceEditingService private workspaceEditingService: IWorkspaceEditingService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tthis.toDispose = [];\n\n\t\tconst updateDropEnablement = () => {\n\t\t\tthis.dropEnabled = this.configurationService.getValue('explorer.enableDragAndDrop');\n\t\t};\n\t\tupdateDropEnablement();\n\t\tthis.toDispose.push(this.configurationService.onDidChangeConfiguration((e) => updateDropEnablement()));\n\t}\n\n\tonDragOver(data: IDragAndDropData, target: ExplorerItem | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\tif (!this.dropEnabled) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Compressed folders\n\t\tif (target) {\n\t\t\tconst compressedTarget = FileDragAndDrop.getCompressedStatFromDragEvent(target, originalEvent);\n\n\t\t\tif (compressedTarget) {\n\t\t\t\tconst iconLabelName = getIconLabelNameFromHTMLElement(originalEvent.target);\n\n\t\t\t\tif (iconLabelName && iconLabelName.index < iconLabelName.count - 1) {\n\t\t\t\t\tconst result = this.handleDragOver(data, compressedTarget, targetIndex, originalEvent);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tif (iconLabelName.element !== this.compressedDragOverElement) {\n\t\t\t\t\t\t\tthis.compressedDragOverElement = iconLabelName.element;\n\t\t\t\t\t\t\tthis.compressedDropTargetDisposable.dispose();\n\t\t\t\t\t\t\tthis.compressedDropTargetDisposable = toDisposable(() => {\n\t\t\t\t\t\t\t\ticonLabelName.element.classList.remove('drop-target');\n\t\t\t\t\t\t\t\tthis.compressedDragOverElement = undefined;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\ticonLabelName.element.classList.add('drop-target');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn typeof result === 'boolean' ? result : { ...result, feedback: [] };\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.compressedDropTargetDisposable.dispose();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.compressedDropTargetDisposable.dispose();\n\t\treturn this.handleDragOver(data, target, targetIndex, originalEvent);\n\t}\n\n\tprivate handleDragOver(data: IDragAndDropData, target: ExplorerItem | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\tconst isCopy = originalEvent && ((originalEvent.ctrlKey && !isMacintosh) || (originalEvent.altKey && isMacintosh));\n\t\tconst isNative = data instanceof NativeDragAndDropData;\n\t\tconst effect = (isNative || isCopy) ? ListDragOverEffect.Copy : ListDragOverEffect.Move;\n\n\t\t// Native DND\n\t\tif (isNative) {\n\t\t\tif (!containsDragType(originalEvent, DataTransfers.FILES, CodeDataTransfers.FILES, DataTransfers.RESOURCES)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Other-Tree DND\n\t\telse if (data instanceof ExternalElementsDragAndDropData) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In-Explorer DND\n\t\telse {\n\t\t\tconst items = FileDragAndDrop.getStatsFromDragAndDropData(data as ElementsDragAndDropData<ExplorerItem, ExplorerItem[]>);\n\n\t\t\tif (!target) {\n\t\t\t\t// Dropping onto the empty area. Do not accept if items dragged are already\n\t\t\t\t// children of the root unless we are copying the file\n\t\t\t\tif (!isCopy && items.every(i => !!i.parent && i.parent.isRoot)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn { accept: true, bubble: TreeDragOverBubble.Down, effect, autoExpand: false };\n\t\t\t}\n\n\t\t\tif (!Array.isArray(items)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (items.some((source) => {\n\t\t\t\tif (source.isRoot && target instanceof ExplorerItem && !target.isRoot) {\n\t\t\t\t\treturn true; // Root folder can not be moved to a non root file stat.\n\t\t\t\t}\n\n\t\t\t\tif (this.uriIdentityService.extUri.isEqual(source.resource, target.resource)) {\n\t\t\t\t\treturn true; // Can not move anything onto itself\n\t\t\t\t}\n\n\t\t\t\tif (source.isRoot && target instanceof ExplorerItem && target.isRoot) {\n\t\t\t\t\t// Disable moving workspace roots in one another\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!isCopy && this.uriIdentityService.extUri.isEqual(dirname(source.resource), target.resource)) {\n\t\t\t\t\treturn true; // Can not move a file to the same parent unless we copy\n\t\t\t\t}\n\n\t\t\t\tif (this.uriIdentityService.extUri.isEqualOrParent(target.resource, source.resource)) {\n\t\t\t\t\treturn true; // Can not move a parent folder into one of its children\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t})) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// All (target = model)\n\t\tif (!target) {\n\t\t\treturn { accept: true, bubble: TreeDragOverBubble.Down, effect };\n\t\t}\n\n\t\t// All (target = file/folder)\n\t\telse {\n\t\t\tif (target.isDirectory) {\n\t\t\t\tif (target.isReadonly) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn { accept: true, bubble: TreeDragOverBubble.Down, effect, autoExpand: true };\n\t\t\t}\n\n\t\t\tif (this.contextService.getWorkspace().folders.every(folder => folder.uri.toString() !== target.resource.toString())) {\n\t\t\t\treturn { accept: true, bubble: TreeDragOverBubble.Up, effect };\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetDragURI(element: ExplorerItem): string | null {\n\t\tif (this.explorerService.isEditable(element)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn element.resource.toString();\n\t}\n\n\tgetDragLabel(elements: ExplorerItem[], originalEvent: DragEvent): string | undefined {\n\t\tif (elements.length === 1) {\n\t\t\tconst stat = FileDragAndDrop.getCompressedStatFromDragEvent(elements[0], originalEvent);\n\t\t\treturn stat.name;\n\t\t}\n\n\t\treturn String(elements.length);\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tconst items = FileDragAndDrop.getStatsFromDragAndDropData(data as ElementsDragAndDropData<ExplorerItem, ExplorerItem[]>, originalEvent);\n\t\tif (items && items.length && originalEvent.dataTransfer) {\n\t\t\t// Apply some datatransfer types to allow for dragging the element outside of the application\n\t\t\tthis.instantiationService.invokeFunction(fillResourceDataTransfers, items, undefined, originalEvent);\n\n\t\t\t// The only custom data transfer we set from the explorer is a file transfer\n\t\t\t// to be able to DND between multiple code file explorers across windows\n\t\t\tconst fileResources = items.filter(s => s.resource.scheme === Schemas.file).map(r => r.resource.fsPath);\n\t\t\tif (fileResources.length) {\n\t\t\t\toriginalEvent.dataTransfer.setData(CodeDataTransfers.FILES, JSON.stringify(fileResources));\n\t\t\t}\n\t\t}\n\t}\n\n\tasync drop(data: IDragAndDropData, target: ExplorerItem | undefined, targetIndex: number | undefined, originalEvent: DragEvent): Promise<void> {\n\t\tthis.compressedDropTargetDisposable.dispose();\n\n\t\t// Find compressed target\n\t\tif (target) {\n\t\t\tconst compressedTarget = FileDragAndDrop.getCompressedStatFromDragEvent(target, originalEvent);\n\n\t\t\tif (compressedTarget) {\n\t\t\t\ttarget = compressedTarget;\n\t\t\t}\n\t\t}\n\n\t\t// Find parent to add to\n\t\tif (!target) {\n\t\t\ttarget = this.explorerService.roots[this.explorerService.roots.length - 1];\n\t\t}\n\t\tif (!target.isDirectory && target.parent) {\n\t\t\ttarget = target.parent;\n\t\t}\n\t\tif (target.isReadonly) {\n\t\t\treturn;\n\t\t}\n\t\tconst resolvedTarget = target;\n\t\tif (!resolvedTarget) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Desktop DND (Import file)\n\t\tif (data instanceof NativeDragAndDropData) {\n\t\t\tconst cts = new CancellationTokenSource();\n\n\t\t\tif (isWeb) {\n\t\t\t\t// Indicate progress globally\n\t\t\t\tconst dropPromise = this.progressService.withProgress({\n\t\t\t\t\tlocation: ProgressLocation.Window,\n\t\t\t\t\tdelay: 800,\n\t\t\t\t\tcancellable: true,\n\t\t\t\t\ttitle: localize('uploadingFiles', \"Uploading\")\n\t\t\t\t}, async progress => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.handleWebExternalDrop(resolvedTarget, originalEvent, progress, cts.token);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tthis.notificationService.warn(error);\n\t\t\t\t\t}\n\t\t\t\t}, () => cts.dispose(true));\n\t\t\t\t// Also indicate progress in the files view\n\t\t\t\tthis.progressService.withProgress({ location: VIEW_ID, delay: 500 }, () => dropPromise);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.handleExternalDrop(resolvedTarget, originalEvent, cts.token);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.notificationService.warn(error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// In-Explorer DND (Move/Copy file)\n\t\telse {\n\t\t\tthis.handleExplorerDrop(data as ElementsDragAndDropData<ExplorerItem, ExplorerItem[]>, resolvedTarget, originalEvent).then(undefined, e => this.notificationService.warn(e));\n\t\t}\n\t}\n\n\tprivate async handleWebExternalDrop(target: ExplorerItem, originalEvent: DragEvent, progress: IProgress<IProgressStep>, token: CancellationToken): Promise<void> {\n\t\tconst items = (originalEvent.dataTransfer as unknown as IWebkitDataTransfer).items;\n\n\t\t// Somehow the items thing is being modified at random, maybe as a security\n\t\t// measure since this is a DND operation. As such, we copy the items into\n\t\t// an array we own as early as possible before using it.\n\t\tconst entries: IWebkitDataTransferItemEntry[] = [];\n\t\tfor (const item of items) {\n\t\t\tentries.push(item.webkitGetAsEntry());\n\t\t}\n\n\t\tconst results: { isFile: boolean, resource: URI }[] = [];\n\t\tconst operation: IUploadOperation = {\n\t\t\tstartTime: Date.now(),\n\t\t\tprogressScheduler: new RunOnceWorker<IProgressStep>(steps => { progress.report(steps[steps.length - 1]); }, 1000),\n\n\t\t\tfilesTotal: entries.length,\n\t\t\tfilesUploaded: 0,\n\n\t\t\ttotalBytesUploaded: 0\n\t\t};\n\n\t\tfor (let entry of entries) {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Confirm overwrite as needed\n\t\t\tif (target && entry.name && target.getChild(entry.name)) {\n\t\t\t\tconst { confirmed } = await this.dialogService.confirm(getFileOverwriteConfirm(entry.name));\n\t\t\t\tif (!confirmed) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tawait this.explorerService.applyBulkEdit([new ResourceFileEdit(joinPath(target.resource, entry.name), undefined, { recursive: true })], {\n\t\t\t\t\tundoLabel: localize('overwrite', \"Overwrite {0}\", entry.name),\n\t\t\t\t\tprogressLabel: localize('overwriting', \"Overwriting {0}\", entry.name),\n\t\t\t\t});\n\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Upload entry\n\t\t\tconst result = await this.doUploadWebFileEntry(entry, target.resource, target, progress, operation, token);\n\t\t\tif (result) {\n\t\t\t\tresults.push(result);\n\t\t\t}\n\t\t}\n\n\t\toperation.progressScheduler.dispose();\n\n\t\t// Open uploaded file in editor only if we upload just one\n\t\tconst firstUploadedFile = results[0];\n\t\tif (!token.isCancellationRequested && firstUploadedFile?.isFile) {\n\t\t\tawait this.editorService.openEditor({ resource: firstUploadedFile.resource, options: { pinned: true } });\n\t\t}\n\t}\n\n\tprivate async doUploadWebFileEntry(entry: IWebkitDataTransferItemEntry, parentResource: URI, target: ExplorerItem | undefined, progress: IProgress<IProgressStep>, operation: IUploadOperation, token: CancellationToken): Promise<{ isFile: boolean, resource: URI } | undefined> {\n\t\tif (token.isCancellationRequested || !entry.name || (!entry.isFile && !entry.isDirectory)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Report progress\n\t\tlet fileBytesUploaded = 0;\n\t\tconst reportProgress = (fileSize: number, bytesUploaded: number): void => {\n\t\t\tfileBytesUploaded += bytesUploaded;\n\t\t\toperation.totalBytesUploaded += bytesUploaded;\n\n\t\t\tconst bytesUploadedPerSecond = operation.totalBytesUploaded / ((Date.now() - operation.startTime) / 1000);\n\n\t\t\t// Small file\n\t\t\tlet message: string;\n\t\t\tif (fileSize < ByteSize.MB) {\n\t\t\t\tif (operation.filesTotal === 1) {\n\t\t\t\t\tmessage = `${entry.name}`;\n\t\t\t\t} else {\n\t\t\t\t\tmessage = localize('uploadProgressSmallMany', \"{0} of {1} files ({2}/s)\", operation.filesUploaded, operation.filesTotal, ByteSize.formatSize(bytesUploadedPerSecond));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Large file\n\t\t\telse {\n\t\t\t\tmessage = localize('uploadProgressLarge', \"{0} ({1} of {2}, {3}/s)\", entry.name, ByteSize.formatSize(fileBytesUploaded), ByteSize.formatSize(fileSize), ByteSize.formatSize(bytesUploadedPerSecond));\n\t\t\t}\n\n\t\t\t// Report progress but limit to update only once per second\n\t\t\toperation.progressScheduler.work({ message });\n\t\t};\n\t\toperation.filesUploaded++;\n\t\treportProgress(0, 0);\n\n\t\t// Handle file upload\n\t\tconst resource = joinPath(parentResource, entry.name);\n\t\tif (entry.isFile) {\n\t\t\tconst file = await new Promise<File>((resolve, reject) => entry.file(resolve, reject));\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Chrome/Edge/Firefox support stream method, but only use it for\n\t\t\t// larger files to reduce the overhead of the streaming approach\n\t\t\tif (typeof file.stream === 'function' && file.size > ByteSize.MB) {\n\t\t\t\tawait this.doUploadWebFileEntryBuffered(resource, file, reportProgress, token);\n\t\t\t}\n\n\t\t\t// Fallback to unbuffered upload for other browsers or small files\n\t\t\telse {\n\t\t\t\tawait this.doUploadWebFileEntryUnbuffered(resource, file, reportProgress);\n\t\t\t}\n\n\t\t\treturn { isFile: true, resource };\n\t\t}\n\n\t\t// Handle folder upload\n\t\telse {\n\n\t\t\t// Create target folder\n\t\t\tawait this.fileService.createFolder(resource);\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Recursive upload files in this directory\n\t\t\tconst dirReader = entry.createReader();\n\t\t\tconst childEntries: IWebkitDataTransferItemEntry[] = [];\n\t\t\tlet done = false;\n\t\t\tdo {\n\t\t\t\tconst childEntriesChunk = await new Promise<IWebkitDataTransferItemEntry[]>((resolve, reject) => dirReader.readEntries(resolve, reject));\n\t\t\t\tif (childEntriesChunk.length > 0) {\n\t\t\t\t\tchildEntries.push(...childEntriesChunk);\n\t\t\t\t} else {\n\t\t\t\t\tdone = true; // an empty array is a signal that all entries have been read\n\t\t\t\t}\n\t\t\t} while (!done && !token.isCancellationRequested);\n\n\t\t\t// Update operation total based on new counts\n\t\t\toperation.filesTotal += childEntries.length;\n\n\t\t\t// Upload all entries as files to target\n\t\t\tconst folderTarget = target && target.getChild(entry.name) || undefined;\n\t\t\tfor (let childEntry of childEntries) {\n\t\t\t\tawait this.doUploadWebFileEntry(childEntry, resource, folderTarget, progress, operation, token);\n\t\t\t}\n\n\t\t\treturn { isFile: false, resource };\n\t\t}\n\t}\n\n\tprivate async doUploadWebFileEntryBuffered(resource: URI, file: File, progressReporter: (fileSize: number, bytesUploaded: number) => void, token: CancellationToken): Promise<void> {\n\t\tconst writeableStream = newWriteableBufferStream({\n\t\t\t// Set a highWaterMark to prevent the stream\n\t\t\t// for file upload to produce large buffers\n\t\t\t// in-memory\n\t\t\thighWaterMark: 10\n\t\t});\n\t\tconst writeFilePromise = this.fileService.writeFile(resource, writeableStream);\n\n\t\t// Read the file in chunks using File.stream() web APIs\n\t\ttry {\n\t\t\tconst reader: ReadableStreamDefaultReader<Uint8Array> = file.stream().getReader();\n\n\t\t\tlet res = await reader.read();\n\t\t\twhile (!res.done) {\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\t// Write buffer into stream but make sure to wait\n\t\t\t\t// in case the highWaterMark is reached\n\t\t\t\tconst buffer = VSBuffer.wrap(res.value);\n\t\t\t\tawait writeableStream.write(buffer);\n\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\t// Report progress\n\t\t\t\tprogressReporter(file.size, buffer.byteLength);\n\n\t\t\t\tres = await reader.read();\n\t\t\t}\n\t\t\twriteableStream.end(undefined);\n\t\t} catch (error) {\n\t\t\twriteableStream.error(error);\n\t\t\twriteableStream.end();\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Wait for file being written to target\n\t\tawait writeFilePromise;\n\t}\n\n\tprivate doUploadWebFileEntryUnbuffered(resource: URI, file: File, progressReporter: (fileSize: number, bytesUploaded: number) => void): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = async event => {\n\t\t\t\ttry {\n\t\t\t\t\tif (event.target?.result instanceof ArrayBuffer) {\n\t\t\t\t\t\tconst buffer = VSBuffer.wrap(new Uint8Array(event.target.result));\n\t\t\t\t\t\tawait this.fileService.writeFile(resource, buffer);\n\n\t\t\t\t\t\t// Report progress\n\t\t\t\t\t\tprogressReporter(file.size, buffer.byteLength);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Could not read from dropped file.');\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Start reading the file to trigger `onload`\n\t\t\treader.readAsArrayBuffer(file);\n\t\t});\n\t}\n\n\tprivate async handleExternalDrop(target: ExplorerItem, originalEvent: DragEvent, token: CancellationToken): Promise<void> {\n\n\t\t// Check for dropped external files to be folders\n\t\tconst droppedResources = extractResources(originalEvent, true);\n\t\tconst result = await this.fileService.resolveAll(droppedResources.map(droppedResource => ({ resource: droppedResource.resource })));\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Pass focus to window\n\t\tthis.hostService.focus();\n\n\t\t// Handle folders by adding to workspace if we are in workspace context and if dropped on top\n\t\tconst folders = result.filter(r => r.success && r.stat && r.stat.isDirectory).map(result => ({ uri: result.stat!.resource }));\n\t\tif (folders.length > 0 && target.isRoot) {\n\t\t\tconst buttons = [\n\t\t\t\tfolders.length > 1 ? localize('copyFolders', \"&&Copy Folders\") : localize('copyFolder', \"&&Copy Folder\"),\n\t\t\t\tlocalize('cancel', \"Cancel\")\n\t\t\t];\n\t\t\tconst workspaceFolderSchemas = this.contextService.getWorkspace().folders.map(f => f.uri.scheme);\n\t\t\tlet message = folders.length > 1 ? localize('copyfolders', \"Are you sure to want to copy folders?\") : localize('copyfolder', \"Are you sure to want to copy '{0}'?\", basename(folders[0].uri));\n\t\t\tif (folders.some(f => workspaceFolderSchemas.indexOf(f.uri.scheme) >= 0)) {\n\t\t\t\t// We only allow to add a folder to the workspace if there is already a workspace folder with that scheme\n\t\t\t\tbuttons.unshift(folders.length > 1 ? localize('addFolders', \"&&Add Folders to Workspace\") : localize('addFolder', \"&&Add Folder to Workspace\"));\n\t\t\t\tmessage = folders.length > 1 ? localize('dropFolders', \"Do you want to copy the folders or add the folders to the workspace?\")\n\t\t\t\t\t: localize('dropFolder', \"Do you want to copy '{0}' or add '{0}' as a folder to the workspace?\", basename(folders[0].uri));\n\t\t\t}\n\n\t\t\tconst { choice } = await this.dialogService.show(Severity.Info, message, buttons);\n\t\t\tif (choice === buttons.length - 3) {\n\t\t\t\treturn this.workspaceEditingService.addFolders(folders);\n\t\t\t}\n\t\t\tif (choice === buttons.length - 2) {\n\t\t\t\treturn this.addResources(target, droppedResources.map(res => res.resource), token);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Handle dropped files (only support FileStat as target)\n\t\telse if (target instanceof ExplorerItem) {\n\t\t\treturn this.addResources(target, droppedResources.map(res => res.resource), token);\n\t\t}\n\t}\n\n\tprivate async addResources(target: ExplorerItem, resources: URI[], token: CancellationToken): Promise<void> {\n\t\tif (resources && resources.length > 0) {\n\n\t\t\t// Resolve target to check for name collisions and ask user\n\t\t\tconst targetStat = await this.fileService.resolve(target.resource);\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check for name collisions\n\t\t\tconst targetNames = new Set<string>();\n\t\t\tconst caseSensitive = this.fileService.hasCapability(target.resource, FileSystemProviderCapabilities.PathCaseSensitive);\n\t\t\tif (targetStat.children) {\n\t\t\t\ttargetStat.children.forEach(child => {\n\t\t\t\t\ttargetNames.add(caseSensitive ? child.name : child.name.toLowerCase());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst resourcesFiltered = (await Promise.all(resources.map(async resource => {\n\t\t\t\tif (targetNames.has(caseSensitive ? basename(resource) : basename(resource).toLowerCase())) {\n\t\t\t\t\tconst confirmationResult = await this.dialogService.confirm(getFileOverwriteConfirm(basename(resource)));\n\t\t\t\t\tif (!confirmationResult.confirmed) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn resource;\n\t\t\t}))).filter(r => r instanceof URI) as URI[];\n\t\t\tconst resourceFileEdits = resourcesFiltered.map(resource => {\n\t\t\t\tconst sourceFileName = basename(resource);\n\t\t\t\tconst targetFile = joinPath(target.resource, sourceFileName);\n\t\t\t\treturn new ResourceFileEdit(resource, targetFile, { overwrite: true, copy: true });\n\t\t\t});\n\n\t\t\tawait this.explorerService.applyBulkEdit(resourceFileEdits, {\n\t\t\t\tundoLabel: resourcesFiltered.length === 1 ? localize('copyFile', \"Copy {0}\", basename(resourcesFiltered[0])) : localize('copynFile', \"Copy {0} resources\", resourcesFiltered.length),\n\t\t\t\tprogressLabel: resourcesFiltered.length === 1 ? localize('copyingFile', \"Copying {0}\", basename(resourcesFiltered[0])) : localize('copyingnFile', \"Copying {0} resources\", resourcesFiltered.length)\n\t\t\t});\n\n\t\t\t// if we only add one file, just open it directly\n\t\t\tif (resourceFileEdits.length === 1) {\n\t\t\t\tconst item = this.explorerService.findClosest(resourceFileEdits[0].newResource!);\n\t\t\t\tif (item && !item.isDirectory) {\n\t\t\t\t\tthis.editorService.openEditor({ resource: item.resource, options: { pinned: true } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async handleExplorerDrop(data: ElementsDragAndDropData<ExplorerItem, ExplorerItem[]>, target: ExplorerItem, originalEvent: DragEvent): Promise<void> {\n\t\tconst elementsData = FileDragAndDrop.getStatsFromDragAndDropData(data);\n\t\tconst items = distinctParents(elementsData, s => s.resource);\n\t\tconst isCopy = (originalEvent.ctrlKey && !isMacintosh) || (originalEvent.altKey && isMacintosh);\n\n\t\t// Handle confirm setting\n\t\tconst confirmDragAndDrop = !isCopy && this.configurationService.getValue<boolean>(FileDragAndDrop.CONFIRM_DND_SETTING_KEY);\n\t\tif (confirmDragAndDrop) {\n\t\t\tconst message = items.length > 1 && items.every(s => s.isRoot) ? localize('confirmRootsMove', \"Are you sure you want to change the order of multiple root folders in your workspace?\")\n\t\t\t\t: items.length > 1 ? localize('confirmMultiMove', \"Are you sure you want to move the following {0} files into '{1}'?\", items.length, target.name)\n\t\t\t\t\t: items[0].isRoot ? localize('confirmRootMove', \"Are you sure you want to change the order of root folder '{0}' in your workspace?\", items[0].name)\n\t\t\t\t\t\t: localize('confirmMove', \"Are you sure you want to move '{0}' into '{1}'?\", items[0].name, target.name);\n\t\t\tconst detail = items.length > 1 && !items.every(s => s.isRoot) ? getFileNamesMessage(items.map(i => i.resource)) : undefined;\n\n\t\t\tconst confirmation = await this.dialogService.confirm({\n\t\t\t\tmessage,\n\t\t\t\tdetail,\n\t\t\t\tcheckbox: {\n\t\t\t\t\tlabel: localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t\t},\n\t\t\t\ttype: 'question',\n\t\t\t\tprimaryButton: localize({ key: 'moveButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Move\")\n\t\t\t});\n\n\t\t\tif (!confirmation.confirmed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check for confirmation checkbox\n\t\t\tif (confirmation.checkboxChecked === true) {\n\t\t\t\tawait this.configurationService.updateValue(FileDragAndDrop.CONFIRM_DND_SETTING_KEY, false);\n\t\t\t}\n\t\t}\n\n\t\tawait this.doHandleRootDrop(items.filter(s => s.isRoot), target);\n\n\t\tconst sources = items.filter(s => !s.isRoot);\n\t\tif (isCopy) {\n\t\t\tawait this.doHandleExplorerDropOnCopy(sources, target);\n\t\t} else {\n\t\t\treturn this.doHandleExplorerDropOnMove(sources, target);\n\t\t}\n\t}\n\n\tprivate doHandleRootDrop(roots: ExplorerItem[], target: ExplorerItem): Promise<void> {\n\t\tif (roots.length === 0) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst folders = this.contextService.getWorkspace().folders;\n\t\tlet targetIndex: number | undefined;\n\t\tconst workspaceCreationData: IWorkspaceFolderCreationData[] = [];\n\t\tconst rootsToMove: IWorkspaceFolderCreationData[] = [];\n\n\t\tfor (let index = 0; index < folders.length; index++) {\n\t\t\tconst data = {\n\t\t\t\turi: folders[index].uri,\n\t\t\t\tname: folders[index].name\n\t\t\t};\n\t\t\tif (target instanceof ExplorerItem && this.uriIdentityService.extUri.isEqual(folders[index].uri, target.resource)) {\n\t\t\t\ttargetIndex = index;\n\t\t\t}\n\n\t\t\tif (roots.every(r => r.resource.toString() !== folders[index].uri.toString())) {\n\t\t\t\tworkspaceCreationData.push(data);\n\t\t\t} else {\n\t\t\t\trootsToMove.push(data);\n\t\t\t}\n\t\t}\n\t\tif (targetIndex === undefined) {\n\t\t\ttargetIndex = workspaceCreationData.length;\n\t\t}\n\n\t\tworkspaceCreationData.splice(targetIndex, 0, ...rootsToMove);\n\t\treturn this.workspaceEditingService.updateFolders(0, workspaceCreationData.length, workspaceCreationData);\n\t}\n\n\tprivate async doHandleExplorerDropOnCopy(sources: ExplorerItem[], target: ExplorerItem): Promise<void> {\n\t\t// Reuse duplicate action when user copies\n\t\tconst incrementalNaming = this.configurationService.getValue<IFilesConfiguration>().explorer.incrementalNaming;\n\t\tconst resourceFileEdits = sources.map(({ resource, isDirectory }) => (new ResourceFileEdit(resource, findValidPasteFileTarget(this.explorerService, target, { resource, isDirectory, allowOverwrite: false }, incrementalNaming), { copy: true })));\n\t\tconst labelSufix = getFileOrFolderLabelSufix(sources);\n\t\tawait this.explorerService.applyBulkEdit(resourceFileEdits, {\n\t\t\tundoLabel: localize('copy', \"Copy {0}\", labelSufix),\n\t\t\tprogressLabel: localize('copying', \"Copying {0}\", labelSufix),\n\t\t});\n\n\t\tconst editors = resourceFileEdits.filter(edit => {\n\t\t\tconst item = edit.newResource ? this.explorerService.findClosest(edit.newResource) : undefined;\n\t\t\treturn item && !item.isDirectory;\n\t\t}).map(edit => ({ resource: edit.newResource, options: { pinned: true } }));\n\n\t\tawait this.editorService.openEditors(editors);\n\t}\n\n\tprivate async doHandleExplorerDropOnMove(sources: ExplorerItem[], target: ExplorerItem): Promise<void> {\n\n\t\t// Do not allow moving readonly items\n\t\tconst resourceFileEdits = sources.filter(source => !source.isReadonly).map(source => new ResourceFileEdit(source.resource, joinPath(target.resource, source.name)));\n\t\tconst labelSufix = getFileOrFolderLabelSufix(sources);\n\t\tconst options = {\n\t\t\tundoLabel: localize('move', \"Move {0}\", labelSufix),\n\t\t\tprogressLabel: localize('moving', \"Moving {0}\", labelSufix)\n\t\t};\n\n\t\ttry {\n\t\t\tawait this.explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t} catch (error) {\n\t\t\t// Conflict\n\t\t\tif ((<FileOperationError>error).fileOperationResult === FileOperationResult.FILE_MOVE_CONFLICT) {\n\n\t\t\t\tconst overwrites: URI[] = [];\n\t\t\t\tfor (const edit of resourceFileEdits) {\n\t\t\t\t\tif (edit.newResource && await this.fileService.exists(edit.newResource)) {\n\t\t\t\t\t\toverwrites.push(edit.newResource);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst confirm = getMultipleFilesOverwriteConfirm(overwrites);\n\t\t\t\t// Move with overwrite if the user confirms\n\t\t\t\tconst { confirmed } = await this.dialogService.confirm(confirm);\n\t\t\t\tif (confirmed) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.explorerService.applyBulkEdit(resourceFileEdits.map(re => new ResourceFileEdit(re.oldResource, re.newResource, { overwrite: true })), options);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tthis.notificationService.error(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Any other error\n\t\t\telse {\n\t\t\t\tthis.notificationService.error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static getStatsFromDragAndDropData(data: ElementsDragAndDropData<ExplorerItem, ExplorerItem[]>, dragStartEvent?: DragEvent): ExplorerItem[] {\n\t\tif (data.context) {\n\t\t\treturn data.context;\n\t\t}\n\n\t\t// Detect compressed folder dragging\n\t\tif (dragStartEvent && data.elements.length === 1) {\n\t\t\tdata.context = [FileDragAndDrop.getCompressedStatFromDragEvent(data.elements[0], dragStartEvent)];\n\t\t\treturn data.context;\n\t\t}\n\n\t\treturn data.elements;\n\t}\n\n\tprivate static getCompressedStatFromDragEvent(stat: ExplorerItem, dragEvent: DragEvent): ExplorerItem {\n\t\tconst target = document.elementFromPoint(dragEvent.clientX, dragEvent.clientY);\n\t\tconst iconLabelName = getIconLabelNameFromHTMLElement(target);\n\n\t\tif (iconLabelName) {\n\t\t\tconst { count, index } = iconLabelName;\n\n\t\t\tlet i = count - 1;\n\t\t\twhile (i > index && stat.parent) {\n\t\t\t\tstat = stat.parent;\n\t\t\t\ti--;\n\t\t\t}\n\n\t\t\treturn stat;\n\t\t}\n\n\t\treturn stat;\n\t}\n\n\tonDragEnd(): void {\n\t\tthis.compressedDropTargetDisposable.dispose();\n\t}\n}\n\nfunction getIconLabelNameFromHTMLElement(target: HTMLElement | EventTarget | Element | null): { element: HTMLElement, count: number, index: number } | null {\n\tif (!(target instanceof HTMLElement)) {\n\t\treturn null;\n\t}\n\n\tlet element: HTMLElement | null = target;\n\n\twhile (element && !element.classList.contains('monaco-list-row')) {\n\t\tif (element.classList.contains('label-name') && element.hasAttribute('data-icon-label-count')) {\n\t\t\tconst count = Number(element.getAttribute('data-icon-label-count'));\n\t\t\tconst index = Number(element.getAttribute('data-icon-label-index'));\n\n\t\t\tif (isNumber(count) && isNumber(index)) {\n\t\t\t\treturn { element: element, count, index };\n\t\t\t}\n\t\t}\n\n\t\telement = element.parentElement;\n\t}\n\n\treturn null;\n}\n\nexport function isCompressedFolderName(target: HTMLElement | EventTarget | Element | null): boolean {\n\treturn !!getIconLabelNameFromHTMLElement(target);\n}\n\nexport class ExplorerCompressionDelegate implements ITreeCompressionDelegate<ExplorerItem> {\n\n\tisIncompressible(stat: ExplorerItem): boolean {\n\t\treturn stat.isRoot || !stat.isDirectory || stat instanceof NewExplorerItem || (!stat.parent || stat.parent.isRoot);\n\t}\n}\n\nfunction getFileOrFolderLabelSufix(items: ExplorerItem[]): string {\n\tif (items.length === 1) {\n\t\treturn items[0].name;\n\t}\n\n\tif (items.every(i => i.isDirectory)) {\n\t\treturn `${items.length} folders`;\n\t}\n\tif (items.every(i => !i.isDirectory)) {\n\t\treturn `${items.length} files`;\n\t}\n\n\treturn `${items.length} files and folders`;\n}\n"]}