{"version":3,"sources":["vs/workbench/contrib/files/browser/views/explorerView.ts"],"names":[],"mappings":"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","file":"explorerView.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { URI } from 'vs/base/common/uri';\nimport * as perf from 'vs/base/common/performance';\nimport { IAction, WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification } from 'vs/base/common/actions';\nimport { memoize } from 'vs/base/common/decorators';\nimport { IFilesConfiguration, ExplorerFolderContext, FilesExplorerFocusedContext, ExplorerFocusedContext, ExplorerRootContext, ExplorerResourceReadonlyContext, ExplorerResourceCut, ExplorerResourceMoveableToTrash, ExplorerCompressedFocusContext, ExplorerCompressedFirstFocusContext, ExplorerCompressedLastFocusContext, ExplorerResourceAvailableEditorIdsContext, VIEW_ID, VIEWLET_ID } from 'vs/workbench/contrib/files/common/files';\nimport { FileCopiedContext, NEW_FILE_COMMAND_ID, NEW_FOLDER_COMMAND_ID } from 'vs/workbench/contrib/files/browser/fileActions';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { ExplorerDecorationsProvider } from 'vs/workbench/contrib/files/browser/views/explorerDecorationsProvider';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IProgressService, ProgressLocation } from 'vs/platform/progress/common/progress';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IContextKeyService, IContextKey, ContextKeyEqualsExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { ResourceContextKey } from 'vs/workbench/common/resources';\nimport { IDecorationsService } from 'vs/workbench/services/decorations/browser/decorations';\nimport { WorkbenchCompressibleAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { DelayedDragHandler } from 'vs/base/browser/dnd';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IViewPaneOptions, ViewPane } from 'vs/workbench/browser/parts/views/viewPane';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ExplorerDelegate, ExplorerDataSource, FilesRenderer, ICompressedNavigationController, FilesFilter, FileSorter, FileDragAndDrop, ExplorerCompressionDelegate, isCompressedFolderName } from 'vs/workbench/contrib/files/browser/views/explorerViewer';\nimport { IThemeService, IFileIconTheme } from 'vs/platform/theme/common/themeService';\nimport { IWorkbenchThemeService } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { ITreeContextMenuEvent, TreeVisibility } from 'vs/base/browser/ui/tree/tree';\nimport { IMenuService, MenuId, IMenu, Action2, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ExplorerItem, NewExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { IAsyncDataTreeViewState } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IFileService, FileSystemProviderCapabilities } from 'vs/platform/files/common/files';\nimport { DisposableStore, IDisposable } from 'vs/base/common/lifecycle';\nimport { Event } from 'vs/base/common/event';\nimport { attachStyler, IColorMapping } from 'vs/platform/theme/common/styler';\nimport { ColorValue, listDropBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { Color } from 'vs/base/common/color';\nimport { SIDE_BAR_BACKGROUND } from 'vs/workbench/common/theme';\nimport { IViewDescriptorService, IViewsService } from 'vs/workbench/common/views';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IExplorerService } from 'vs/workbench/contrib/files/browser/files';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IViewletService } from 'vs/workbench/services/viewlet/browser/viewlet';\n\ninterface IExplorerViewColors extends IColorMapping {\n\tlistDropBackground?: ColorValue | undefined;\n}\n\ninterface IExplorerViewStyles {\n\tlistDropBackground?: Color;\n}\n\nfunction hasExpandedRootChild(tree: WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>, treeInput: ExplorerItem[]): boolean {\n\tfor (const folder of treeInput) {\n\t\tif (tree.hasNode(folder) && !tree.isCollapsed(folder)) {\n\t\t\tfor (const [, child] of folder.children.entries()) {\n\t\t\t\tif (tree.hasNode(child) && tree.isCollapsible(child) && !tree.isCollapsed(child)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\nconst identityProvider = {\n\tgetId: (stat: ExplorerItem) => {\n\t\tif (stat instanceof NewExplorerItem) {\n\t\t\treturn `new:${stat.resource}`;\n\t\t}\n\n\t\treturn stat.resource;\n\t}\n};\n\nexport function getContext(focus: ExplorerItem[], selection: ExplorerItem[], respectMultiSelection: boolean,\n\tcompressedNavigationControllerProvider: { getCompressedNavigationController(stat: ExplorerItem): ICompressedNavigationController | undefined }): ExplorerItem[] {\n\n\tlet focusedStat: ExplorerItem | undefined;\n\tfocusedStat = focus.length ? focus[0] : undefined;\n\n\tconst compressedNavigationController = focusedStat && compressedNavigationControllerProvider.getCompressedNavigationController(focusedStat);\n\tfocusedStat = compressedNavigationController ? compressedNavigationController.current : focusedStat;\n\n\tconst selectedStats: ExplorerItem[] = [];\n\n\tfor (const stat of selection) {\n\t\tconst controller = compressedNavigationControllerProvider.getCompressedNavigationController(stat);\n\t\tif (controller && focusedStat && controller === compressedNavigationController) {\n\t\t\tif (stat === focusedStat) {\n\t\t\t\tselectedStats.push(stat);\n\t\t\t}\n\t\t\t// Ignore stats which are selected but are part of the same compact node as the focused stat\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (controller) {\n\t\t\tselectedStats.push(...controller.items);\n\t\t} else {\n\t\t\tselectedStats.push(stat);\n\t\t}\n\t}\n\tif (!focusedStat) {\n\t\tif (respectMultiSelection) {\n\t\t\treturn selectedStats;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tif (respectMultiSelection && selectedStats.indexOf(focusedStat) >= 0) {\n\t\treturn selectedStats;\n\t}\n\n\treturn [focusedStat];\n}\n\nexport class ExplorerView extends ViewPane {\n\tstatic readonly TREE_VIEW_STATE_STORAGE_KEY: string = 'workbench.explorer.treeViewState';\n\n\tprivate tree!: WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>;\n\tprivate filter!: FilesFilter;\n\n\tprivate resourceContext: ResourceContextKey;\n\tprivate folderContext: IContextKey<boolean>;\n\tprivate readonlyContext: IContextKey<boolean>;\n\tprivate availableEditorIdsContext: IContextKey<string>;\n\n\tprivate rootContext: IContextKey<boolean>;\n\tprivate resourceMoveableToTrash: IContextKey<boolean>;\n\n\tprivate renderer!: FilesRenderer;\n\n\tprivate styleElement!: HTMLStyleElement;\n\tprivate treeContainer!: HTMLElement;\n\tprivate container!: HTMLElement;\n\tprivate compressedFocusContext: IContextKey<boolean>;\n\tprivate compressedFocusFirstContext: IContextKey<boolean>;\n\tprivate compressedFocusLastContext: IContextKey<boolean>;\n\n\tprivate horizontalScrolling: boolean | undefined;\n\n\t// Refresh is needed on the initial explorer open\n\tprivate shouldRefresh = true;\n\tprivate dragHandler!: DelayedDragHandler;\n\tprivate autoReveal: boolean | 'focusNoScroll' = false;\n\tprivate decorationsProvider: ExplorerDecorationsProvider | undefined;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IDecorationsService private readonly decorationService: IDecorationsService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IThemeService themeService: IWorkbenchThemeService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IClipboardService private clipboardService: IClipboardService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IOpenerService openerService: IOpenerService\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis.resourceContext = instantiationService.createInstance(ResourceContextKey);\n\t\tthis._register(this.resourceContext);\n\n\t\tthis.folderContext = ExplorerFolderContext.bindTo(contextKeyService);\n\t\tthis.readonlyContext = ExplorerResourceReadonlyContext.bindTo(contextKeyService);\n\t\tthis.availableEditorIdsContext = ExplorerResourceAvailableEditorIdsContext.bindTo(contextKeyService);\n\t\tthis.rootContext = ExplorerRootContext.bindTo(contextKeyService);\n\t\tthis.resourceMoveableToTrash = ExplorerResourceMoveableToTrash.bindTo(contextKeyService);\n\t\tthis.compressedFocusContext = ExplorerCompressedFocusContext.bindTo(contextKeyService);\n\t\tthis.compressedFocusFirstContext = ExplorerCompressedFirstFocusContext.bindTo(contextKeyService);\n\t\tthis.compressedFocusLastContext = ExplorerCompressedLastFocusContext.bindTo(contextKeyService);\n\n\t\tthis.explorerService.registerView(this);\n\t}\n\n\tget name(): string {\n\t\treturn this.labelService.getWorkspaceLabel(this.contextService.getWorkspace());\n\t}\n\n\toverride get title(): string {\n\t\treturn this.name;\n\t}\n\n\toverride set title(_: string) {\n\t\t// noop\n\t}\n\n\t// Memoized locals\n\t@memoize private get contributedContextMenu(): IMenu {\n\t\tconst contributedContextMenu = this.menuService.createMenu(MenuId.ExplorerContext, this.tree.contextKeyService);\n\t\tthis._register(contributedContextMenu);\n\t\treturn contributedContextMenu;\n\t}\n\n\t@memoize private get fileCopiedContextKey(): IContextKey<boolean> {\n\t\treturn FileCopiedContext.bindTo(this.contextKeyService);\n\t}\n\n\t@memoize private get resourceCutContextKey(): IContextKey<boolean> {\n\t\treturn ExplorerResourceCut.bindTo(this.contextKeyService);\n\t}\n\n\t// Split view methods\n\n\tprotected override renderHeader(container: HTMLElement): void {\n\t\tsuper.renderHeader(container);\n\n\t\t// Expand on drag over\n\t\tthis.dragHandler = new DelayedDragHandler(container, () => this.setExpanded(true));\n\n\t\tconst titleElement = container.querySelector('.title') as HTMLElement;\n\t\tconst setHeader = () => {\n\t\t\tconst workspace = this.contextService.getWorkspace();\n\t\t\tconst title = workspace.folders.map(folder => folder.name).join();\n\t\t\ttitleElement.textContent = this.name;\n\t\t\ttitleElement.title = title;\n\t\t\ttitleElement.setAttribute('aria-label', nls.localize('explorerSection', \"Explorer Section: {0}\", this.name));\n\t\t};\n\n\t\tthis._register(this.contextService.onDidChangeWorkspaceName(setHeader));\n\t\tthis._register(this.labelService.onDidChangeFormatters(setHeader));\n\t\tsetHeader();\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\toverride renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.container = container;\n\t\tthis.treeContainer = DOM.append(container, DOM.$('.explorer-folders-view'));\n\n\t\tthis.styleElement = DOM.createStyleSheet(this.treeContainer);\n\t\tattachStyler<IExplorerViewColors>(this.themeService, { listDropBackground }, this.styleListDropBackground.bind(this));\n\n\t\tthis.createTree(this.treeContainer);\n\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => {\n\t\t\tthis._onDidChangeTitleArea.fire();\n\t\t}));\n\n\t\t// Update configuration\n\t\tconst configuration = this.configurationService.getValue<IFilesConfiguration>();\n\t\tthis.onConfigurationUpdated(configuration);\n\n\t\t// When the explorer viewer is loaded, listen to changes to the editor input\n\t\tthis._register(this.editorService.onDidActiveEditorChange(() => {\n\t\t\tthis.selectActiveFile();\n\t\t}));\n\n\t\t// Also handle configuration updates\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(this.configurationService.getValue<IFilesConfiguration>(), e)));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(async visible => {\n\t\t\tif (visible) {\n\t\t\t\t// If a refresh was requested and we are now visible, run it\n\t\t\t\tif (this.shouldRefresh) {\n\t\t\t\t\tthis.shouldRefresh = false;\n\t\t\t\t\tawait this.setTreeInput();\n\t\t\t\t}\n\t\t\t\t// Find resource to focus from active editor input if set\n\t\t\t\tthis.selectActiveFile(true);\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride focus(): void {\n\t\tthis.tree.domFocus();\n\n\t\tconst focused = this.tree.getFocus();\n\t\tif (focused.length === 1 && this.autoReveal) {\n\t\t\tthis.tree.reveal(focused[0], 0.5);\n\t\t}\n\t}\n\n\thasFocus(): boolean {\n\t\treturn DOM.isAncestor(document.activeElement, this.container);\n\t}\n\n\tgetContext(respectMultiSelection: boolean): ExplorerItem[] {\n\t\treturn getContext(this.tree.getFocus(), this.tree.getSelection(), respectMultiSelection, this.renderer);\n\t}\n\n\tisItemVisible(item: ExplorerItem): boolean {\n\t\treturn this.filter.filter(item, TreeVisibility.Visible);\n\t}\n\n\tasync setEditable(stat: ExplorerItem, isEditing: boolean): Promise<void> {\n\t\tif (isEditing) {\n\t\t\tthis.horizontalScrolling = this.tree.options.horizontalScrolling;\n\n\t\t\tif (this.horizontalScrolling) {\n\t\t\t\tthis.tree.updateOptions({ horizontalScrolling: false });\n\t\t\t}\n\n\t\t\tawait this.tree.expand(stat.parent!);\n\t\t} else {\n\t\t\tif (this.horizontalScrolling !== undefined) {\n\t\t\t\tthis.tree.updateOptions({ horizontalScrolling: this.horizontalScrolling });\n\t\t\t}\n\n\t\t\tthis.horizontalScrolling = undefined;\n\t\t\tthis.treeContainer.classList.remove('highlight');\n\t\t}\n\n\t\tawait this.refresh(false, stat.parent, false);\n\n\t\tif (isEditing) {\n\t\t\tthis.treeContainer.classList.add('highlight');\n\t\t\tthis.tree.reveal(stat);\n\t\t} else {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tprivate selectActiveFile(reveal = this.autoReveal): void {\n\t\tif (this.autoReveal) {\n\t\t\tconst activeFile = EditorResourceAccessor.getCanonicalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\t\tif (activeFile) {\n\t\t\t\tconst focus = this.tree.getFocus();\n\t\t\t\tconst selection = this.tree.getSelection();\n\t\t\t\tif (focus.length === 1 && this.uriIdentityService.extUri.isEqual(focus[0].resource, activeFile) && selection.length === 1 && this.uriIdentityService.extUri.isEqual(selection[0].resource, activeFile)) {\n\t\t\t\t\t// No action needed, active file is already focused and selected\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.explorerService.select(activeFile, reveal);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createTree(container: HTMLElement): void {\n\t\tthis.filter = this.instantiationService.createInstance(FilesFilter);\n\t\tthis._register(this.filter);\n\t\tthis._register(this.filter.onDidChange(() => this.refresh(true)));\n\t\tconst explorerLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n\t\tthis._register(explorerLabels);\n\n\t\tconst updateWidth = (stat: ExplorerItem) => this.tree.updateWidth(stat);\n\t\tthis.renderer = this.instantiationService.createInstance(FilesRenderer, explorerLabels, updateWidth);\n\t\tthis._register(this.renderer);\n\n\t\tthis._register(createFileIconThemableTreeContainerScope(container, this.themeService));\n\n\t\tconst isCompressionEnabled = () => this.configurationService.getValue<boolean>('explorer.compactFolders');\n\n\t\tthis.tree = <WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>>this.instantiationService.createInstance(WorkbenchCompressibleAsyncDataTree, 'FileExplorer', container, new ExplorerDelegate(), new ExplorerCompressionDelegate(), [this.renderer],\n\t\t\tthis.instantiationService.createInstance(ExplorerDataSource), {\n\t\t\tcompressionEnabled: isCompressionEnabled(),\n\t\t\taccessibilityProvider: this.renderer,\n\t\t\tidentityProvider,\n\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\tgetKeyboardNavigationLabel: (stat: ExplorerItem) => {\n\t\t\t\t\tif (this.explorerService.isEditable(stat)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn stat.name;\n\t\t\t\t},\n\t\t\t\tgetCompressedNodeKeyboardNavigationLabel: (stats: ExplorerItem[]) => {\n\t\t\t\t\tif (stats.some(stat => this.explorerService.isEditable(stat))) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn stats.map(stat => stat.name).join('/');\n\t\t\t\t}\n\t\t\t},\n\t\t\tmultipleSelectionSupport: true,\n\t\t\tfilter: this.filter,\n\t\t\tsorter: this.instantiationService.createInstance(FileSorter),\n\t\t\tdnd: this.instantiationService.createInstance(FileDragAndDrop),\n\t\t\tautoExpandSingleChildren: true,\n\t\t\tadditionalScrollHeight: ExplorerDelegate.ITEM_HEIGHT,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: SIDE_BAR_BACKGROUND\n\t\t\t}\n\t\t});\n\t\tthis._register(this.tree);\n\n\t\t// Bind configuration\n\t\tconst onDidChangeCompressionConfiguration = Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('explorer.compactFolders'));\n\t\tthis._register(onDidChangeCompressionConfiguration(_ => this.tree.updateOptions({ compressionEnabled: isCompressionEnabled() })));\n\n\t\t// Bind context keys\n\t\tFilesExplorerFocusedContext.bindTo(this.tree.contextKeyService);\n\t\tExplorerFocusedContext.bindTo(this.tree.contextKeyService);\n\n\t\t// Update resource context based on focused element\n\t\tthis._register(this.tree.onDidChangeFocus(e => this.onFocusChanged(e.elements)));\n\t\tthis.onFocusChanged([]);\n\t\t// Open when selecting via keyboard\n\t\tthis._register(this.tree.onDidOpen(async e => {\n\t\t\tconst element = e.element;\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Do not react if the user is expanding selection via keyboard.\n\t\t\t// Check if the item was previously also selected, if yes the user is simply expanding / collapsing current selection #66589.\n\t\t\tconst shiftDown = e.browserEvent instanceof KeyboardEvent && e.browserEvent.shiftKey;\n\t\t\tif (!shiftDown) {\n\t\t\t\tif (element.isDirectory || this.explorerService.isEditable(undefined)) {\n\t\t\t\t\t// Do not react if user is clicking on explorer items while some are being edited #70276\n\t\t\t\t\t// Do not react if clicking on directories\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', { id: 'workbench.files.openFile', from: 'explorer' });\n\t\t\t\tawait this.editorService.openEditor({ resource: element.resource, options: { preserveFocus: e.editorOptions.preserveFocus, pinned: e.editorOptions.pinned } }, e.sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\n\t\tthis._register(this.tree.onDidScroll(async e => {\n\t\t\tlet editable = this.explorerService.getEditable();\n\t\t\tif (e.scrollTopChanged && editable && this.tree.getRelativeTop(editable.stat) === null) {\n\t\t\t\tawait editable.data.onFinish('', false);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidChangeCollapseState(e => {\n\t\t\tconst element = e.node.element?.element;\n\t\t\tif (element) {\n\t\t\t\tconst navigationController = this.renderer.getCompressedNavigationController(element instanceof Array ? element[0] : element);\n\t\t\t\tif (navigationController) {\n\t\t\t\t\tnavigationController.updateCollapsed(e.node.collapsed);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onMouseDblClick(e => {\n\t\t\tif (e.element === null) {\n\t\t\t\t// click in empty area -> create a new file #116676\n\t\t\t\tthis.commandService.executeCommand(NEW_FILE_COMMAND_ID);\n\t\t\t}\n\t\t}));\n\n\t\t// save view state\n\t\tthis._register(this.storageService.onWillSaveState(() => {\n\t\t\tthis.storageService.store(ExplorerView.TREE_VIEW_STATE_STORAGE_KEY, JSON.stringify(this.tree.getViewState()), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}));\n\t}\n\n\t// React on events\n\n\tprivate onConfigurationUpdated(configuration: IFilesConfiguration, event?: IConfigurationChangeEvent): void {\n\t\tthis.autoReveal = configuration?.explorer?.autoReveal;\n\n\t\t// Push down config updates to components of viewer\n\t\tif (event && (event.affectsConfiguration('explorer.decorations.colors') || event.affectsConfiguration('explorer.decorations.badges'))) {\n\t\t\tthis.refresh(true);\n\t\t}\n\t}\n\n\tprivate setContextKeys(stat: ExplorerItem | null | undefined): void {\n\t\tconst isSingleFolder = this.contextService.getWorkbenchState() === WorkbenchState.FOLDER;\n\t\tconst resource = stat ? stat.resource : isSingleFolder ? this.contextService.getWorkspace().folders[0].uri : null;\n\t\tthis.resourceContext.set(resource);\n\t\tthis.folderContext.set((isSingleFolder && !stat) || !!stat && stat.isDirectory);\n\t\tthis.readonlyContext.set(!!stat && stat.isReadonly);\n\t\tthis.rootContext.set(!stat || (stat && stat.isRoot));\n\n\t\tif (resource) {\n\t\t\tconst overrides = resource ? this.editorService.getEditorOverrides(resource, undefined, undefined) : [];\n\t\t\tthis.availableEditorIdsContext.set(overrides.map(([, entry]) => entry.id).join(','));\n\t\t} else {\n\t\t\tthis.availableEditorIdsContext.reset();\n\t\t}\n\t}\n\n\tprivate async onContextMenu(e: ITreeContextMenuEvent<ExplorerItem>): Promise<void> {\n\t\tconst disposables = new DisposableStore();\n\t\tlet stat = e.element;\n\t\tlet anchor = e.anchor;\n\n\t\t// Compressed folders\n\t\tif (stat) {\n\t\t\tconst controller = this.renderer.getCompressedNavigationController(stat);\n\n\t\t\tif (controller) {\n\t\t\t\tif (e.browserEvent instanceof KeyboardEvent || isCompressedFolderName(e.browserEvent.target)) {\n\t\t\t\t\tanchor = controller.labels[controller.index];\n\t\t\t\t} else {\n\t\t\t\t\tcontroller.last();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// update dynamic contexts\n\t\tthis.fileCopiedContextKey.set(await this.clipboardService.hasResources());\n\t\tthis.setContextKeys(stat);\n\n\t\tconst selection = this.tree.getSelection();\n\n\t\tconst actions: IAction[] = [];\n\t\tconst roots = this.explorerService.roots; // If the click is outside of the elements pass the root resource if there is only one root. If there are multiple roots pass empty object.\n\t\tlet arg: URI | {};\n\t\tif (stat instanceof ExplorerItem) {\n\t\t\tconst compressedController = this.renderer.getCompressedNavigationController(stat);\n\t\t\targ = compressedController ? compressedController.current.resource : stat.resource;\n\t\t} else {\n\t\t\targ = roots.length === 1 ? roots[0].resource : {};\n\t\t}\n\t\tdisposables.add(createAndFillInContextMenuActions(this.contributedContextMenu, { arg, shouldForwardArgs: true }, actions));\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\n\t\t\t\tdisposables.dispose();\n\t\t\t},\n\t\t\tgetActionsContext: () => stat && selection && selection.indexOf(stat) >= 0\n\t\t\t\t? selection.map((fs: ExplorerItem) => fs.resource)\n\t\t\t\t: stat instanceof ExplorerItem ? [stat.resource] : []\n\t\t});\n\t}\n\n\tprivate onFocusChanged(elements: ExplorerItem[]): void {\n\t\tconst stat = elements && elements.length ? elements[0] : undefined;\n\t\tthis.setContextKeys(stat);\n\n\t\tif (stat) {\n\t\t\tconst enableTrash = this.configurationService.getValue<IFilesConfiguration>().files.enableTrash;\n\t\t\tconst hasCapability = this.fileService.hasCapability(stat.resource, FileSystemProviderCapabilities.Trash);\n\t\t\tthis.resourceMoveableToTrash.set(enableTrash && hasCapability);\n\t\t} else {\n\t\t\tthis.resourceMoveableToTrash.reset();\n\t\t}\n\n\t\tconst compressedNavigationController = stat && this.renderer.getCompressedNavigationController(stat);\n\n\t\tif (!compressedNavigationController) {\n\t\t\tthis.compressedFocusContext.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.compressedFocusContext.set(true);\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\t// General methods\n\n\t/**\n\t * Refresh the contents of the explorer to get up to date data from the disk about the file structure.\n\t * If the item is passed we refresh only that level of the tree, otherwise we do a full refresh.\n\t */\n\trefresh(recursive: boolean, item?: ExplorerItem, cancelEditing: boolean = true): Promise<void> {\n\t\tif (!this.tree || !this.isBodyVisible() || (item && !this.tree.hasNode(item))) {\n\t\t\t// Tree node doesn't exist yet\n\t\t\tthis.shouldRefresh = true;\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (cancelEditing && this.explorerService.isEditable(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tconst toRefresh = item || this.tree.getInput();\n\t\treturn this.tree.updateChildren(toRefresh, recursive, false, {\n\t\t\tdiffIdentityProvider: identityProvider\n\t\t});\n\t}\n\n\tfocusNeighbourIfItemFocused(item: ExplorerItem): void {\n\t\tconst focus = this.tree.getFocus();\n\t\tif (focus.length !== 1) {\n\t\t\treturn;\n\t\t}\n\t\tconst compressedController = this.renderer.getCompressedNavigationController(focus[0]) || this.renderer.getCompressedNavigationController(item);\n\t\tconst indexOfItem = compressedController?.items.indexOf(item) || -1;\n\t\tconst itemsCompressedTogether = compressedController && (compressedController.items.indexOf(focus[0]) >= 0) && (indexOfItem >= 0);\n\n\t\tif (focus[0] === item || itemsCompressedTogether) {\n\t\t\tif (itemsCompressedTogether && indexOfItem > 0 && item.parent) {\n\t\t\t\t// In case of compact items just focus the parent if it is part of the compact item. So the focus stays\n\t\t\t\tthis.tree.setFocus([item.parent]);\n\t\t\t} else {\n\t\t\t\tthis.tree.focusNext();\n\t\t\t\tconst newFocus = this.tree.getFocus();\n\t\t\t\tif (newFocus.length === 1 && newFocus[0] === item) {\n\t\t\t\t\t// There was no next item to focus, focus the previous one\n\t\t\t\t\tthis.tree.focusPrevious();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride getOptimalWidth(): number {\n\t\tconst parentNode = this.tree.getHTMLElement();\n\t\tconst childNodes = ([] as HTMLElement[]).slice.call(parentNode.querySelectorAll('.explorer-item .label-name')); // select all file labels\n\n\t\treturn DOM.getLargestChildWidth(parentNode, childNodes);\n\t}\n\n\tasync setTreeInput(): Promise<void> {\n\t\tif (!this.isBodyVisible()) {\n\t\t\tthis.shouldRefresh = true;\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst initialInputSetup = !this.tree.getInput();\n\t\tif (initialInputSetup) {\n\t\t\tperf.mark('code/willResolveExplorer');\n\t\t}\n\t\tconst roots = this.explorerService.roots;\n\t\tlet input: ExplorerItem | ExplorerItem[] = roots[0];\n\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.FOLDER || roots[0].isError) {\n\t\t\t// Display roots only when multi folder workspace\n\t\t\tinput = roots;\n\t\t}\n\n\t\tlet viewState: IAsyncDataTreeViewState | undefined;\n\t\tif (this.tree && this.tree.getInput()) {\n\t\t\tviewState = this.tree.getViewState();\n\t\t} else {\n\t\t\tconst rawViewState = this.storageService.get(ExplorerView.TREE_VIEW_STATE_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t\tif (rawViewState) {\n\t\t\t\tviewState = JSON.parse(rawViewState);\n\t\t\t}\n\t\t}\n\n\t\tconst previousInput = this.tree.getInput();\n\t\tconst promise = this.tree.setInput(input, viewState).then(async () => {\n\t\t\tif (Array.isArray(input)) {\n\t\t\t\tif (!viewState || previousInput instanceof ExplorerItem) {\n\t\t\t\t\t// There is no view state for this workspace, expand all roots. Or we transitioned from a folder workspace.\n\t\t\t\t\tawait Promise.all(input.map(async item => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.tree.expand(item);\n\t\t\t\t\t\t} catch (e) { }\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(previousInput) && previousInput.length < input.length) {\n\t\t\t\t\t// Roots added to the explorer -> expand them.\n\t\t\t\t\tawait Promise.all(input.slice(previousInput.length).map(async item => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.tree.expand(item);\n\t\t\t\t\t\t} catch (e) { }\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (initialInputSetup) {\n\t\t\t\tperf.mark('code/didResolveExplorer');\n\t\t\t}\n\t\t});\n\n\t\tthis.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Explorer,\n\t\t\tdelay: this.layoutService.isRestored() ? 800 : 1500 // reduce progress visibility when still restoring\n\t\t}, _progress => promise);\n\n\t\tawait promise;\n\t\tif (!this.decorationsProvider) {\n\t\t\tthis.decorationsProvider = new ExplorerDecorationsProvider(this.explorerService, this.contextService);\n\t\t\tthis._register(this.decorationService.registerDecorationsProvider(this.decorationsProvider));\n\t\t}\n\t}\n\n\tpublic async selectResource(resource: URI | undefined, reveal = this.autoReveal, retry = 0): Promise<void> {\n\t\t// do no retry more than once to prevent inifinite loops in cases of inconsistent model\n\t\tif (retry === 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!resource || !this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Expand all stats in the parent chain.\n\t\tlet item: ExplorerItem | null = this.explorerService.findClosestRoot(resource);\n\n\t\twhile (item && item.resource.toString() !== resource.toString()) {\n\t\t\ttry {\n\t\t\t\tawait this.tree.expand(item);\n\t\t\t} catch (e) {\n\t\t\t\treturn this.selectResource(resource, reveal, retry + 1);\n\t\t\t}\n\n\t\t\tfor (let child of item.children.values()) {\n\t\t\t\tif (this.uriIdentityService.extUri.isEqualOrParent(resource, child.resource)) {\n\t\t\t\t\titem = child;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\titem = null;\n\t\t\t}\n\t\t}\n\n\t\tif (item) {\n\t\t\tif (item === this.tree.getInput()) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t\tthis.tree.setSelection([]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (reveal === true && this.tree.getRelativeTop(item) === null) {\n\t\t\t\t\t// Don't scroll to the item if it's already visible, or if set not to.\n\t\t\t\t\tthis.tree.reveal(item, 0.5);\n\t\t\t\t}\n\n\t\t\t\tthis.tree.setFocus([item]);\n\t\t\t\tthis.tree.setSelection([item]);\n\t\t\t} catch (e) {\n\t\t\t\t// Element might not be in the tree, try again and silently fail\n\t\t\t\treturn this.selectResource(resource, reveal, retry + 1);\n\t\t\t}\n\t\t}\n\t}\n\n\titemsCopied(stats: ExplorerItem[], cut: boolean, previousCut: ExplorerItem[] | undefined): void {\n\t\tthis.fileCopiedContextKey.set(stats.length > 0);\n\t\tthis.resourceCutContextKey.set(cut && stats.length > 0);\n\t\tif (previousCut) {\n\t\t\tpreviousCut.forEach(item => this.tree.rerender(item));\n\t\t}\n\t\tif (cut) {\n\t\t\tstats.forEach(s => this.tree.rerender(s));\n\t\t}\n\t}\n\n\tcollapseAll(): void {\n\t\tif (this.explorerService.isEditable(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tconst treeInput = this.tree.getInput();\n\t\tif (Array.isArray(treeInput)) {\n\t\t\tif (hasExpandedRootChild(this.tree, treeInput)) {\n\t\t\t\ttreeInput.forEach(folder => {\n\t\t\t\t\tfolder.children.forEach(child => this.tree.hasNode(child) && this.tree.collapse(child, true));\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.tree.collapseAll();\n\t}\n\n\tpreviousCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.previous();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tnextCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.next();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tfirstCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.first();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tlastCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.last();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tprivate updateCompressedNavigationContextKeys(controller: ICompressedNavigationController): void {\n\t\tthis.compressedFocusFirstContext.set(controller.index === 0);\n\t\tthis.compressedFocusLastContext.set(controller.index === controller.count - 1);\n\t}\n\n\tstyleListDropBackground(styles: IExplorerViewStyles): void {\n\t\tconst content: string[] = [];\n\n\t\tif (styles.listDropBackground) {\n\t\t\tcontent.push(`.explorer-viewlet .explorer-item .monaco-icon-name-container.multiple > .label-name.drop-target > .monaco-highlighted-label { background-color: ${styles.listDropBackground}; }`);\n\t\t}\n\n\t\tconst newStyles = content.join('\\n');\n\t\tif (newStyles !== this.styleElement.textContent) {\n\t\t\tthis.styleElement.textContent = newStyles;\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tif (this.dragHandler) {\n\t\t\tthis.dragHandler.dispose();\n\t\t}\n\t\tsuper.dispose();\n\t}\n}\n\nfunction createFileIconThemableTreeContainerScope(container: HTMLElement, themeService: IThemeService): IDisposable {\n\tcontainer.classList.add('file-icon-themable-tree');\n\tcontainer.classList.add('show-file-icons');\n\n\tconst onDidChangeFileIconTheme = (theme: IFileIconTheme) => {\n\t\tcontainer.classList.toggle('align-icons-and-twisties', theme.hasFileIcons && !theme.hasFolderIcons);\n\t\tcontainer.classList.toggle('hide-arrows', theme.hidesExplorerArrows === true);\n\t};\n\n\tonDidChangeFileIconTheme(themeService.getFileIconTheme());\n\treturn themeService.onDidFileIconThemeChange(onDidChangeFileIconTheme);\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.createFileFromExplorer',\n\t\t\ttitle: nls.localize('createNewFile', \"New File\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.newFile,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyEqualsExpr.create('view', VIEW_ID),\n\t\t\t\torder: 10\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tcommandService.executeCommand(NEW_FILE_COMMAND_ID);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.createFolderFromExplorer',\n\t\t\ttitle: nls.localize('createNewFolder', \"New Folder\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.newFolder,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyEqualsExpr.create('view', VIEW_ID),\n\t\t\t\torder: 20\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tcommandService.executeCommand(NEW_FOLDER_COMMAND_ID);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.refreshFilesExplorer',\n\t\t\ttitle: { value: nls.localize('refreshExplorer', \"Refresh Explorer\"), original: 'Refresh Explorer' },\n\t\t\tf1: true,\n\t\t\ticon: Codicon.refresh,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyEqualsExpr.create('view', VIEW_ID),\n\t\t\t\torder: 30\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewletService = accessor.get(IViewletService);\n\t\tconst explorerService = accessor.get(IExplorerService);\n\t\tawait viewletService.openViewlet(VIEWLET_ID);\n\t\tawait explorerService.refresh();\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.collapseExplorerFolders',\n\t\t\ttitle: { value: nls.localize('collapseExplorerFolders', \"Collapse Folders in Explorer\"), original: 'Collapse Folders in Explorer' },\n\t\t\tf1: true,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyEqualsExpr.create('view', VIEW_ID),\n\t\t\t\torder: 40\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst explorerView = viewsService.getViewWithId(VIEW_ID) as ExplorerView;\n\t\texplorerView.collapseAll();\n\t}\n});\n"]}