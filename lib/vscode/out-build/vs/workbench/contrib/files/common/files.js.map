{"version":3,"sources":["vs/workbench/contrib/files/common/files.ts"],"names":[],"mappings":"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","file":"files.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IWorkbenchEditorConfiguration, IEditorIdentifier, IEditorInput, EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IFilesConfiguration as PlatformIFilesConfiguration, FileChangeType, IFileService } from 'vs/platform/files/common/files';\nimport { ContextKeyExpr, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ITextModelContentProvider } from 'vs/editor/common/services/resolverService';\nimport { Disposable, MutableDisposable } from 'vs/base/common/lifecycle';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { IModeService, ILanguageSelection } from 'vs/editor/common/services/modeService';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { InputFocusedContextKey } from 'vs/platform/contextkey/common/contextkeys';\nimport { IEditorGroup } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { once } from 'vs/base/common/functional';\nimport { ITextEditorOptions } from 'vs/platform/editor/common/editor';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { localize } from 'vs/nls';\n\n/**\n * Explorer viewlet id.\n */\nexport const VIEWLET_ID = 'workbench.view.explorer';\n\n/**\n * Explorer file view id.\n */\nexport const VIEW_ID = 'workbench.explorer.fileView';\n\n/**\n * Context Keys to use with keybindings for the Explorer and Open Editors view\n */\nexport const ExplorerViewletVisibleContext = new RawContextKey<boolean>('explorerViewletVisible', true, { type: 'boolean', description: localize('explorerViewletVisible', \"True when the EXPLORER viewlet is visible.\") });\nexport const ExplorerFolderContext = new RawContextKey<boolean>('explorerResourceIsFolder', false, { type: 'boolean', description: localize('explorerResourceIsFolder', \"True when the focused item in the EXPLORER is a folder.\") });\nexport const ExplorerResourceReadonlyContext = new RawContextKey<boolean>('explorerResourceReadonly', false, { type: 'boolean', description: localize('explorerResourceReadonly', \"True when the focused item in the EXPLORER is readonly.\") });\nexport const ExplorerResourceNotReadonlyContext = ExplorerResourceReadonlyContext.toNegated();\n/**\n * Comma separated list of editor ids that can be used for the selected explorer resource.\n */\nexport const ExplorerResourceAvailableEditorIdsContext = new RawContextKey<string>('explorerResourceAvailableEditorIds', '');\nexport const ExplorerRootContext = new RawContextKey<boolean>('explorerResourceIsRoot', false, { type: 'boolean', description: localize('explorerResourceIsRoot', \"True when the focused item in the EXPLORER is a root folder.\") });\nexport const ExplorerResourceCut = new RawContextKey<boolean>('explorerResourceCut', false, { type: 'boolean', description: localize('explorerResourceCut', \"True when an item in the EXPLORER has been cut for cut and paste.\") });\nexport const ExplorerResourceMoveableToTrash = new RawContextKey<boolean>('explorerResourceMoveableToTrash', false, { type: 'boolean', description: localize('explorerResourceMoveableToTrash', \"True when the focused item in the EXPLORER can be moved to trash.\") });\nexport const FilesExplorerFocusedContext = new RawContextKey<boolean>('filesExplorerFocus', true, { type: 'boolean', description: localize('filesExplorerFocus', \"True when the focus is inside the EXPLORER view.\") });\nexport const OpenEditorsVisibleContext = new RawContextKey<boolean>('openEditorsVisible', false, { type: 'boolean', description: localize('openEditorsVisible', \"True when the OPEN EDITORS view is visible.\") });\nexport const OpenEditorsFocusedContext = new RawContextKey<boolean>('openEditorsFocus', true, { type: 'boolean', description: localize('openEditorsFocus', \"True when the focus is inside the OPEN EDITORS view.\") });\nexport const ExplorerFocusedContext = new RawContextKey<boolean>('explorerViewletFocus', true, { type: 'boolean', description: localize('explorerViewletFocus', \"True when the focus is inside the EXPLORER viewlet.\") });\n\n// compressed nodes\nexport const ExplorerCompressedFocusContext = new RawContextKey<boolean>('explorerViewletCompressedFocus', true, { type: 'boolean', description: localize('explorerViewletCompressedFocus', \"True when the focused item in the EXPLORER view is a compact item.\") });\nexport const ExplorerCompressedFirstFocusContext = new RawContextKey<boolean>('explorerViewletCompressedFirstFocus', true, { type: 'boolean', description: localize('explorerViewletCompressedFirstFocus', \"True when the focus is inside a compact item's first part in the EXPLORER view.\") });\nexport const ExplorerCompressedLastFocusContext = new RawContextKey<boolean>('explorerViewletCompressedLastFocus', true, { type: 'boolean', description: localize('explorerViewletCompressedLastFocus', \"True when the focus is inside a compact item's last part in the EXPLORER view.\") });\n\nexport const FilesExplorerFocusCondition = ContextKeyExpr.and(ExplorerViewletVisibleContext, FilesExplorerFocusedContext, ContextKeyExpr.not(InputFocusedContextKey));\nexport const ExplorerFocusCondition = ContextKeyExpr.and(ExplorerViewletVisibleContext, ExplorerFocusedContext, ContextKeyExpr.not(InputFocusedContextKey));\n\n/**\n * Text file editor id.\n */\nexport const TEXT_FILE_EDITOR_ID = 'workbench.editors.files.textFileEditor';\n\n/**\n * File editor input id.\n */\nexport const FILE_EDITOR_INPUT_ID = 'workbench.editors.files.fileEditorInput';\n\n/**\n * Binary file editor id.\n */\nexport const BINARY_FILE_EDITOR_ID = 'workbench.editors.files.binaryFileEditor';\n\nexport interface IFilesConfiguration extends PlatformIFilesConfiguration, IWorkbenchEditorConfiguration {\n\texplorer: {\n\t\topenEditors: {\n\t\t\tvisible: number;\n\t\t\tsortOrder: 'editorOrder' | 'alphabetical';\n\t\t};\n\t\tautoReveal: boolean | 'focusNoScroll';\n\t\tenableDragAndDrop: boolean;\n\t\tconfirmDelete: boolean;\n\t\tsortOrder: SortOrder;\n\t\tdecorations: {\n\t\t\tcolors: boolean;\n\t\t\tbadges: boolean;\n\t\t};\n\t\tincrementalNaming: 'simple' | 'smart';\n\t};\n\teditor: IEditorOptions;\n}\n\nexport interface IFileResource {\n\tresource: URI;\n\tisDirectory?: boolean;\n}\n\nexport const enum SortOrder {\n\tDefault = 'default',\n\tMixed = 'mixed',\n\tFilesFirst = 'filesFirst',\n\tType = 'type',\n\tModified = 'modified'\n}\n\nexport class TextFileContentProvider extends Disposable implements ITextModelContentProvider {\n\tprivate readonly fileWatcherDisposable = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IModeService private readonly modeService: IModeService,\n\t\t@IModelService private readonly modelService: IModelService\n\t) {\n\t\tsuper();\n\t}\n\n\tstatic async open(resource: URI, scheme: string, label: string, editorService: IEditorService, options?: ITextEditorOptions): Promise<void> {\n\t\tawait editorService.openEditor({\n\t\t\tleftResource: TextFileContentProvider.resourceToTextFile(scheme, resource),\n\t\t\trightResource: resource,\n\t\t\tlabel,\n\t\t\toptions\n\t\t});\n\t}\n\n\tprivate static resourceToTextFile(scheme: string, resource: URI): URI {\n\t\treturn resource.with({ scheme, query: JSON.stringify({ scheme: resource.scheme, query: resource.query }) });\n\t}\n\n\tprivate static textFileToResource(resource: URI): URI {\n\t\tconst { scheme, query } = JSON.parse(resource.query);\n\t\treturn resource.with({ scheme, query });\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tif (!resource.query) {\n\t\t\t// We require the URI to use the `query` to transport the original scheme and query\n\t\t\t// as done by `resourceToTextFile`\n\t\t\treturn null;\n\t\t}\n\n\t\tconst savedFileResource = TextFileContentProvider.textFileToResource(resource);\n\n\t\t// Make sure our text file is resolved up to date\n\t\tconst codeEditorModel = await this.resolveEditorModel(resource);\n\n\t\t// Make sure to keep contents up to date when it changes\n\t\tif (!this.fileWatcherDisposable.value) {\n\t\t\tthis.fileWatcherDisposable.value = this.fileService.onDidFilesChange(changes => {\n\t\t\t\tif (changes.contains(savedFileResource, FileChangeType.UPDATED)) {\n\t\t\t\t\tthis.resolveEditorModel(resource, false /* do not create if missing */); // update model when resource changes\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (codeEditorModel) {\n\t\t\t\tonce(codeEditorModel.onWillDispose)(() => this.fileWatcherDisposable.clear());\n\t\t\t}\n\t\t}\n\n\t\treturn codeEditorModel;\n\t}\n\n\tprivate resolveEditorModel(resource: URI, createAsNeeded?: true): Promise<ITextModel>;\n\tprivate resolveEditorModel(resource: URI, createAsNeeded?: boolean): Promise<ITextModel | null>;\n\tprivate async resolveEditorModel(resource: URI, createAsNeeded: boolean = true): Promise<ITextModel | null> {\n\t\tconst savedFileResource = TextFileContentProvider.textFileToResource(resource);\n\n\t\tconst content = await this.textFileService.readStream(savedFileResource);\n\n\t\tlet codeEditorModel = this.modelService.getModel(resource);\n\t\tif (codeEditorModel) {\n\t\t\tthis.modelService.updateModel(codeEditorModel, content.value);\n\t\t} else if (createAsNeeded) {\n\t\t\tconst textFileModel = this.modelService.getModel(savedFileResource);\n\n\t\t\tlet languageSelector: ILanguageSelection;\n\t\t\tif (textFileModel) {\n\t\t\t\tlanguageSelector = this.modeService.create(textFileModel.getModeId());\n\t\t\t} else {\n\t\t\t\tlanguageSelector = this.modeService.createByFilepathOrFirstLine(savedFileResource);\n\t\t\t}\n\n\t\t\tcodeEditorModel = this.modelService.createModel(content.value, languageSelector, resource);\n\t\t}\n\n\t\treturn codeEditorModel;\n\t}\n}\n\nexport class OpenEditor implements IEditorIdentifier {\n\n\tprivate id: number;\n\tprivate static COUNTER = 0;\n\n\tconstructor(private _editor: IEditorInput, private _group: IEditorGroup) {\n\t\tthis.id = OpenEditor.COUNTER++;\n\t}\n\n\tget editor() {\n\t\treturn this._editor;\n\t}\n\n\tget group() {\n\t\treturn this._group;\n\t}\n\n\tget groupId() {\n\t\treturn this._group.id;\n\t}\n\n\tgetId(): string {\n\t\treturn `openeditor:${this.groupId}:${this.id}`;\n\t}\n\n\tisPreview(): boolean {\n\t\treturn this._group.previewEditor === this.editor;\n\t}\n\n\tisSticky(): boolean {\n\t\treturn this._group.isSticky(this.editor);\n\t}\n\n\tgetResource(): URI | undefined {\n\t\treturn EditorResourceAccessor.getOriginalUri(this.editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t}\n}\n"]}