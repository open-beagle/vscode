{"version":3,"sources":["vs/workbench/contrib/bulkEdit/browser/preview/bulkEditPane.ts"],"names":[],"mappings":"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","file":"bulkEditPane.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./bulkEdit';\nimport { WorkbenchAsyncDataTree, IOpenEvent } from 'vs/platform/list/browser/listService';\nimport { BulkEditElement, BulkEditDelegate, TextEditElementRenderer, FileElementRenderer, BulkEditDataSource, BulkEditIdentityProvider, FileElement, TextEditElement, BulkEditAccessibilityProvider, CategoryElementRenderer, BulkEditNaviLabelProvider, CategoryElement, BulkEditSorter } from 'vs/workbench/contrib/bulkEdit/browser/preview/bulkEditTree';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { registerThemingParticipant, IColorTheme, ICssStyleCollector, IThemeService } from 'vs/platform/theme/common/themeService';\nimport { diffInserted, diffRemoved } from 'vs/platform/theme/common/colorRegistry';\nimport { localize } from 'vs/nls';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { BulkEditPreviewProvider, BulkFileOperations, BulkFileOperationType } from 'vs/workbench/contrib/bulkEdit/browser/preview/bulkEditPreview';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { URI } from 'vs/base/common/uri';\nimport { ViewPane } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKeyService, RawContextKey, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IViewletViewOptions } from 'vs/workbench/browser/parts/views/viewsViewlet';\nimport { ResourceLabels, IResourceLabelsContainer } from 'vs/workbench/browser/labels';\nimport { IDialogService } from 'vs/platform/dialogs/common/dialogs';\nimport Severity from 'vs/base/common/severity';\nimport { basename, dirname } from 'vs/base/common/resources';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IAction } from 'vs/base/common/actions';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { ITreeContextMenuEvent } from 'vs/base/browser/ui/tree/tree';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { ITextEditorOptions } from 'vs/platform/editor/common/editor';\nimport type { IAsyncDataTreeViewState } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ResourceEdit } from 'vs/editor/browser/services/bulkEditService';\n\nconst enum State {\n\tData = 'data',\n\tMessage = 'message'\n}\n\nexport class BulkEditPane extends ViewPane {\n\n\tstatic readonly ID = 'refactorPreview';\n\n\tstatic readonly ctxHasCategories = new RawContextKey('refactorPreview.hasCategories', false);\n\tstatic readonly ctxGroupByFile = new RawContextKey('refactorPreview.groupByFile', true);\n\tstatic readonly ctxHasCheckedChanges = new RawContextKey('refactorPreview.hasCheckedChanges', true);\n\n\tprivate static readonly _memGroupByFile = `${BulkEditPane.ID}.groupByFile`;\n\n\tprivate _tree!: WorkbenchAsyncDataTree<BulkFileOperations, BulkEditElement, FuzzyScore>;\n\tprivate _treeDataSource!: BulkEditDataSource;\n\tprivate _treeViewStates = new Map<boolean, IAsyncDataTreeViewState>();\n\tprivate _message!: HTMLSpanElement;\n\n\tprivate readonly _ctxHasCategories: IContextKey<boolean>;\n\tprivate readonly _ctxGroupByFile: IContextKey<boolean>;\n\tprivate readonly _ctxHasCheckedChanges: IContextKey<boolean>;\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _sessionDisposables = new DisposableStore();\n\tprivate _currentResolve?: (edit?: ResourceEdit[]) => void;\n\tprivate _currentInput?: BulkFileOperations;\n\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(\n\t\t\t{ ...options, titleMenuId: MenuId.BulkEditTitle },\n\t\t\tkeybindingService, contextMenuService, configurationService, _contextKeyService, viewDescriptorService, _instaService, openerService, themeService, telemetryService\n\t\t);\n\n\t\tthis.element.classList.add('bulk-edit-panel', 'show-file-icons');\n\t\tthis._ctxHasCategories = BulkEditPane.ctxHasCategories.bindTo(_contextKeyService);\n\t\tthis._ctxGroupByFile = BulkEditPane.ctxGroupByFile.bindTo(_contextKeyService);\n\t\tthis._ctxHasCheckedChanges = BulkEditPane.ctxHasCheckedChanges.bindTo(_contextKeyService);\n\t}\n\n\toverride dispose(): void {\n\t\tthis._tree.dispose();\n\t\tthis._disposables.dispose();\n\t}\n\n\tprotected override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\n\t\tconst resourceLabels = this._instaService.createInstance(\n\t\t\tResourceLabels,\n\t\t\t<IResourceLabelsContainer>{ onDidChangeVisibility: this.onDidChangeBodyVisibility }\n\t\t);\n\t\tthis._disposables.add(resourceLabels);\n\n\t\t// tree\n\t\tconst treeContainer = document.createElement('div');\n\t\ttreeContainer.className = 'tree';\n\t\ttreeContainer.style.width = '100%';\n\t\ttreeContainer.style.height = '100%';\n\t\tparent.appendChild(treeContainer);\n\n\t\tthis._treeDataSource = this._instaService.createInstance(BulkEditDataSource);\n\t\tthis._treeDataSource.groupByFile = this._storageService.getBoolean(BulkEditPane._memGroupByFile, StorageScope.GLOBAL, true);\n\t\tthis._ctxGroupByFile.set(this._treeDataSource.groupByFile);\n\n\t\tthis._tree = <WorkbenchAsyncDataTree<BulkFileOperations, BulkEditElement, FuzzyScore>>this._instaService.createInstance(\n\t\t\tWorkbenchAsyncDataTree, this.id, treeContainer,\n\t\t\tnew BulkEditDelegate(),\n\t\t\t[this._instaService.createInstance(TextEditElementRenderer), this._instaService.createInstance(FileElementRenderer, resourceLabels), this._instaService.createInstance(CategoryElementRenderer)],\n\t\t\tthis._treeDataSource,\n\t\t\t{\n\t\t\t\taccessibilityProvider: this._instaService.createInstance(BulkEditAccessibilityProvider),\n\t\t\t\tidentityProvider: new BulkEditIdentityProvider(),\n\t\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\tkeyboardNavigationLabelProvider: new BulkEditNaviLabelProvider(),\n\t\t\t\tsorter: new BulkEditSorter(),\n\t\t\t\tselectionNavigation: true\n\t\t\t}\n\t\t);\n\n\t\tthis._disposables.add(this._tree.onContextMenu(this._onContextMenu, this));\n\t\tthis._disposables.add(this._tree.onDidOpen(e => this._openElementAsEditor(e)));\n\n\t\t// message\n\t\tthis._message = document.createElement('span');\n\t\tthis._message.className = 'message';\n\t\tthis._message.innerText = localize('empty.msg', \"Invoke a code action, like rename, to see a preview of its changes here.\");\n\t\tparent.appendChild(this._message);\n\n\t\t//\n\t\tthis._setState(State.Message);\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis._tree.layout(height, width);\n\t}\n\n\tprivate _setState(state: State): void {\n\t\tthis.element.dataset['state'] = state;\n\t}\n\n\tasync setInput(edit: ResourceEdit[], token: CancellationToken): Promise<ResourceEdit[] | undefined> {\n\t\tthis._setState(State.Data);\n\t\tthis._sessionDisposables.clear();\n\t\tthis._treeViewStates.clear();\n\n\t\tif (this._currentResolve) {\n\t\t\tthis._currentResolve(undefined);\n\t\t\tthis._currentResolve = undefined;\n\t\t}\n\n\t\tconst input = await this._instaService.invokeFunction(BulkFileOperations.create, edit);\n\t\tconst provider = this._instaService.createInstance(BulkEditPreviewProvider, input);\n\t\tthis._sessionDisposables.add(provider);\n\t\tthis._sessionDisposables.add(input);\n\n\t\t//\n\t\tconst hasCategories = input.categories.length > 1;\n\t\tthis._ctxHasCategories.set(hasCategories);\n\t\tthis._treeDataSource.groupByFile = !hasCategories || this._treeDataSource.groupByFile;\n\t\tthis._ctxHasCheckedChanges.set(input.checked.checkedCount > 0);\n\n\t\tthis._currentInput = input;\n\n\t\treturn new Promise<ResourceEdit[] | undefined>(async resolve => {\n\n\t\t\ttoken.onCancellationRequested(() => resolve(undefined));\n\n\t\t\tthis._currentResolve = resolve;\n\t\t\tthis._setTreeInput(input);\n\n\t\t\t// refresh when check state changes\n\t\t\tthis._sessionDisposables.add(input.checked.onDidChange(() => {\n\t\t\t\tthis._tree.updateChildren();\n\t\t\t\tthis._ctxHasCheckedChanges.set(input.checked.checkedCount > 0);\n\t\t\t}));\n\t\t});\n\t}\n\n\thasInput(): boolean {\n\t\treturn Boolean(this._currentInput);\n\t}\n\n\tprivate async _setTreeInput(input: BulkFileOperations) {\n\n\t\tconst viewState = this._treeViewStates.get(this._treeDataSource.groupByFile);\n\t\tawait this._tree.setInput(input, viewState);\n\t\tthis._tree.domFocus();\n\n\t\tif (viewState) {\n\t\t\treturn;\n\t\t}\n\n\t\t// async expandAll (max=10) is the default when no view state is given\n\t\tconst expand = [...this._tree.getNode(input).children].slice(0, 10);\n\t\twhile (expand.length > 0) {\n\t\t\tconst { element } = expand.shift()!;\n\t\t\tif (element instanceof FileElement) {\n\t\t\t\tawait this._tree.expand(element, true);\n\t\t\t}\n\t\t\tif (element instanceof CategoryElement) {\n\t\t\t\tawait this._tree.expand(element, true);\n\t\t\t\texpand.push(...this._tree.getNode(element).children);\n\t\t\t}\n\t\t}\n\t}\n\n\taccept(): void {\n\n\t\tconst conflicts = this._currentInput?.conflicts.list();\n\n\t\tif (!conflicts || conflicts.length === 0) {\n\t\t\tthis._done(true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet message: string;\n\t\tif (conflicts.length === 1) {\n\t\t\tmessage = localize('conflict.1', \"Cannot apply refactoring because '{0}' has changed in the meantime.\", this._labelService.getUriLabel(conflicts[0], { relative: true }));\n\t\t} else {\n\t\t\tmessage = localize('conflict.N', \"Cannot apply refactoring because {0} other files have changed in the meantime.\", conflicts.length);\n\t\t}\n\n\t\tthis._dialogService.show(Severity.Warning, message, []).finally(() => this._done(false));\n\t}\n\n\tdiscard() {\n\t\tthis._done(false);\n\t}\n\n\tprivate _done(accept: boolean): void {\n\t\tif (this._currentResolve) {\n\t\t\tthis._currentResolve(accept ? this._currentInput?.getWorkspaceEdit() : undefined);\n\t\t}\n\t\tthis._currentInput = undefined;\n\t\tthis._setState(State.Message);\n\t\tthis._sessionDisposables.clear();\n\t}\n\n\ttoggleChecked() {\n\t\tconst [first] = this._tree.getFocus();\n\t\tif ((first instanceof FileElement || first instanceof TextEditElement) && !first.isDisabled()) {\n\t\t\tfirst.setChecked(!first.isChecked());\n\t\t}\n\t}\n\n\tgroupByFile(): void {\n\t\tif (!this._treeDataSource.groupByFile) {\n\t\t\tthis.toggleGrouping();\n\t\t}\n\t}\n\n\tgroupByType(): void {\n\t\tif (this._treeDataSource.groupByFile) {\n\t\t\tthis.toggleGrouping();\n\t\t}\n\t}\n\n\ttoggleGrouping() {\n\t\tconst input = this._tree.getInput();\n\t\tif (input) {\n\n\t\t\t// (1) capture view state\n\t\t\tlet oldViewState = this._tree.getViewState();\n\t\t\tthis._treeViewStates.set(this._treeDataSource.groupByFile, oldViewState);\n\n\t\t\t// (2) toggle and update\n\t\t\tthis._treeDataSource.groupByFile = !this._treeDataSource.groupByFile;\n\t\t\tthis._setTreeInput(input);\n\n\t\t\t// (3) remember preference\n\t\t\tthis._storageService.store(BulkEditPane._memGroupByFile, this._treeDataSource.groupByFile, StorageScope.GLOBAL, StorageTarget.USER);\n\t\t\tthis._ctxGroupByFile.set(this._treeDataSource.groupByFile);\n\t\t}\n\t}\n\n\tprivate async _openElementAsEditor(e: IOpenEvent<BulkEditElement | undefined>): Promise<void> {\n\t\ttype Mutable<T> = {\n\t\t\t-readonly [P in keyof T]: T[P]\n\t\t};\n\n\t\tlet options: Mutable<ITextEditorOptions> = { ...e.editorOptions };\n\t\tlet fileElement: FileElement;\n\t\tif (e.element instanceof TextEditElement) {\n\t\t\tfileElement = e.element.parent;\n\t\t\toptions.selection = e.element.edit.textEdit.textEdit.range;\n\n\t\t} else if (e.element instanceof FileElement) {\n\t\t\tfileElement = e.element;\n\t\t\toptions.selection = e.element.edit.textEdits[0]?.textEdit.textEdit.range;\n\n\t\t} else {\n\t\t\t// invalid event\n\t\t\treturn;\n\t\t}\n\n\t\tconst previewUri = BulkEditPreviewProvider.asPreviewUri(fileElement.edit.uri);\n\n\t\tif (fileElement.edit.type & BulkFileOperationType.Delete) {\n\t\t\t// delete -> show single editor\n\t\t\tthis._editorService.openEditor({\n\t\t\t\tlabel: localize('edt.title.del', \"{0} (delete, refactor preview)\", basename(fileElement.edit.uri)),\n\t\t\t\tresource: previewUri,\n\t\t\t\toptions\n\t\t\t});\n\n\t\t} else {\n\t\t\t// rename, create, edits -> show diff editr\n\t\t\tlet leftResource: URI | undefined;\n\t\t\ttry {\n\t\t\t\t(await this._textModelService.createModelReference(fileElement.edit.uri)).dispose();\n\t\t\t\tleftResource = fileElement.edit.uri;\n\t\t\t} catch {\n\t\t\t\tleftResource = BulkEditPreviewProvider.emptyPreview;\n\t\t\t}\n\n\t\t\tlet typeLabel: string | undefined;\n\t\t\tif (fileElement.edit.type & BulkFileOperationType.Rename) {\n\t\t\t\ttypeLabel = localize('rename', \"rename\");\n\t\t\t} else if (fileElement.edit.type & BulkFileOperationType.Create) {\n\t\t\t\ttypeLabel = localize('create', \"create\");\n\t\t\t}\n\n\t\t\tlet label: string;\n\t\t\tif (typeLabel) {\n\t\t\t\tlabel = localize('edt.title.2', \"{0} ({1}, refactor preview)\", basename(fileElement.edit.uri), typeLabel);\n\t\t\t} else {\n\t\t\t\tlabel = localize('edt.title.1', \"{0} (refactor preview)\", basename(fileElement.edit.uri));\n\t\t\t}\n\n\t\t\tthis._editorService.openEditor({\n\t\t\t\tleftResource,\n\t\t\t\trightResource: previewUri,\n\t\t\t\tlabel,\n\t\t\t\tdescription: this._labelService.getUriLabel(dirname(leftResource), { relative: true }),\n\t\t\t\toptions\n\t\t\t}, e.sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\t\t}\n\t}\n\n\tprivate _onContextMenu(e: ITreeContextMenuEvent<any>): void {\n\t\tconst menu = this._menuService.createMenu(MenuId.BulkEditContext, this._contextKeyService);\n\t\tconst actions: IAction[] = [];\n\t\tconst disposable = createAndFillInContextMenuActions(menu, undefined, actions);\n\n\t\tthis._contextMenuService.showContextMenu({\n\t\t\tgetActions: () => actions,\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tonHide: () => {\n\t\t\t\tdisposable.dispose();\n\t\t\t\tmenu.dispose();\n\t\t\t}\n\t\t});\n\t}\n}\n\nregisterThemingParticipant((theme: IColorTheme, collector: ICssStyleCollector) => {\n\n\tconst diffInsertedColor = theme.getColor(diffInserted);\n\tif (diffInsertedColor) {\n\t\tcollector.addRule(`.monaco-workbench .bulk-edit-panel .highlight.insert { background-color: ${diffInsertedColor}; }`);\n\t}\n\tconst diffRemovedColor = theme.getColor(diffRemoved);\n\tif (diffRemovedColor) {\n\t\tcollector.addRule(`.monaco-workbench .bulk-edit-panel .highlight.remove { background-color: ${diffRemovedColor}; }`);\n\t}\n});\n"]}