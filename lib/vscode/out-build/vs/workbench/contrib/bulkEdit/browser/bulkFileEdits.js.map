{"version":3,"file":"bulkFileEdits.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/contrib/bulkEdit/browser/bulkFileEdits.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport { WorkspaceFileEditOptions } from 'vs/editor/common/modes';\nimport { IFileService, FileSystemProviderCapabilities, IFileContent } from 'vs/platform/files/common/files';\nimport { IProgress } from 'vs/platform/progress/common/progress';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkingCopyFileService, IFileOperationUndoRedoInfo, IMoveOperation, ICopyOperation, IDeleteOperation, ICreateOperation, ICreateFileOperation } from 'vs/workbench/services/workingCopy/common/workingCopyFileService';\nimport { IWorkspaceUndoRedoElement, UndoRedoElementType, IUndoRedoService, UndoRedoGroup, UndoRedoSource } from 'vs/platform/undoRedo/common/undoRedo';\nimport { URI } from 'vs/base/common/uri';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { ResourceFileEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { flatten, tail } from 'vs/base/common/arrays';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\n\ninterface IFileOperation {\n\turis: URI[];\n\tperform(token: CancellationToken): Promise<IFileOperation>;\n}\n\nclass Noop implements IFileOperation {\n\treadonly uris = [];\n\tasync perform() { return this; }\n\ttoString(): string {\n\t\treturn '(noop)';\n\t}\n}\n\nclass RenameEdit {\n\treadonly type = 'rename';\n\tconstructor(\n\t\treadonly newUri: URI,\n\t\treadonly oldUri: URI,\n\t\treadonly options: WorkspaceFileEditOptions\n\t) { }\n}\n\nclass RenameOperation implements IFileOperation {\n\n\tconstructor(\n\t\tprivate readonly _edits: RenameEdit[],\n\t\tprivate readonly _undoRedoInfo: IFileOperationUndoRedoInfo,\n\t\t@IWorkingCopyFileService private readonly _workingCopyFileService: IWorkingCopyFileService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t) { }\n\n\tget uris() {\n\t\treturn flatten(this._edits.map(edit => [edit.newUri, edit.oldUri]));\n\t}\n\n\tasync perform(token: CancellationToken): Promise<IFileOperation> {\n\n\t\tconst moves: IMoveOperation[] = [];\n\t\tconst undoes: RenameEdit[] = [];\n\t\tfor (const edit of this._edits) {\n\t\t\t// check: not overwriting, but ignoring, and the target file exists\n\t\t\tconst skip = edit.options.overwrite === undefined && edit.options.ignoreIfExists && await this._fileService.exists(edit.newUri);\n\t\t\tif (!skip) {\n\t\t\t\tmoves.push({\n\t\t\t\t\tfile: { source: edit.oldUri, target: edit.newUri },\n\t\t\t\t\toverwrite: edit.options.overwrite\n\t\t\t\t});\n\n\t\t\t\t// reverse edit\n\t\t\t\tundoes.push(new RenameEdit(edit.oldUri, edit.newUri, edit.options));\n\t\t\t}\n\t\t}\n\n\t\tif (moves.length === 0) {\n\t\t\treturn new Noop();\n\t\t}\n\n\t\tawait this._workingCopyFileService.move(moves, token, this._undoRedoInfo);\n\t\treturn new RenameOperation(undoes, { isUndoing: true }, this._workingCopyFileService, this._fileService);\n\t}\n\n\ttoString(): string {\n\t\treturn `(rename ${this._edits.map(edit => `${edit.oldUri} to ${edit.newUri}`).join(', ')})`;\n\t}\n}\n\nclass CopyEdit {\n\treadonly type = 'copy';\n\tconstructor(\n\t\treadonly newUri: URI,\n\t\treadonly oldUri: URI,\n\t\treadonly options: WorkspaceFileEditOptions\n\t) { }\n}\n\nclass CopyOperation implements IFileOperation {\n\n\tconstructor(\n\t\tprivate readonly _edits: CopyEdit[],\n\t\tprivate readonly _undoRedoInfo: IFileOperationUndoRedoInfo,\n\t\t@IWorkingCopyFileService private readonly _workingCopyFileService: IWorkingCopyFileService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService\n\t) { }\n\n\tget uris() {\n\t\treturn flatten(this._edits.map(edit => [edit.newUri, edit.oldUri]));\n\t}\n\n\tasync perform(token: CancellationToken): Promise<IFileOperation> {\n\n\t\t// (1) create copy operations, remove noops\n\t\tconst copies: ICopyOperation[] = [];\n\t\tfor (const edit of this._edits) {\n\t\t\t//check: not overwriting, but ignoring, and the target file exists\n\t\t\tconst skip = edit.options.overwrite === undefined && edit.options.ignoreIfExists && await this._fileService.exists(edit.newUri);\n\t\t\tif (!skip) {\n\t\t\t\tcopies.push({ file: { source: edit.oldUri, target: edit.newUri }, overwrite: edit.options.overwrite });\n\t\t\t}\n\t\t}\n\n\t\tif (copies.length === 0) {\n\t\t\treturn new Noop();\n\t\t}\n\n\t\t// (2) perform the actual copy and use the return stats to build undo edits\n\t\tconst stats = await this._workingCopyFileService.copy(copies, token, this._undoRedoInfo);\n\t\tconst undoes: DeleteEdit[] = [];\n\n\t\tfor (let i = 0; i < stats.length; i++) {\n\t\t\tconst stat = stats[i];\n\t\t\tconst edit = this._edits[i];\n\t\t\tundoes.push(new DeleteEdit(stat.resource, { recursive: true, folder: this._edits[i].options.folder || stat.isDirectory, ...edit.options }, false));\n\t\t}\n\n\t\treturn this._instaService.createInstance(DeleteOperation, undoes, { isUndoing: true });\n\t}\n\n\ttoString(): string {\n\t\treturn `(copy ${this._edits.map(edit => `${edit.oldUri} to ${edit.newUri}`).join(', ')})`;\n\t}\n}\n\nclass CreateEdit {\n\treadonly type = 'create';\n\tconstructor(\n\t\treadonly newUri: URI,\n\t\treadonly options: WorkspaceFileEditOptions,\n\t\treadonly contents: VSBuffer | undefined,\n\t) { }\n}\n\nclass CreateOperation implements IFileOperation {\n\n\tconstructor(\n\t\tprivate readonly _edits: CreateEdit[],\n\t\tprivate readonly _undoRedoInfo: IFileOperationUndoRedoInfo,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IWorkingCopyFileService private readonly _workingCopyFileService: IWorkingCopyFileService,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@ITextFileService private readonly _textFileService: ITextFileService\n\t) { }\n\n\tget uris() {\n\t\treturn this._edits.map(edit => edit.newUri);\n\t}\n\n\tasync perform(token: CancellationToken): Promise<IFileOperation> {\n\n\t\tconst folderCreates: ICreateOperation[] = [];\n\t\tconst fileCreates: ICreateFileOperation[] = [];\n\t\tconst undoes: DeleteEdit[] = [];\n\n\t\tfor (const edit of this._edits) {\n\t\t\tif (edit.options.overwrite === undefined && edit.options.ignoreIfExists && await this._fileService.exists(edit.newUri)) {\n\t\t\t\tcontinue; // not overwriting, but ignoring, and the target file exists\n\t\t\t}\n\t\t\tif (edit.options.folder) {\n\t\t\t\tfolderCreates.push({ resource: edit.newUri });\n\t\t\t} else {\n\t\t\t\t// If the contents are part of the edit they include the encoding, thus use them. Otherwise get the encoding for a new empty file.\n\t\t\t\tconst encodedReadable = typeof edit.contents !== 'undefined' ? edit.contents : await this._textFileService.getEncodedReadable(edit.newUri);\n\t\t\t\tfileCreates.push({ resource: edit.newUri, contents: encodedReadable, overwrite: edit.options.overwrite });\n\t\t\t}\n\t\t\tundoes.push(new DeleteEdit(edit.newUri, edit.options, !edit.options.folder && !edit.contents));\n\t\t}\n\n\t\tif (folderCreates.length === 0 && fileCreates.length === 0) {\n\t\t\treturn new Noop();\n\t\t}\n\n\t\tawait this._workingCopyFileService.createFolder(folderCreates, token, this._undoRedoInfo);\n\t\tawait this._workingCopyFileService.create(fileCreates, token, this._undoRedoInfo);\n\n\t\treturn this._instaService.createInstance(DeleteOperation, undoes, { isUndoing: true });\n\t}\n\n\ttoString(): string {\n\t\treturn `(create ${this._edits.map(edit => edit.options.folder ? `folder ${edit.newUri}` : `file ${edit.newUri} with ${edit.contents?.byteLength || 0} bytes`).join(', ')})`;\n\t}\n}\n\nclass DeleteEdit {\n\treadonly type = 'delete';\n\tconstructor(\n\t\treadonly oldUri: URI,\n\t\treadonly options: WorkspaceFileEditOptions,\n\t\treadonly undoesCreate: boolean,\n\t) { }\n}\n\nclass DeleteOperation implements IFileOperation {\n\n\tconstructor(\n\t\tprivate _edits: DeleteEdit[],\n\t\tprivate readonly _undoRedoInfo: IFileOperationUndoRedoInfo,\n\t\t@IWorkingCopyFileService private readonly _workingCopyFileService: IWorkingCopyFileService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@ILogService private readonly _logService: ILogService\n\t) { }\n\n\tget uris() {\n\t\treturn this._edits.map(edit => edit.oldUri);\n\t}\n\n\tasync perform(token: CancellationToken): Promise<IFileOperation> {\n\t\t// delete file\n\n\t\tconst deletes: IDeleteOperation[] = [];\n\t\tconst undoes: CreateEdit[] = [];\n\n\t\tfor (const edit of this._edits) {\n\t\t\tif (!await this._fileService.exists(edit.oldUri)) {\n\t\t\t\tif (!edit.options.ignoreIfNotExists) {\n\t\t\t\t\tthrow new Error(`${edit.oldUri} does not exist and can not be deleted`);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdeletes.push({\n\t\t\t\tresource: edit.oldUri,\n\t\t\t\trecursive: edit.options.recursive,\n\t\t\t\tuseTrash: !edit.options.skipTrashBin && this._fileService.hasCapability(edit.oldUri, FileSystemProviderCapabilities.Trash) && this._configurationService.getValue<boolean>('files.enableTrash')\n\t\t\t});\n\n\n\t\t\t// read file contents for undo operation. when a file is too large it won't be restored\n\t\t\tlet fileContent: IFileContent | undefined;\n\t\t\tif (!edit.undoesCreate && !edit.options.folder) {\n\t\t\t\ttry {\n\t\t\t\t\tfileContent = await this._fileService.readFile(edit.oldUri);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis._logService.critical(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!(typeof edit.options.maxSize === 'number' && fileContent && (fileContent?.size > edit.options.maxSize))) {\n\t\t\t\tundoes.push(new CreateEdit(edit.oldUri, edit.options, fileContent?.value));\n\t\t\t}\n\t\t}\n\n\t\tif (deletes.length === 0) {\n\t\t\treturn new Noop();\n\t\t}\n\n\t\tawait this._workingCopyFileService.delete(deletes, token, this._undoRedoInfo);\n\n\t\tif (undoes.length === 0) {\n\t\t\treturn new Noop();\n\t\t}\n\t\treturn this._instaService.createInstance(CreateOperation, undoes, { isUndoing: true });\n\t}\n\n\ttoString(): string {\n\t\treturn `(delete ${this._edits.map(edit => edit.oldUri).join(', ')})`;\n\t}\n}\n\nclass FileUndoRedoElement implements IWorkspaceUndoRedoElement {\n\n\treadonly type = UndoRedoElementType.Workspace;\n\n\treadonly resources: readonly URI[];\n\n\tconstructor(\n\t\treadonly label: string,\n\t\treadonly operations: IFileOperation[],\n\t\treadonly confirmBeforeUndo: boolean\n\t) {\n\t\tthis.resources = (<URI[]>[]).concat(...operations.map(op => op.uris));\n\t}\n\n\tasync undo(): Promise<void> {\n\t\tawait this._reverse();\n\t}\n\n\tasync redo(): Promise<void> {\n\t\tawait this._reverse();\n\t}\n\n\tprivate async _reverse() {\n\t\tfor (let i = 0; i < this.operations.length; i++) {\n\t\t\tconst op = this.operations[i];\n\t\t\tconst undo = await op.perform(CancellationToken.None);\n\t\t\tthis.operations[i] = undo;\n\t\t}\n\t}\n\n\ttoString(): string {\n\t\treturn this.operations.map(op => String(op)).join(', ');\n\t}\n}\n\nexport class BulkFileEdits {\n\n\tconstructor(\n\t\tprivate readonly _label: string,\n\t\tprivate readonly _undoRedoGroup: UndoRedoGroup,\n\t\tprivate readonly _undoRedoSource: UndoRedoSource | undefined,\n\t\tprivate readonly _confirmBeforeUndo: boolean,\n\t\tprivate readonly _progress: IProgress<void>,\n\t\tprivate readonly _token: CancellationToken,\n\t\tprivate readonly _edits: ResourceFileEdit[],\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t) { }\n\n\tasync apply(): Promise<void> {\n\t\tconst undoOperations: IFileOperation[] = [];\n\t\tconst undoRedoInfo = { undoRedoGroupId: this._undoRedoGroup.id };\n\n\t\tconst edits: Array<RenameEdit | CopyEdit | DeleteEdit | CreateEdit> = [];\n\t\tfor (const edit of this._edits) {\n\t\t\tif (edit.newResource && edit.oldResource && !edit.options?.copy) {\n\t\t\t\tedits.push(new RenameEdit(edit.newResource, edit.oldResource, edit.options ?? {}));\n\t\t\t} else if (edit.newResource && edit.oldResource && edit.options?.copy) {\n\t\t\t\tedits.push(new CopyEdit(edit.newResource, edit.oldResource, edit.options ?? {}));\n\t\t\t} else if (!edit.newResource && edit.oldResource) {\n\t\t\t\tedits.push(new DeleteEdit(edit.oldResource, edit.options ?? {}, false));\n\t\t\t} else if (edit.newResource && !edit.oldResource) {\n\t\t\t\tedits.push(new CreateEdit(edit.newResource, edit.options ?? {}, undefined));\n\t\t\t}\n\t\t}\n\n\t\tif (edits.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst groups: Array<RenameEdit | CopyEdit | DeleteEdit | CreateEdit>[] = [];\n\t\tgroups[0] = [edits[0]];\n\n\t\tfor (let i = 1; i < edits.length; i++) {\n\t\t\tconst edit = edits[i];\n\t\t\tconst lastGroup = tail(groups);\n\t\t\tif (lastGroup[0].type === edit.type) {\n\t\t\t\tlastGroup.push(edit);\n\t\t\t} else {\n\t\t\t\tgroups.push([edit]);\n\t\t\t}\n\t\t}\n\n\t\tfor (let group of groups) {\n\n\t\t\tif (this._token.isCancellationRequested) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet op: IFileOperation | undefined;\n\t\t\tswitch (group[0].type) {\n\t\t\t\tcase 'rename':\n\t\t\t\t\top = this._instaService.createInstance(RenameOperation, <RenameEdit[]>group, undoRedoInfo);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'copy':\n\t\t\t\t\top = this._instaService.createInstance(CopyOperation, <CopyEdit[]>group, undoRedoInfo);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'delete':\n\t\t\t\t\top = this._instaService.createInstance(DeleteOperation, <DeleteEdit[]>group, undoRedoInfo);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'create':\n\t\t\t\t\top = this._instaService.createInstance(CreateOperation, <CreateEdit[]>group, undoRedoInfo);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (op) {\n\t\t\t\tconst undoOp = await op.perform(this._token);\n\t\t\t\tundoOperations.push(undoOp);\n\t\t\t}\n\t\t\tthis._progress.report(undefined);\n\t\t}\n\n\t\tthis._undoRedoService.pushElement(new FileUndoRedoElement(this._label, undoOperations, this._confirmBeforeUndo), this._undoRedoGroup, this._undoRedoSource);\n\t}\n}\n"]}