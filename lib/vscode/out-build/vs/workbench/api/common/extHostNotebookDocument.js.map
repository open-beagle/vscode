{"version":3,"file":"extHostNotebookDocument.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/api/common/extHostNotebookDocument.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAahG,MAAM,qBAAqB;QAE1B,YAAqB,KAAa,EAAW,YAAoB,EAAW,YAAmC,EAAW,KAAoB;YAAzH,UAAK,GAAL,KAAK,CAAQ;YAAW,iBAAY,GAAZ,YAAY,CAAQ;YAAW,iBAAY,GAAZ,YAAY,CAAuB;YAAW,UAAK,GAAL,KAAK,CAAe;QAAI,CAAC;QAEnJ,MAAM,CAAC,WAAW,CAAC,MAA+B;YACjD,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBACzB,OAAO;oBACN,KAAK,EAAE,KAAK,CAAC,KAAK;oBAClB,YAAY,EAAE,KAAK,CAAC,YAAY;oBAChC,YAAY,EAAE,KAAK,CAAC,YAAY;oBAChC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC;iBAC5C,CAAC;YACH,CAAC,CAAC,CAAC;QACJ,CAAC;KACD;IAED,MAAa,WAAW;QAyBvB,YACkB,SAAkC,EAClC,gBAA4C,EAC5C,SAAuB;;YAFvB,cAAS,GAAT,SAAS,CAAyB;YAClC,qBAAgB,GAAhB,gBAAgB,CAA4B;YAC5C,cAAS,GAAT,SAAS,CAAc;YAExC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;YAC/B,IAAI,CAAC,GAAG,GAAG,SAAG,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACrC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC;YACnC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;YACnF,IAAI,CAAC,iBAAiB,GAAG,MAAA,SAAS,CAAC,QAAQ,mCAAI,EAAE,CAAC;YAClD,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC,oBAAoB,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACvF,IAAI,CAAC,eAAe,GAAG,qBAAqB,CAAC,mCAAmC,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7G,CAAC;QAnCD,MAAM,CAAC,cAAc,CAAC,QAAiC,EAAE,IAAkB;YAC1E,OAAO;gBACN,GAAG,EAAE,IAAI,CAAC,GAAG;gBACb,KAAK,EAAE,IAAI,CAAC,MAAM;gBAClB,MAAM,EAAE,IAAI,CAAC,QAAQ;gBACrB,GAAG,EAAE,IAAI,CAAC,GAAG;gBACb,OAAO,EAAE,KAAK;gBACd,SAAS,EAAE,CAAC;gBACZ,QAAQ;aACR,CAAC;QACH,CAAC;QA2BD,IAAI,gBAAgB;YACnB,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAC/B,CAAC;QAED,IAAI,OAAO;YACV,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBAChB,MAAM,IAAI,GAAG,IAAI,CAAC;gBAClB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACzD,IAAI,CAAC,IAAI,EAAE;oBACV,MAAM,IAAI,KAAK,CAAC,8CAA8C,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;iBAC1E;gBACD,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAsB;oBAC/C,IAAI,KAAK,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACzD,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,WAAW;oBACpC,IAAI,EAAE,qBAAqB,CAAC,gBAAgB,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;oBACxE,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzC,IAAI,sBAAsB,KAAK,OAAO,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;iBAC7D,CAAC,CAAC;aACH;YACD,OAAO,IAAI,CAAC,KAAK,CAAC;QACnB,CAAC;QAED,UAAU,CAAC,UAAwB;YAClC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;QAC7E,CAAC;QAED,cAAc,CAAC,QAAgB,EAAE,MAAe,EAAE,cAAgC;YACjF,MAAM,QAAQ,GAAG,cAAc,CAAC,GAAG,CAAC,qBAAqB,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;YACrF,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,QAAQ,CAAC,CAAC;YAC5D,IAAI,MAAM,EAAE;gBACX,IAAI,CAAC,MAAM,EAAE;oBACZ,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;iBAC1B;gBACD,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,CAAC;aACjC;QACF,CAAC;QAED,WAAW,CAAC,WAAiC;YAC5C,IAAI,CAAC,iBAAiB,GAAG,WAAW,CAAC;YACrC,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;YAC5E,IAAI,CAAC,eAAe,GAAG,qBAAqB,CAAC,mCAAmC,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QAClG,CAAC;KACD;IAnFD,kCAmFC;IAUD,MAAa,uBAAuB;QAanC,YACkB,MAAwC,EACxC,wBAAoD,EACpD,cAAgC,EAChC,QAA+B,EAC/B,SAAiB,EAC1B,SAAgD,EAC/C,GAAQ;YANA,WAAM,GAAN,MAAM,CAAkC;YACxC,6BAAwB,GAAxB,wBAAwB,CAA4B;YACpD,mBAAc,GAAd,cAAc,CAAkB;YAChC,aAAQ,GAAR,QAAQ,CAAuB;YAC/B,cAAS,GAAT,SAAS,CAAQ;YAC1B,cAAS,GAAT,SAAS,CAAuC;YAC/C,QAAG,GAAH,GAAG,CAAK;YAjBT,WAAM,GAAG,uBAAuB,CAAC,WAAW,EAAE,CAAC;YAEhD,WAAM,GAAkB,EAAE,CAAC;YAG3B,eAAU,GAAW,CAAC,CAAC;YACvB,aAAQ,GAAY,KAAK,CAAC;YAE1B,cAAS,GAAY,KAAK,CAAC;QAU/B,CAAC;QAEL,OAAO;YACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACvB,CAAC;QAED,IAAI,WAAW;YACd,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACpB,MAAM,IAAI,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,SAAS,GAAG;oBAChB,IAAI,GAAG,KAAK,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;oBAC9B,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oBACzC,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzC,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACvC,IAAI,UAAU,KAAK,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACjE,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzC,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzC,IAAI,SAAS,KAAK,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9C,MAAM,CAAC,KAAK;wBACX,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;wBACnC,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;oBACnC,CAAC;oBACD,QAAQ,CAAC,KAAK;wBACb,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;wBAC1D,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACxC,CAAC;oBACD,IAAI;wBACH,OAAO,IAAI,CAAC,KAAK,EAAE,CAAC;oBACrB,CAAC;iBACD,CAAC;aACF;YACD,OAAO,IAAI,CAAC,SAAS,CAAC;QACvB,CAAC;QAED,YAAY,CAAC,MAAqC;;YACjD,MAAA,IAAI,CAAC,OAAO,0CAAE,MAAM,EAAE,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACvB,CAAC;QAED,aAAa;;YACZ,MAAA,IAAI,CAAC,OAAO,0CAAE,MAAM,EAAE,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;QAC1B,CAAC;QAED,+BAA+B,CAAC,IAA2C;YAC1E,IAAI,IAAI,CAAC,QAAQ,EAAE;gBAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACpD;QACF,CAAC;QAED,kBAAkB,CAAC,KAAmC,EAAE,OAAgB;YACvE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,SAAS,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YAExB,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,SAAS,EAAE;gBACvC,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,UAAU,EAAE;oBACzD,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;iBAClD;gBAAC,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,WAAW,EAAE;oBAC5D,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;iBACnD;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,IAAI,EAAE;oBAC1D,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;iBAChD;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,MAAM,EAAE;oBAC5D,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;iBACvD;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,UAAU,EAAE;oBAChE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;iBACnG;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,cAAc,EAAE;oBACpE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBAC5D;qBAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,wCAAuB,CAAC,kBAAkB,EAAE;oBACxE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBAC5D;aACD;QACF,CAAC;QAEO,cAAc,CAAC,KAAa;YACnC,IAAI,KAAK,GAAG,CAAC,EAAE;gBACd,OAAO,CAAC,CAAC;aACT;iBAAM,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBACvC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;aAC9B;iBAAM;gBACN,OAAO,KAAK,CAAC;aACb;QACF,CAAC;QAEO,cAAc,CAAC,KAA2B;YACjD,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE;gBACpB,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;aACjC;YACD,IAAI,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBACnC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;aAChD;YACD,OAAO,KAAK,CAAC;QACd,CAAC;QAEO,SAAS,CAAC,KAA2B;YAC5C,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YACnC,MAAM,MAAM,GAAkB,EAAE,CAAC;YACjC,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC7C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;aAC5B;YACD,OAAO,MAAM,CAAC;QACf,CAAC;QAEO,KAAK,CAAC,KAAK;YAClB,IAAI,IAAI,CAAC,SAAS,EAAE;gBACnB,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC,CAAC;aAC7D;YACD,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC/C,CAAC;QAEO,oBAAoB,CAAC,OAA+B,EAAE,cAAuB;YACpF,IAAI,IAAI,CAAC,SAAS,EAAE;gBACnB,OAAO;aACP;YAED,MAAM,mBAAmB,GAA4B,EAAE,CAAC;YACxD,MAAM,kBAAkB,GAA6B,EAAE,CAAC;YACxD,MAAM,oBAAoB,GAAU,EAAE,CAAC;YAEvC,OAAO,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAClC,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC3B,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBAEpC,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;oBAC3E,IAAI,CAAC,cAAc,EAAE;wBACpB,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC;qBAC5E;oBACD,OAAO,OAAO,CAAC;gBAChB,CAAC,CAAC,CAAC;gBAEH,MAAM,WAAW,GAAG,IAAI,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC;gBAClF,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC;gBAC3E,KAAK,IAAI,IAAI,IAAI,YAAY,EAAE;oBAC9B,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBACpC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC5C;gBAED,mBAAmB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,wBAAwB,CAAC,8BAA8B,CAAC;gBAC5D,cAAc,EAAE,kBAAkB;gBAClC,gBAAgB,EAAE,oBAAoB;aACtC,CAAC,CAAC;YAEH,IAAI,CAAC,cAAc,EAAE;gBACpB,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC;oBACxC,QAAQ,EAAE,IAAI,CAAC,WAAW;oBAC1B,OAAO,EAAE,qBAAqB,CAAC,WAAW,CAAC,mBAAmB,CAAC;iBAC/D,CAAC,CAAC,CAAC;aACJ;QACF,CAAC;QAEO,SAAS,CAAC,KAAa,EAAE,MAAc;YAC9C,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC;YACxC,MAAM,OAAO,GAAG;gBACf,IAAI,qBAAqB,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC;gBAClE,IAAI,qBAAqB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC;aAC/C,CAAC;YACF,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC;gBACxC,QAAQ,EAAE,IAAI,CAAC,WAAW;gBAC1B,OAAO,EAAE,qBAAqB,CAAC,WAAW,CAAC,OAAO,CAAC;aACnD,CAAC,CAAC,CAAC;QACL,CAAC;QAEO,eAAe,CAAC,KAAa,EAAE,OAAqB;YAC3D,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACzB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;QACxG,CAAC;QAEO,mBAAmB,CAAC,KAAa,EAAE,QAAgB,EAAE,MAAe,EAAE,WAA6B;YAC1G,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC;YACnD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;QACxG,CAAC;QAEO,mBAAmB,CAAC,KAAa,EAAE,SAAiB;YAC3D,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;gBACnD,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;aACjE;QACF,CAAC;QAEO,mBAAmB,CAAC,KAAa,EAAE,WAAiC;;YAC3E,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEhC,MAAM,wBAAwB,GAAG,IAAI,CAAC,gBAAgB,CAAC;YACvD,MAAM,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;YAClD,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;YAC9B,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;YAE7C,IAAI,CAAC,CAAA,GAAA,gBAAM,CAAA,CAAC,mBAAmB,EAAE,cAAc,CAAC,EAAE;gBACjD,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;aACrG;YAED,IAAI,wBAAwB,CAAC,QAAQ,KAAK,WAAW,CAAC,QAAQ,EAAE;gBAC/D,MAAM,cAAc,GAAG,MAAA,WAAW,CAAC,QAAQ,mCAAI,YAAY,CAAC,0BAA0B,CAAC,IAAI,CAAC;gBAC5F,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAA,GAAA,oBAAU,CAAA,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;aAC3H;QACF,CAAC;QAED,gBAAgB,CAAC,KAAa;YAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC;QAED,OAAO,CAAC,UAAkB;YACzB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,KAAK,UAAU,CAAC,CAAC;QAC7D,CAAC;QAED,YAAY,CAAC,IAAiB;YAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC;;IAzOF,0DA0OC;IAxOe,mCAAW,GAAW,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from 'vs/base/common/network';\nimport { deepFreeze, equals } from 'vs/base/common/objects';\nimport { URI } from 'vs/base/common/uri';\nimport { CellKind, INotebookDocumentPropertiesChangeData, MainThreadNotebookDocumentsShape } from 'vs/workbench/api/common/extHost.protocol';\nimport { ExtHostDocuments } from 'vs/workbench/api/common/extHostDocuments';\nimport { ExtHostDocumentsAndEditors, IExtHostModelAddedData } from 'vs/workbench/api/common/extHostDocumentsAndEditors';\nimport * as extHostTypeConverters from 'vs/workbench/api/common/extHostTypeConverters';\nimport * as extHostTypes from 'vs/workbench/api/common/extHostTypes';\nimport { IMainCellDto, IOutputDto, IOutputItemDto, NotebookCellMetadata, NotebookCellsChangedEventDto, NotebookCellsChangeType, NotebookCellsSplice2 } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport * as vscode from 'vscode';\n\nclass RawContentChangeEvent {\n\n\tconstructor(readonly start: number, readonly deletedCount: number, readonly deletedItems: vscode.NotebookCell[], readonly items: ExtHostCell[]) { }\n\n\tstatic asApiEvents(events: RawContentChangeEvent[]): readonly vscode.NotebookCellsChangeData[] {\n\t\treturn events.map(event => {\n\t\t\treturn {\n\t\t\t\tstart: event.start,\n\t\t\t\tdeletedCount: event.deletedCount,\n\t\t\t\tdeletedItems: event.deletedItems,\n\t\t\t\titems: event.items.map(data => data.apiCell)\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport class ExtHostCell {\n\n\tstatic asModelAddData(notebook: vscode.NotebookDocument, cell: IMainCellDto): IExtHostModelAddedData {\n\t\treturn {\n\t\t\tEOL: cell.eol,\n\t\t\tlines: cell.source,\n\t\t\tmodeId: cell.language,\n\t\t\turi: cell.uri,\n\t\t\tisDirty: false,\n\t\t\tversionId: 1,\n\t\t\tnotebook\n\t\t};\n\t}\n\n\tprivate _outputs: extHostTypes.NotebookCellOutput[];\n\tprivate _metadata: extHostTypes.NotebookCellMetadata;\n\tprivate _previousResult: vscode.NotebookCellExecutionSummary | undefined;\n\n\tprivate _internalMetadata: NotebookCellMetadata;\n\treadonly handle: number;\n\treadonly uri: URI;\n\treadonly cellKind: CellKind;\n\n\tprivate _cell: vscode.NotebookCell | undefined;\n\n\tconstructor(\n\t\tprivate readonly _notebook: ExtHostNotebookDocument,\n\t\tprivate readonly _extHostDocument: ExtHostDocumentsAndEditors,\n\t\tprivate readonly _cellData: IMainCellDto,\n\t) {\n\t\tthis.handle = _cellData.handle;\n\t\tthis.uri = URI.revive(_cellData.uri);\n\t\tthis.cellKind = _cellData.cellKind;\n\t\tthis._outputs = _cellData.outputs.map(extHostTypeConverters.NotebookCellOutput.to);\n\t\tthis._internalMetadata = _cellData.metadata ?? {};\n\t\tthis._metadata = extHostTypeConverters.NotebookCellMetadata.to(this._internalMetadata);\n\t\tthis._previousResult = extHostTypeConverters.NotebookCellPreviousExecutionResult.to(this._internalMetadata);\n\t}\n\n\tget internalMetadata(): NotebookCellMetadata {\n\t\treturn this._internalMetadata;\n\t}\n\n\tget apiCell(): vscode.NotebookCell {\n\t\tif (!this._cell) {\n\t\t\tconst that = this;\n\t\t\tconst data = this._extHostDocument.getDocument(this.uri);\n\t\t\tif (!data) {\n\t\t\t\tthrow new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);\n\t\t\t}\n\t\t\tthis._cell = Object.freeze<vscode.NotebookCell>({\n\t\t\t\tget index() { return that._notebook.getCellIndex(that); },\n\t\t\t\tnotebook: that._notebook.apiNotebook,\n\t\t\t\tkind: extHostTypeConverters.NotebookCellKind.to(this._cellData.cellKind),\n\t\t\t\tdocument: data.document,\n\t\t\t\tget outputs() { return that._outputs.slice(0); },\n\t\t\t\tget metadata() { return that._metadata; },\n\t\t\t\tget latestExecutionSummary() { return that._previousResult; }\n\t\t\t});\n\t\t}\n\t\treturn this._cell;\n\t}\n\n\tsetOutputs(newOutputs: IOutputDto[]): void {\n\t\tthis._outputs = newOutputs.map(extHostTypeConverters.NotebookCellOutput.to);\n\t}\n\n\tsetOutputItems(outputId: string, append: boolean, newOutputItems: IOutputItemDto[]) {\n\t\tconst newItems = newOutputItems.map(extHostTypeConverters.NotebookCellOutputItem.to);\n\t\tconst output = this._outputs.find(op => op.id === outputId);\n\t\tif (output) {\n\t\t\tif (!append) {\n\t\t\t\toutput.outputs.length = 0;\n\t\t\t}\n\t\t\toutput.outputs.push(...newItems);\n\t\t}\n\t}\n\n\tsetMetadata(newMetadata: NotebookCellMetadata): void {\n\t\tthis._internalMetadata = newMetadata;\n\t\tthis._metadata = extHostTypeConverters.NotebookCellMetadata.to(newMetadata);\n\t\tthis._previousResult = extHostTypeConverters.NotebookCellPreviousExecutionResult.to(newMetadata);\n\t}\n}\n\nexport interface INotebookEventEmitter {\n\temitModelChange(events: vscode.NotebookCellsChangeEvent): void;\n\temitCellOutputsChange(event: vscode.NotebookCellOutputsChangeEvent): void;\n\temitCellMetadataChange(event: vscode.NotebookCellMetadataChangeEvent): void;\n\temitCellExecutionStateChange(event: vscode.NotebookCellExecutionStateChangeEvent): void;\n}\n\n\nexport class ExtHostNotebookDocument {\n\n\tprivate static _handlePool: number = 0;\n\treadonly handle = ExtHostNotebookDocument._handlePool++;\n\n\tprivate _cells: ExtHostCell[] = [];\n\n\tprivate _notebook: vscode.NotebookDocument | undefined;\n\tprivate _versionId: number = 0;\n\tprivate _isDirty: boolean = false;\n\tprivate _backup?: vscode.NotebookDocumentBackup;\n\tprivate _disposed: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly _proxy: MainThreadNotebookDocumentsShape,\n\t\tprivate readonly _textDocumentsAndEditors: ExtHostDocumentsAndEditors,\n\t\tprivate readonly _textDocuments: ExtHostDocuments,\n\t\tprivate readonly _emitter: INotebookEventEmitter,\n\t\tprivate readonly _viewType: string,\n\t\tprivate _metadata: extHostTypes.NotebookDocumentMetadata,\n\t\treadonly uri: URI,\n\t) { }\n\n\tdispose() {\n\t\tthis._disposed = true;\n\t}\n\n\tget apiNotebook(): vscode.NotebookDocument {\n\t\tif (!this._notebook) {\n\t\t\tconst that = this;\n\t\t\tthis._notebook = {\n\t\t\t\tget uri() { return that.uri; },\n\t\t\t\tget version() { return that._versionId; },\n\t\t\t\tget viewType() { return that._viewType; },\n\t\t\t\tget isDirty() { return that._isDirty; },\n\t\t\t\tget isUntitled() { return that.uri.scheme === Schemas.untitled; },\n\t\t\t\tget isClosed() { return that._disposed; },\n\t\t\t\tget metadata() { return that._metadata; },\n\t\t\t\tget cellCount() { return that._cells.length; },\n\t\t\t\tcellAt(index) {\n\t\t\t\t\tindex = that._validateIndex(index);\n\t\t\t\t\treturn that._cells[index].apiCell;\n\t\t\t\t},\n\t\t\t\tgetCells(range) {\n\t\t\t\t\tconst cells = range ? that._getCells(range) : that._cells;\n\t\t\t\t\treturn cells.map(cell => cell.apiCell);\n\t\t\t\t},\n\t\t\t\tsave() {\n\t\t\t\t\treturn that._save();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn this._notebook;\n\t}\n\n\tupdateBackup(backup: vscode.NotebookDocumentBackup): void {\n\t\tthis._backup?.delete();\n\t\tthis._backup = backup;\n\t}\n\n\tdisposeBackup(): void {\n\t\tthis._backup?.delete();\n\t\tthis._backup = undefined;\n\t}\n\n\tacceptDocumentPropertiesChanged(data: INotebookDocumentPropertiesChangeData) {\n\t\tif (data.metadata) {\n\t\t\tthis._metadata = this._metadata.with(data.metadata);\n\t\t}\n\t}\n\n\tacceptModelChanged(event: NotebookCellsChangedEventDto, isDirty: boolean): void {\n\t\tthis._versionId = event.versionId;\n\t\tthis._isDirty = isDirty;\n\n\t\tfor (const rawEvent of event.rawEvents) {\n\t\t\tif (rawEvent.kind === NotebookCellsChangeType.Initialize) {\n\t\t\t\tthis._spliceNotebookCells(rawEvent.changes, true);\n\t\t\t} if (rawEvent.kind === NotebookCellsChangeType.ModelChange) {\n\t\t\t\tthis._spliceNotebookCells(rawEvent.changes, false);\n\t\t\t} else if (rawEvent.kind === NotebookCellsChangeType.Move) {\n\t\t\t\tthis._moveCell(rawEvent.index, rawEvent.newIdx);\n\t\t\t} else if (rawEvent.kind === NotebookCellsChangeType.Output) {\n\t\t\t\tthis._setCellOutputs(rawEvent.index, rawEvent.outputs);\n\t\t\t} else if (rawEvent.kind === NotebookCellsChangeType.OutputItem) {\n\t\t\t\tthis._setCellOutputItems(rawEvent.index, rawEvent.outputId, rawEvent.append, rawEvent.outputItems);\n\t\t\t} else if (rawEvent.kind === NotebookCellsChangeType.ChangeLanguage) {\n\t\t\t\tthis._changeCellLanguage(rawEvent.index, rawEvent.language);\n\t\t\t} else if (rawEvent.kind === NotebookCellsChangeType.ChangeCellMetadata) {\n\t\t\t\tthis._changeCellMetadata(rawEvent.index, rawEvent.metadata);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _validateIndex(index: number): number {\n\t\tif (index < 0) {\n\t\t\treturn 0;\n\t\t} else if (index >= this._cells.length) {\n\t\t\treturn this._cells.length - 1;\n\t\t} else {\n\t\t\treturn index;\n\t\t}\n\t}\n\n\tprivate _validateRange(range: vscode.NotebookRange): vscode.NotebookRange {\n\t\tif (range.start < 0) {\n\t\t\trange = range.with({ start: 0 });\n\t\t}\n\t\tif (range.end > this._cells.length) {\n\t\t\trange = range.with({ end: this._cells.length });\n\t\t}\n\t\treturn range;\n\t}\n\n\tprivate _getCells(range: vscode.NotebookRange): ExtHostCell[] {\n\t\trange = this._validateRange(range);\n\t\tconst result: ExtHostCell[] = [];\n\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\tresult.push(this._cells[i]);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate async _save(): Promise<boolean> {\n\t\tif (this._disposed) {\n\t\t\treturn Promise.reject(new Error('Notebook has been closed'));\n\t\t}\n\t\treturn this._proxy.$trySaveDocument(this.uri);\n\t}\n\n\tprivate _spliceNotebookCells(splices: NotebookCellsSplice2[], initialization: boolean): void {\n\t\tif (this._disposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst contentChangeEvents: RawContentChangeEvent[] = [];\n\t\tconst addedCellDocuments: IExtHostModelAddedData[] = [];\n\t\tconst removedCellDocuments: URI[] = [];\n\n\t\tsplices.reverse().forEach(splice => {\n\t\t\tconst cellDtos = splice[2];\n\t\t\tconst newCells = cellDtos.map(cell => {\n\n\t\t\t\tconst extCell = new ExtHostCell(this, this._textDocumentsAndEditors, cell);\n\t\t\t\tif (!initialization) {\n\t\t\t\t\taddedCellDocuments.push(ExtHostCell.asModelAddData(this.apiNotebook, cell));\n\t\t\t\t}\n\t\t\t\treturn extCell;\n\t\t\t});\n\n\t\t\tconst changeEvent = new RawContentChangeEvent(splice[0], splice[1], [], newCells);\n\t\t\tconst deletedItems = this._cells.splice(splice[0], splice[1], ...newCells);\n\t\t\tfor (let cell of deletedItems) {\n\t\t\t\tremovedCellDocuments.push(cell.uri);\n\t\t\t\tchangeEvent.deletedItems.push(cell.apiCell);\n\t\t\t}\n\n\t\t\tcontentChangeEvents.push(changeEvent);\n\t\t});\n\n\t\tthis._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({\n\t\t\taddedDocuments: addedCellDocuments,\n\t\t\tremovedDocuments: removedCellDocuments\n\t\t});\n\n\t\tif (!initialization) {\n\t\t\tthis._emitter.emitModelChange(deepFreeze({\n\t\t\t\tdocument: this.apiNotebook,\n\t\t\t\tchanges: RawContentChangeEvent.asApiEvents(contentChangeEvents)\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _moveCell(index: number, newIdx: number): void {\n\t\tconst cells = this._cells.splice(index, 1);\n\t\tthis._cells.splice(newIdx, 0, ...cells);\n\t\tconst changes = [\n\t\t\tnew RawContentChangeEvent(index, 1, cells.map(c => c.apiCell), []),\n\t\t\tnew RawContentChangeEvent(newIdx, 0, [], cells)\n\t\t];\n\t\tthis._emitter.emitModelChange(deepFreeze({\n\t\t\tdocument: this.apiNotebook,\n\t\t\tchanges: RawContentChangeEvent.asApiEvents(changes)\n\t\t}));\n\t}\n\n\tprivate _setCellOutputs(index: number, outputs: IOutputDto[]): void {\n\t\tconst cell = this._cells[index];\n\t\tcell.setOutputs(outputs);\n\t\tthis._emitter.emitCellOutputsChange(deepFreeze({ document: this.apiNotebook, cells: [cell.apiCell] }));\n\t}\n\n\tprivate _setCellOutputItems(index: number, outputId: string, append: boolean, outputItems: IOutputItemDto[]): void {\n\t\tconst cell = this._cells[index];\n\t\tcell.setOutputItems(outputId, append, outputItems);\n\t\tthis._emitter.emitCellOutputsChange(deepFreeze({ document: this.apiNotebook, cells: [cell.apiCell] }));\n\t}\n\n\tprivate _changeCellLanguage(index: number, newModeId: string): void {\n\t\tconst cell = this._cells[index];\n\t\tif (cell.apiCell.document.languageId !== newModeId) {\n\t\t\tthis._textDocuments.$acceptModelModeChanged(cell.uri, newModeId);\n\t\t}\n\t}\n\n\tprivate _changeCellMetadata(index: number, newMetadata: NotebookCellMetadata): void {\n\t\tconst cell = this._cells[index];\n\n\t\tconst originalInternalMetadata = cell.internalMetadata;\n\t\tconst originalExtMetadata = cell.apiCell.metadata;\n\t\tcell.setMetadata(newMetadata);\n\t\tconst newExtMetadata = cell.apiCell.metadata;\n\n\t\tif (!equals(originalExtMetadata, newExtMetadata)) {\n\t\t\tthis._emitter.emitCellMetadataChange(deepFreeze({ document: this.apiNotebook, cell: cell.apiCell }));\n\t\t}\n\n\t\tif (originalInternalMetadata.runState !== newMetadata.runState) {\n\t\t\tconst executionState = newMetadata.runState ?? extHostTypes.NotebookCellExecutionState.Idle;\n\t\t\tthis._emitter.emitCellExecutionStateChange(deepFreeze({ document: this.apiNotebook, cell: cell.apiCell, executionState }));\n\t\t}\n\t}\n\n\tgetCellFromIndex(index: number): ExtHostCell | undefined {\n\t\treturn this._cells[index];\n\t}\n\n\tgetCell(cellHandle: number): ExtHostCell | undefined {\n\t\treturn this._cells.find(cell => cell.handle === cellHandle);\n\t}\n\n\tgetCellIndex(cell: ExtHostCell): number {\n\t\treturn this._cells.indexOf(cell);\n\t}\n}\n"]}