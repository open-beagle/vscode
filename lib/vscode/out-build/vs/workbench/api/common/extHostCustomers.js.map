{"version":3,"file":"extHostCustomers.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/api/common/extHostCustomers.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAWhG,SAAgB,oBAAoB,CAAwB,EAAsB;QACjF,OAAO,UAA6C,IAAiE;YACpH,4BAA4B,CAAC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,EAAE,IAA+B,CAAC,CAAC;QAClG,CAAC,CAAC;IACH,CAAC;IAJD,oDAIC;IAED,SAAgB,eAAe,CAA2D,IAAiE;QAC1J,4BAA4B,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAA+B,CAAC,CAAC;IACzF,CAAC;IAFD,0CAEC;IAED,IAAiB,wBAAwB,CASxC;IATD,WAAiB,wBAAwB;QAExC,SAAgB,iBAAiB;YAChC,OAAO,4BAA4B,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QAClE,CAAC;QAFe,0CAAiB,oBAEhC,CAAA;QAED,SAAgB,YAAY;YAC3B,OAAO,4BAA4B,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;QAC7D,CAAC;QAFe,qCAAY,eAE3B,CAAA;IACF,CAAC,EATgB,wBAAwB,GAAxB,gCAAwB,KAAxB,gCAAwB,QASxC;IAED,MAAM,4BAA4B;QAOjC;YACC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACtB,CAAC;QAEM,qBAAqB,CAAwB,EAAsB,EAAE,IAA6B;YACxG,MAAM,KAAK,GAA6B,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACnD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;QACM,iBAAiB;YACvB,OAAO,IAAI,CAAC,eAAe,CAAC;QAC7B,CAAC;QAEM,gBAAgB,CAAwB,IAA6B;YAC3E,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;QACM,YAAY;YAClB,OAAO,IAAI,CAAC,UAAU,CAAC;QACxB,CAAC;;IAvBsB,qCAAQ,GAAG,IAAI,4BAA4B,EAAE,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { IConstructorSignature1, BrandedService } from 'vs/platform/instantiation/common/instantiation';\nimport { IExtHostContext } from 'vs/workbench/api/common/extHost.protocol';\nimport { ProxyIdentifier } from 'vs/workbench/services/extensions/common/proxyIdentifier';\n\nexport type IExtHostNamedCustomer<T extends IDisposable> = [ProxyIdentifier<T>, IExtHostCustomerCtor<T>];\n\nexport type IExtHostCustomerCtor<T extends IDisposable> = IConstructorSignature1<IExtHostContext, T>;\n\nexport function extHostNamedCustomer<T extends IDisposable>(id: ProxyIdentifier<T>) {\n\treturn function <Services extends BrandedService[]>(ctor: { new(context: IExtHostContext, ...services: Services): T }): void {\n\t\tExtHostCustomersRegistryImpl.INSTANCE.registerNamedCustomer(id, ctor as IExtHostCustomerCtor<T>);\n\t};\n}\n\nexport function extHostCustomer<T extends IDisposable, Services extends BrandedService[]>(ctor: { new(context: IExtHostContext, ...services: Services): T }): void {\n\tExtHostCustomersRegistryImpl.INSTANCE.registerCustomer(ctor as IExtHostCustomerCtor<T>);\n}\n\nexport namespace ExtHostCustomersRegistry {\n\n\texport function getNamedCustomers(): IExtHostNamedCustomer<IDisposable>[] {\n\t\treturn ExtHostCustomersRegistryImpl.INSTANCE.getNamedCustomers();\n\t}\n\n\texport function getCustomers(): IExtHostCustomerCtor<IDisposable>[] {\n\t\treturn ExtHostCustomersRegistryImpl.INSTANCE.getCustomers();\n\t}\n}\n\nclass ExtHostCustomersRegistryImpl {\n\n\tpublic static readonly INSTANCE = new ExtHostCustomersRegistryImpl();\n\n\tprivate _namedCustomers: IExtHostNamedCustomer<any>[];\n\tprivate _customers: IExtHostCustomerCtor<any>[];\n\n\tconstructor() {\n\t\tthis._namedCustomers = [];\n\t\tthis._customers = [];\n\t}\n\n\tpublic registerNamedCustomer<T extends IDisposable>(id: ProxyIdentifier<T>, ctor: IExtHostCustomerCtor<T>): void {\n\t\tconst entry: IExtHostNamedCustomer<T> = [id, ctor];\n\t\tthis._namedCustomers.push(entry);\n\t}\n\tpublic getNamedCustomers(): IExtHostNamedCustomer<any>[] {\n\t\treturn this._namedCustomers;\n\t}\n\n\tpublic registerCustomer<T extends IDisposable>(ctor: IExtHostCustomerCtor<T>): void {\n\t\tthis._customers.push(ctor);\n\t}\n\tpublic getCustomers(): IExtHostCustomerCtor<any>[] {\n\t\treturn this._customers;\n\t}\n}\n"]}