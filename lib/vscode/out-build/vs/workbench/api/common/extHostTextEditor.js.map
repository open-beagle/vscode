{"version":3,"file":"extHostTextEditor.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/api/common/extHostTextEditor.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ok } from 'vs/base/common/assert';\nimport { illegalArgument, readonly } from 'vs/base/common/errors';\nimport { IdGenerator } from 'vs/base/common/idGenerator';\nimport { TextEditorCursorStyle } from 'vs/editor/common/config/editorOptions';\nimport { IRange } from 'vs/editor/common/core/range';\nimport { ISingleEditOperation } from 'vs/editor/common/model';\nimport { IResolvedTextEditorConfiguration, ITextEditorConfigurationUpdate, MainThreadTextEditorsShape } from 'vs/workbench/api/common/extHost.protocol';\nimport * as TypeConverters from 'vs/workbench/api/common/extHostTypeConverters';\nimport { EndOfLine, Position, Range, Selection, SnippetString, TextEditorLineNumbersStyle, TextEditorRevealType } from 'vs/workbench/api/common/extHostTypes';\nimport type * as vscode from 'vscode';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { Lazy } from 'vs/base/common/lazy';\n\nexport class TextEditorDecorationType {\n\n\tprivate static readonly _Keys = new IdGenerator('TextEditorDecorationType');\n\n\treadonly value: vscode.TextEditorDecorationType;\n\n\tconstructor(proxy: MainThreadTextEditorsShape, options: vscode.DecorationRenderOptions) {\n\t\tconst key = TextEditorDecorationType._Keys.nextId();\n\t\tproxy.$registerTextEditorDecorationType(key, TypeConverters.DecorationRenderOptions.from(options));\n\t\tthis.value = Object.freeze({\n\t\t\tkey,\n\t\t\tdispose() {\n\t\t\t\tproxy.$removeTextEditorDecorationType(key);\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nexport interface ITextEditOperation {\n\trange: vscode.Range;\n\ttext: string | null;\n\tforceMoveMarkers: boolean;\n}\n\nexport interface IEditData {\n\tdocumentVersionId: number;\n\tedits: ITextEditOperation[];\n\tsetEndOfLine: EndOfLine | undefined;\n\tundoStopBefore: boolean;\n\tundoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n\n\tprivate readonly _document: vscode.TextDocument;\n\tprivate readonly _documentVersionId: number;\n\tprivate readonly _undoStopBefore: boolean;\n\tprivate readonly _undoStopAfter: boolean;\n\tprivate _collectedEdits: ITextEditOperation[] = [];\n\tprivate _setEndOfLine: EndOfLine | undefined = undefined;\n\tprivate _finalized: boolean = false;\n\n\tconstructor(document: vscode.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean; }) {\n\t\tthis._document = document;\n\t\tthis._documentVersionId = document.version;\n\t\tthis._undoStopBefore = options.undoStopBefore;\n\t\tthis._undoStopAfter = options.undoStopAfter;\n\t}\n\n\tfinalize(): IEditData {\n\t\tthis._finalized = true;\n\t\treturn {\n\t\t\tdocumentVersionId: this._documentVersionId,\n\t\t\tedits: this._collectedEdits,\n\t\t\tsetEndOfLine: this._setEndOfLine,\n\t\t\tundoStopBefore: this._undoStopBefore,\n\t\t\tundoStopAfter: this._undoStopAfter\n\t\t};\n\t}\n\n\tprivate _throwIfFinalized() {\n\t\tif (this._finalized) {\n\t\t\tthrow new Error('Edit is only valid while callback runs');\n\t\t}\n\t}\n\n\treplace(location: Position | Range | Selection, value: string): void {\n\t\tthis._throwIfFinalized();\n\t\tlet range: Range | null = null;\n\n\t\tif (location instanceof Position) {\n\t\t\trange = new Range(location, location);\n\t\t} else if (location instanceof Range) {\n\t\t\trange = location;\n\t\t} else {\n\t\t\tthrow new Error('Unrecognized location');\n\t\t}\n\n\t\tthis._pushEdit(range, value, false);\n\t}\n\n\tinsert(location: Position, value: string): void {\n\t\tthis._throwIfFinalized();\n\t\tthis._pushEdit(new Range(location, location), value, true);\n\t}\n\n\tdelete(location: Range | Selection): void {\n\t\tthis._throwIfFinalized();\n\t\tlet range: Range | null = null;\n\n\t\tif (location instanceof Range) {\n\t\t\trange = location;\n\t\t} else {\n\t\t\tthrow new Error('Unrecognized location');\n\t\t}\n\n\t\tthis._pushEdit(range, null, true);\n\t}\n\n\tprivate _pushEdit(range: Range, text: string | null, forceMoveMarkers: boolean): void {\n\t\tconst validRange = this._document.validateRange(range);\n\t\tthis._collectedEdits.push({\n\t\t\trange: validRange,\n\t\t\ttext: text,\n\t\t\tforceMoveMarkers: forceMoveMarkers\n\t\t});\n\t}\n\n\tsetEndOfLine(endOfLine: EndOfLine): void {\n\t\tthis._throwIfFinalized();\n\t\tif (endOfLine !== EndOfLine.LF && endOfLine !== EndOfLine.CRLF) {\n\t\t\tthrow illegalArgument('endOfLine');\n\t\t}\n\n\t\tthis._setEndOfLine = endOfLine;\n\t}\n}\n\nexport class ExtHostTextEditorOptions {\n\n\tprivate _proxy: MainThreadTextEditorsShape;\n\tprivate _id: string;\n\tprivate _logService: ILogService;\n\n\tprivate _tabSize!: number;\n\tprivate _insertSpaces!: boolean;\n\tprivate _cursorStyle!: TextEditorCursorStyle;\n\tprivate _lineNumbers!: TextEditorLineNumbersStyle;\n\n\treadonly value: vscode.TextEditorOptions;\n\n\tconstructor(proxy: MainThreadTextEditorsShape, id: string, source: IResolvedTextEditorConfiguration, logService: ILogService) {\n\t\tthis._proxy = proxy;\n\t\tthis._id = id;\n\t\tthis._accept(source);\n\t\tthis._logService = logService;\n\n\t\tconst that = this;\n\n\t\tthis.value = {\n\t\t\tget tabSize(): number | string {\n\t\t\t\treturn that._tabSize;\n\t\t\t},\n\t\t\tset tabSize(value: number | string) {\n\t\t\t\tthat._setTabSize(value);\n\t\t\t},\n\t\t\tget insertSpaces(): boolean | string {\n\t\t\t\treturn that._insertSpaces;\n\t\t\t},\n\t\t\tset insertSpaces(value: boolean | string) {\n\t\t\t\tthat._setInsertSpaces(value);\n\t\t\t},\n\t\t\tget cursorStyle(): TextEditorCursorStyle {\n\t\t\t\treturn that._cursorStyle;\n\t\t\t},\n\t\t\tset cursorStyle(value: TextEditorCursorStyle) {\n\t\t\t\tthat._setCursorStyle(value);\n\t\t\t},\n\t\t\tget lineNumbers(): TextEditorLineNumbersStyle {\n\t\t\t\treturn that._lineNumbers;\n\t\t\t},\n\t\t\tset lineNumbers(value: TextEditorLineNumbersStyle) {\n\t\t\t\tthat._setLineNumbers(value);\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic _accept(source: IResolvedTextEditorConfiguration): void {\n\t\tthis._tabSize = source.tabSize;\n\t\tthis._insertSpaces = source.insertSpaces;\n\t\tthis._cursorStyle = source.cursorStyle;\n\t\tthis._lineNumbers = TypeConverters.TextEditorLineNumbersStyle.to(source.lineNumbers);\n\t}\n\n\t// --- internal: tabSize\n\n\tprivate _validateTabSize(value: number | string): number | 'auto' | null {\n\t\tif (value === 'auto') {\n\t\t\treturn 'auto';\n\t\t}\n\t\tif (typeof value === 'number') {\n\t\t\tconst r = Math.floor(value);\n\t\t\treturn (r > 0 ? r : null);\n\t\t}\n\t\tif (typeof value === 'string') {\n\t\t\tconst r = parseInt(value, 10);\n\t\t\tif (isNaN(r)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn (r > 0 ? r : null);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate _setTabSize(value: number | string) {\n\t\tconst tabSize = this._validateTabSize(value);\n\t\tif (tabSize === null) {\n\t\t\t// ignore invalid call\n\t\t\treturn;\n\t\t}\n\t\tif (typeof tabSize === 'number') {\n\t\t\tif (this._tabSize === tabSize) {\n\t\t\t\t// nothing to do\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// reflect the new tabSize value immediately\n\t\t\tthis._tabSize = tabSize;\n\t\t}\n\t\tthis._warnOnError(this._proxy.$trySetOptions(this._id, {\n\t\t\ttabSize: tabSize\n\t\t}));\n\t}\n\n\t// --- internal: insert spaces\n\n\tprivate _validateInsertSpaces(value: boolean | string): boolean | 'auto' {\n\t\tif (value === 'auto') {\n\t\t\treturn 'auto';\n\t\t}\n\t\treturn (value === 'false' ? false : Boolean(value));\n\t}\n\n\tprivate _setInsertSpaces(value: boolean | string) {\n\t\tconst insertSpaces = this._validateInsertSpaces(value);\n\t\tif (typeof insertSpaces === 'boolean') {\n\t\t\tif (this._insertSpaces === insertSpaces) {\n\t\t\t\t// nothing to do\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// reflect the new insertSpaces value immediately\n\t\t\tthis._insertSpaces = insertSpaces;\n\t\t}\n\t\tthis._warnOnError(this._proxy.$trySetOptions(this._id, {\n\t\t\tinsertSpaces: insertSpaces\n\t\t}));\n\t}\n\n\t// --- internal: cursor style\n\n\tprivate _setCursorStyle(value: TextEditorCursorStyle) {\n\t\tif (this._cursorStyle === value) {\n\t\t\t// nothing to do\n\t\t\treturn;\n\t\t}\n\t\tthis._cursorStyle = value;\n\t\tthis._warnOnError(this._proxy.$trySetOptions(this._id, {\n\t\t\tcursorStyle: value\n\t\t}));\n\t}\n\n\t// --- internal: line number\n\n\tprivate _setLineNumbers(value: TextEditorLineNumbersStyle) {\n\t\tif (this._lineNumbers === value) {\n\t\t\t// nothing to do\n\t\t\treturn;\n\t\t}\n\t\tthis._lineNumbers = value;\n\t\tthis._warnOnError(this._proxy.$trySetOptions(this._id, {\n\t\t\tlineNumbers: TypeConverters.TextEditorLineNumbersStyle.from(value)\n\t\t}));\n\t}\n\n\tpublic assign(newOptions: vscode.TextEditorOptions) {\n\t\tconst bulkConfigurationUpdate: ITextEditorConfigurationUpdate = {};\n\t\tlet hasUpdate = false;\n\n\t\tif (typeof newOptions.tabSize !== 'undefined') {\n\t\t\tconst tabSize = this._validateTabSize(newOptions.tabSize);\n\t\t\tif (tabSize === 'auto') {\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.tabSize = tabSize;\n\t\t\t} else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n\t\t\t\t// reflect the new tabSize value immediately\n\t\t\t\tthis._tabSize = tabSize;\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.tabSize = tabSize;\n\t\t\t}\n\t\t}\n\n\t\t// if (typeof newOptions.indentSize !== 'undefined') {\n\t\t// \tconst indentSize = this._validateIndentSize(newOptions.indentSize);\n\t\t// \tif (indentSize === 'tabSize') {\n\t\t// \t\thasUpdate = true;\n\t\t// \t\tbulkConfigurationUpdate.indentSize = indentSize;\n\t\t// \t} else if (typeof indentSize === 'number' && this._indentSize !== indentSize) {\n\t\t// \t\t// reflect the new indentSize value immediately\n\t\t// \t\tthis._indentSize = indentSize;\n\t\t// \t\thasUpdate = true;\n\t\t// \t\tbulkConfigurationUpdate.indentSize = indentSize;\n\t\t// \t}\n\t\t// }\n\n\t\tif (typeof newOptions.insertSpaces !== 'undefined') {\n\t\t\tconst insertSpaces = this._validateInsertSpaces(newOptions.insertSpaces);\n\t\t\tif (insertSpaces === 'auto') {\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.insertSpaces = insertSpaces;\n\t\t\t} else if (this._insertSpaces !== insertSpaces) {\n\t\t\t\t// reflect the new insertSpaces value immediately\n\t\t\t\tthis._insertSpaces = insertSpaces;\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.insertSpaces = insertSpaces;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof newOptions.cursorStyle !== 'undefined') {\n\t\t\tif (this._cursorStyle !== newOptions.cursorStyle) {\n\t\t\t\tthis._cursorStyle = newOptions.cursorStyle;\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.cursorStyle = newOptions.cursorStyle;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof newOptions.lineNumbers !== 'undefined') {\n\t\t\tif (this._lineNumbers !== newOptions.lineNumbers) {\n\t\t\t\tthis._lineNumbers = newOptions.lineNumbers;\n\t\t\t\thasUpdate = true;\n\t\t\t\tbulkConfigurationUpdate.lineNumbers = TypeConverters.TextEditorLineNumbersStyle.from(newOptions.lineNumbers);\n\t\t\t}\n\t\t}\n\n\t\tif (hasUpdate) {\n\t\t\tthis._warnOnError(this._proxy.$trySetOptions(this._id, bulkConfigurationUpdate));\n\t\t}\n\t}\n\n\tprivate _warnOnError(promise: Promise<any>): void {\n\t\tpromise.catch(err => this._logService.warn(err));\n\t}\n}\n\nexport class ExtHostTextEditor {\n\n\tprivate _selections: Selection[];\n\tprivate _options: ExtHostTextEditorOptions;\n\tprivate _visibleRanges: Range[];\n\tprivate _viewColumn: vscode.ViewColumn | undefined;\n\tprivate _disposed: boolean = false;\n\tprivate _hasDecorationsForKey = new Set<string>();\n\n\treadonly value: vscode.TextEditor;\n\n\tconstructor(\n\t\treadonly id: string,\n\t\tprivate readonly _proxy: MainThreadTextEditorsShape,\n\t\tprivate readonly _logService: ILogService,\n\t\tdocument: Lazy<vscode.TextDocument>,\n\t\tselections: Selection[], options: IResolvedTextEditorConfiguration,\n\t\tvisibleRanges: Range[], viewColumn: vscode.ViewColumn | undefined\n\t) {\n\t\tthis._selections = selections;\n\t\tthis._options = new ExtHostTextEditorOptions(this._proxy, this.id, options, _logService);\n\t\tthis._visibleRanges = visibleRanges;\n\t\tthis._viewColumn = viewColumn;\n\n\t\tconst that = this;\n\n\t\tthis.value = Object.freeze({\n\t\t\tget document(): vscode.TextDocument {\n\t\t\t\treturn document.getValue();\n\t\t\t},\n\t\t\tset document(_value) {\n\t\t\t\tthrow readonly('document');\n\t\t\t},\n\t\t\t// --- selection\n\t\t\tget selection(): Selection {\n\t\t\t\treturn that._selections && that._selections[0];\n\t\t\t},\n\t\t\tset selection(value: Selection) {\n\t\t\t\tif (!(value instanceof Selection)) {\n\t\t\t\t\tthrow illegalArgument('selection');\n\t\t\t\t}\n\t\t\t\tthat._selections = [value];\n\t\t\t\tthat._trySetSelection();\n\t\t\t},\n\t\t\tget selections(): Selection[] {\n\t\t\t\treturn that._selections;\n\t\t\t},\n\t\t\tset selections(value: Selection[]) {\n\t\t\t\tif (!Array.isArray(value) || value.some(a => !(a instanceof Selection))) {\n\t\t\t\t\tthrow illegalArgument('selections');\n\t\t\t\t}\n\t\t\t\tthat._selections = value;\n\t\t\t\tthat._trySetSelection();\n\t\t\t},\n\t\t\t// --- visible ranges\n\t\t\tget visibleRanges(): Range[] {\n\t\t\t\treturn that._visibleRanges;\n\t\t\t},\n\t\t\tset visibleRanges(_value: Range[]) {\n\t\t\t\tthrow readonly('visibleRanges');\n\t\t\t},\n\t\t\t// --- options\n\t\t\tget options(): vscode.TextEditorOptions {\n\t\t\t\treturn that._options.value;\n\t\t\t},\n\t\t\tset options(value: vscode.TextEditorOptions) {\n\t\t\t\tif (!that._disposed) {\n\t\t\t\t\tthat._options.assign(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// --- view column\n\t\t\tget viewColumn(): vscode.ViewColumn | undefined {\n\t\t\t\treturn that._viewColumn;\n\t\t\t},\n\t\t\tset viewColumn(_value) {\n\t\t\t\tthrow readonly('viewColumn');\n\t\t\t},\n\t\t\t// --- edit\n\t\t\tedit(callback: (edit: TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n\t\t\t\tif (that._disposed) {\n\t\t\t\t\treturn Promise.reject(new Error('TextEditor#edit not possible on closed editors'));\n\t\t\t\t}\n\t\t\t\tconst edit = new TextEditorEdit(document.getValue(), options);\n\t\t\t\tcallback(edit);\n\t\t\t\treturn that._applyEdit(edit);\n\t\t\t},\n\t\t\t// --- snippet edit\n\t\t\tinsertSnippet(snippet: SnippetString, where?: Position | readonly Position[] | Range | readonly Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n\t\t\t\tif (that._disposed) {\n\t\t\t\t\treturn Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n\t\t\t\t}\n\t\t\t\tlet ranges: IRange[];\n\n\t\t\t\tif (!where || (Array.isArray(where) && where.length === 0)) {\n\t\t\t\t\tranges = that._selections.map(range => TypeConverters.Range.from(range));\n\n\t\t\t\t} else if (where instanceof Position) {\n\t\t\t\t\tconst { lineNumber, column } = TypeConverters.Position.from(where);\n\t\t\t\t\tranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n\t\t\t\t} else if (where instanceof Range) {\n\t\t\t\t\tranges = [TypeConverters.Range.from(where)];\n\t\t\t\t} else {\n\t\t\t\t\tranges = [];\n\t\t\t\t\tfor (const posOrRange of where) {\n\t\t\t\t\t\tif (posOrRange instanceof Range) {\n\t\t\t\t\t\t\tranges.push(TypeConverters.Range.from(posOrRange));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst { lineNumber, column } = TypeConverters.Position.from(posOrRange);\n\t\t\t\t\t\t\tranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _proxy.$tryInsertSnippet(id, snippet.value, ranges, options);\n\t\t\t},\n\t\t\tsetDecorations(decorationType: vscode.TextEditorDecorationType, ranges: Range[] | vscode.DecorationOptions[]): void {\n\t\t\t\tconst willBeEmpty = (ranges.length === 0);\n\t\t\t\tif (willBeEmpty && !that._hasDecorationsForKey.has(decorationType.key)) {\n\t\t\t\t\t// avoid no-op call to the renderer\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (willBeEmpty) {\n\t\t\t\t\tthat._hasDecorationsForKey.delete(decorationType.key);\n\t\t\t\t} else {\n\t\t\t\t\tthat._hasDecorationsForKey.add(decorationType.key);\n\t\t\t\t}\n\t\t\t\tthat._runOnProxy(() => {\n\t\t\t\t\tif (TypeConverters.isDecorationOptionsArr(ranges)) {\n\t\t\t\t\t\treturn _proxy.$trySetDecorations(\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tdecorationType.key,\n\t\t\t\t\t\t\tTypeConverters.fromRangeOrRangeWithMessage(ranges)\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst _ranges: number[] = new Array<number>(4 * ranges.length);\n\t\t\t\t\t\tfor (let i = 0, len = ranges.length; i < len; i++) {\n\t\t\t\t\t\t\tconst range = ranges[i];\n\t\t\t\t\t\t\t_ranges[4 * i] = range.start.line + 1;\n\t\t\t\t\t\t\t_ranges[4 * i + 1] = range.start.character + 1;\n\t\t\t\t\t\t\t_ranges[4 * i + 2] = range.end.line + 1;\n\t\t\t\t\t\t\t_ranges[4 * i + 3] = range.end.character + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn _proxy.$trySetDecorationsFast(\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tdecorationType.key,\n\t\t\t\t\t\t\t_ranges\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\trevealRange(range: Range, revealType: vscode.TextEditorRevealType): void {\n\t\t\t\tthat._runOnProxy(() => _proxy.$tryRevealRange(\n\t\t\t\t\tid,\n\t\t\t\t\tTypeConverters.Range.from(range),\n\t\t\t\t\t(revealType || TextEditorRevealType.Default)\n\t\t\t\t));\n\t\t\t},\n\t\t\tshow(column: vscode.ViewColumn) {\n\t\t\t\t_proxy.$tryShowEditor(id, TypeConverters.ViewColumn.from(column));\n\t\t\t},\n\t\t\thide() {\n\t\t\t\t_proxy.$tryHideEditor(id);\n\t\t\t}\n\t\t});\n\t}\n\n\tdispose() {\n\t\tok(!this._disposed);\n\t\tthis._disposed = true;\n\t}\n\n\t// --- incoming: extension host MUST accept what the renderer says\n\n\t_acceptOptions(options: IResolvedTextEditorConfiguration): void {\n\t\tok(!this._disposed);\n\t\tthis._options._accept(options);\n\t}\n\n\t_acceptVisibleRanges(value: Range[]): void {\n\t\tok(!this._disposed);\n\t\tthis._visibleRanges = value;\n\t}\n\n\t_acceptViewColumn(value: vscode.ViewColumn) {\n\t\tok(!this._disposed);\n\t\tthis._viewColumn = value;\n\t}\n\n\t_acceptSelections(selections: Selection[]): void {\n\t\tok(!this._disposed);\n\t\tthis._selections = selections;\n\t}\n\n\tprivate async _trySetSelection(): Promise<vscode.TextEditor | null | undefined> {\n\t\tconst selection = this._selections.map(TypeConverters.Selection.from);\n\t\tawait this._runOnProxy(() => this._proxy.$trySetSelections(this.id, selection));\n\t\treturn this.value;\n\t}\n\n\tprivate _applyEdit(editBuilder: TextEditorEdit): Promise<boolean> {\n\t\tconst editData = editBuilder.finalize();\n\n\t\t// return when there is nothing to do\n\t\tif (editData.edits.length === 0 && !editData.setEndOfLine) {\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\t// check that the edits are not overlapping (i.e. illegal)\n\t\tconst editRanges = editData.edits.map(edit => edit.range);\n\n\t\t// sort ascending (by end and then by start)\n\t\teditRanges.sort((a, b) => {\n\t\t\tif (a.end.line === b.end.line) {\n\t\t\t\tif (a.end.character === b.end.character) {\n\t\t\t\t\tif (a.start.line === b.start.line) {\n\t\t\t\t\t\treturn a.start.character - b.start.character;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.start.line - b.start.line;\n\t\t\t\t}\n\t\t\t\treturn a.end.character - b.end.character;\n\t\t\t}\n\t\t\treturn a.end.line - b.end.line;\n\t\t});\n\n\t\t// check that no edits are overlapping\n\t\tfor (let i = 0, count = editRanges.length - 1; i < count; i++) {\n\t\t\tconst rangeEnd = editRanges[i].end;\n\t\t\tconst nextRangeStart = editRanges[i + 1].start;\n\n\t\t\tif (nextRangeStart.isBefore(rangeEnd)) {\n\t\t\t\t// overlapping ranges\n\t\t\t\treturn Promise.reject(\n\t\t\t\t\tnew Error('Overlapping ranges are not allowed!')\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// prepare data for serialization\n\t\tconst edits = editData.edits.map((edit): ISingleEditOperation => {\n\t\t\treturn {\n\t\t\t\trange: TypeConverters.Range.from(edit.range),\n\t\t\t\ttext: edit.text,\n\t\t\t\tforceMoveMarkers: edit.forceMoveMarkers\n\t\t\t};\n\t\t});\n\n\t\treturn this._proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n\t\t\tsetEndOfLine: typeof editData.setEndOfLine === 'number' ? TypeConverters.EndOfLine.from(editData.setEndOfLine) : undefined,\n\t\t\tundoStopBefore: editData.undoStopBefore,\n\t\t\tundoStopAfter: editData.undoStopAfter\n\t\t});\n\t}\n\tprivate _runOnProxy(callback: () => Promise<any>): Promise<ExtHostTextEditor | undefined | null> {\n\t\tif (this._disposed) {\n\t\t\tthis._logService.warn('TextEditor is closed/disposed');\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn callback().then(() => this, err => {\n\t\t\tif (!(err instanceof Error && err.name === 'DISPOSED')) {\n\t\t\t\tthis._logService.warn(err);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n}\n"]}