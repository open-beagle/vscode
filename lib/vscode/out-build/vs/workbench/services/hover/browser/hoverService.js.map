{"version":3,"file":"hoverService.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/services/hover/browser/hoverService.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/hover';\nimport { registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { editorHoverBackground, editorHoverBorder, textLinkForeground, editorHoverForeground, editorHoverStatusBarBackground, textCodeBlockBackground, widgetShadow } from 'vs/platform/theme/common/colorRegistry';\nimport { IHoverService, IHoverOptions } from 'vs/workbench/services/hover/browser/hover';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { HoverWidget } from 'vs/workbench/services/hover/browser/hoverWidget';\nimport { IContextViewProvider, IDelegate } from 'vs/base/browser/ui/contextview/contextview';\nimport { IDisposable } from 'vs/base/common/lifecycle';\n\nexport class HoverService implements IHoverService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _currentHoverOptions: IHoverOptions | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService\n\t) {\n\t}\n\n\tshowHover(options: IHoverOptions, focus?: boolean): IDisposable | undefined {\n\t\tif (this._currentHoverOptions === options) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._currentHoverOptions = options;\n\n\t\tconst hover = this._instantiationService.createInstance(HoverWidget, options);\n\t\thover.onDispose(() => this._currentHoverOptions = undefined);\n\t\tconst provider = this._contextViewService as IContextViewProvider;\n\t\tprovider.showContextView(new HoverContextViewDelegate(hover, focus));\n\t\thover.onRequestLayout(() => provider.layout());\n\n\t\tif ('IntersectionObserver' in window) {\n\t\t\tconst observer = new IntersectionObserver(e => this._intersectionChange(e, hover), { threshold: 0 });\n\t\t\tconst firstTargetElement = 'targetElements' in options.target ? options.target.targetElements[0] : options.target;\n\t\t\tobserver.observe(firstTargetElement);\n\t\t\thover.onDispose(() => observer.disconnect());\n\t\t}\n\n\t\treturn hover;\n\t}\n\n\thideHover(): void {\n\t\tif (!this._currentHoverOptions) {\n\t\t\treturn;\n\t\t}\n\t\tthis._currentHoverOptions = undefined;\n\t\tthis._contextViewService.hideContextView();\n\t}\n\n\tprivate _intersectionChange(entries: IntersectionObserverEntry[], hover: IDisposable): void {\n\t\tconst entry = entries[entries.length - 1];\n\t\tif (!entry.isIntersecting) {\n\t\t\thover.dispose();\n\t\t}\n\t}\n}\n\nclass HoverContextViewDelegate implements IDelegate {\n\n\tget anchorPosition() {\n\t\treturn this._hover.anchor;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _hover: HoverWidget,\n\t\tprivate readonly _focus: boolean = false\n\t) {\n\t}\n\n\trender(container: HTMLElement) {\n\t\tthis._hover.render(container);\n\t\tif (this._focus) {\n\t\t\tthis._hover.focus();\n\t\t}\n\t\treturn this._hover;\n\t}\n\n\tgetAnchor() {\n\t\treturn {\n\t\t\tx: this._hover.x,\n\t\t\ty: this._hover.y\n\t\t};\n\t}\n\n\tlayout() {\n\t\tthis._hover.layout();\n\t}\n}\n\nregisterSingleton(IHoverService, HoverService, true);\n\nregisterThemingParticipant((theme, collector) => {\n\tconst hoverBackground = theme.getColor(editorHoverBackground);\n\tif (hoverBackground) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover { background-color: ${hoverBackground}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover-pointer:after { background-color: ${hoverBackground}; }`);\n\t}\n\tconst hoverBorder = theme.getColor(editorHoverBorder);\n\tif (hoverBorder) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover { border: 1px solid ${hoverBorder}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover-pointer:after { border-right: 1px solid ${hoverBorder}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover-pointer:after { border-bottom: 1px solid ${hoverBorder}; }`);\n\t}\n\tconst link = theme.getColor(textLinkForeground);\n\tif (link) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover a { color: ${link}; }`);\n\t}\n\tconst hoverForeground = theme.getColor(editorHoverForeground);\n\tif (hoverForeground) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover { color: ${hoverForeground}; }`);\n\t}\n\tconst actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n\tif (actionsBackground) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n\t}\n\tconst codeBackground = theme.getColor(textCodeBlockBackground);\n\tif (codeBackground) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover code { background-color: ${codeBackground}; }`);\n\t}\n});\n\nregisterThemingParticipant((theme, collector) => {\n\tconst widgetShadowColor = theme.getColor(widgetShadow);\n\tif (widgetShadowColor) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n\t}\n});\n"]}