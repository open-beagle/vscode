{"version":3,"file":"preferencesService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/services/preferences/test/browser/preferencesService.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAgBhG,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAEhC,IAAI,wBAAmD,CAAC;QACxD,IAAI,UAA8B,CAAC;QACnC,IAAI,aAAiC,CAAC;QAEtC,KAAK,CAAC,GAAG,EAAE;YACV,aAAa,GAAG,IAAI,kBAAkB,EAAE,CAAC;YACzC,wBAAwB,GAAG,CAAA,GAAA,qDAA6B,CAAA,CAAC;gBACxD,aAAa,EAAE,GAAG,EAAE,CAAC,aAAa;aAClC,CAAC,CAAC;YAEH,wBAAwB,CAAC,IAAI,CAAC,iCAAmB,EAAE,qCAAsB,CAAC,CAAC;YAC3E,wBAAwB,CAAC,IAAI,CAAC,wCAAmB,EAAE,qCAAsB,CAAC,CAAC;YAC3E,wBAAwB,CAAC,IAAI,CAAC,0BAAe,EAAE,uCAAkB,CAAC,CAAC;YAEnE,yHAAyH;YACzH,MAAM,UAAU,GAAG,IAAI,qCAAiB,EAAE,CAAC;YAC3C,UAAU,CAAC,GAAG,CAAC,iCAAmB,EAAE,IAAI,4BAAc,CAAC,uCAAkB,CAAC,CAAC,CAAC;YAC5E,MAAM,oBAAoB,GAAG,wBAAwB,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAC9E,UAAU,GAAG,oBAAoB,CAAC,cAAc,CAAC,uCAAkB,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4DAA4D,EAAE,KAAK,IAAI,EAAE;YAC7E,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;YAC1C,MAAM,OAAO,GAAG,aAAa,CAAC,qBAA8C,CAAC;YAC7E,MAAM,CAAC,WAAW,CAAC,OAAO,YAAY,mCAAqB,EAAE,IAAI,CAAC,CAAC;QACpE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAChE,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;YAC7C,MAAM,OAAO,GAAG,aAAa,CAAC,qBAA8C,CAAC;YAC7E,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YAC9C,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,QAAQ,EAAE,uBAAc,CAAC,QAAQ,CAAC,CAAC;YAC9D,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,MAAM,kBAAmB,SAAQ,yCAAiB;QAGxC,KAAK,CAAC,UAAU,CAAC,MAAW,EAAE,cAAoB;YAC1D,IAAI,CAAC,qBAAqB,GAAG,cAAc,CAAC;YAC5C,OAAO,SAAS,CAAC;QAClB,CAAC;KACD","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { TestCommandService } from 'vs/editor/test/browser/editorTestServices';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { EditorOverride } from 'vs/platform/editor/common/editor';\nimport { SyncDescriptor } from 'vs/platform/instantiation/common/descriptors';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { IJSONEditingService } from 'vs/workbench/services/configuration/common/jsonEditing';\nimport { TestJSONEditingService } from 'vs/workbench/services/configuration/test/common/testServices';\nimport { PreferencesService } from 'vs/workbench/services/preferences/browser/preferencesService';\nimport { IPreferencesService, SettingsEditorOptions } from 'vs/workbench/services/preferences/common/preferences';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { TestRemoteAgentService } from 'vs/workbench/services/remote/test/common/testServices';\nimport { ITestInstantiationService, TestEditorService, workbenchInstantiationService } from 'vs/workbench/test/browser/workbenchTestServices';\n\nsuite('PreferencesService', () => {\n\n\tlet testInstantiationService: ITestInstantiationService;\n\tlet testObject: PreferencesService;\n\tlet editorService: TestEditorService2;\n\n\tsetup(() => {\n\t\teditorService = new TestEditorService2();\n\t\ttestInstantiationService = workbenchInstantiationService({\n\t\t\teditorService: () => editorService\n\t\t});\n\n\t\ttestInstantiationService.stub(IJSONEditingService, TestJSONEditingService);\n\t\ttestInstantiationService.stub(IRemoteAgentService, TestRemoteAgentService);\n\t\ttestInstantiationService.stub(ICommandService, TestCommandService);\n\n\t\t// PreferencesService creates a PreferencesEditorInput which depends on IPreferencesService, add the real one, not a stub\n\t\tconst collection = new ServiceCollection();\n\t\tcollection.set(IPreferencesService, new SyncDescriptor(PreferencesService));\n\t\tconst instantiationService = testInstantiationService.createChild(collection);\n\t\ttestObject = instantiationService.createInstance(PreferencesService);\n\t});\n\n\ttest('openEditor is called with a SettingsEditorOptions instance', async () => {\n\t\ttestObject.openSettings(false, undefined);\n\t\tconst options = editorService.lastOpenEditorOptions as SettingsEditorOptions;\n\t\tassert.strictEqual(options instanceof SettingsEditorOptions, true);\n\t});\n\n\ttest('options are preserved when calling openEditor', async () => {\n\t\ttestObject.openSettings(false, 'test query');\n\t\tconst options = editorService.lastOpenEditorOptions as SettingsEditorOptions;\n\t\tassert.strictEqual(options.focusSearch, true);\n\t\tassert.strictEqual(options.override, EditorOverride.DISABLED);\n\t\tassert.strictEqual(options.query, 'test query');\n\t});\n});\n\nclass TestEditorService2 extends TestEditorService {\n\tlastOpenEditorOptions: any;\n\n\toverride async openEditor(editor: any, optionsOrGroup?: any): Promise<any | undefined> {\n\t\tthis.lastOpenEditorOptions = optionsOrGroup;\n\t\treturn undefined;\n\t}\n}\n"]}