{"version":3,"sources":["vs/workbench/services/preferences/common/preferencesValidation.ts"],"names":[],"mappings":"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","file":"preferencesValidation.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { JSONSchemaType } from 'vs/base/common/jsonSchema';\nimport { Color } from 'vs/base/common/color';\nimport { isArray } from 'vs/base/common/types';\nimport { IConfigurationPropertySchema } from 'vs/platform/configuration/common/configurationRegistry';\n\ntype Validator<T> = { enabled: boolean, isValid: (value: T) => boolean; message: string };\n\nfunction canBeType(propTypes: (string | undefined)[], ...types: JSONSchemaType[]): boolean {\n\treturn types.some(t => propTypes.includes(t));\n}\n\nexport function createValidator(prop: IConfigurationPropertySchema): (value: any) => (string | null) {\n\tconst type: (string | undefined)[] = Array.isArray(prop.type) ? prop.type : [prop.type];\n\tconst isNullable = canBeType(type, 'null');\n\tconst isNumeric = (canBeType(type, 'number') || canBeType(type, 'integer')) && (type.length === 1 || type.length === 2 && isNullable);\n\n\tconst numericValidations = getNumericValidators(prop);\n\tconst stringValidations = getStringValidators(prop);\n\tconst stringArrayValidator = getArrayOfStringValidator(prop);\n\n\treturn value => {\n\t\tif (prop.type === 'string' && stringValidations.length === 0) { return null; }\n\t\tif (isNullable && value === '') { return ''; }\n\n\t\tconst errors: string[] = [];\n\t\tif (stringArrayValidator) {\n\t\t\tconst err = stringArrayValidator(value);\n\t\t\tif (err) {\n\t\t\t\terrors.push(err);\n\t\t\t}\n\t\t}\n\n\t\tif (isNumeric) {\n\t\t\tif (value === '' || isNaN(+value)) {\n\t\t\t\terrors.push(nls.localize('validations.expectedNumeric', \"Value must be a number.\"));\n\t\t\t} else {\n\t\t\t\terrors.push(...numericValidations.filter(validator => !validator.isValid(+value)).map(validator => validator.message));\n\t\t\t}\n\t\t}\n\n\t\tif (prop.type === 'string') {\n\t\t\terrors.push(...stringValidations.filter(validator => !validator.isValid('' + value)).map(validator => validator.message));\n\t\t}\n\n\t\tif (errors.length) {\n\t\t\treturn prop.errorMessage ? [prop.errorMessage, ...errors].join(' ') : errors.join(' ');\n\t\t}\n\n\t\treturn '';\n\t};\n}\n\n/**\n * Returns an error string if the value is invalid and can't be displayed in the settings UI for the given type.\n */\nexport function getInvalidTypeError(value: any, type: undefined | string | string[]): string | undefined {\n\tif (typeof type === 'undefined') {\n\t\treturn;\n\t}\n\n\tconst typeArr = Array.isArray(type) ? type : [type];\n\tif (!typeArr.some(_type => valueValidatesAsType(value, _type))) {\n\t\treturn nls.localize('invalidTypeError', \"Setting has an invalid type, expected {0}. Fix in JSON.\", JSON.stringify(type));\n\t}\n\n\treturn;\n}\n\nfunction valueValidatesAsType(value: any, type: string): boolean {\n\tconst valueType = typeof value;\n\tif (type === 'boolean') {\n\t\treturn valueType === 'boolean';\n\t} else if (type === 'object') {\n\t\treturn value && !Array.isArray(value) && valueType === 'object';\n\t} else if (type === 'null') {\n\t\treturn value === null;\n\t} else if (type === 'array') {\n\t\treturn Array.isArray(value);\n\t} else if (type === 'string') {\n\t\treturn valueType === 'string';\n\t} else if (type === 'number' || type === 'integer') {\n\t\treturn valueType === 'number';\n\t}\n\n\treturn true;\n}\n\nfunction getStringValidators(prop: IConfigurationPropertySchema) {\n\tconst uriRegex = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\tlet patternRegex: RegExp | undefined;\n\tif (typeof prop.pattern === 'string') {\n\t\tpatternRegex = new RegExp(prop.pattern);\n\t}\n\n\treturn [\n\t\t{\n\t\t\tenabled: prop.maxLength !== undefined,\n\t\t\tisValid: ((value: { length: number; }) => value.length <= prop.maxLength!),\n\t\t\tmessage: nls.localize('validations.maxLength', \"Value must be {0} or fewer characters long.\", prop.maxLength)\n\t\t},\n\t\t{\n\t\t\tenabled: prop.minLength !== undefined,\n\t\t\tisValid: ((value: { length: number; }) => value.length >= prop.minLength!),\n\t\t\tmessage: nls.localize('validations.minLength', \"Value must be {0} or more characters long.\", prop.minLength)\n\t\t},\n\t\t{\n\t\t\tenabled: patternRegex !== undefined,\n\t\t\tisValid: ((value: string) => patternRegex!.test(value)),\n\t\t\tmessage: prop.patternErrorMessage || nls.localize('validations.regex', \"Value must match regex `{0}`.\", prop.pattern)\n\t\t},\n\t\t{\n\t\t\tenabled: prop.format === 'color-hex',\n\t\t\tisValid: ((value: string) => Color.Format.CSS.parseHex(value)),\n\t\t\tmessage: nls.localize('validations.colorFormat', \"Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.\")\n\t\t},\n\t\t{\n\t\t\tenabled: prop.format === 'uri' || prop.format === 'uri-reference',\n\t\t\tisValid: ((value: string) => !!value.length),\n\t\t\tmessage: nls.localize('validations.uriEmpty', \"URI expected.\")\n\t\t},\n\t\t{\n\t\t\tenabled: prop.format === 'uri' || prop.format === 'uri-reference',\n\t\t\tisValid: ((value: string) => uriRegex.test(value)),\n\t\t\tmessage: nls.localize('validations.uriMissing', \"URI is expected.\")\n\t\t},\n\t\t{\n\t\t\tenabled: prop.format === 'uri',\n\t\t\tisValid: ((value: string) => {\n\t\t\t\tconst matches = value.match(uriRegex);\n\t\t\t\treturn !!(matches && matches[2]);\n\t\t\t}),\n\t\t\tmessage: nls.localize('validations.uriSchemeMissing', \"URI with a scheme is expected.\")\n\t\t},\n\t].filter(validation => validation.enabled);\n}\n\nfunction getNumericValidators(prop: IConfigurationPropertySchema): Validator<number>[] {\n\tconst type: (string | undefined)[] = Array.isArray(prop.type) ? prop.type : [prop.type];\n\n\tconst isNullable = canBeType(type, 'null');\n\tconst isIntegral = (canBeType(type, 'integer')) && (type.length === 1 || type.length === 2 && isNullable);\n\tconst isNumeric = canBeType(type, 'number', 'integer') && (type.length === 1 || type.length === 2 && isNullable);\n\tif (!isNumeric) {\n\t\treturn [];\n\t}\n\n\tlet exclusiveMax: number | undefined;\n\tlet exclusiveMin: number | undefined;\n\n\tif (typeof prop.exclusiveMaximum === 'boolean') {\n\t\texclusiveMax = prop.exclusiveMaximum ? prop.maximum : undefined;\n\t} else {\n\t\texclusiveMax = prop.exclusiveMaximum;\n\t}\n\n\tif (typeof prop.exclusiveMinimum === 'boolean') {\n\t\texclusiveMin = prop.exclusiveMinimum ? prop.minimum : undefined;\n\t} else {\n\t\texclusiveMin = prop.exclusiveMinimum;\n\t}\n\n\treturn [\n\t\t{\n\t\t\tenabled: exclusiveMax !== undefined && (prop.maximum === undefined || exclusiveMax <= prop.maximum),\n\t\t\tisValid: ((value: number) => value < exclusiveMax!),\n\t\t\tmessage: nls.localize('validations.exclusiveMax', \"Value must be strictly less than {0}.\", exclusiveMax)\n\t\t},\n\t\t{\n\t\t\tenabled: exclusiveMin !== undefined && (prop.minimum === undefined || exclusiveMin >= prop.minimum),\n\t\t\tisValid: ((value: number) => value > exclusiveMin!),\n\t\t\tmessage: nls.localize('validations.exclusiveMin', \"Value must be strictly greater than {0}.\", exclusiveMin)\n\t\t},\n\n\t\t{\n\t\t\tenabled: prop.maximum !== undefined && (exclusiveMax === undefined || exclusiveMax > prop.maximum),\n\t\t\tisValid: ((value: number) => value <= prop.maximum!),\n\t\t\tmessage: nls.localize('validations.max', \"Value must be less than or equal to {0}.\", prop.maximum)\n\t\t},\n\t\t{\n\t\t\tenabled: prop.minimum !== undefined && (exclusiveMin === undefined || exclusiveMin < prop.minimum),\n\t\t\tisValid: ((value: number) => value >= prop.minimum!),\n\t\t\tmessage: nls.localize('validations.min', \"Value must be greater than or equal to {0}.\", prop.minimum)\n\t\t},\n\t\t{\n\t\t\tenabled: prop.multipleOf !== undefined,\n\t\t\tisValid: ((value: number) => value % prop.multipleOf! === 0),\n\t\t\tmessage: nls.localize('validations.multipleOf', \"Value must be a multiple of {0}.\", prop.multipleOf)\n\t\t},\n\t\t{\n\t\t\tenabled: isIntegral,\n\t\t\tisValid: ((value: number) => value % 1 === 0),\n\t\t\tmessage: nls.localize('validations.expectedInteger', \"Value must be an integer.\")\n\t\t},\n\t].filter(validation => validation.enabled);\n}\n\nfunction getArrayOfStringValidator(prop: IConfigurationPropertySchema): ((value: any) => (string | null)) | null {\n\tif (prop.type === 'array' && prop.items && !isArray(prop.items) && prop.items.type === 'string') {\n\t\tconst propItems = prop.items;\n\t\tif (propItems && !isArray(propItems) && propItems.type === 'string') {\n\t\t\tconst withQuotes = (s: string) => `'` + s + `'`;\n\t\t\treturn value => {\n\t\t\t\tif (!value) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tlet message = '';\n\n\t\t\t\tconst stringArrayValue = value as string[];\n\n\t\t\t\tif (prop.uniqueItems) {\n\t\t\t\t\tif (new Set(stringArrayValue).size < stringArrayValue.length) {\n\t\t\t\t\t\tmessage += nls.localize('validations.stringArrayUniqueItems', 'Array has duplicate items');\n\t\t\t\t\t\tmessage += '\\n';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (prop.minItems && stringArrayValue.length < prop.minItems) {\n\t\t\t\t\tmessage += nls.localize('validations.stringArrayMinItem', 'Array must have at least {0} items', prop.minItems);\n\t\t\t\t\tmessage += '\\n';\n\t\t\t\t}\n\n\t\t\t\tif (prop.maxItems && stringArrayValue.length > prop.maxItems) {\n\t\t\t\t\tmessage += nls.localize('validations.stringArrayMaxItem', 'Array must have at most {0} items', prop.maxItems);\n\t\t\t\t\tmessage += '\\n';\n\t\t\t\t}\n\n\t\t\t\tif (typeof propItems.pattern === 'string') {\n\t\t\t\t\tconst patternRegex = new RegExp(propItems.pattern);\n\t\t\t\t\tstringArrayValue.forEach(v => {\n\t\t\t\t\t\tif (!patternRegex.test(v)) {\n\t\t\t\t\t\t\tmessage +=\n\t\t\t\t\t\t\t\tpropItems.patternErrorMessage ||\n\t\t\t\t\t\t\t\tnls.localize(\n\t\t\t\t\t\t\t\t\t'validations.stringArrayItemPattern',\n\t\t\t\t\t\t\t\t\t'Value {0} must match regex {1}.',\n\t\t\t\t\t\t\t\t\twithQuotes(v),\n\t\t\t\t\t\t\t\t\twithQuotes(propItems.pattern!)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst propItemsEnum = propItems.enum;\n\t\t\t\tif (propItemsEnum) {\n\t\t\t\t\tstringArrayValue.forEach(v => {\n\t\t\t\t\t\tif (propItemsEnum.indexOf(v) === -1) {\n\t\t\t\t\t\t\tmessage += nls.localize(\n\t\t\t\t\t\t\t\t'validations.stringArrayItemEnum',\n\t\t\t\t\t\t\t\t'Value {0} is not one of {1}',\n\t\t\t\t\t\t\t\twithQuotes(v),\n\t\t\t\t\t\t\t\t'[' + propItemsEnum.map(withQuotes).join(', ') + ']'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmessage += '\\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn message;\n\t\t\t};\n\t\t}\n\t}\n\n\treturn null;\n}\n"]}