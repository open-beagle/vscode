{"version":3,"file":"configuration.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/services/configuration/browser/configuration.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport * as errors from 'vs/base/common/errors';\nimport { Disposable, IDisposable, dispose, toDisposable, MutableDisposable, combinedDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { FileChangeType, FileChangesEvent, IFileService, whenProviderRegistered, FileOperationError, FileOperationResult } from 'vs/platform/files/common/files';\nimport { ConfigurationModel, ConfigurationModelParser, ConfigurationParseOptions, UserSettings } from 'vs/platform/configuration/common/configurationModels';\nimport { WorkspaceConfigurationModelParser, StandaloneConfigurationModelParser } from 'vs/workbench/services/configuration/common/configurationModels';\nimport { TASKS_CONFIGURATION_KEY, FOLDER_SETTINGS_NAME, LAUNCH_CONFIGURATION_KEY, IConfigurationCache, ConfigurationKey, REMOTE_MACHINE_SCOPES, FOLDER_SCOPES, WORKSPACE_SCOPES } from 'vs/workbench/services/configuration/common/configuration';\nimport { IStoredWorkspaceFolder, IWorkspaceIdentifier } from 'vs/platform/workspaces/common/workspaces';\nimport { JSONEditingService } from 'vs/workbench/services/configuration/common/jsonEditingService';\nimport { WorkbenchState, IWorkspaceFolder } from 'vs/platform/workspace/common/workspace';\nimport { ConfigurationScope } from 'vs/platform/configuration/common/configurationRegistry';\nimport { join } from 'vs/base/common/path';\nimport { equals } from 'vs/base/common/objects';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { hash } from 'vs/base/common/hash';\nimport { IUriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentity';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IStringDictionary } from 'vs/base/common/collections';\n\nexport class UserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly userConfiguration: MutableDisposable<UserSettings | FileServiceBasedConfiguration> = this._register(new MutableDisposable<UserSettings | FileServiceBasedConfiguration>());\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tprivate readonly configurationParseOptions: ConfigurationParseOptions;\n\n\tget hasTasksLoaded(): boolean { return this.userConfiguration.value instanceof FileServiceBasedConfiguration; }\n\n\tconstructor(\n\t\tprivate readonly userSettingsResource: URI,\n\t\tscopes: ConfigurationScope[] | undefined,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.configurationParseOptions = { scopes, skipRestricted: false };\n\t\tthis.userConfiguration.value = new UserSettings(this.userSettingsResource, scopes, uriIdentityService.extUri, this.fileService);\n\t\tthis._register(this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule()));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.reload().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\tif (this.hasTasksLoaded) {\n\t\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t\t}\n\n\t\tconst folder = this.uriIdentityService.extUri.dirname(this.userSettingsResource);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [TASKS_CONFIGURATION_KEY].map(name => ([name, this.uriIdentityService.extUri.joinPath(folder, `${name}.json`)]));\n\t\tconst fileServiceBasedConfiguration = new FileServiceBasedConfiguration(folder.toString(), this.userSettingsResource, standAloneConfigurationResources, this.configurationParseOptions, this.fileService, this.uriIdentityService, this.logService);\n\t\tconst configurationModel = await fileServiceBasedConfiguration.loadConfiguration();\n\t\tthis.userConfiguration.value = fileServiceBasedConfiguration;\n\n\t\t// Check for value because userConfiguration might have been disposed.\n\t\tif (this.userConfiguration.value) {\n\t\t\tthis._register(this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule()));\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\treparse(): ConfigurationModel {\n\t\treturn this.userConfiguration.value!.reparse(this.configurationParseOptions);\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.userConfiguration.value!.getRestrictedSettings();\n\t}\n}\n\nclass FileServiceBasedConfiguration extends Disposable {\n\n\tprivate readonly allResources: URI[];\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate _cache: ConfigurationModel;\n\n\tprivate readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tname: string,\n\t\tprivate readonly settingsResource: URI,\n\t\tprivate readonly standAloneConfigurationResources: [string, URI][],\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.allResources = [this.settingsResource, ...this.standAloneConfigurationResources.map(([, resource]) => resource)];\n\t\tthis._register(combinedDisposable(...this.allResources.map(resource => combinedDisposable(\n\t\t\tthis.fileService.watch(uriIdentityService.extUri.dirname(resource)),\n\t\t\t// Also listen to the resource incase the resource is a symlink - https://github.com/microsoft/vscode/issues/118134\n\t\t\tthis.fileService.watch(resource)\n\t\t))));\n\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser(name);\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._cache = new ConfigurationModel();\n\n\t\tthis._register(Event.debounce(Event.filter(this.fileService.onDidFilesChange, e => this.handleFileEvents(e)), () => undefined, 100)(() => this._onDidChange.fire()));\n\t}\n\n\tasync resolveContents(): Promise<[string | undefined, [string, string | undefined][]]> {\n\n\t\tconst resolveContents = async (resources: URI[]): Promise<(string | undefined)[]> => {\n\t\t\treturn Promise.all(resources.map(async resource => {\n\t\t\t\ttry {\n\t\t\t\t\tconst content = (await this.fileService.readFile(resource, { atomic: true })).value.toString();\n\t\t\t\t\tif (!content) {\n\t\t\t\t\t\tthis.logService.debug(`Configuration file '${resource.toString()}' is empty`);\n\t\t\t\t\t}\n\t\t\t\t\treturn content;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.trace(`Error while resolving configuration file '${resource.toString()}': ${errors.getErrorMessage(error)}`);\n\t\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND\n\t\t\t\t\t\t&& (<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_DIRECTORY) {\n\t\t\t\t\t\terrors.onUnexpectedError(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn '{}';\n\t\t\t}));\n\t\t};\n\n\t\tconst [[settingsContent], standAloneConfigurationContents] = await Promise.all([\n\t\t\tresolveContents([this.settingsResource]),\n\t\t\tresolveContents(this.standAloneConfigurationResources.map(([, resource]) => resource)),\n\t\t]);\n\n\t\treturn [settingsContent, standAloneConfigurationContents.map((content, index) => ([this.standAloneConfigurationResources[index][0], content]))];\n\t}\n\n\tasync loadConfiguration(): Promise<ConfigurationModel> {\n\n\t\tconst [settingsContent, standAloneConfigurationContents] = await this.resolveContents();\n\n\t\t// reset\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._folderSettingsModelParser.parse('', this._folderSettingsParseOptions);\n\n\t\t// parse\n\t\tif (settingsContent !== undefined) {\n\t\t\tthis._folderSettingsModelParser.parse(settingsContent, this._folderSettingsParseOptions);\n\t\t}\n\t\tfor (let index = 0; index < standAloneConfigurationContents.length; index++) {\n\t\t\tconst contents = standAloneConfigurationContents[index][1];\n\t\t\tif (contents !== undefined) {\n\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(this.standAloneConfigurationResources[index][1].toString(), this.standAloneConfigurationResources[index][0]);\n\t\t\t\tstandAloneConfigurationModelParser.parse(contents);\n\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t}\n\t\t}\n\n\t\t// Consolidate (support *.json files in the workspace settings folder)\n\t\tthis.consolidate();\n\n\t\treturn this._cache;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tconst oldContents = this._folderSettingsModelParser.configurationModel.contents;\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tif (!equals(oldContents, this._folderSettingsModelParser.configurationModel.contents)) {\n\t\t\tthis.consolidate();\n\t\t}\n\t\treturn this._cache;\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis._cache = this._folderSettingsModelParser.configurationModel.merge(...this._standAloneConfigurations);\n\t}\n\n\tprivate handleFileEvents(event: FileChangesEvent): boolean {\n\t\t// One of the resources has changed\n\t\tif (this.allResources.some(resource => event.contains(resource))) {\n\t\t\treturn true;\n\t\t}\n\t\t// One of the resource's parent got deleted\n\t\tif (this.allResources.some(resource => event.contains(this.uriIdentityService.extUri.dirname(resource), FileChangeType.DELETED))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\nexport class RemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _cachedConfiguration: CachedRemoteUserConfiguration;\n\tprivate readonly _fileService: IFileService;\n\tprivate _userConfiguration: FileServiceBasedRemoteUserConfiguration | CachedRemoteUserConfiguration;\n\tprivate _userConfigurationInitializationPromise: Promise<ConfigurationModel> | null = null;\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly _onDidInitialize = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidInitialize = this._onDidInitialize.event;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tconfigurationCache: IConfigurationCache,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tremoteAgentService: IRemoteAgentService\n\t) {\n\t\tsuper();\n\t\tthis._fileService = fileService;\n\t\tthis._userConfiguration = this._cachedConfiguration = new CachedRemoteUserConfiguration(remoteAuthority, configurationCache, { scopes: REMOTE_MACHINE_SCOPES });\n\t\tremoteAgentService.getEnvironment().then(async environment => {\n\t\t\tif (environment) {\n\t\t\t\tconst userConfiguration = this._register(new FileServiceBasedRemoteUserConfiguration(environment.settingsPath, { scopes: REMOTE_MACHINE_SCOPES }, this._fileService, uriIdentityService));\n\t\t\t\tthis._register(userConfiguration.onDidChangeConfiguration(configurationModel => this.onDidUserConfigurationChange(configurationModel)));\n\t\t\t\tthis._userConfigurationInitializationPromise = userConfiguration.initialize();\n\t\t\t\tconst configurationModel = await this._userConfigurationInitializationPromise;\n\t\t\t\tthis._userConfiguration.dispose();\n\t\t\t\tthis._userConfiguration = userConfiguration;\n\t\t\t\tthis.onDidUserConfigurationChange(configurationModel);\n\t\t\t\tthis._onDidInitialize.fire(configurationModel);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\treturn this._userConfiguration.initialize();\n\t\t}\n\n\t\t// Initialize cached configuration\n\t\tlet configurationModel = await this._userConfiguration.initialize();\n\t\tif (this._userConfigurationInitializationPromise) {\n\t\t\t// Use user configuration\n\t\t\tconfigurationModel = await this._userConfigurationInitializationPromise;\n\t\t\tthis._userConfigurationInitializationPromise = null;\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\treload(): Promise<ConfigurationModel> {\n\t\treturn this._userConfiguration.reload();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\treturn this._userConfiguration.reparse({ scopes: REMOTE_MACHINE_SCOPES });\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._userConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate onDidUserConfigurationChange(configurationModel: ConfigurationModel): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChangeConfiguration.fire(configurationModel);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\tlet content: string | undefined;\n\t\t\ttry {\n\t\t\t\tcontent = await this._userConfiguration.resolveContent();\n\t\t\t} catch (error) {\n\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait this._cachedConfiguration.updateConfiguration(content);\n\t\t}\n\t}\n\n}\n\nclass FileServiceBasedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\tprotected readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate fileWatcherDisposable: IDisposable = Disposable.None;\n\tprivate directoryWatcherDisposable: IDisposable = Disposable.None;\n\n\tconstructor(\n\t\tprivate readonly configurationResource: URI,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t) {\n\t\tsuper();\n\n\t\tthis.parser = new ConfigurationModelParser(this.configurationResource.toString());\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis._register(fileService.onDidFilesChange(e => this.handleFileEvents(e)));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.reload().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.stopWatchingDirectory();\n\t\t}));\n\t}\n\n\tprivate watchResource(): void {\n\t\tthis.fileWatcherDisposable = this.fileService.watch(this.configurationResource);\n\t}\n\n\tprivate stopWatchingResource(): void {\n\t\tthis.fileWatcherDisposable.dispose();\n\t\tthis.fileWatcherDisposable = Disposable.None;\n\t}\n\n\tprivate watchDirectory(): void {\n\t\tconst directory = this.uriIdentityService.extUri.dirname(this.configurationResource);\n\t\tthis.directoryWatcherDisposable = this.fileService.watch(directory);\n\t}\n\n\tprivate stopWatchingDirectory(): void {\n\t\tthis.directoryWatcherDisposable.dispose();\n\t\tthis.directoryWatcherDisposable = Disposable.None;\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tconst exists = await this.fileService.exists(this.configurationResource);\n\t\tthis.onResourceExists(exists);\n\t\treturn this.reload();\n\t}\n\n\tasync resolveContent(): Promise<string> {\n\t\tconst content = await this.fileService.readFile(this.configurationResource);\n\t\treturn content.value.toString();\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.resolveContent();\n\t\t\tthis.parser.parse(content, this.parseOptions);\n\t\t\treturn this.parser.configurationModel;\n\t\t} catch (e) {\n\t\t\treturn new ConfigurationModel();\n\t\t}\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\treturn this.parser.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tprivate async handleFileEvents(event: FileChangesEvent): Promise<void> {\n\n\t\t// Find changes that affect the resource\n\t\tlet affectedByChanges = event.contains(this.configurationResource, FileChangeType.UPDATED);\n\t\tif (event.contains(this.configurationResource, FileChangeType.ADDED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(true);\n\t\t} else if (event.contains(this.configurationResource, FileChangeType.DELETED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(false);\n\t\t}\n\n\t\tif (affectedByChanges) {\n\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate onResourceExists(exists: boolean): void {\n\t\tif (exists) {\n\t\t\tthis.stopWatchingDirectory();\n\t\t\tthis.watchResource();\n\t\t} else {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.watchDirectory();\n\t\t}\n\t}\n}\n\nclass CachedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChange: Event<ConfigurationModel> = this._onDidChange.event;\n\n\tprivate readonly key: ConfigurationKey;\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate configurationModel: ConfigurationModel;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t) {\n\t\tsuper();\n\t\tthis.key = { type: 'user', key: remoteAuthority };\n\t\tthis.parser = new ConfigurationModelParser('CachedRemoteUserConfiguration');\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.configurationModel = new ConfigurationModel();\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.configurationModel;\n\t}\n\n\tinitialize(): Promise<ConfigurationModel> {\n\t\treturn this.reload();\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\tthis.configurationModel = this.parser.configurationModel;\n\t\treturn this.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.configurationCache.read(this.key);\n\t\t\tconst parsed: { content: string } = JSON.parse(content);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.parser.parse(parsed.content, this.parseOptions);\n\t\t\t\tthis.configurationModel = this.parser.configurationModel;\n\t\t\t}\n\t\t} catch (e) { /* Ignore error */ }\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(content: string | undefined): Promise<void> {\n\t\tif (content) {\n\t\t\treturn this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\treturn this.configurationCache.remove(this.key);\n\t\t}\n\t}\n}\n\nexport class WorkspaceConfiguration extends Disposable {\n\n\tprivate readonly _fileService: IFileService;\n\tprivate readonly _cachedConfiguration: CachedWorkspaceConfiguration;\n\tprivate _workspaceConfiguration: CachedWorkspaceConfiguration | FileServiceBasedWorkspaceConfiguration;\n\tprivate _workspaceConfigurationDisposables = this._register(new DisposableStore());\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate _isWorkspaceTrusted: boolean = false;\n\n\tprivate readonly _onDidUpdateConfiguration = this._register(new Emitter<boolean>());\n\tpublic readonly onDidUpdateConfiguration = this._onDidUpdateConfiguration.event;\n\n\tprivate _initialized: boolean = false;\n\tget initialized(): boolean { return this._initialized; }\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tfileService: IFileService\n\t) {\n\t\tsuper();\n\t\tthis._fileService = fileService;\n\t\tthis._workspaceConfiguration = this._cachedConfiguration = new CachedWorkspaceConfiguration(configurationCache);\n\t}\n\n\tasync initialize(workspaceIdentifier: IWorkspaceIdentifier, workspaceTrusted: boolean): Promise<void> {\n\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\tthis._isWorkspaceTrusted = workspaceTrusted;\n\t\tif (!this._initialized) {\n\t\t\tif (this.configurationCache.needsCaching(this._workspaceIdentifier.configPath)) {\n\t\t\t\tthis._workspaceConfiguration = this._cachedConfiguration;\n\t\t\t\tthis.waitAndInitialize(this._workspaceIdentifier);\n\t\t\t} else {\n\t\t\t\tthis.doInitialize(new FileServiceBasedWorkspaceConfiguration(this._fileService));\n\t\t\t}\n\t\t}\n\t\tawait this.reload();\n\t}\n\n\tasync reload(): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\tawait this._workspaceConfiguration.load(this._workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t}\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this._workspaceConfiguration.getFolders();\n\t}\n\n\tsetFolders(folders: IStoredWorkspaceFolder[], jsonEditingService: JSONEditingService): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\treturn jsonEditingService.write(this._workspaceIdentifier.configPath, [{ path: ['folders'], value: folders }], true)\n\t\t\t\t.then(() => this.reload());\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tgetConfiguration(): ConfigurationModel {\n\t\treturn this._workspaceConfiguration.getWorkspaceSettings();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis._isWorkspaceTrusted = trusted;\n\t\treturn this.reparseWorkspaceSettings();\n\t}\n\n\treparseWorkspaceSettings(): ConfigurationModel {\n\t\tthis._workspaceConfiguration.reparseWorkspaceSettings({ scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\treturn this.getConfiguration();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._workspaceConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate async waitAndInitialize(workspaceIdentifier: IWorkspaceIdentifier): Promise<void> {\n\t\tawait whenProviderRegistered(workspaceIdentifier.configPath, this._fileService);\n\t\tif (!(this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration)) {\n\t\t\tconst fileServiceBasedWorkspaceConfiguration = this._register(new FileServiceBasedWorkspaceConfiguration(this._fileService));\n\t\t\tawait fileServiceBasedWorkspaceConfiguration.load(workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t\tthis.doInitialize(fileServiceBasedWorkspaceConfiguration);\n\t\t\tthis.onDidWorkspaceConfigurationChange(false, true);\n\t\t}\n\t}\n\n\tprivate doInitialize(fileServiceBasedWorkspaceConfiguration: FileServiceBasedWorkspaceConfiguration): void {\n\t\tthis._workspaceConfigurationDisposables.clear();\n\t\tthis._workspaceConfiguration = this._workspaceConfigurationDisposables.add(fileServiceBasedWorkspaceConfiguration);\n\t\tthis._workspaceConfigurationDisposables.add(this._workspaceConfiguration.onDidChange(e => this.onDidWorkspaceConfigurationChange(true, false)));\n\t\tthis._initialized = true;\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this._isWorkspaceTrusted;\n\t}\n\n\tprivate async onDidWorkspaceConfigurationChange(reload: boolean, fromCache: boolean): Promise<void> {\n\t\tif (reload) {\n\t\t\tawait this.reload();\n\t\t}\n\t\tthis.updateCache();\n\t\tthis._onDidUpdateConfiguration.fire(fromCache);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._workspaceIdentifier && this.configurationCache.needsCaching(this._workspaceIdentifier.configPath) && this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration) {\n\t\t\tconst content = await this._workspaceConfiguration.resolveContent(this._workspaceIdentifier);\n\t\t\tawait this._cachedConfiguration.updateWorkspace(this._workspaceIdentifier, content);\n\t\t}\n\t}\n}\n\nclass FileServiceBasedWorkspaceConfiguration extends Disposable {\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate workspaceConfigWatcher: IDisposable;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(private fileService: IFileService) {\n\t\tsuper();\n\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('');\n\t\tthis.workspaceSettings = new ConfigurationModel();\n\n\t\tthis._register(fileService.onDidFilesChange(e => this.handleWorkspaceFileEvents(e)));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this._onDidChange.fire(), 50));\n\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn this._workspaceIdentifier;\n\t}\n\n\tasync resolveContent(workspaceIdentifier: IWorkspaceIdentifier): Promise<string> {\n\t\tconst content = await this.fileService.readFile(workspaceIdentifier.configPath);\n\t\treturn content.value.toString();\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\tif (!this._workspaceIdentifier || this._workspaceIdentifier.id !== workspaceIdentifier.id) {\n\t\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(this._workspaceIdentifier.id);\n\t\t\tdispose(this.workspaceConfigWatcher);\n\t\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t\t}\n\t\tlet contents = '';\n\t\ttry {\n\t\t\tcontents = await this.resolveContent(this._workspaceIdentifier);\n\t\t} catch (error) {\n\t\t\tconst exists = await this.fileService.exists(this._workspaceIdentifier.configPath);\n\t\t\tif (exists) {\n\t\t\t\terrors.onUnexpectedError(error);\n\t\t\t}\n\t\t}\n\t\tthis.workspaceConfigurationModelParser.parse(contents, configurationParseOptions);\n\t\tthis.consolidate();\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tprivate watchWorkspaceConfigurationFile(): IDisposable {\n\t\treturn this._workspaceIdentifier ? this.fileService.watch(this._workspaceIdentifier.configPath) : Disposable.None;\n\t}\n\n\tprivate handleWorkspaceFileEvents(event: FileChangesEvent): void {\n\t\tif (this._workspaceIdentifier) {\n\n\t\t\t// Find changes that affect workspace file\n\t\t\tif (event.contains(this._workspaceIdentifier.configPath)) {\n\t\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass CachedWorkspaceConfiguration {\n\n\treadonly onDidChange: Event<void> = Event.None;\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\n\tconstructor(private readonly configurationCache: IConfigurationCache) {\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('');\n\t\tthis.workspaceSettings = new ConfigurationModel();\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tconst contents = await this.configurationCache.read(key);\n\t\t\tconst parsed: { content: string } = JSON.parse(contents);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(key.key);\n\t\t\t\tthis.workspaceConfigurationModelParser.parse(parsed.content, configurationParseOptions);\n\t\t\t\tthis.consolidate();\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn null;\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tasync updateWorkspace(workspaceIdentifier: IWorkspaceIdentifier, content: string | undefined): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tif (content) {\n\t\t\t\tawait this.configurationCache.write(key, JSON.stringify({ content }));\n\t\t\t} else {\n\t\t\t\tawait this.configurationCache.remove(key);\n\t\t\t}\n\t\t} catch (error) {\n\t\t}\n\t}\n\n\tprivate getKey(workspaceIdentifier: IWorkspaceIdentifier): ConfigurationKey {\n\t\treturn {\n\t\t\ttype: 'workspaces',\n\t\t\tkey: workspaceIdentifier.id\n\t\t};\n\t}\n}\n\nclass CachedFolderConfiguration {\n\n\treadonly onDidChange = Event.None;\n\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate configurationModel: ConfigurationModel;\n\tprivate readonly key: ConfigurationKey;\n\n\tconstructor(\n\t\tfolder: URI,\n\t\tconfigFolderRelativePath: string,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t) {\n\t\tthis.key = { type: 'folder', key: hash(join(folder.path, configFolderRelativePath)).toString(16) };\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser('CachedFolderConfiguration');\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis.configurationModel = new ConfigurationModel();\n\t}\n\n\tasync loadConfiguration(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst contents = await this.configurationCache.read(this.key);\n\t\t\tconst { content: configurationContents }: { content: IStringDictionary<string> } = JSON.parse(contents.toString());\n\t\t\tif (configurationContents) {\n\t\t\t\tfor (const key of Object.keys(configurationContents)) {\n\t\t\t\t\tif (key === FOLDER_SETTINGS_NAME) {\n\t\t\t\t\t\tthis._folderSettingsModelParser.parse(configurationContents[key], this._folderSettingsParseOptions);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(key, key);\n\t\t\t\t\t\tstandAloneConfigurationModelParser.parse(configurationContents[key]);\n\t\t\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.consolidate();\n\t\t} catch (e) {\n\t\t}\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(settingsContent: string | undefined, standAloneConfigurationContents: [string, string | undefined][]): Promise<void> {\n\t\tconst content: any = {};\n\t\tif (settingsContent) {\n\t\t\tcontent[FOLDER_SETTINGS_NAME] = settingsContent;\n\t\t}\n\t\tstandAloneConfigurationContents.forEach(([key, contents]) => {\n\t\t\tif (contents) {\n\t\t\t\tcontent[key] = contents;\n\t\t\t}\n\t\t});\n\t\tif (Object.keys(content).length) {\n\t\t\tawait this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\tawait this.configurationCache.remove(this.key);\n\t\t}\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.configurationModel;\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.configurationModel = this._folderSettingsModelParser.configurationModel.merge(...this._standAloneConfigurations);\n\t}\n\n\tgetUnsupportedKeys(): string[] {\n\t\treturn [];\n\t}\n}\n\nexport class FolderConfiguration extends Disposable {\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tprivate folderConfiguration: CachedFolderConfiguration | FileServiceBasedConfiguration;\n\tprivate readonly scopes: ConfigurationScope[];\n\tprivate readonly configurationFolder: URI;\n\tprivate cachedFolderConfiguration: CachedFolderConfiguration;\n\n\tconstructor(\n\t\treadonly workspaceFolder: IWorkspaceFolder,\n\t\tconfigFolderRelativePath: string,\n\t\tprivate readonly workbenchState: WorkbenchState,\n\t\tprivate workspaceTrusted: boolean,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tlogService: ILogService,\n\t\tprivate readonly configurationCache: IConfigurationCache\n\t) {\n\t\tsuper();\n\n\t\tthis.scopes = WorkbenchState.WORKSPACE === this.workbenchState ? FOLDER_SCOPES : WORKSPACE_SCOPES;\n\t\tthis.configurationFolder = uriIdentityService.extUri.joinPath(workspaceFolder.uri, configFolderRelativePath);\n\t\tthis.cachedFolderConfiguration = new CachedFolderConfiguration(workspaceFolder.uri, configFolderRelativePath, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, configurationCache);\n\t\tif (this.configurationCache.needsCaching(workspaceFolder.uri)) {\n\t\t\tthis.folderConfiguration = this.cachedFolderConfiguration;\n\t\t\twhenProviderRegistered(workspaceFolder.uri, fileService)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t\t\t\tthis.onDidFolderConfigurationChange();\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t}\n\t}\n\n\tloadConfiguration(): Promise<ConfigurationModel> {\n\t\treturn this.folderConfiguration.loadConfiguration();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis.workspaceTrusted = trusted;\n\t\treturn this.reparse();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\tconst configurationModel = this.folderConfiguration.reparse({ scopes: this.scopes, skipRestricted: this.isUntrusted() });\n\t\tthis.updateCache();\n\t\treturn configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.folderConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this.workspaceTrusted;\n\t}\n\n\tprivate onDidFolderConfigurationChange(): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate createFileServiceBasedConfiguration(fileService: IFileService, uriIdentityService: IUriIdentityService, logService: ILogService) {\n\t\tconst settingsResource = uriIdentityService.extUri.joinPath(this.configurationFolder, `${FOLDER_SETTINGS_NAME}.json`);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [TASKS_CONFIGURATION_KEY, LAUNCH_CONFIGURATION_KEY].map(name => ([name, uriIdentityService.extUri.joinPath(this.configurationFolder, `${name}.json`)]));\n\t\treturn new FileServiceBasedConfiguration(this.configurationFolder.toString(), settingsResource, standAloneConfigurationResources, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, fileService, uriIdentityService, logService);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this.configurationCache.needsCaching(this.configurationFolder) && this.folderConfiguration instanceof FileServiceBasedConfiguration) {\n\t\t\tconst [settingsContent, standAloneConfigurationContents] = await this.folderConfiguration.resolveContents();\n\t\t\tthis.cachedFolderConfiguration.updateConfiguration(settingsContent, standAloneConfigurationContents);\n\t\t}\n\t}\n}\n"]}