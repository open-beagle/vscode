{"version":3,"file":"configurationEditingService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/services/configuration/test/browser/configurationEditingService.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAwChG,MAAM,IAAI,GAAG,SAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC,CAAC;IAEhE,KAAK,CAAC,6BAA6B,EAAE,GAAG,EAAE;QAEzC,IAAI,oBAA8C,CAAC;QACnD,IAAI,kBAAsD,CAAC;QAC3D,IAAI,WAAyB,CAAC;QAC9B,IAAI,gBAAkC,CAAC;QACvC,IAAI,UAAuC,CAAC;QAE5C,MAAM,WAAW,GAAG,IAAI,2BAAe,EAAE,CAAC;QAE1C,UAAU,CAAC,GAAG,EAAE;YACf,MAAM,qBAAqB,GAAG,mBAAQ,CAAC,EAAE,CAAyB,kCAAuB,CAAC,aAAa,CAAC,CAAC;YACzG,qBAAqB,CAAC,qBAAqB,CAAC;gBAC3C,IAAI,EAAE,OAAO;gBACb,MAAM,EAAE,QAAQ;gBAChB,YAAY,EAAE;oBACb,0CAA0C,EAAE;wBAC3C,MAAM,EAAE,QAAQ;wBAChB,SAAS,EAAE,OAAO;qBAClB;oBACD,6CAA6C,EAAE;wBAC9C,MAAM,EAAE,QAAQ;wBAChB,SAAS,EAAE,OAAO;qBAClB;oBACD,+CAA+C,EAAE;wBAChD,MAAM,EAAE,QAAQ;wBAChB,SAAS,EAAE,OAAO;qBAClB;iBACD;aACD,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,KAAK,IAAI,EAAE;YAChB,MAAM,UAAU,GAAG,IAAI,oBAAc,EAAE,CAAC;YACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,yBAAW,CAAC,UAAU,CAAC,CAAC,CAAC;YAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,uDAA0B,EAAE,CAAC,CAAC;YAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;YAE/E,MAAM,eAAe,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;YAC5D,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;YAEhD,oBAAoB,GAA6B,CAAA,GAAA,qDAA6B,CAAA,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;YACvG,kBAAkB,GAAG,8CAAsB,CAAC;YAC5C,oBAAoB,CAAC,IAAI,CAAC,iCAAmB,EAAE,kBAAkB,CAAC,CAAC;YACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,2CAAkB,EAAE,IAAI,CAAC,CAAC,CAAC;YAC1G,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,iBAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,2CAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,iBAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1K,oBAAoB,CAAC,IAAI,CAAC,oBAAY,EAAE,WAAW,CAAC,CAAC;YACrD,oBAAoB,CAAC,IAAI,CAAC,wCAAmB,EAAE,kBAAkB,CAAC,CAAC;YACnE,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,uCAAgB,CAAC,EAAE,kBAAkB,EAAE,IAAI,uCAAkB,EAAE,EAAE,EAAE,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,IAAI,uCAAkB,CAAC,WAAW,CAAC,EAAE,IAAI,oBAAc,EAAE,CAAC,CAAC,CAAC;YAC3N,oBAAoB,CAAC,IAAI,CAAC,oCAAwB,EAAE,gBAAgB,CAAC,CAAC;YAEtE,MAAM,gBAAgB,CAAC,UAAU,CAAC,CAAA,GAAA,+CAAkC,CAAA,CAAC,eAAe,CAAC,CAAC,CAAC;YACvF,oBAAoB,CAAC,IAAI,CAAC,qCAAqB,EAAE,gBAAgB,CAAC,CAAC;YACnE,oBAAoB,CAAC,IAAI,CAAC,6CAAyB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,6CAAyB,CAAC,CAAC,CAAC,CAAC;YACtI,oBAAoB,CAAC,IAAI,CAAC,4BAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,2CAAmB,CAAC,CAAC,CAAC,CAAC;YACvH,oBAAoB,CAAC,IAAI,CAAC,mCAAiB,EAAqB,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mDAAwB,CAAC,CAAC,CAAC,CAAC;YAChJ,oBAAoB,CAAC,IAAI,CAAC,0BAAe,EAAE,+BAAc,CAAC,CAAC;YAC3D,UAAU,GAAG,oBAAoB,CAAC,cAAc,CAAC,yDAA2B,CAAC,CAAC;QAC/E,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC;QAEpC,IAAI,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;YAC7C,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,aAAa,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBACnH,MAAM,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;aAClD;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,4BAAkD,CAAC;aAChF;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,gBAAgB,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;YAC/D,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBAChJ,MAAM,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;aAC1D;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,oCAA0D,CAAC;aACxF;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,iBAAQ,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACxG,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBACjJ,MAAM,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;aAC5D;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,uCAA4D,CAAC;aAC1F;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACpE,MAAM,QAAQ,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3G,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,iBAAQ,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC7E,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,gDAAgD,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBACvJ,MAAM,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;aAC5D;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,uCAA4D,CAAC;aAC1F;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sBAAsB,EAAE,KAAK,IAAI,EAAE;YACvC,oBAAoB,CAAC,IAAI,CAAC,4BAAgB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7D,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBACjJ,MAAM,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;aACtE;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,yCAA+D,CAAC;aAC7F;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YACjE,oBAAoB,CAAC,IAAI,CAAC,4BAAgB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7D,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QACvK,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,EAAE,KAAK,IAAI,EAAE;YACtC,oBAAoB,CAAC,IAAI,CAAC,4BAAgB,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7D,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;YAC5B,oBAAoB,CAAC,IAAI,CAAC,mCAAoB,EAAwB,EAAE,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,oBAAoB,EAAE,SAAU,EAAE,uBAAuB,EAAE,SAAU,EAAE,MAAM,EAAE,IAAK,EAAE,KAAK,EAAE,IAAK,EAAE,IAAI,EAAE,IAAK,EAAE,IAAI,EAAE,IAAK,EAAE,MAAM,EAAE,IAAK,EAAE,SAAS,EAAE,IAAK,EAAE,CAAC,CAAC;YACnR,IAAI;gBACH,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC7K,MAAM,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;aACtE;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC;gBAC7C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,yCAA+D,CAAC;aAC7F;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YACjJ,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,0CAA0C,CAAC,EAAE,OAAO,CAAC,CAAC;QACjF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;YACpD,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAClI,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAEjJ,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,0CAA0C,CAAC,EAAE,OAAO,CAAC,CAAC;YAChF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,iBAAQ,CAAC,UAAU,CAAC,+FAA+F,CAAC,CAAC,CAAC;YACvL,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,CAAC;YAEnJ,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAClI,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,0CAA0C,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,CAAC;YAEnJ,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,GAAG,GAAG,YAAY,CAAC;YACzB,MAAM,KAAK,GAAG,EAAE,0CAA0C,EAAE,kBAAkB,EAAE,CAAC;YACjF,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;YAE5F,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YACnE,MAAM,GAAG,GAAG,YAAY,CAAC;YACzB,MAAM,KAAK,GAAG,EAAE,0CAA0C,EAAE,kBAAkB,EAAE,CAAC;YACjF,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;YAE3F,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,oCAAoB,CAAC,CAAC,CAAC;YAC5H,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yDAAyD,EAAE,KAAK,IAAI,EAAE;YAC1E,MAAM,GAAG,GAAG,YAAY,CAAC;YACzB,MAAM,KAAK,GAAG,EAAE,0CAA0C,EAAE,kBAAkB,EAAE,CAAC;YACjF,MAAM,kBAAkB,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,oCAAoB,CAAC,CAAC;YAC1G,MAAM,UAAU,CAAC,kBAAkB,2BAA+C,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,kBAAkB,EAAE,EAAE,CAAC,CAAC;YAEhJ,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;YAChE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,2BAA2B,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAEjI,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,2BAA2B,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAElI,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YACrE,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAErG,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,2BAA2B,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAEjI,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,OAAO,CAAC,CAAC;YAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAErG,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,2BAA2B,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAElI,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,OAAO,CAAC,CAAC;YAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6DAA6D,EAAE,KAAK,IAAI,EAAE;YAC9E,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAE/J,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wDAAwD,EAAE,KAAK,IAAI,EAAE;YACzE,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAEhK,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gEAAgE,EAAE,KAAK,IAAI,EAAE;YACjF,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAErG,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAE/J,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2DAA2D,EAAE,KAAK,IAAI,EAAE;YAC5E,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAErG,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAEhK,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iFAAiF,EAAE,KAAK,IAAI,EAAE;YAClG,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,eAAe;YAEnG,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAE/J,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4EAA4E,EAAE,KAAK,IAAI,EAAE;YAC7F,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,eAAe;YAEnG,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAEhK,MAAM,QAAQ,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iEAAiE,EAAE,KAAK,IAAI,EAAE;YAClF,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mDAAmC,CAAC,OAAO,CAAC,CAAC,CAAC;YACtH,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC;;;;;;;;;;IAUtD,CAAC,CAAC,CAAC;YAEL,MAAM,UAAU,CAAC,kBAAkB,oBAAwC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAEhK,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAClD,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACxG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4DAA4D,EAAE,KAAK,IAAI,EAAE;YAC7E,MAAM,MAAM,GAAG,CAAA,GAAA,oBAAQ,CAAA,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,8CAA8B,CAAC,OAAO,CAAC,CAAC,CAAC;YACzG,MAAM,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAQ,CAAC,UAAU,CAAC;;;;;;;;;;IAUtD,CAAC,CAAC,CAAC;YAEL,MAAM,UAAU,CAAC,kBAAkB,qBAAyC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAEjK,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAClD,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACxG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport * as assert from 'assert';\nimport * as json from 'vs/base/common/json';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { TestEnvironmentService, TestTextFileService, workbenchInstantiationService } from 'vs/workbench/test/browser/workbenchTestServices';\nimport * as uuid from 'vs/base/common/uuid';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from 'vs/platform/configuration/common/configurationRegistry';\nimport { WorkspaceService } from 'vs/workbench/services/configuration/browser/configurationService';\nimport { ConfigurationEditingService, ConfigurationEditingErrorCode, EditableConfigurationTarget } from 'vs/workbench/services/configuration/common/configurationEditingService';\nimport { WORKSPACE_STANDALONE_CONFIGURATIONS, FOLDER_SETTINGS_PATH, USER_STANDALONE_CONFIGURATIONS } from 'vs/workbench/services/configuration/common/configuration';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { TextModelResolverService } from 'vs/workbench/services/textmodelResolver/common/textModelResolverService';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { CommandService } from 'vs/workbench/services/commands/common/commandService';\nimport { URI } from 'vs/base/common/uri';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { FileService } from 'vs/platform/files/common/fileService';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { Schemas } from 'vs/base/common/network';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { KeybindingsEditingService, IKeybindingEditingService } from 'vs/workbench/services/keybinding/common/keybindingEditing';\nimport { FileUserDataProvider } from 'vs/workbench/services/userData/common/fileUserDataProvider';\nimport { UriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentityService';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { InMemoryFileSystemProvider } from 'vs/platform/files/common/inMemoryFilesystemProvider';\nimport { joinPath } from 'vs/base/common/resources';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { ConfigurationCache } from 'vs/workbench/services/configuration/browser/configurationCache';\nimport { RemoteAgentService } from 'vs/workbench/services/remote/browser/remoteAgentServiceImpl';\nimport { BrowserWorkbenchEnvironmentService } from 'vs/workbench/services/environment/browser/environmentService';\nimport { getSingleFolderWorkspaceIdentifier } from 'vs/workbench/services/workspaces/browser/workspaces';\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nsuite('ConfigurationEditingService', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tlet environmentService: BrowserWorkbenchEnvironmentService;\n\tlet fileService: IFileService;\n\tlet workspaceService: WorkspaceService;\n\tlet testObject: ConfigurationEditingService;\n\n\tconst disposables = new DisposableStore();\n\n\tsuiteSetup(() => {\n\t\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationEditing.service.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingTwo': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingThree': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst workspaceFolder = joinPath(ROOT, uuid.generateUuid());\n\t\tawait fileService.createFolder(workspaceFolder);\n\n\t\tinstantiationService = <TestInstantiationService>workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService, null));\n\t\tdisposables.add(fileService.registerProvider(Schemas.userData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.userData, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tworkspaceService = disposables.add(new WorkspaceService({ configurationCache: new ConfigurationCache() }, environmentService, fileService, remoteAgentService, new UriIdentityService(fileService), new NullLogService()));\n\t\tinstantiationService.stub(IWorkspaceContextService, workspaceService);\n\n\t\tawait workspaceService.initialize(getSingleFolderWorkspaceIdentifier(workspaceFolder));\n\t\tinstantiationService.stub(IConfigurationService, workspaceService);\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(ICommandService, CommandService);\n\t\ttestObject = instantiationService.createInstance(ConfigurationEditingService);\n\t});\n\n\tteardown(() => disposables.clear());\n\n\ttest('errors cases - invalid key', async () => {\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'unknown.key', value: 'value' });\n\t\t\tassert.fail('Should fail with ERROR_UNKNOWN_KEY');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_UNKNOWN_KEY);\n\t\t}\n\t});\n\n\ttest('errors cases - no workspace', async () => {\n\t\tawait workspaceService.initialize({ id: uuid.generateUuid() });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\t\tassert.fail('Should fail with ERROR_NO_WORKSPACE_OPENED');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_NO_WORKSPACE_OPENED);\n\t\t}\n\t});\n\n\ttest('errors cases - invalid configuration', async () => {\n\t\tawait fileService.writeFile(environmentService.settingsResource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t}\n\t});\n\n\ttest('errors cases - invalid global tasks configuration', async () => {\n\t\tconst resource = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(resource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.configurationEditing.service.testSetting', value: 'value' });\n\t\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t}\n\t});\n\n\ttest('errors cases - dirty', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t}\n\t});\n\n\ttest('dirty error is not thrown if not asked to save', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotSave: true });\n\t});\n\n\ttest('do not notify error', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\tconst target = sinon.stub();\n\t\tinstantiationService.stub(INotificationService, <INotificationService>{ prompt: target, _serviceBrand: undefined, onDidAddNotification: undefined!, onDidRemoveNotification: undefined!, notify: null!, error: null!, info: null!, warn: null!, status: null!, setFilter: null! });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(false, target.calledOnce);\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t}\n\t});\n\n\ttest('write one setting - empty file', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\tconst contents = await fileService.readFile(environmentService.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t});\n\n\ttest('write one setting - existing file', async () => {\n\t\tawait fileService.writeFile(environmentService.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(environmentService.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove an existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(environmentService.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\", \"configurationEditing.service.testSetting\": \"value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(environmentService.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove non existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(environmentService.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(environmentService.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write overridable settings to user settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key, value });\n\n\t\tconst contents = await fileService.readFile(environmentService.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key, value });\n\n\t\tconst contents = await fileService.readFile(joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH));\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace folder settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tconst folderSettingsFile = joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE_FOLDER, { key, value }, { scopes: { resource: folderSettingsFile } });\n\n\t\tconst contents = await fileService.readFile(folderSettingsFile);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write workspace standalone setting - empty file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write user standalone setting - empty file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write workspace standalone setting - existing file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write user standalone setting - existing file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write workspace standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n\n\ttest('write user standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n});\n"]}