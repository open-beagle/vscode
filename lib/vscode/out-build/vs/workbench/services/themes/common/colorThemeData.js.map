{"version":3,"sources":["vs/workbench/services/themes/common/colorThemeData.ts"],"names":[],"mappings":"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","file":"colorThemeData.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'vs/base/common/path';\nimport * as Json from 'vs/base/common/json';\nimport { Color } from 'vs/base/common/color';\nimport { ExtensionData, ITokenColorCustomizations, ITextMateThemingRule, IWorkbenchColorTheme, IColorMap, IThemeExtensionPoint, VS_LIGHT_THEME, VS_HC_THEME, IColorCustomizations, ISemanticTokenRules, ISemanticTokenColorizationSetting, ISemanticTokenColorCustomizations, IExperimentalSemanticTokenColorCustomizations } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { convertSettings } from 'vs/workbench/services/themes/common/themeCompatibility';\nimport * as nls from 'vs/nls';\nimport * as types from 'vs/base/common/types';\nimport * as resources from 'vs/base/common/resources';\nimport { Extensions as ColorRegistryExtensions, IColorRegistry, ColorIdentifier, editorBackground, editorForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { ITokenStyle, getThemeTypeSelector } from 'vs/platform/theme/common/themeService';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { getParseErrorMessage } from 'vs/base/common/jsonErrorMessages';\nimport { URI } from 'vs/base/common/uri';\nimport { parse as parsePList } from 'vs/workbench/services/themes/common/plistParser';\nimport { TokenStyle, SemanticTokenRule, ProbeScope, getTokenClassificationRegistry, TokenStyleValue, TokenStyleData, parseClassifierString } from 'vs/platform/theme/common/tokenClassificationRegistry';\nimport { MatcherWithPriority, Matcher, createMatchers } from 'vs/workbench/services/themes/common/textMateScopeMatcher';\nimport { IExtensionResourceLoaderService } from 'vs/workbench/services/extensionResourceLoader/common/extensionResourceLoader';\nimport { CharCode } from 'vs/base/common/charCode';\nimport { StorageScope, IStorageService, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { ThemeConfiguration } from 'vs/workbench/services/themes/common/themeConfiguration';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\n\nlet colorRegistry = Registry.as<IColorRegistry>(ColorRegistryExtensions.ColorContribution);\n\nlet tokenClassificationRegistry = getTokenClassificationRegistry();\n\nconst tokenGroupToScopesMap = {\n\tcomments: ['comment', 'punctuation.definition.comment'],\n\tstrings: ['string', 'meta.embedded.assembly'],\n\tkeywords: ['keyword - keyword.operator', 'keyword.control', 'storage', 'storage.type'],\n\tnumbers: ['constant.numeric'],\n\ttypes: ['entity.name.type', 'entity.name.class', 'support.type', 'support.class'],\n\tfunctions: ['entity.name.function', 'support.function'],\n\tvariables: ['variable', 'entity.name.variable']\n};\n\n\nexport type TokenStyleDefinition = SemanticTokenRule | ProbeScope[] | TokenStyleValue;\nexport type TokenStyleDefinitions = { [P in keyof TokenStyleData]?: TokenStyleDefinition | undefined };\n\nexport type TextMateThemingRuleDefinitions = { [P in keyof TokenStyleData]?: ITextMateThemingRule | undefined; } & { scope?: ProbeScope; };\n\nexport class ColorThemeData implements IWorkbenchColorTheme {\n\n\tstatic readonly STORAGE_KEY = 'colorThemeData';\n\n\tid: string;\n\tlabel: string;\n\tsettingsId: string;\n\tdescription?: string;\n\tisLoaded: boolean;\n\tlocation?: URI; // only set for extension from the registry, not for themes restored from the storage\n\twatch?: boolean;\n\textensionData?: ExtensionData;\n\n\tprivate themeSemanticHighlighting: boolean | undefined;\n\tprivate customSemanticHighlighting: boolean | undefined;\n\tprivate customSemanticHighlightingDeprecated: boolean | undefined;\n\n\tprivate themeTokenColors: ITextMateThemingRule[] = [];\n\tprivate customTokenColors: ITextMateThemingRule[] = [];\n\tprivate colorMap: IColorMap = {};\n\tprivate customColorMap: IColorMap = {};\n\n\tprivate semanticTokenRules: SemanticTokenRule[] = [];\n\tprivate customSemanticTokenRules: SemanticTokenRule[] = [];\n\n\tprivate themeTokenScopeMatchers: Matcher<ProbeScope>[] | undefined;\n\tprivate customTokenScopeMatchers: Matcher<ProbeScope>[] | undefined;\n\n\tprivate textMateThemingRules: ITextMateThemingRule[] | undefined = undefined; // created on demand\n\tprivate tokenColorIndex: TokenColorIndex | undefined = undefined; // created on demand\n\n\tprivate constructor(id: string, label: string, settingsId: string) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.settingsId = settingsId;\n\t\tthis.isLoaded = false;\n\t}\n\n\tget semanticHighlighting(): boolean {\n\t\tif (this.customSemanticHighlighting !== undefined) {\n\t\t\treturn this.customSemanticHighlighting;\n\t\t}\n\t\tif (this.customSemanticHighlightingDeprecated !== undefined) {\n\t\t\treturn this.customSemanticHighlightingDeprecated;\n\t\t}\n\t\treturn !!this.themeSemanticHighlighting;\n\t}\n\n\tget tokenColors(): ITextMateThemingRule[] {\n\t\tif (!this.textMateThemingRules) {\n\t\t\tconst result: ITextMateThemingRule[] = [];\n\n\t\t\t// the default rule (scope empty) is always the first rule. Ignore all other default rules.\n\t\t\tconst foreground = this.getColor(editorForeground) || this.getDefault(editorForeground)!;\n\t\t\tconst background = this.getColor(editorBackground) || this.getDefault(editorBackground)!;\n\t\t\tresult.push({\n\t\t\t\tsettings: {\n\t\t\t\t\tforeground: normalizeColor(foreground),\n\t\t\t\t\tbackground: normalizeColor(background)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet hasDefaultTokens = false;\n\n\t\t\tfunction addRule(rule: ITextMateThemingRule) {\n\t\t\t\tif (rule.scope && rule.settings) {\n\t\t\t\t\tif (rule.scope === 'token.info-token') {\n\t\t\t\t\t\thasDefaultTokens = true;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push({ scope: rule.scope, settings: { foreground: normalizeColor(rule.settings.foreground), background: normalizeColor(rule.settings.background), fontStyle: rule.settings.fontStyle } });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.themeTokenColors.forEach(addRule);\n\t\t\t// Add the custom colors after the theme colors\n\t\t\t// so that they will override them\n\t\t\tthis.customTokenColors.forEach(addRule);\n\n\t\t\tif (!hasDefaultTokens) {\n\t\t\t\tdefaultThemeColors[this.type].forEach(addRule);\n\t\t\t}\n\t\t\tthis.textMateThemingRules = result;\n\t\t}\n\t\treturn this.textMateThemingRules;\n\t}\n\n\tpublic getColor(colorId: ColorIdentifier, useDefault?: boolean): Color | undefined {\n\t\tlet color: Color | undefined = this.customColorMap[colorId];\n\t\tif (color) {\n\t\t\treturn color;\n\t\t}\n\t\tcolor = this.colorMap[colorId];\n\t\tif (useDefault !== false && types.isUndefined(color)) {\n\t\t\tcolor = this.getDefault(colorId);\n\t\t}\n\t\treturn color;\n\t}\n\n\tprivate getTokenStyle(type: string, modifiers: string[], language: string, useDefault = true, definitions: TokenStyleDefinitions = {}): TokenStyle | undefined {\n\t\tlet result: any = {\n\t\t\tforeground: undefined,\n\t\t\tbold: undefined,\n\t\t\tunderline: undefined,\n\t\t\titalic: undefined\n\t\t};\n\t\tlet score = {\n\t\t\tforeground: -1,\n\t\t\tbold: -1,\n\t\t\tunderline: -1,\n\t\t\titalic: -1\n\t\t};\n\n\t\tfunction _processStyle(matchScore: number, style: TokenStyle, definition: TokenStyleDefinition) {\n\t\t\tif (style.foreground && score.foreground <= matchScore) {\n\t\t\t\tscore.foreground = matchScore;\n\t\t\t\tresult.foreground = style.foreground;\n\t\t\t\tdefinitions.foreground = definition;\n\t\t\t}\n\t\t\tfor (let p of ['bold', 'underline', 'italic']) {\n\t\t\t\tconst property = p as keyof TokenStyle;\n\t\t\t\tconst info = style[property];\n\t\t\t\tif (info !== undefined) {\n\t\t\t\t\tif (score[property] <= matchScore) {\n\t\t\t\t\t\tscore[property] = matchScore;\n\t\t\t\t\t\tresult[property] = info;\n\t\t\t\t\t\tdefinitions[property] = definition;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction _processSemanticTokenRule(rule: SemanticTokenRule) {\n\t\t\tconst matchScore = rule.selector.match(type, modifiers, language);\n\t\t\tif (matchScore >= 0) {\n\t\t\t\t_processStyle(matchScore, rule.style, rule);\n\t\t\t}\n\t\t}\n\n\t\tthis.semanticTokenRules.forEach(_processSemanticTokenRule);\n\t\tthis.customSemanticTokenRules.forEach(_processSemanticTokenRule);\n\n\t\tlet hasUndefinedStyleProperty = false;\n\t\tfor (let k in score) {\n\t\t\tconst key = k as keyof TokenStyle;\n\t\t\tif (score[key] === -1) {\n\t\t\t\thasUndefinedStyleProperty = true;\n\t\t\t} else {\n\t\t\t\tscore[key] = Number.MAX_VALUE; // set it to the max, so it won't be replaced by a default\n\t\t\t}\n\t\t}\n\t\tif (hasUndefinedStyleProperty) {\n\t\t\tfor (const rule of tokenClassificationRegistry.getTokenStylingDefaultRules()) {\n\t\t\t\tconst matchScore = rule.selector.match(type, modifiers, language);\n\t\t\t\tif (matchScore >= 0) {\n\t\t\t\t\tlet style: TokenStyle | undefined;\n\t\t\t\t\tif (rule.defaults.scopesToProbe) {\n\t\t\t\t\t\tstyle = this.resolveScopes(rule.defaults.scopesToProbe);\n\t\t\t\t\t\tif (style) {\n\t\t\t\t\t\t\t_processStyle(matchScore, style, rule.defaults.scopesToProbe);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!style && useDefault !== false) {\n\t\t\t\t\t\tconst tokenStyleValue = rule.defaults[this.type];\n\t\t\t\t\t\tstyle = this.resolveTokenStyleValue(tokenStyleValue);\n\t\t\t\t\t\tif (style) {\n\t\t\t\t\t\t\t_processStyle(matchScore, style, tokenStyleValue!);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn TokenStyle.fromData(result);\n\n\t}\n\n\t/**\n\t * @param tokenStyleValue Resolve a tokenStyleValue in the context of a theme\n\t */\n\tpublic resolveTokenStyleValue(tokenStyleValue: TokenStyleValue | undefined): TokenStyle | undefined {\n\t\tif (tokenStyleValue === undefined) {\n\t\t\treturn undefined;\n\t\t} else if (typeof tokenStyleValue === 'string') {\n\t\t\tconst { type, modifiers, language } = parseClassifierString(tokenStyleValue, '');\n\t\t\treturn this.getTokenStyle(type, modifiers, language);\n\t\t} else if (typeof tokenStyleValue === 'object') {\n\t\t\treturn tokenStyleValue;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getTokenColorIndex(): TokenColorIndex {\n\t\t// collect all colors that tokens can have\n\t\tif (!this.tokenColorIndex) {\n\t\t\tconst index = new TokenColorIndex();\n\t\t\tthis.tokenColors.forEach(rule => {\n\t\t\t\tindex.add(rule.settings.foreground);\n\t\t\t\tindex.add(rule.settings.background);\n\t\t\t});\n\n\t\t\tthis.semanticTokenRules.forEach(r => index.add(r.style.foreground));\n\t\t\ttokenClassificationRegistry.getTokenStylingDefaultRules().forEach(r => {\n\t\t\t\tconst defaultColor = r.defaults[this.type];\n\t\t\t\tif (defaultColor && typeof defaultColor === 'object') {\n\t\t\t\t\tindex.add(defaultColor.foreground);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.customSemanticTokenRules.forEach(r => index.add(r.style.foreground));\n\n\t\t\tthis.tokenColorIndex = index;\n\t\t}\n\t\treturn this.tokenColorIndex;\n\t}\n\n\tpublic get tokenColorMap(): string[] {\n\t\treturn this.getTokenColorIndex().asArray();\n\t}\n\n\tpublic getTokenStyleMetadata(typeWithLanguage: string, modifiers: string[], defaultLanguage: string, useDefault = true, definitions: TokenStyleDefinitions = {}): ITokenStyle | undefined {\n\t\tconst { type, language } = parseClassifierString(typeWithLanguage, defaultLanguage);\n\t\tlet style = this.getTokenStyle(type, modifiers, language, useDefault, definitions);\n\t\tif (!style) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tforeground: this.getTokenColorIndex().get(style.foreground),\n\t\t\tbold: style.bold,\n\t\t\tunderline: style.underline,\n\t\t\titalic: style.italic\n\t\t};\n\t}\n\n\tpublic getTokenStylingRuleScope(rule: SemanticTokenRule): 'setting' | 'theme' | undefined {\n\t\tif (this.customSemanticTokenRules.indexOf(rule) !== -1) {\n\t\t\treturn 'setting';\n\t\t}\n\t\tif (this.semanticTokenRules.indexOf(rule) !== -1) {\n\t\t\treturn 'theme';\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic getDefault(colorId: ColorIdentifier): Color | undefined {\n\t\treturn colorRegistry.resolveDefaultColor(colorId, this);\n\t}\n\n\n\tpublic resolveScopes(scopes: ProbeScope[], definitions?: TextMateThemingRuleDefinitions): TokenStyle | undefined {\n\n\t\tif (!this.themeTokenScopeMatchers) {\n\t\t\tthis.themeTokenScopeMatchers = this.themeTokenColors.map(getScopeMatcher);\n\t\t}\n\t\tif (!this.customTokenScopeMatchers) {\n\t\t\tthis.customTokenScopeMatchers = this.customTokenColors.map(getScopeMatcher);\n\t\t}\n\n\t\tfor (let scope of scopes) {\n\t\t\tlet foreground: string | undefined = undefined;\n\t\t\tlet fontStyle: string | undefined = undefined;\n\t\t\tlet foregroundScore = -1;\n\t\t\tlet fontStyleScore = -1;\n\t\t\tlet fontStyleThemingRule: ITextMateThemingRule | undefined = undefined;\n\t\t\tlet foregroundThemingRule: ITextMateThemingRule | undefined = undefined;\n\n\t\t\tfunction findTokenStyleForScopeInScopes(scopeMatchers: Matcher<ProbeScope>[], themingRules: ITextMateThemingRule[]) {\n\t\t\t\tfor (let i = 0; i < scopeMatchers.length; i++) {\n\t\t\t\t\tconst score = scopeMatchers[i](scope);\n\t\t\t\t\tif (score >= 0) {\n\t\t\t\t\t\tconst themingRule = themingRules[i];\n\t\t\t\t\t\tconst settings = themingRules[i].settings;\n\t\t\t\t\t\tif (score >= foregroundScore && settings.foreground) {\n\t\t\t\t\t\t\tforeground = settings.foreground;\n\t\t\t\t\t\t\tforegroundScore = score;\n\t\t\t\t\t\t\tforegroundThemingRule = themingRule;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (score >= fontStyleScore && types.isString(settings.fontStyle)) {\n\t\t\t\t\t\t\tfontStyle = settings.fontStyle;\n\t\t\t\t\t\t\tfontStyleScore = score;\n\t\t\t\t\t\t\tfontStyleThemingRule = themingRule;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfindTokenStyleForScopeInScopes(this.themeTokenScopeMatchers, this.themeTokenColors);\n\t\t\tfindTokenStyleForScopeInScopes(this.customTokenScopeMatchers, this.customTokenColors);\n\t\t\tif (foreground !== undefined || fontStyle !== undefined) {\n\t\t\t\tif (definitions) {\n\t\t\t\t\tdefinitions.foreground = foregroundThemingRule;\n\t\t\t\t\tdefinitions.bold = definitions.italic = definitions.underline = fontStyleThemingRule;\n\t\t\t\t\tdefinitions.scope = scope;\n\t\t\t\t}\n\n\t\t\t\treturn TokenStyle.fromSettings(foreground, fontStyle);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic defines(colorId: ColorIdentifier): boolean {\n\t\treturn this.customColorMap.hasOwnProperty(colorId) || this.colorMap.hasOwnProperty(colorId);\n\t}\n\n\tpublic setCustomizations(settings: ThemeConfiguration) {\n\t\tthis.setCustomColors(settings.colorCustomizations);\n\t\tthis.setCustomTokenColors(settings.tokenColorCustomizations);\n\t\tthis.setCustomSemanticTokenColors(settings.semanticTokenColorCustomizations, settings.experimentalSemanticTokenColorCustomizations);\n\t}\n\n\tpublic setCustomColors(colors: IColorCustomizations) {\n\t\tthis.customColorMap = {};\n\t\tthis.overwriteCustomColors(colors);\n\n\t\tconst themeSpecificColors = colors[`[${this.settingsId}]`] as IColorCustomizations;\n\t\tif (types.isObject(themeSpecificColors)) {\n\t\t\tthis.overwriteCustomColors(themeSpecificColors);\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\tprivate overwriteCustomColors(colors: IColorCustomizations) {\n\t\tfor (let id in colors) {\n\t\t\tlet colorVal = colors[id];\n\t\t\tif (typeof colorVal === 'string') {\n\t\t\t\tthis.customColorMap[id] = Color.fromHex(colorVal);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setCustomTokenColors(customTokenColors: ITokenColorCustomizations) {\n\t\tthis.customTokenColors = [];\n\t\tthis.customSemanticHighlightingDeprecated = undefined;\n\n\t\t// first add the non-theme specific settings\n\t\tthis.addCustomTokenColors(customTokenColors);\n\n\t\t// append theme specific settings. Last rules will win.\n\t\tconst themeSpecificTokenColors = customTokenColors[`[${this.settingsId}]`] as ITokenColorCustomizations;\n\t\tif (types.isObject(themeSpecificTokenColors)) {\n\t\t\tthis.addCustomTokenColors(themeSpecificTokenColors);\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\tpublic setCustomSemanticTokenColors(semanticTokenColors: ISemanticTokenColorCustomizations | undefined, experimental?: IExperimentalSemanticTokenColorCustomizations) {\n\t\tthis.customSemanticTokenRules = [];\n\t\tthis.customSemanticHighlighting = undefined;\n\n\t\tif (experimental) { // apply deprecated settings first\n\t\t\tthis.readSemanticTokenRules(experimental);\n\t\t\tconst themeSpecificColors = experimental[`[${this.settingsId}]`] as IExperimentalSemanticTokenColorCustomizations;\n\t\t\tif (types.isObject(themeSpecificColors)) {\n\t\t\t\tthis.readSemanticTokenRules(themeSpecificColors);\n\t\t\t}\n\t\t}\n\t\tif (semanticTokenColors) {\n\t\t\tthis.customSemanticHighlighting = semanticTokenColors.enabled;\n\t\t\tif (semanticTokenColors.rules) {\n\t\t\t\tthis.readSemanticTokenRules(semanticTokenColors.rules);\n\t\t\t}\n\t\t\tconst themeSpecificColors = semanticTokenColors[`[${this.settingsId}]`] as ISemanticTokenColorCustomizations;\n\t\t\tif (types.isObject(themeSpecificColors)) {\n\t\t\t\tif (themeSpecificColors.enabled !== undefined) {\n\t\t\t\t\tthis.customSemanticHighlighting = themeSpecificColors.enabled;\n\t\t\t\t}\n\t\t\t\tif (themeSpecificColors.rules) {\n\t\t\t\t\tthis.readSemanticTokenRules(themeSpecificColors.rules);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t}\n\n\n\tprivate readSemanticTokenRules(tokenStylingRuleSection: ISemanticTokenRules) {\n\t\tfor (let key in tokenStylingRuleSection) {\n\t\t\tif (key[0] !== '[') { // still do this test until experimental settings are gone\n\t\t\t\ttry {\n\t\t\t\t\tconst rule = readSemanticTokenRule(key, tokenStylingRuleSection[key]);\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tthis.customSemanticTokenRules.push(rule);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// invalid selector, ignore\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addCustomTokenColors(customTokenColors: ITokenColorCustomizations) {\n\t\t// Put the general customizations such as comments, strings, etc. first so that\n\t\t// they can be overridden by specific customizations like \"string.interpolated\"\n\t\tfor (let tokenGroup in tokenGroupToScopesMap) {\n\t\t\tconst group = <keyof typeof tokenGroupToScopesMap>tokenGroup; // TS doesn't type 'tokenGroup' properly\n\t\t\tlet value = customTokenColors[group];\n\t\t\tif (value) {\n\t\t\t\tlet settings = typeof value === 'string' ? { foreground: value } : value;\n\t\t\t\tlet scopes = tokenGroupToScopesMap[group];\n\t\t\t\tfor (let scope of scopes) {\n\t\t\t\t\tthis.customTokenColors.push({ scope, settings });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// specific customizations\n\t\tif (Array.isArray(customTokenColors.textMateRules)) {\n\t\t\tfor (let rule of customTokenColors.textMateRules) {\n\t\t\t\tif (rule.scope && rule.settings) {\n\t\t\t\t\tthis.customTokenColors.push(rule);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (customTokenColors.semanticHighlighting !== undefined) {\n\t\t\tthis.customSemanticHighlightingDeprecated = customTokenColors.semanticHighlighting;\n\t\t}\n\t}\n\n\tpublic ensureLoaded(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\treturn !this.isLoaded ? this.load(extensionResourceLoaderService) : Promise.resolve(undefined);\n\t}\n\n\tpublic reload(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\treturn this.load(extensionResourceLoaderService);\n\t}\n\n\tprivate load(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\tif (!this.location) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\t\tthis.themeTokenColors = [];\n\t\tthis.clearCaches();\n\n\t\tconst result = {\n\t\t\tcolors: {},\n\t\t\ttextMateRules: [],\n\t\t\tsemanticTokenRules: [],\n\t\t\tsemanticHighlighting: false\n\t\t};\n\t\treturn _loadColorTheme(extensionResourceLoaderService, this.location, result).then(_ => {\n\t\t\tthis.isLoaded = true;\n\t\t\tthis.semanticTokenRules = result.semanticTokenRules;\n\t\t\tthis.colorMap = result.colors;\n\t\t\tthis.themeTokenColors = result.textMateRules;\n\t\t\tthis.themeSemanticHighlighting = result.semanticHighlighting;\n\t\t});\n\t}\n\n\tpublic clearCaches() {\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.themeTokenScopeMatchers = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\ttoStorage(storageService: IStorageService) {\n\t\tlet colorMapData: { [key: string]: string } = {};\n\t\tfor (let key in this.colorMap) {\n\t\t\tcolorMapData[key] = Color.Format.CSS.formatHexA(this.colorMap[key], true);\n\t\t}\n\t\t// no need to persist custom colors, they will be taken from the settings\n\t\tconst value = JSON.stringify({\n\t\t\tid: this.id,\n\t\t\tlabel: this.label,\n\t\t\tsettingsId: this.settingsId,\n\t\t\tthemeTokenColors: this.themeTokenColors.map(tc => ({ settings: tc.settings, scope: tc.scope })), // don't persist names\n\t\t\tsemanticTokenRules: this.semanticTokenRules.map(SemanticTokenRule.toJSONObject),\n\t\t\textensionData: ExtensionData.toJSONObject(this.extensionData),\n\t\t\tthemeSemanticHighlighting: this.themeSemanticHighlighting,\n\t\t\tcolorMap: colorMapData,\n\t\t\twatch: this.watch\n\t\t});\n\n\t\t// roam persisted color theme colors. Don't enable for icons as they contain references to fonts and images.\n\t\tstorageService.store(ColorThemeData.STORAGE_KEY, value, StorageScope.GLOBAL, StorageTarget.USER);\n\t}\n\n\tget baseTheme(): string {\n\t\treturn this.classNames[0];\n\t}\n\n\tget classNames(): string[] {\n\t\treturn this.id.split(' ');\n\t}\n\n\tget type(): ColorScheme {\n\t\tswitch (this.baseTheme) {\n\t\t\tcase VS_LIGHT_THEME: return ColorScheme.LIGHT;\n\t\t\tcase VS_HC_THEME: return ColorScheme.HIGH_CONTRAST;\n\t\t\tdefault: return ColorScheme.DARK;\n\t\t}\n\t}\n\n\t// constructors\n\n\tstatic createUnloadedThemeForThemeType(themeType: ColorScheme, colorMap?: { [id: string]: string }): ColorThemeData {\n\t\treturn ColorThemeData.createUnloadedTheme(getThemeTypeSelector(themeType), colorMap);\n\t}\n\n\tstatic createUnloadedTheme(id: string, colorMap?: { [id: string]: string }): ColorThemeData {\n\t\tlet themeData = new ColorThemeData(id, '', '__' + id);\n\t\tthemeData.isLoaded = false;\n\t\tthemeData.themeTokenColors = [];\n\t\tthemeData.watch = false;\n\t\tif (colorMap) {\n\t\t\tfor (let id in colorMap) {\n\t\t\t\tthemeData.colorMap[id] = Color.fromHex(colorMap[id]);\n\t\t\t}\n\t\t}\n\t\treturn themeData;\n\t}\n\n\tstatic createLoadedEmptyTheme(id: string, settingsId: string): ColorThemeData {\n\t\tlet themeData = new ColorThemeData(id, '', settingsId);\n\t\tthemeData.isLoaded = true;\n\t\tthemeData.themeTokenColors = [];\n\t\tthemeData.watch = false;\n\t\treturn themeData;\n\t}\n\n\tstatic fromStorageData(storageService: IStorageService): ColorThemeData | undefined {\n\t\tconst input = storageService.get(ColorThemeData.STORAGE_KEY, StorageScope.GLOBAL);\n\t\tif (!input) {\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tlet data = JSON.parse(input);\n\t\t\tlet theme = new ColorThemeData('', '', '');\n\t\t\tfor (let key in data) {\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase 'colorMap':\n\t\t\t\t\t\tlet colorMapData = data[key];\n\t\t\t\t\t\tfor (let id in colorMapData) {\n\t\t\t\t\t\t\ttheme.colorMap[id] = Color.fromHex(colorMapData[id]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'themeTokenColors':\n\t\t\t\t\tcase 'id': case 'label': case 'settingsId': case 'watch': case 'themeSemanticHighlighting':\n\t\t\t\t\t\t(theme as any)[key] = data[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'semanticTokenRules':\n\t\t\t\t\t\tconst rulesData = data[key];\n\t\t\t\t\t\tif (Array.isArray(rulesData)) {\n\t\t\t\t\t\t\tfor (let d of rulesData) {\n\t\t\t\t\t\t\t\tconst rule = SemanticTokenRule.fromJSONObject(tokenClassificationRegistry, d);\n\t\t\t\t\t\t\t\tif (rule) {\n\t\t\t\t\t\t\t\t\ttheme.semanticTokenRules.push(rule);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'location':\n\t\t\t\t\t\t// ignore, no longer restore\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'extensionData':\n\t\t\t\t\t\ttheme.extensionData = ExtensionData.fromJSONObject(data.extensionData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!theme.id || !theme.settingsId) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn theme;\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tstatic fromExtensionTheme(theme: IThemeExtensionPoint, colorThemeLocation: URI, extensionData: ExtensionData): ColorThemeData {\n\t\tconst baseTheme: string = theme['uiTheme'] || 'vs-dark';\n\t\tconst themeSelector = toCSSSelector(extensionData.extensionId, theme.path);\n\t\tconst id = `${baseTheme} ${themeSelector}`;\n\t\tconst label = theme.label || basename(theme.path);\n\t\tconst settingsId = theme.id || label;\n\t\tconst themeData = new ColorThemeData(id, label, settingsId);\n\t\tthemeData.description = theme.description;\n\t\tthemeData.watch = theme._watch === true;\n\t\tthemeData.location = colorThemeLocation;\n\t\tthemeData.extensionData = extensionData;\n\t\tthemeData.isLoaded = false;\n\t\treturn themeData;\n\t}\n}\n\nfunction toCSSSelector(extensionId: string, path: string) {\n\tif (path.startsWith('./')) {\n\t\tpath = path.substr(2);\n\t}\n\tlet str = `${extensionId}-${path}`;\n\n\t//remove all characters that are not allowed in css\n\tstr = str.replace(/[^_\\-a-zA-Z0-9]/g, '-');\n\tif (str.charAt(0).match(/[0-9\\-]/)) {\n\t\tstr = '_' + str;\n\t}\n\treturn str;\n}\n\nasync function _loadColorTheme(extensionResourceLoaderService: IExtensionResourceLoaderService, themeLocation: URI, result: { textMateRules: ITextMateThemingRule[], colors: IColorMap, semanticTokenRules: SemanticTokenRule[], semanticHighlighting: boolean }): Promise<any> {\n\tif (resources.extname(themeLocation) === '.json') {\n\t\tconst content = await extensionResourceLoaderService.readExtensionResource(themeLocation);\n\t\tlet errors: Json.ParseError[] = [];\n\t\tlet contentValue = Json.parse(content, errors);\n\t\tif (errors.length > 0) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparsejson', \"Problems parsing JSON theme file: {0}\", errors.map(e => getParseErrorMessage(e.error)).join(', '))));\n\t\t} else if (Json.getNodeType(contentValue) !== 'object') {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.invalidformat', \"Invalid format for JSON theme file: Object expected.\")));\n\t\t}\n\t\tif (contentValue.include) {\n\t\t\tawait _loadColorTheme(extensionResourceLoaderService, resources.joinPath(resources.dirname(themeLocation), contentValue.include), result);\n\t\t}\n\t\tif (Array.isArray(contentValue.settings)) {\n\t\t\tconvertSettings(contentValue.settings, result);\n\t\t\treturn null;\n\t\t}\n\t\tresult.semanticHighlighting = result.semanticHighlighting || contentValue.semanticHighlighting;\n\t\tlet colors = contentValue.colors;\n\t\tif (colors) {\n\t\t\tif (typeof colors !== 'object') {\n\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.colors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'colors' is not of type 'object'.\", themeLocation.toString())));\n\t\t\t}\n\t\t\t// new JSON color themes format\n\t\t\tfor (let colorId in colors) {\n\t\t\t\tlet colorHex = colors[colorId];\n\t\t\t\tif (typeof colorHex === 'string') { // ignore colors tht are null\n\t\t\t\t\tresult.colors[colorId] = Color.fromHex(colors[colorId]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet tokenColors = contentValue.tokenColors;\n\t\tif (tokenColors) {\n\t\t\tif (Array.isArray(tokenColors)) {\n\t\t\t\tresult.textMateRules.push(...tokenColors);\n\t\t\t} else if (typeof tokenColors === 'string') {\n\t\t\t\tawait _loadSyntaxTokens(extensionResourceLoaderService, resources.joinPath(resources.dirname(themeLocation), tokenColors), result);\n\t\t\t} else {\n\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.tokenColors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'tokenColors' should be either an array specifying colors or a path to a TextMate theme file\", themeLocation.toString())));\n\t\t\t}\n\t\t}\n\t\tlet semanticTokenColors = contentValue.semanticTokenColors;\n\t\tif (semanticTokenColors && typeof semanticTokenColors === 'object') {\n\t\t\tfor (let key in semanticTokenColors) {\n\t\t\t\ttry {\n\t\t\t\t\tconst rule = readSemanticTokenRule(key, semanticTokenColors[key]);\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tresult.semanticTokenRules.push(rule);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.semanticTokenColors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'semanticTokenColors' contains a invalid selector\", themeLocation.toString())));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn _loadSyntaxTokens(extensionResourceLoaderService, themeLocation, result);\n\t}\n}\n\nfunction _loadSyntaxTokens(extensionResourceLoaderService: IExtensionResourceLoaderService, themeLocation: URI, result: { textMateRules: ITextMateThemingRule[], colors: IColorMap }): Promise<any> {\n\treturn extensionResourceLoaderService.readExtensionResource(themeLocation).then(content => {\n\t\ttry {\n\t\t\tlet contentValue = parsePList(content);\n\t\t\tlet settings: ITextMateThemingRule[] = contentValue.settings;\n\t\t\tif (!Array.isArray(settings)) {\n\t\t\t\treturn Promise.reject(new Error(nls.localize('error.plist.invalidformat', \"Problem parsing tmTheme file: {0}. 'settings' is not array.\")));\n\t\t\t}\n\t\t\tconvertSettings(settings, result);\n\t\t\treturn Promise.resolve(null);\n\t\t} catch (e) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparse', \"Problems parsing tmTheme file: {0}\", e.message)));\n\t\t}\n\t}, error => {\n\t\treturn Promise.reject(new Error(nls.localize('error.cannotload', \"Problems loading tmTheme file {0}: {1}\", themeLocation.toString(), error.message)));\n\t});\n}\n\nlet defaultThemeColors: { [baseTheme: string]: ITextMateThemingRule[] } = {\n\t'light': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#316bcd' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#cd9731' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#cd3131' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#800080' } }\n\t],\n\t'dark': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#6796e6' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#cd9731' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#f44747' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#b267e6' } }\n\t],\n\t'hc': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#6796e6' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#008000' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#FF0000' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#b267e6' } }\n\t],\n};\n\nconst noMatch = (_scope: ProbeScope) => -1;\n\nfunction nameMatcher(identifers: string[], scope: ProbeScope): number {\n\tfunction findInIdents(s: string, lastIndent: number): number {\n\t\tfor (let i = lastIndent - 1; i >= 0; i--) {\n\t\t\tif (scopesAreMatching(s, identifers[i])) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\tif (scope.length < identifers.length) {\n\t\treturn -1;\n\t}\n\tlet lastScopeIndex = scope.length - 1;\n\tlet lastIdentifierIndex = findInIdents(scope[lastScopeIndex--], identifers.length);\n\tif (lastIdentifierIndex >= 0) {\n\t\tconst score = (lastIdentifierIndex + 1) * 0x10000 + identifers[lastIdentifierIndex].length;\n\t\twhile (lastScopeIndex >= 0) {\n\t\t\tlastIdentifierIndex = findInIdents(scope[lastScopeIndex--], lastIdentifierIndex);\n\t\t\tif (lastIdentifierIndex === -1) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t\treturn score;\n\t}\n\treturn -1;\n}\n\n\nfunction scopesAreMatching(thisScopeName: string, scopeName: string): boolean {\n\tif (!thisScopeName) {\n\t\treturn false;\n\t}\n\tif (thisScopeName === scopeName) {\n\t\treturn true;\n\t}\n\tconst len = scopeName.length;\n\treturn thisScopeName.length > len && thisScopeName.substr(0, len) === scopeName && thisScopeName[len] === '.';\n}\n\nfunction getScopeMatcher(rule: ITextMateThemingRule): Matcher<ProbeScope> {\n\tconst ruleScope = rule.scope;\n\tif (!ruleScope || !rule.settings) {\n\t\treturn noMatch;\n\t}\n\tconst matchers: MatcherWithPriority<ProbeScope>[] = [];\n\tif (Array.isArray(ruleScope)) {\n\t\tfor (let rs of ruleScope) {\n\t\t\tcreateMatchers(rs, nameMatcher, matchers);\n\t\t}\n\t} else {\n\t\tcreateMatchers(ruleScope, nameMatcher, matchers);\n\t}\n\n\tif (matchers.length === 0) {\n\t\treturn noMatch;\n\t}\n\treturn (scope: ProbeScope) => {\n\t\tlet max = matchers[0].matcher(scope);\n\t\tfor (let i = 1; i < matchers.length; i++) {\n\t\t\tmax = Math.max(max, matchers[i].matcher(scope));\n\t\t}\n\t\treturn max;\n\t};\n}\n\nfunction readSemanticTokenRule(selectorString: string, settings: ISemanticTokenColorizationSetting | string | boolean | undefined): SemanticTokenRule | undefined {\n\tconst selector = tokenClassificationRegistry.parseTokenSelector(selectorString);\n\tlet style: TokenStyle | undefined;\n\tif (typeof settings === 'string') {\n\t\tstyle = TokenStyle.fromSettings(settings, undefined);\n\t} else if (isSemanticTokenColorizationSetting(settings)) {\n\t\tstyle = TokenStyle.fromSettings(settings.foreground, settings.fontStyle, settings.bold, settings.underline, settings.italic);\n\t}\n\tif (style) {\n\t\treturn { selector, style };\n\t}\n\treturn undefined;\n}\n\nfunction isSemanticTokenColorizationSetting(style: any): style is ISemanticTokenColorizationSetting {\n\treturn style && (types.isString(style.foreground) || types.isString(style.fontStyle) || types.isBoolean(style.italic)\n\t\t|| types.isBoolean(style.underline) || types.isBoolean(style.bold));\n}\n\n\nclass TokenColorIndex {\n\n\tprivate _lastColorId: number;\n\tprivate _id2color: string[];\n\tprivate _color2id: { [color: string]: number; };\n\n\tconstructor() {\n\t\tthis._lastColorId = 0;\n\t\tthis._id2color = [];\n\t\tthis._color2id = Object.create(null);\n\t}\n\n\tpublic add(color: string | Color | undefined): number {\n\t\tcolor = normalizeColor(color);\n\t\tif (color === undefined) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet value = this._color2id[color];\n\t\tif (value) {\n\t\t\treturn value;\n\t\t}\n\t\tvalue = ++this._lastColorId;\n\t\tthis._color2id[color] = value;\n\t\tthis._id2color[value] = color;\n\t\treturn value;\n\t}\n\n\tpublic get(color: string | Color | undefined): number {\n\t\tcolor = normalizeColor(color);\n\t\tif (color === undefined) {\n\t\t\treturn 0;\n\t\t}\n\t\tlet value = this._color2id[color];\n\t\tif (value) {\n\t\t\treturn value;\n\t\t}\n\t\tconsole.log(`Color ${color} not in index.`);\n\t\treturn 0;\n\t}\n\n\tpublic asArray(): string[] {\n\t\treturn this._id2color.slice(0);\n\t}\n\n}\n\nfunction normalizeColor(color: string | Color | undefined | null): string | undefined {\n\tif (!color) {\n\t\treturn undefined;\n\t}\n\tif (typeof color !== 'string') {\n\t\tcolor = Color.Format.CSS.formatHexA(color, true);\n\t}\n\tconst len = color.length;\n\tif (color.charCodeAt(0) !== CharCode.Hash || (len !== 4 && len !== 5 && len !== 7 && len !== 9)) {\n\t\treturn undefined;\n\t}\n\tlet result = [CharCode.Hash];\n\n\tfor (let i = 1; i < len; i++) {\n\t\tconst upper = hexUpper(color.charCodeAt(i));\n\t\tif (!upper) {\n\t\t\treturn undefined;\n\t\t}\n\t\tresult.push(upper);\n\t\tif (len === 4 || len === 5) {\n\t\t\tresult.push(upper);\n\t\t}\n\t}\n\n\tif (result.length === 9 && result[7] === CharCode.F && result[8] === CharCode.F) {\n\t\tresult.length = 7;\n\t}\n\treturn String.fromCharCode(...result);\n}\n\nfunction hexUpper(charCode: CharCode): number {\n\tif (charCode >= CharCode.Digit0 && charCode <= CharCode.Digit9 || charCode >= CharCode.A && charCode <= CharCode.F) {\n\t\treturn charCode;\n\t} else if (charCode >= CharCode.a && charCode <= CharCode.f) {\n\t\treturn charCode - CharCode.a + CharCode.A;\n\t}\n\treturn 0;\n}\n"]}