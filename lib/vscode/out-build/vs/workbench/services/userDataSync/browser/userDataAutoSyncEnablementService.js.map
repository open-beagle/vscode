{"version":3,"file":"userDataAutoSyncEnablementService.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/services/userDataSync/browser/userDataAutoSyncEnablementService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAOhG,MAAa,oCAAqC,SAAQ,2DAAiC;QAA3F;;YAGS,YAAO,GAAwB,SAAS,CAAC;QAmClD,CAAC;QApCA,IAAY,2BAA2B,KAAmC,OAAqC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAGhI,mBAAmB;YAC3B,OAAO,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,mBAAmB,EAAE,CAAC;QACxD,CAAC;QAEQ,SAAS;;YACjB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACtB,OAAO,KAAK,CAAC;aACb;YACD,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,EAAE;gBAC/B,IAAI,CAAC,OAAO,GAAG,MAAA,MAAA,IAAI,CAAC,2BAA2B,CAAC,OAAO,0CAAE,mBAAmB,0CAAE,OAAO,CAAC;aACtF;YACD,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,EAAE;gBAC/B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,MAAA,IAAI,CAAC,2BAA2B,CAAC,OAAO,0CAAE,mBAAmB,CAAC,CAAC;aAC9F;YACD,OAAO,IAAI,CAAC,OAAO,CAAC;QACrB,CAAC;QAEQ,aAAa,CAAC,OAAgB;;YACtC,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE;gBAC3C,OAAO;aACP;YACD,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,EAAE;gBAC7B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;gBACvB,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC7B,IAAI,MAAA,MAAA,IAAI,CAAC,2BAA2B,CAAC,OAAO,0CAAE,mBAAmB,0CAAE,iBAAiB,EAAE;oBACrF,IAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7F;aACD;QACF,CAAC;QAEO,SAAS;;YAChB,OAAO,CAAC,CAAC,CAAA,MAAA,MAAA,IAAI,CAAC,2BAA2B,CAAC,OAAO,0CAAE,iBAAiB,0CAAE,OAAO,CAAA,CAAC;QAC/E,CAAC;KACD;IAtCD,oFAsCC;IAED,CAAA,GAAA,8BAAiB,CAAA,CAAC,iDAAkC,EAAE,oCAAoC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { UserDataAutoSyncEnablementService } from 'vs/platform/userDataSync/common/userDataAutoSyncService';\nimport { IUserDataAutoSyncEnablementService } from 'vs/platform/userDataSync/common/userDataSync';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\n\nexport class WebUserDataAutoSyncEnablementService extends UserDataAutoSyncEnablementService {\n\n\tprivate get workbenchEnvironmentService(): IWorkbenchEnvironmentService { return <IWorkbenchEnvironmentService>this.environmentService; }\n\tprivate enabled: boolean | undefined = undefined;\n\n\toverride canToggleEnablement(): boolean {\n\t\treturn this.isTrusted() && super.canToggleEnablement();\n\t}\n\n\toverride isEnabled(): boolean {\n\t\tif (!this.isTrusted()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.enabled === undefined) {\n\t\t\tthis.enabled = this.workbenchEnvironmentService.options?.settingsSyncOptions?.enabled;\n\t\t}\n\t\tif (this.enabled === undefined) {\n\t\t\tthis.enabled = super.isEnabled(this.workbenchEnvironmentService.options?.enableSyncByDefault);\n\t\t}\n\t\treturn this.enabled;\n\t}\n\n\toverride setEnablement(enabled: boolean) {\n\t\tif (enabled && !this.canToggleEnablement()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.enabled !== enabled) {\n\t\t\tthis.enabled = enabled;\n\t\t\tsuper.setEnablement(enabled);\n\t\t\tif (this.workbenchEnvironmentService.options?.settingsSyncOptions?.enablementHandler) {\n\t\t\t\tthis.workbenchEnvironmentService.options.settingsSyncOptions.enablementHandler(this.enabled);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isTrusted(): boolean {\n\t\treturn !!this.workbenchEnvironmentService.options?.workspaceProvider?.trusted;\n\t}\n}\n\nregisterSingleton(IUserDataAutoSyncEnablementService, WebUserDataAutoSyncEnablementService);\n"]}