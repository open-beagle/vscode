{"version":3,"file":"dialog.contribution.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/electron-sandbox/parts/dialogs/dialog.contribution.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IDialogHandler, IDialogResult, IDialogService } from 'vs/platform/dialogs/common/dialogs';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ILayoutService } from 'vs/platform/layout/browser/layoutService';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { INativeHostService } from 'vs/platform/native/electron-sandbox/native';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { IDialogsModel, IDialogViewItem } from 'vs/workbench/common/dialogs';\nimport { BrowserDialogHandler } from 'vs/workbench/browser/parts/dialogs/dialogHandler';\nimport { NativeDialogHandler } from 'vs/workbench/electron-sandbox/parts/dialogs/dialogHandler';\nimport { DialogService } from 'vs/workbench/services/dialogs/common/dialogService';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\n\nexport class DialogHandlerContribution extends Disposable implements IWorkbenchContribution {\n\tprivate nativeImpl: IDialogHandler;\n\tprivate browserImpl: IDialogHandler;\n\n\tprivate model: IDialogsModel;\n\tprivate currentDialog: IDialogViewItem | undefined;\n\n\tconstructor(\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IDialogService private dialogService: IDialogService,\n\t\t@ILogService logService: ILogService,\n\t\t@ILayoutService layoutService: ILayoutService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IProductService productService: IProductService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@INativeHostService nativeHostService: INativeHostService\n\t) {\n\t\tsuper();\n\n\t\tthis.browserImpl = new BrowserDialogHandler(logService, layoutService, themeService, keybindingService, instantiationService, productService, clipboardService);\n\t\tthis.nativeImpl = new NativeDialogHandler(logService, nativeHostService, productService, clipboardService);\n\n\t\tthis.model = (this.dialogService as DialogService).model;\n\n\t\tthis._register(this.model.onDidShowDialog(() => {\n\t\t\tif (!this.currentDialog) {\n\t\t\t\tthis.processDialogs();\n\t\t\t}\n\t\t}));\n\n\t\tthis.processDialogs();\n\t}\n\n\tprivate async processDialogs(): Promise<void> {\n\t\twhile (this.model.dialogs.length) {\n\t\t\tthis.currentDialog = this.model.dialogs[0];\n\n\t\t\tlet result: IDialogResult | undefined = undefined;\n\n\t\t\t// Confirm\n\t\t\tif (this.currentDialog.args.confirmArgs) {\n\t\t\t\tconst args = this.currentDialog.args.confirmArgs;\n\t\t\t\tresult = this.useCustomDialog ? await this.browserImpl.confirm(args.confirmation) : await this.nativeImpl.confirm(args.confirmation);\n\t\t\t}\n\n\t\t\t// Input (custom only)\n\t\t\telse if (this.currentDialog.args.inputArgs) {\n\t\t\t\tconst args = this.currentDialog.args.inputArgs;\n\t\t\t\tresult = await this.browserImpl.input(args.severity, args.message, args.buttons, args.inputs, args.options);\n\t\t\t}\n\n\t\t\t// Message\n\t\t\telse if (this.currentDialog.args.showArgs) {\n\t\t\t\tconst args = this.currentDialog.args.showArgs;\n\t\t\t\tresult = (this.useCustomDialog || args.options?.custom) ?\n\t\t\t\t\tawait this.browserImpl.show(args.severity, args.message, args.buttons, args.options) :\n\t\t\t\t\tawait this.nativeImpl.show(args.severity, args.message, args.buttons, args.options);\n\t\t\t}\n\n\t\t\t// About\n\t\t\telse {\n\t\t\t\tawait this.nativeImpl.about();\n\t\t\t}\n\n\t\t\tthis.currentDialog.close(result);\n\t\t\tthis.currentDialog = undefined;\n\t\t}\n\t}\n\n\tprivate get useCustomDialog(): boolean {\n\t\treturn this.configurationService.getValue('window.dialogStyle') === 'custom';\n\t}\n}\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(DialogHandlerContribution, LifecyclePhase.Starting);\n"]}