{"version":3,"file":"titlebarPart.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/electron-sandbox/parts/titlebar/titlebarPart.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getZoomFactor } from 'vs/base/browser/browser';\nimport { $, addDisposableListener, append, Dimension, EventType, hide, prepend, runAtThisOrScheduleAtNextAnimationFrame, show } from 'vs/base/browser/dom';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { INativeWorkbenchEnvironmentService } from 'vs/workbench/services/environment/electron-sandbox/environmentService';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { isMacintosh, isWindows, isLinux } from 'vs/base/common/platform';\nimport { IMenuService } from 'vs/platform/actions/common/actions';\nimport { TitlebarPart as BrowserTitleBarPart } from 'vs/workbench/browser/parts/titlebar/titlebarPart';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { INativeHostService } from 'vs/platform/native/electron-sandbox/native';\nimport { getTitleBarStyle } from 'vs/platform/windows/common/windows';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { NativeMenubarControl } from 'vs/workbench/electron-sandbox/parts/titlebar/menubarControl';\n\nexport class TitlebarPart extends BrowserTitleBarPart {\n\tprivate windowControls: HTMLElement | undefined;\n\tprivate maxRestoreControl: HTMLElement | undefined;\n\tprivate dragRegion: HTMLElement | undefined;\n\tprivate resizer: HTMLElement | undefined;\n\n\tprivate getMacTitlebarSize() {\n\t\tconst osVersion = this.environmentService.os.release;\n\t\tif (parseFloat(osVersion) >= 20) { // Big Sur increases title bar height\n\t\t\treturn 28;\n\t\t}\n\n\t\treturn 22;\n\t}\n\n\toverride get minimumHeight(): number { return isMacintosh ? this.getMacTitlebarSize() / getZoomFactor() : super.minimumHeight; }\n\toverride get maximumHeight(): number { return this.minimumHeight; }\n\n\tprotected override readonly environmentService: INativeWorkbenchEnvironmentService;\n\n\tconstructor(\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IProductService productService: IProductService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService\n\t) {\n\t\tsuper(contextMenuService, configurationService, editorService, environmentService, contextService, instantiationService, themeService, labelService, storageService, layoutService, menuService, contextKeyService, hostService, productService);\n\n\t\tthis.environmentService = environmentService;\n\t}\n\n\tprivate onUpdateAppIconDragBehavior(): void {\n\t\tconst setting = this.configurationService.getValue('window.doubleClickIconToClose');\n\t\tif (setting && this.appIcon) {\n\t\t\t(this.appIcon.style as any)['-webkit-app-region'] = 'no-drag';\n\t\t} else if (this.appIcon) {\n\t\t\t(this.appIcon.style as any)['-webkit-app-region'] = 'drag';\n\t\t}\n\t}\n\n\tprivate onDidChangeWindowMaximized(maximized: boolean): void {\n\t\tif (this.maxRestoreControl) {\n\t\t\tif (maximized) {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...Codicon.chromeMaximize.classNamesArray);\n\t\t\t\tthis.maxRestoreControl.classList.add(...Codicon.chromeRestore.classNamesArray);\n\t\t\t} else {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...Codicon.chromeRestore.classNamesArray);\n\t\t\t\tthis.maxRestoreControl.classList.add(...Codicon.chromeMaximize.classNamesArray);\n\t\t\t}\n\t\t}\n\n\t\tif (this.resizer) {\n\t\t\tif (maximized) {\n\t\t\t\thide(this.resizer);\n\t\t\t} else {\n\t\t\t\tshow(this.resizer);\n\t\t\t}\n\t\t}\n\n\t\tthis.adjustTitleMarginToCenter();\n\t}\n\n\tprivate onMenubarFocusChanged(focused: boolean): void {\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility !== 'compact' && this.dragRegion) {\n\t\t\tif (focused) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t} else {\n\t\t\t\tshow(this.dragRegion);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override onMenubarVisibilityChanged(visible: boolean): void {\n\t\t// Hide title when toggling menu bar\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility === 'toggle' && visible) {\n\t\t\t// Hack to fix issue #52522 with layered webkit-app-region elements appearing under cursor\n\t\t\tif (this.dragRegion) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t\tsetTimeout(() => show(this.dragRegion!), 50);\n\t\t\t}\n\t\t}\n\n\t\tsuper.onMenubarVisibilityChanged(visible);\n\t}\n\n\tprotected override onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\t\tsuper.onConfigurationChanged(event);\n\n\t\tif (event.affectsConfiguration('window.doubleClickIconToClose')) {\n\t\t\tif (this.appIcon) {\n\t\t\t\tthis.onUpdateAppIconDragBehavior();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override adjustTitleMarginToCenter(): void {\n\t\tif (this.customMenubar && this.menubar) {\n\t\t\tconst leftMarker = (this.appIcon ? this.appIcon.clientWidth : 0) + this.menubar.clientWidth + 10;\n\t\t\tconst rightMarker = this.element.clientWidth - (this.windowControls ? this.windowControls.clientWidth : 0) - 10;\n\n\t\t\t// Not enough space to center the titlebar within window,\n\t\t\t// Center between menu and window controls\n\t\t\tif (leftMarker > (this.element.clientWidth - this.title.clientWidth) / 2 ||\n\t\t\t\trightMarker < (this.element.clientWidth + this.title.clientWidth) / 2) {\n\t\t\t\tthis.title.style.position = '';\n\t\t\t\tthis.title.style.left = '';\n\t\t\t\tthis.title.style.transform = '';\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.title.style.position = 'absolute';\n\t\tthis.title.style.left = '50%';\n\t\tthis.title.style.transform = 'translate(-50%, 0)';\n\t\tthis.title.style.maxWidth = `calc(100vw - ${2 * ((this.windowControls?.clientWidth || 70) + 10)}px)`;\n\t}\n\n\tprotected override installMenubar(): void {\n\t\tsuper.installMenubar();\n\n\t\tif (this.menubar) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.customMenubar) {\n\t\t\tthis._register(this.customMenubar.onFocusStateChange(e => this.onMenubarFocusChanged(e)));\n\t\t}\n\t}\n\n\toverride createContentArea(parent: HTMLElement): HTMLElement {\n\t\tconst ret = super.createContentArea(parent);\n\n\t\t// Native menu controller\n\t\tif (isMacintosh || getTitleBarStyle(this.configurationService) === 'native') {\n\t\t\tthis._register(this.instantiationService.createInstance(NativeMenubarControl));\n\t\t}\n\n\t\t// App Icon (Native Windows/Linux)\n\t\tif (this.appIcon) {\n\t\t\tthis.onUpdateAppIconDragBehavior();\n\n\t\t\tthis._register(addDisposableListener(this.appIcon, EventType.DBLCLICK, (e => {\n\t\t\t\tthis.nativeHostService.closeWindow();\n\t\t\t})));\n\t\t}\n\n\t\t// Draggable region that we can manipulate for #52522\n\t\tthis.dragRegion = prepend(this.element, $('div.titlebar-drag-region'));\n\n\t\t// Window Controls (Native Windows/Linux)\n\t\tif (!isMacintosh) {\n\t\t\tthis.windowControls = append(this.element, $('div.window-controls-container'));\n\n\t\t\t// Minimize\n\t\t\tconst minimizeIcon = append(this.windowControls, $('div.window-icon.window-minimize' + Codicon.chromeMinimize.cssSelector));\n\t\t\tthis._register(addDisposableListener(minimizeIcon, EventType.CLICK, e => {\n\t\t\t\tthis.nativeHostService.minimizeWindow();\n\t\t\t}));\n\n\t\t\t// Restore\n\t\t\tthis.maxRestoreControl = append(this.windowControls, $('div.window-icon.window-max-restore'));\n\t\t\tthis._register(addDisposableListener(this.maxRestoreControl, EventType.CLICK, async e => {\n\t\t\t\tconst maximized = await this.nativeHostService.isMaximized();\n\t\t\t\tif (maximized) {\n\t\t\t\t\treturn this.nativeHostService.unmaximizeWindow();\n\t\t\t\t}\n\n\t\t\t\treturn this.nativeHostService.maximizeWindow();\n\t\t\t}));\n\n\t\t\t// Close\n\t\t\tconst closeIcon = append(this.windowControls, $('div.window-icon.window-close' + Codicon.chromeClose.cssSelector));\n\t\t\tthis._register(addDisposableListener(closeIcon, EventType.CLICK, e => {\n\t\t\t\tthis.nativeHostService.closeWindow();\n\t\t\t}));\n\n\t\t\t// Resizer\n\t\t\tthis.resizer = append(this.element, $('div.resizer'));\n\n\t\t\tthis._register(this.layoutService.onDidChangeWindowMaximized(maximized => this.onDidChangeWindowMaximized(maximized)));\n\t\t\tthis.onDidChangeWindowMaximized(this.layoutService.isWindowMaximized());\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\toverride updateLayout(dimension: Dimension): void {\n\t\tthis.lastLayoutDimensions = dimension;\n\n\t\tif (getTitleBarStyle(this.configurationService) === 'custom') {\n\t\t\t// Only prevent zooming behavior on macOS or when the menubar is not visible\n\t\t\tif (isMacintosh || this.currentMenubarVisibility === 'hidden') {\n\t\t\t\tthis.title.style.zoom = `${1 / getZoomFactor()}`;\n\t\t\t\tif (isWindows || isLinux) {\n\t\t\t\t\tif (this.appIcon) {\n\t\t\t\t\t\tthis.appIcon.style.zoom = `${1 / getZoomFactor()}`;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.windowControls) {\n\t\t\t\t\t\tthis.windowControls.style.zoom = `${1 / getZoomFactor()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.title.style.zoom = '';\n\t\t\t\tif (isWindows || isLinux) {\n\t\t\t\t\tif (this.appIcon) {\n\t\t\t\t\t\tthis.appIcon.style.zoom = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.windowControls) {\n\t\t\t\t\t\tthis.windowControls.style.zoom = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trunAtThisOrScheduleAtNextAnimationFrame(() => this.adjustTitleMarginToCenter());\n\n\t\t\tif (this.customMenubar) {\n\t\t\t\tconst menubarDimension = new Dimension(0, dimension.height);\n\t\t\t\tthis.customMenubar.layout(menubarDimension);\n\t\t\t}\n\t\t}\n\t}\n}\n"]}