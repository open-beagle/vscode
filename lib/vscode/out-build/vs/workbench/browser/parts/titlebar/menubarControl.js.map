{"version":3,"sources":["vs/workbench/browser/parts/titlebar/menubarControl.ts"],"names":[],"mappings":"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","file":"menubarControl.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { IMenuService, MenuId, IMenu, SubmenuItemAction, registerAction2, Action2, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { registerThemingParticipant, IThemeService } from 'vs/platform/theme/common/themeService';\nimport { MenuBarVisibility, getTitleBarStyle, IWindowOpenable, getMenuBarVisibility } from 'vs/platform/windows/common/windows';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IAction, Action, SubmenuAction, Separator } from 'vs/base/common/actions';\nimport { addDisposableListener, Dimension, EventType } from 'vs/base/browser/dom';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { isMacintosh, isWeb, isIOS, isNative } from 'vs/base/common/platform';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IRecentlyOpened, isRecentFolder, IRecent, isRecentWorkspace, IWorkspacesService } from 'vs/platform/workspaces/common/workspaces';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { MENUBAR_SELECTION_FOREGROUND, MENUBAR_SELECTION_BACKGROUND, MENUBAR_SELECTION_BORDER, TITLE_BAR_ACTIVE_FOREGROUND, TITLE_BAR_INACTIVE_FOREGROUND, ACTIVITY_BAR_FOREGROUND, ACTIVITY_BAR_INACTIVE_FOREGROUND } from 'vs/workbench/common/theme';\nimport { URI } from 'vs/base/common/uri';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IUpdateService, StateType } from 'vs/platform/update/common/update';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IPreferencesService } from 'vs/workbench/services/preferences/common/preferences';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { MenuBar, IMenuBarOptions } from 'vs/base/browser/ui/menu/menubar';\nimport { Direction } from 'vs/base/browser/ui/menu/menu';\nimport { attachMenuStyler } from 'vs/platform/theme/common/styler';\nimport { mnemonicMenuLabel, unmnemonicLabel } from 'vs/base/common/labels';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { isFullscreen } from 'vs/base/browser/browser';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IsWebContext } from 'vs/platform/contextkey/common/contextkeys';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\n\nexport type IOpenRecentAction = IAction & { uri: URI, remoteAuthority?: string };\n\nexport abstract class MenubarControl extends Disposable {\n\n\tprotected keys = [\n\t\t'window.menuBarVisibility',\n\t\t'window.enableMenuBarMnemonics',\n\t\t'window.customMenuBarAltFocus',\n\t\t'workbench.sideBar.location',\n\t\t'window.nativeTabs'\n\t];\n\n\tprotected menus: {\n\t\t'File': IMenu;\n\t\t'Edit': IMenu;\n\t\t'Selection': IMenu;\n\t\t'View': IMenu;\n\t\t'Go': IMenu;\n\t\t'Run': IMenu;\n\t\t'Terminal': IMenu;\n\t\t'Window'?: IMenu;\n\t\t'Help': IMenu;\n\t\t[index: string]: IMenu | undefined;\n\t};\n\n\tprotected topLevelTitles: { [menu: string]: string } = {\n\t\t'File': localize({ key: 'mFile', comment: ['&& denotes a mnemonic'] }, \"&&File\"),\n\t\t'Edit': localize({ key: 'mEdit', comment: ['&& denotes a mnemonic'] }, \"&&Edit\"),\n\t\t'Selection': localize({ key: 'mSelection', comment: ['&& denotes a mnemonic'] }, \"&&Selection\"),\n\t\t'View': localize({ key: 'mView', comment: ['&& denotes a mnemonic'] }, \"&&View\"),\n\t\t'Go': localize({ key: 'mGoto', comment: ['&& denotes a mnemonic'] }, \"&&Go\"),\n\t\t'Run': localize({ key: 'mRun', comment: ['&& denotes a mnemonic'] }, \"&&Run\"),\n\t\t'Terminal': localize({ key: 'mTerminal', comment: ['&& denotes a mnemonic'] }, \"&&Terminal\"),\n\t\t'Help': localize({ key: 'mHelp', comment: ['&& denotes a mnemonic'] }, \"&&Help\")\n\t};\n\n\tprotected recentlyOpened: IRecentlyOpened = { files: [], workspaces: [] };\n\n\tprotected menuUpdater: RunOnceScheduler;\n\n\tprotected static readonly MAX_MENU_RECENT_ENTRIES = 10;\n\n\tconstructor(\n\t\tprotected readonly menuService: IMenuService,\n\t\tprotected readonly workspacesService: IWorkspacesService,\n\t\tprotected readonly contextKeyService: IContextKeyService,\n\t\tprotected readonly keybindingService: IKeybindingService,\n\t\tprotected readonly configurationService: IConfigurationService,\n\t\tprotected readonly labelService: ILabelService,\n\t\tprotected readonly updateService: IUpdateService,\n\t\tprotected readonly storageService: IStorageService,\n\t\tprotected readonly notificationService: INotificationService,\n\t\tprotected readonly preferencesService: IPreferencesService,\n\t\tprotected readonly environmentService: IWorkbenchEnvironmentService,\n\t\tprotected readonly accessibilityService: IAccessibilityService,\n\t\tprotected readonly hostService: IHostService,\n\t\tprotected readonly commandService: ICommandService\n\t) {\n\n\t\tsuper();\n\n\t\tthis.menus = {\n\t\t\t'File': this._register(this.menuService.createMenu(MenuId.MenubarFileMenu, this.contextKeyService)),\n\t\t\t'Edit': this._register(this.menuService.createMenu(MenuId.MenubarEditMenu, this.contextKeyService)),\n\t\t\t'Selection': this._register(this.menuService.createMenu(MenuId.MenubarSelectionMenu, this.contextKeyService)),\n\t\t\t'View': this._register(this.menuService.createMenu(MenuId.MenubarViewMenu, this.contextKeyService)),\n\t\t\t'Go': this._register(this.menuService.createMenu(MenuId.MenubarGoMenu, this.contextKeyService)),\n\t\t\t'Run': this._register(this.menuService.createMenu(MenuId.MenubarDebugMenu, this.contextKeyService)),\n\t\t\t'Terminal': this._register(this.menuService.createMenu(MenuId.MenubarTerminalMenu, this.contextKeyService)),\n\t\t\t'Help': this._register(this.menuService.createMenu(MenuId.MenubarHelpMenu, this.contextKeyService))\n\t\t};\n\n\t\tthis.menuUpdater = this._register(new RunOnceScheduler(() => this.doUpdateMenubar(false), 200));\n\n\t\tthis.notifyUserOfCustomMenubarAccessibility();\n\t}\n\n\tprotected abstract doUpdateMenubar(firstTime: boolean): void;\n\n\tprotected registerListeners(): void {\n\t\t// Listen for window focus changes\n\t\tthis._register(this.hostService.onDidChangeFocus(e => this.onDidChangeWindowFocus(e)));\n\n\t\t// Update when config changes\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\n\t\t// Listen to update service\n\t\tthis.updateService.onStateChange(() => this.onUpdateStateChange());\n\n\t\t// Listen for changes in recently opened menu\n\t\tthis._register(this.workspacesService.onDidChangeRecentlyOpened(() => { this.onDidChangeRecentlyOpened(); }));\n\n\t\t// Listen to keybindings change\n\t\tthis._register(this.keybindingService.onDidUpdateKeybindings(() => this.updateMenubar()));\n\n\t\t// Update recent menu items on formatter registration\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => { this.onDidChangeRecentlyOpened(); }));\n\t}\n\n\tprotected updateMenubar(): void {\n\t\tthis.menuUpdater.schedule();\n\t}\n\n\tprotected calculateActionLabel(action: { id: string; label: string; }): string {\n\t\tlet label = action.label;\n\t\tswitch (action.id) {\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn label;\n\t}\n\n\tprotected onUpdateStateChange(): void {\n\t\tthis.updateMenubar();\n\t}\n\n\tprotected onUpdateKeybindings(): void {\n\t\tthis.updateMenubar();\n\t}\n\n\tprotected getOpenRecentActions(): (Separator | IOpenRecentAction)[] {\n\t\tif (!this.recentlyOpened) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { workspaces, files } = this.recentlyOpened;\n\n\t\tconst result = [];\n\n\t\tif (workspaces.length > 0) {\n\t\t\tfor (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < workspaces.length; i++) {\n\t\t\t\tresult.push(this.createOpenRecentMenuAction(workspaces[i]));\n\t\t\t}\n\n\t\t\tresult.push(new Separator());\n\t\t}\n\n\t\tif (files.length > 0) {\n\t\t\tfor (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < files.length; i++) {\n\t\t\t\tresult.push(this.createOpenRecentMenuAction(files[i]));\n\t\t\t}\n\n\t\t\tresult.push(new Separator());\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected onDidChangeWindowFocus(hasFocus: boolean): void {\n\t\t// When we regain focus, update the recent menu items\n\t\tif (hasFocus) {\n\t\t\tthis.onDidChangeRecentlyOpened();\n\t\t}\n\t}\n\n\tprivate onConfigurationUpdated(event: IConfigurationChangeEvent): void {\n\t\tif (this.keys.some(key => event.affectsConfiguration(key))) {\n\t\t\tthis.updateMenubar();\n\t\t}\n\n\t\tif (event.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\tthis.notifyUserOfCustomMenubarAccessibility();\n\t\t}\n\n\t\t// Since we try not update when hidden, we should\n\t\t// try to update the recently opened list on visibility changes\n\t\tif (event.affectsConfiguration('window.menuBarVisibility')) {\n\t\t\tthis.onDidChangeRecentlyOpened();\n\t\t}\n\t}\n\n\tprivate get menubarHidden(): boolean {\n\t\treturn isMacintosh && isNative ? false : getMenuBarVisibility(this.configurationService) === 'hidden';\n\t}\n\n\tprotected onDidChangeRecentlyOpened(): void {\n\n\t\t// Do not update recently opened when the menubar is hidden #108712\n\t\tif (!this.menubarHidden) {\n\t\t\tthis.workspacesService.getRecentlyOpened().then(recentlyOpened => {\n\t\t\t\tthis.recentlyOpened = recentlyOpened;\n\t\t\t\tthis.updateMenubar();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate createOpenRecentMenuAction(recent: IRecent): IOpenRecentAction {\n\n\t\tlet label: string;\n\t\tlet uri: URI;\n\t\tlet commandId: string;\n\t\tlet openable: IWindowOpenable;\n\t\tconst remoteAuthority = recent.remoteAuthority;\n\n\t\tif (isRecentFolder(recent)) {\n\t\t\turi = recent.folderUri;\n\t\t\tlabel = recent.label || this.labelService.getWorkspaceLabel(uri, { verbose: true });\n\t\t\tcommandId = 'openRecentFolder';\n\t\t\topenable = { folderUri: uri };\n\t\t} else if (isRecentWorkspace(recent)) {\n\t\t\turi = recent.workspace.configPath;\n\t\t\tlabel = recent.label || this.labelService.getWorkspaceLabel(recent.workspace, { verbose: true });\n\t\t\tcommandId = 'openRecentWorkspace';\n\t\t\topenable = { workspaceUri: uri };\n\t\t} else {\n\t\t\turi = recent.fileUri;\n\t\t\tlabel = recent.label || this.labelService.getUriLabel(uri);\n\t\t\tcommandId = 'openRecentFile';\n\t\t\topenable = { fileUri: uri };\n\t\t}\n\n\t\tconst ret: IAction = new Action(commandId, unmnemonicLabel(label), undefined, undefined, event => {\n\t\t\tconst browserEvent = event as KeyboardEvent;\n\t\t\tconst openInNewWindow = event && ((!isMacintosh && (browserEvent.ctrlKey || browserEvent.shiftKey)) || (isMacintosh && (browserEvent.metaKey || browserEvent.altKey)));\n\n\t\t\treturn this.hostService.openWindow([openable], {\n\t\t\t\tforceNewWindow: !!openInNewWindow,\n\t\t\t\tremoteAuthority\n\t\t\t});\n\t\t});\n\n\t\treturn Object.assign(ret, { uri, remoteAuthority });\n\t}\n\n\tprivate notifyUserOfCustomMenubarAccessibility(): void {\n\t\tif (isWeb || isMacintosh) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst hasBeenNotified = this.storageService.getBoolean('menubar/accessibleMenubarNotified', StorageScope.GLOBAL, false);\n\t\tconst usingCustomMenubar = getTitleBarStyle(this.configurationService) === 'custom';\n\n\t\tif (hasBeenNotified || usingCustomMenubar || !this.accessibilityService.isScreenReaderOptimized()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = localize('menubar.customTitlebarAccessibilityNotification', \"Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.\");\n\t\tthis.notificationService.prompt(Severity.Info, message, [\n\t\t\t{\n\t\t\t\tlabel: localize('goToSetting', \"Open Settings\"),\n\t\t\t\trun: () => {\n\t\t\t\t\treturn this.preferencesService.openGlobalSettings(undefined, { query: 'window.titleBarStyle' });\n\t\t\t\t}\n\t\t\t}\n\t\t]);\n\n\t\tthis.storageService.store('menubar/accessibleMenubarNotified', true, StorageScope.GLOBAL, StorageTarget.USER);\n\t}\n}\n\nexport class CustomMenubarControl extends MenubarControl {\n\tprivate menubar: MenuBar | undefined;\n\tprivate container: HTMLElement | undefined;\n\tprivate alwaysOnMnemonics: boolean = false;\n\tprivate focusInsideMenubar: boolean = false;\n\tprivate visible: boolean = true;\n\tprivate readonly webNavigationMenu = this._register(this.menuService.createMenu(MenuId.MenubarHomeMenu, this.contextKeyService));\n\n\tprivate readonly _onVisibilityChange: Emitter<boolean>;\n\tprivate readonly _onFocusStateChange: Emitter<boolean>;\n\n\tconstructor(\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IUpdateService updateService: IUpdateService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IPreferencesService preferencesService: IPreferencesService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IHostService hostService: IHostService,\n\t\t@ICommandService commandService: ICommandService\n\t) {\n\t\tsuper(menuService, workspacesService, contextKeyService, keybindingService, configurationService, labelService, updateService, storageService, notificationService, preferencesService, environmentService, accessibilityService, hostService, commandService);\n\n\t\tthis._onVisibilityChange = this._register(new Emitter<boolean>());\n\t\tthis._onFocusStateChange = this._register(new Emitter<boolean>());\n\n\t\tthis.workspacesService.getRecentlyOpened().then((recentlyOpened) => {\n\t\t\tthis.recentlyOpened = recentlyOpened;\n\t\t});\n\n\t\tthis.registerListeners();\n\n\t\tthis.registerActions();\n\n\t\tregisterThemingParticipant((theme, collector) => {\n\t\t\tconst menubarActiveWindowFgColor = theme.getColor(TITLE_BAR_ACTIVE_FOREGROUND);\n\t\t\tif (menubarActiveWindowFgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button,\n\t\t\t\t.monaco-workbench .menubar .toolbar-toggle-more {\n\t\t\t\t\tcolor: ${menubarActiveWindowFgColor};\n\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tconst activityBarInactiveFgColor = theme.getColor(ACTIVITY_BAR_INACTIVE_FOREGROUND);\n\t\t\tif (activityBarInactiveFgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t.monaco-workbench .menubar.compact > .menubar-menu-button,\n\t\t\t\t.monaco-workbench .menubar.compact .toolbar-toggle-more {\n\t\t\t\t\tcolor: ${activityBarInactiveFgColor};\n\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tconst activityBarFgColor = theme.getColor(ACTIVITY_BAR_FOREGROUND);\n\t\t\tif (activityBarFgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t.monaco-workbench .menubar.compact > .menubar-menu-button.open,\n\t\t\t\t.monaco-workbench .menubar.compact > .menubar-menu-button:focus,\n\t\t\t\t.monaco-workbench .menubar.compact:not(:focus-within) > .menubar-menu-button:hover,\n\t\t\t\t.monaco-workbench .menubar.compact  > .menubar-menu-button.open .toolbar-toggle-more,\n\t\t\t\t.monaco-workbench .menubar.compact > .menubar-menu-button:focus .toolbar-toggle-more,\n\t\t\t\t.monaco-workbench .menubar.compact:not(:focus-within) > .menubar-menu-button:hover .toolbar-toggle-more {\n\t\t\t\t\tcolor: ${activityBarFgColor};\n\t\t\t\t}\n\t\t\t`);\n\t\t\t}\n\n\t\t\tconst menubarInactiveWindowFgColor = theme.getColor(TITLE_BAR_INACTIVE_FOREGROUND);\n\t\t\tif (menubarInactiveWindowFgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t\t.monaco-workbench .menubar.inactive:not(.compact) > .menubar-menu-button,\n\t\t\t\t\t.monaco-workbench .menubar.inactive:not(.compact) > .menubar-menu-button .toolbar-toggle-more  {\n\t\t\t\t\t\tcolor: ${menubarInactiveWindowFgColor};\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tconst menubarSelectedFgColor = theme.getColor(MENUBAR_SELECTION_FOREGROUND);\n\t\t\tif (menubarSelectedFgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button.open,\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button:focus,\n\t\t\t\t\t.monaco-workbench .menubar:not(:focus-within):not(.compact) > .menubar-menu-button:hover,\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button.open .toolbar-toggle-more,\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button:focus .toolbar-toggle-more,\n\t\t\t\t\t.monaco-workbench .menubar:not(:focus-within):not(.compact) > .menubar-menu-button:hover .toolbar-toggle-more {\n\t\t\t\t\t\tcolor: ${menubarSelectedFgColor};\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tconst menubarSelectedBgColor = theme.getColor(MENUBAR_SELECTION_BACKGROUND);\n\t\t\tif (menubarSelectedBgColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button.open,\n\t\t\t\t\t.monaco-workbench .menubar:not(.compact) > .menubar-menu-button:focus,\n\t\t\t\t\t.monaco-workbench .menubar:not(:focus-within):not(.compact) > .menubar-menu-button:hover {\n\t\t\t\t\t\tbackground-color: ${menubarSelectedBgColor};\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tconst menubarSelectedBorderColor = theme.getColor(MENUBAR_SELECTION_BORDER);\n\t\t\tif (menubarSelectedBorderColor) {\n\t\t\t\tcollector.addRule(`\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button:hover {\n\t\t\t\t\t\toutline: dashed 1px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button.open,\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button:focus {\n\t\t\t\t\t\toutline: solid 1px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button.open,\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button:focus,\n\t\t\t\t\t.monaco-workbench .menubar > .menubar-menu-button:hover {\n\t\t\t\t\t\toutline-color: ${menubarSelectedBorderColor};\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected doUpdateMenubar(firstTime: boolean): void {\n\t\tthis.setupCustomMenubar(firstTime);\n\t}\n\n\tprivate registerActions(): void {\n\t\tconst that = this;\n\n\t\tif (isWeb) {\n\t\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: `workbench.actions.menubar.focus`,\n\t\t\t\t\t\ttitle: { value: localize('focusMenu', \"Focus Application Menu\"), original: 'Focus Application Menu' },\n\t\t\t\t\t\tkeybinding: {\n\t\t\t\t\t\t\tprimary: KeyCode.F10,\n\t\t\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\t\t\twhen: IsWebContext\n\t\t\t\t\t\t},\n\t\t\t\t\t\tf1: true\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tasync run(): Promise<void> {\n\t\t\t\t\tif (that.menubar) {\n\t\t\t\t\t\tthat.menubar.toggleFocus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate getUpdateAction(): IAction | null {\n\t\tconst state = this.updateService.state;\n\n\t\tswitch (state.type) {\n\t\t\tcase StateType.Uninitialized:\n\t\t\t\treturn null;\n\n\t\t\tcase StateType.Idle:\n\t\t\t\treturn new Action('update.check', localize({ key: 'checkForUpdates', comment: ['&& denotes a mnemonic'] }, \"Check for &&Updates...\"), undefined, true, () =>\n\t\t\t\t\tthis.updateService.checkForUpdates(true));\n\n\t\t\tcase StateType.CheckingForUpdates:\n\t\t\t\treturn new Action('update.checking', localize('checkingForUpdates', \"Checking for Updates...\"), undefined, false);\n\n\t\t\tcase StateType.AvailableForDownload:\n\t\t\t\treturn new Action('update.downloadNow', localize({ key: 'download now', comment: ['&& denotes a mnemonic'] }, \"D&&ownload Update\"), undefined, true, () =>\n\t\t\t\t\tthis.updateService.downloadUpdate());\n\n\t\t\tcase StateType.Downloading:\n\t\t\t\treturn new Action('update.downloading', localize('DownloadingUpdate', \"Downloading Update...\"), undefined, false);\n\n\t\t\tcase StateType.Downloaded:\n\t\t\t\treturn new Action('update.install', localize({ key: 'installUpdate...', comment: ['&& denotes a mnemonic'] }, \"Install &&Update...\"), undefined, true, () =>\n\t\t\t\t\tthis.updateService.applyUpdate());\n\n\t\t\tcase StateType.Updating:\n\t\t\t\treturn new Action('update.updating', localize('installingUpdate', \"Installing Update...\"), undefined, false);\n\n\t\t\tcase StateType.Ready:\n\t\t\t\treturn new Action('update.restart', localize({ key: 'restartToUpdate', comment: ['&& denotes a mnemonic'] }, \"Restart to &&Update\"), undefined, true, () =>\n\t\t\t\t\tthis.updateService.quitAndInstall());\n\t\t}\n\t}\n\n\tprivate get currentMenubarVisibility(): MenuBarVisibility {\n\t\treturn getMenuBarVisibility(this.configurationService);\n\t}\n\n\tprivate get currentDisableMenuBarAltFocus(): boolean {\n\t\tlet settingValue = this.configurationService.getValue<boolean>('window.customMenuBarAltFocus');\n\n\t\tlet disableMenuBarAltBehavior = false;\n\t\tif (typeof settingValue === 'boolean') {\n\t\t\tdisableMenuBarAltBehavior = !settingValue;\n\t\t}\n\n\t\treturn disableMenuBarAltBehavior;\n\t}\n\n\tprivate insertActionsBefore(nextAction: IAction, target: IAction[]): void {\n\t\tswitch (nextAction.id) {\n\t\t\tcase 'workbench.action.openRecent':\n\t\t\t\ttarget.push(...this.getOpenRecentActions());\n\t\t\t\tbreak;\n\n\t\t\tcase 'workbench.action.showAboutDialog':\n\t\t\t\tif (!isMacintosh && !isWeb) {\n\t\t\t\t\tconst updateAction = this.getUpdateAction();\n\t\t\t\t\tif (updateAction) {\n\t\t\t\t\t\tupdateAction.label = mnemonicMenuLabel(updateAction.label);\n\t\t\t\t\t\ttarget.push(updateAction);\n\t\t\t\t\t\ttarget.push(new Separator());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate get currentEnableMenuBarMnemonics(): boolean {\n\t\tlet enableMenuBarMnemonics = this.configurationService.getValue<boolean>('window.enableMenuBarMnemonics');\n\t\tif (typeof enableMenuBarMnemonics !== 'boolean') {\n\t\t\tenableMenuBarMnemonics = true;\n\t\t}\n\n\t\treturn enableMenuBarMnemonics && (!isWeb || isFullscreen());\n\t}\n\n\tprivate get currentCompactMenuMode(): Direction | undefined {\n\t\tif (this.currentMenubarVisibility !== 'compact') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst currentSidebarLocation = this.configurationService.getValue<string>('workbench.sideBar.location');\n\t\treturn currentSidebarLocation === 'right' ? Direction.Left : Direction.Right;\n\t}\n\n\tprivate onDidVisibilityChange(visible: boolean): void {\n\t\tthis.visible = visible;\n\t\tthis.onDidChangeRecentlyOpened();\n\t\tthis._onVisibilityChange.fire(visible);\n\t}\n\n\tprivate setupCustomMenubar(firstTime: boolean): void {\n\t\t// If there is no container, we cannot setup the menubar\n\t\tif (!this.container) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (firstTime) {\n\t\t\tthis.menubar = this._register(new MenuBar(this.container, this.getMenuBarOptions()));\n\n\t\t\tthis.accessibilityService.alwaysUnderlineAccessKeys().then(val => {\n\t\t\t\tthis.alwaysOnMnemonics = val;\n\t\t\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t\t\t});\n\n\t\t\tthis._register(this.menubar.onFocusStateChange(focused => {\n\t\t\t\tthis._onFocusStateChange.fire(focused);\n\n\t\t\t\t// When the menubar loses focus, update it to clear any pending updates\n\t\t\t\tif (!focused) {\n\t\t\t\t\tthis.updateMenubar();\n\t\t\t\t\tthis.focusInsideMenubar = false;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._register(this.menubar.onVisibilityChange(e => this.onDidVisibilityChange(e)));\n\n\t\t\t// Before we focus the menubar, stop updates to it so that focus-related context keys will work\n\t\t\tthis._register(addDisposableListener(this.container, EventType.FOCUS_IN, () => {\n\t\t\t\tthis.focusInsideMenubar = true;\n\t\t\t}));\n\n\t\t\tthis._register(addDisposableListener(this.container, EventType.FOCUS_OUT, () => {\n\t\t\t\tthis.focusInsideMenubar = false;\n\t\t\t}));\n\n\t\t\tthis._register(attachMenuStyler(this.menubar, this.themeService));\n\t\t} else {\n\t\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t\t}\n\n\t\t// Update the menu actions\n\t\tconst updateActions = (menu: IMenu, target: IAction[], topLevelTitle: string) => {\n\t\t\ttarget.splice(0);\n\t\t\tlet groups = menu.getActions();\n\n\t\t\tfor (let group of groups) {\n\t\t\t\tconst [, actions] = group;\n\n\t\t\t\tfor (let action of actions) {\n\t\t\t\t\tthis.insertActionsBefore(action, target);\n\n\t\t\t\t\t// use mnemonicTitle whenever possible\n\t\t\t\t\tconst title = typeof action.item.title === 'string'\n\t\t\t\t\t\t? action.item.title\n\t\t\t\t\t\t: action.item.title.mnemonicTitle ?? action.item.title.value;\n\n\t\t\t\t\tif (action instanceof SubmenuItemAction) {\n\t\t\t\t\t\tlet submenu = this.menus[action.item.submenu.id];\n\t\t\t\t\t\tif (!submenu) {\n\t\t\t\t\t\t\tsubmenu = this.menus[action.item.submenu.id] = this.menuService.createMenu(action.item.submenu, this.contextKeyService);\n\t\t\t\t\t\t\tthis._register(submenu.onDidChange(() => {\n\t\t\t\t\t\t\t\tif (!this.focusInsideMenubar) {\n\t\t\t\t\t\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\t\t\t\t\t\tupdateActions(menu, actions, topLevelTitle);\n\t\t\t\t\t\t\t\t\tif (this.menubar) {\n\t\t\t\t\t\t\t\t\t\tthis.menubar.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[topLevelTitle]) });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst submenuActions: SubmenuAction[] = [];\n\t\t\t\t\t\tupdateActions(submenu, submenuActions, topLevelTitle);\n\n\t\t\t\t\t\tif (submenuActions.length > 0) {\n\t\t\t\t\t\t\ttarget.push(new SubmenuAction(action.id, mnemonicMenuLabel(title), submenuActions));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newAction = new Action(action.id, mnemonicMenuLabel(title), action.class, action.enabled, () => this.commandService.executeCommand(action.id));\n\t\t\t\t\t\tnewAction.tooltip = action.tooltip;\n\t\t\t\t\t\tnewAction.checked = action.checked;\n\t\t\t\t\t\ttarget.push(newAction);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttarget.push(new Separator());\n\t\t\t}\n\n\t\t\t// Append web navigation menu items to the file menu when not compact\n\t\t\tif (menu === this.menus.File && this.currentCompactMenuMode === undefined) {\n\t\t\t\tconst webActions = this.getWebNavigationActions();\n\t\t\t\tif (webActions.length) {\n\t\t\t\t\ttarget.push(...webActions);\n\t\t\t\t\ttarget.push(new Separator()); // to account for pop below\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttarget.pop();\n\t\t};\n\n\t\tfor (const title of Object.keys(this.topLevelTitles)) {\n\t\t\tconst menu = this.menus[title];\n\t\t\tif (firstTime && menu) {\n\t\t\t\tthis._register(menu.onDidChange(() => {\n\t\t\t\t\tif (!this.focusInsideMenubar) {\n\t\t\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\t\t\tupdateActions(menu, actions, title);\n\t\t\t\t\t\tif (this.menubar) {\n\t\t\t\t\t\t\tthis.menubar.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\t// For the file menu, we need to update if the web nav menu updates as well\n\t\t\t\tif (menu === this.menus.File) {\n\t\t\t\t\tthis._register(this.webNavigationMenu.onDidChange(() => {\n\t\t\t\t\t\tif (!this.focusInsideMenubar) {\n\t\t\t\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\t\t\t\tupdateActions(menu, actions, title);\n\t\t\t\t\t\t\tif (this.menubar) {\n\t\t\t\t\t\t\t\tthis.menubar.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst actions: IAction[] = [];\n\t\t\tif (menu) {\n\t\t\t\tupdateActions(menu, actions, title);\n\t\t\t}\n\n\t\t\tif (this.menubar) {\n\t\t\t\tif (!firstTime) {\n\t\t\t\t\tthis.menubar.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t} else {\n\t\t\t\t\tthis.menubar.push({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getWebNavigationActions(): IAction[] {\n\t\tif (!isWeb) {\n\t\t\treturn []; // only for web\n\t\t}\n\n\t\tconst webNavigationActions = [];\n\t\tfor (const groups of this.webNavigationMenu.getActions()) {\n\t\t\tconst [, actions] = groups;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\tconst title = typeof action.item.title === 'string'\n\t\t\t\t\t\t? action.item.title\n\t\t\t\t\t\t: action.item.title.mnemonicTitle ?? action.item.title.value;\n\t\t\t\t\twebNavigationActions.push(new Action(action.id, mnemonicMenuLabel(title), action.class, action.enabled, async (event?: any) => {\n\t\t\t\t\t\tthis.commandService.executeCommand(action.id, event);\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twebNavigationActions.push(new Separator());\n\t\t}\n\n\t\tif (webNavigationActions.length) {\n\t\t\twebNavigationActions.pop();\n\t\t}\n\n\t\treturn webNavigationActions;\n\t}\n\n\tprivate getMenuBarOptions(): IMenuBarOptions {\n\t\treturn {\n\t\t\tenableMnemonics: this.currentEnableMenuBarMnemonics,\n\t\t\tdisableAltFocus: this.currentDisableMenuBarAltFocus,\n\t\t\tvisibility: this.currentMenubarVisibility,\n\t\t\tgetKeybinding: (action) => this.keybindingService.lookupKeybinding(action.id),\n\t\t\talwaysOnMnemonics: this.alwaysOnMnemonics,\n\t\t\tcompactMode: this.currentCompactMenuMode,\n\t\t\tgetCompactMenuActions: () => {\n\t\t\t\tif (!isWeb) {\n\t\t\t\t\treturn []; // only for web\n\t\t\t\t}\n\n\t\t\t\treturn this.getWebNavigationActions();\n\t\t\t}\n\t\t};\n\t}\n\n\tprotected override onDidChangeWindowFocus(hasFocus: boolean): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDidChangeWindowFocus(hasFocus);\n\n\t\tif (this.container) {\n\t\t\tif (hasFocus) {\n\t\t\t\tthis.container.classList.remove('inactive');\n\t\t\t} else {\n\t\t\t\tthis.container.classList.add('inactive');\n\t\t\t\tif (this.menubar) {\n\t\t\t\t\tthis.menubar.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override onUpdateStateChange(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onUpdateStateChange();\n\t}\n\n\tprotected override onDidChangeRecentlyOpened(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDidChangeRecentlyOpened();\n\t}\n\n\tprotected override onUpdateKeybindings(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onUpdateKeybindings();\n\t}\n\n\tprotected override registerListeners(): void {\n\t\tsuper.registerListeners();\n\n\t\tthis._register(addDisposableListener(window, EventType.RESIZE, () => {\n\t\t\tif (this.menubar && !(isIOS && BrowserFeatures.pointerEvents)) {\n\t\t\t\tthis.menubar.blur();\n\t\t\t}\n\t\t}));\n\n\t\t// Mnemonics require fullscreen in web\n\t\tif (isWeb) {\n\t\t\tthis._register(this.layoutService.onDidChangeFullscreen(e => this.updateMenubar()));\n\t\t\tthis._register(this.webNavigationMenu.onDidChange(() => this.updateMenubar()));\n\t\t}\n\t}\n\n\tget onVisibilityChange(): Event<boolean> {\n\t\treturn this._onVisibilityChange.event;\n\t}\n\n\tget onFocusStateChange(): Event<boolean> {\n\t\treturn this._onFocusStateChange.event;\n\t}\n\n\tgetMenubarItemsDimensions(): Dimension {\n\t\tif (this.menubar) {\n\t\t\treturn new Dimension(this.menubar.getWidth(), this.menubar.getHeight());\n\t\t}\n\n\t\treturn new Dimension(0, 0);\n\t}\n\n\tcreate(parent: HTMLElement): HTMLElement {\n\t\tthis.container = parent;\n\n\t\t// Build the menubar\n\t\tif (this.container) {\n\t\t\tthis.doUpdateMenubar(true);\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\tlayout(dimension: Dimension) {\n\t\tif (this.container) {\n\t\t\tthis.container.style.height = `${dimension.height}px`;\n\t\t}\n\n\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t}\n\n\ttoggleFocus() {\n\t\tif (this.menubar) {\n\t\t\tthis.menubar.toggleFocus();\n\t\t}\n\t}\n}\n"]}