{"version":3,"file":"extHostTunnelService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/test/node/api/extHostTunnelService.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAKhG,MAAM,GAAG,GACR;;;;;;;CAOA,CAAC;IACF,MAAM,IAAI,GACT;;;;;;;;;;;;CAYA,CAAC;IAEF,MAAM,WAAW,GAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+EA+E8E,CAAC;IAEhF,MAAM,SAAS,GAAgD;QAC9D;YACC,GAAG,EAAE,GAAG;YACR,GAAG,EAAE,yBAAyB;YAC9B,GAAG,EAAE,uEAAuE;SAC5E;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,+VAA+V;SACpW;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,6MAA6M;SAClN;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,WAAW;SAChB,EAAE;YACF,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,g2BAAg2B;SACr2B;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,mzBAAmzB;SACxzB;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,inBAAinB;SACtnB;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,uQAAuQ;SAC5Q;QACD;YACC,GAAG,EAAE,GAAG;YACR,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,uIAAuI;SAC5I;QACD;YACC,GAAG,EAAE,GAAG;YACR,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,iLAAiL;SACtL;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,KAAK;SACV;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,sBAAsB;SAC3B;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,2GAA2G;SAChH;QACD;YACC,GAAG,EAAE,GAAG;YACR,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,oKAAoK;SACzK;QACD;YACC,GAAG,EAAE,GAAG;YACR,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,kQAAkQ;SACvQ;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,YAAY;YACjB,GAAG,EAAE,WAAW;SAChB;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,WAAW;SAChB;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,uEAAuE;YAC5E,GAAG,EAAE,aAAa;SAClB;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,yXAAyX;SAC9X;QACD;YACC,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,sEAAsE;YAC3E,GAAG,EAAE,sNAAsN;SAC3N;KACD,CAAC;IAEF,MAAM,QAAQ,GACb;;;;;;;+FAO8F,CAAC;IAEhG,KAAK,CAAC,sBAAsB,EAAE,GAAG,EAAE;QAClC,IAAI,CAAC,YAAY,EAAE;YAClB,MAAM,MAAM,GAAG,CAAA,GAAA,iCAAU,CAAA,CAAC,WAAW,CAAC,CAAC;YACvC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YACnD,sDAAsD;YACtD,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,EAAE,SAAS,CAAC,CAAC;QAC7F,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,EAAE;YAC3B,MAAM,MAAM,GAAG,CAAA,GAAA,0CAAmB,CAAA,CAAC,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;gBACjC,EAAE,EAAE,GAAG;gBACP,EAAE,EAAE,kBAAkB;gBACtB,EAAE,EAAE,KAAK;gBACT,EAAE,EAAE,GAAG;gBACP,EAAE,EAAE,GAAG;gBACP,EAAE,EAAE,IAAI;gBACR,EAAE,EAAE,GAAG;gBACP,KAAK,EAAE,SAAS;gBAChB,aAAa,EAAE,eAAe;gBAC9B,WAAW,EAAE,eAAe;gBAC5B,QAAQ,EAAE,UAAU;gBACpB,EAAE,EAAE,IAAI;gBACR,EAAE,EAAE,IAAI;gBACR,OAAO,EAAE,GAAG;gBACZ,EAAE,EAAE,aAAa;gBACjB,QAAQ,EAAE,mBAAmB;gBAC7B,GAAG,EAAE,MAAM;aACX,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,EAAE;YAC1B,MAAM,MAAM,GAAG,CAAA,GAAA,yCAAkB,CAAA,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YAC7C,yEAAyE;YACzE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,EAAE,SAAS,CAAC,CAAC;QAC7E,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kBAAkB,EAAE;;YACxB,MAAM,aAAa,GAAG,CAAA,GAAA,uCAAgB,CAAA,CAAC,QAAQ,CAAC,CAAC;YACjD,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAC5C,MAAM,MAAM,GAAG,CAAA,GAAA,uCAAgB,CAAA,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YACtG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,WAAW,CAAC,MAAA,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,0CAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,EAAE,KAAK;YACtB,MAAM,MAAM,GAAG,MAAM,CAAA,GAAA,gCAAS,CAAA,CAAC,CAAA,GAAA,yCAAkB,CAAA,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAA,GAAA,iCAAU,CAAA,CAAC,WAAW,CAAC,EAAE,SAAS,CAAC,CAAC;YAClG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YAC9C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACzC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { findPorts, getRootProcesses, getSockets, loadConnectionTable, loadListeningPorts, tryFindRootPorts } from 'vs/workbench/api/node/extHostTunnelService';\n\nconst tcp =\n\t`  sl  local_address rem_address   st tx_queue rx_queue tr tm->when retrnsmt   uid  timeout inode\n\t0: 00000000:0BBA 00000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2335214 1 0000000010173312 100 0 0 10 0\n\t1: 00000000:1AF3 00000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2334514 1 000000008815920b 100 0 0 10 0\n\t2: 0100007F:A9EA 0100007F:1AF3 01 00000000:00000000 00:00000000 00000000  1000        0 2334521 1 00000000a37d44c6 21 4 0 10 -1\n\t3: 0100007F:E8B4 0100007F:98EF 01 00000000:00000000 00:00000000 00000000  1000        0 2334532 1 0000000031b88f06 21 4 0 10 -1\n\t4: 0100007F:866C 0100007F:8783 01 00000000:00000000 00:00000000 00000000  1000        0 2334510 1 00000000cbf670bb 21 4 30 10 -1\n\t5: 0100007F:1AF3 0100007F:A9EA 01 00000000:00000000 00:00000000 00000000  1000        0 2338989 1 0000000000bace62 21 4 1 10 -1\n`;\nconst tcp6 =\n\t`  sl  local_address                         remote_address                        st tx_queue rx_queue tr tm->when retrnsmt   uid  timeout inode\n\t0: 00000000000000000000000000000000:815B 00000000000000000000000000000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2321070 1 00000000c44f3f02 100 0 0 10 0\n\t1: 00000000000000000000000000000000:8783 00000000000000000000000000000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2334509 1 000000003915e812 100 0 0 10 0\n\t2: 00000000000000000000000000000000:9907 00000000000000000000000000000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2284465 1 00000000f13b9374 100 0 0 10 0\n\t3: 00000000000000000000000000000000:98EF 00000000000000000000000000000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2334531 1 00000000184cae9c 100 0 0 10 0\n\t4: 00000000000000000000000000000000:8BCF 00000000000000000000000000000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 2329890 1 00000000c05a3466 100 0 0 10 0\n\t5: 0000000000000000FFFF00000100007F:8783 0000000000000000FFFF00000100007F:866C 01 00000000:00000000 00:00000000 00000000  1000        0 2334511 1 00000000bf547132 21 4 1 10 -1\n\t6: 0000000000000000FFFF00000100007F:98EF 0000000000000000FFFF00000100007F:E8B4 01 00000000:00000000 00:00000000 00000000  1000        0 2334533 1 0000000039d0bcd2 21 4 1 10 -1\n\t7: 0000000000000000FFFF0000DFD317AC:9907 0000000000000000FFFF000001D017AC:C123 01 0000005A:00000000 01:00000017 00000000  1000        0 2311039 3 0000000067b6c8db 23 5 25 10 52\n\t8: 0000000000000000FFFF0000DFD317AC:9907 0000000000000000FFFF000001D017AC:C124 01 00000000:00000000 00:00000000 00000000  1000        0 2311040 1 00000000230bb017 25 4 30 10 28\n\t9: 0000000000000000FFFF0000DFD317AC:9907 0000000000000000FFFF000001D017AC:C213 01 00000000:00000000 00:00000000 00000000  1000        0 2331501 1 00000000957fcb4a 26 4 30 10 57\n\t10: 0000000000000000FFFF0000DFD317AC:9907 0000000000000000FFFF000001D017AC:C214 01 00000000:00000000 00:00000000 00000000  1000        0 2331500 1 00000000d7f87ceb 25 4 28 10 -1\n`;\n\nconst procSockets =\n\t`ls: cannot access '/proc/8289/fd/255': No such file or directory\n\t\t\tls: cannot access '/proc/8289/fd/3': No such file or directory\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/230/fd/3 -> socket:[21862]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/0 -> socket:[2311043]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/1 -> socket:[2311045]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/19 -> socket:[2311040]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/2 -> socket:[2311047]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/20 -> socket:[2314928]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/22 -> socket:[2307042]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/24 -> socket:[2307051]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/25 -> socket:[2307044]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/27 -> socket:[2307046]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/29 -> socket:[2307053]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/3 -> socket:[2311049]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/30 -> socket:[2307048]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/32 -> socket:[2307055]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/33 -> socket:[2307067]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/34 -> socket:[2307057]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/35 -> socket:[2321483]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/37 -> socket:[2321070]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/41 -> socket:[2321485]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/42 -> socket:[2321074]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/43 -> socket:[2321487]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/44 -> socket:[2329890]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/45 -> socket:[2321489]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2504/fd/46 -> socket:[2334509]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/47 -> socket:[2334510]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/48 -> socket:[2329894]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/49 -> socket:[2334511]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/50 -> socket:[2334515]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/51 -> socket:[2334519]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/52 -> socket:[2334518]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/53 -> socket:[2334521]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/54 -> socket:[2334531]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/55 -> socket:[2334532]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/2504/fd/56 -> socket:[2334533]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2515/fd/3 -> socket:[2311053]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2719/fd/0 -> socket:[2307043]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2719/fd/1 -> socket:[2307045]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2719/fd/2 -> socket:[2307047]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2719/fd/3 -> socket:[2307049]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2725/fd/0 -> socket:[2307052]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2725/fd/1 -> socket:[2307054]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2725/fd/2 -> socket:[2307056]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2725/fd/20 -> socket:[2290617]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2725/fd/3 -> socket:[2307058]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2739/fd/0 -> socket:[2307052]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2739/fd/1 -> socket:[2307054]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2739/fd/2 -> socket:[2307056]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2739/fd/3 -> socket:[2290618]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2795/fd/0 -> socket:[2321484]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2795/fd/1 -> socket:[2321486]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2795/fd/2 -> socket:[2321488]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/2795/fd/3 -> socket:[2321490]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/18 -> socket:[2284465]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/19 -> socket:[2311039]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/23 -> socket:[2331501]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/24 -> socket:[2311052]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/25 -> socket:[2311042]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/26 -> socket:[2331504]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/27 -> socket:[2311051]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/29 -> socket:[2311044]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/314/fd/30 -> socket:[2321909]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 14:59 /proc/314/fd/31 -> socket:[2311046]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:14 /proc/314/fd/33 -> socket:[2311048]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/314/fd/35 -> socket:[2329692]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/314/fd/37 -> socket:[2331506]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:20 /proc/314/fd/40 -> socket:[2331508]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:20 /proc/314/fd/42 -> socket:[2331510]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:17 /proc/314/fd/68 -> socket:[2322083]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4412/fd/20 -> socket:[2335214]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/0 -> socket:[2331505]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/1 -> socket:[2331507]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/2 -> socket:[2331509]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/23 -> socket:[2334514]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/24 -> socket:[2338989]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/26 -> socket:[2338276]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/27 -> socket:[2331500]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/3 -> socket:[2331511]\n\t\t\tlrwx------ 1 alex alex 64 Dec  8 15:22 /proc/4496/fd/31 -> socket:[2338285]`;\n\nconst processes: { pid: number, cwd: string, cmd: string }[] = [\n\t{\n\t\tpid: 230,\n\t\tcwd: '/mnt/c/WINDOWS/system32',\n\t\tcmd: 'dockerserve--addressunix:///home/alex/.docker/run/docker-cli-api.sock',\n\t},\n\t{\n\t\tpid: 2504,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/bootstrap-fork--type=extensionHost--uriTransformerPath=/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/vs/server/uriTransformer.js--useHostProxy=',\n\t},\n\t{\n\t\tpid: 2515,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/bootstrap-fork--type=watcherService'\n\t},\n\t{\n\t\tpid: 2526,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: '/bin/bash'\n\t}, {\n\t\tpid: 2719,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node--max-old-space-size=3072/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/node_modules/typescript/lib/tsserver.js--serverModepartialSemantic--useInferredProjectPerProjectRoot--disableAutomaticTypingAcquisition--cancellationPipeName/tmp/vscode-typescript1000/7cfa7171c0c00aacf1ee/tscancellation-602cd80b954818b6a2f7.tmp*--logVerbosityverbose--logFile/home/alex/.vscode-server-insiders/data/logs/20201208T145954/exthost2/vscode.typescript-language-features/tsserver-log-nxBt2m/tsserver.log--globalPluginstypescript-vscode-sh-plugin--pluginProbeLocations/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/typescript-language-features--localeen--noGetErrOnBackgroundUpdate--validateDefaultNpmLocation'\n\t},\n\t{\n\t\tpid: 2725,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node--max-old-space-size=3072/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/node_modules/typescript/lib/tsserver.js--useInferredProjectPerProjectRoot--enableTelemetry--cancellationPipeName/tmp/vscode-typescript1000/7cfa7171c0c00aacf1ee/tscancellation-04a0b92f880c2fd535ae.tmp*--logVerbosityverbose--logFile/home/alex/.vscode-server-insiders/data/logs/20201208T145954/exthost2/vscode.typescript-language-features/tsserver-log-fqyBrs/tsserver.log--globalPluginstypescript-vscode-sh-plugin--pluginProbeLocations/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/typescript-language-features--localeen--noGetErrOnBackgroundUpdate--validateDefaultNpmLocation'\n\t},\n\t{\n\t\tpid: 2739,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/node_modules/typescript/lib/typingsInstaller.js--globalTypingsCacheLocation/home/alex/.cache/typescript/4.1--enableTelemetry--logFile/home/alex/.vscode-server-insiders/data/logs/20201208T145954/exthost2/vscode.typescript-language-features/tsserver-log-fqyBrs/ti-2725.log--typesMapLocation/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/node_modules/typescript/lib/typesMap.json--validateDefaultNpmLocation'\n\t},\n\t{\n\t\tpid: 2795,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/json-language-features/server/dist/node/jsonServerMain--node-ipc--clientProcessId=2504'\n\t},\n\t{\n\t\tpid: 286,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: 'sh-c\\\"$VSCODE_WSL_EXT_LOCATION/ scripts / wslServer.sh\\\" bc13785d3dd99b4b0e9da9aed17bb79809a50804 insider .vscode-server-insiders 0  '\n\t},\n\t{\n\t\tpid: 287,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: 'sh/mnt/c/Users/alros/.vscode-insiders/extensions/ms-vscode-remote.remote-wsl-0.52.0/scripts/wslServer.shbc13785d3dd99b4b0e9da9aed17bb79809a50804insider.vscode-server-insiders0'\n\t},\n\t{\n\t\tpid: 3058,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: 'npm'\n\t},\n\t{\n\t\tpid: 3070,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: 'sh-ctsc -watch -p ./'\n\t},\n\t{\n\t\tpid: 3071,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: 'node/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample/node_modules/.bin/tsc-watch-p./'\n\t},\n\t{\n\t\tpid: 312,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: 'sh/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/server.sh--port=0--use-host-proxy--enable-remote-auto-shutdown--print-ip-address'\n\t},\n\t{\n\t\tpid: 314,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/vs/server/main.js--port=0--use-host-proxy--enable-remote-auto-shutdown--print-ip-address'\n\t},\n\t{\n\t\tpid: 3172,\n\t\tcwd: '/home/alex',\n\t\tcmd: '/bin/bash'\n\t},\n\t{\n\t\tpid: 3610,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: '/bin/bash'\n\t},\n\t{\n\t\tpid: 4412,\n\t\tcwd: '/home/alex/repos/Microsoft/vscode-extension-samples/helloworld-sample',\n\t\tcmd: 'http-server'\n\t},\n\t{\n\t\tpid: 4496,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node--inspect-brk=0.0.0.0:6899/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/bootstrap-fork--type=extensionHost--uriTransformerPath=/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/out/vs/server/uriTransformer.js--useHostProxy='\n\t},\n\t{\n\t\tpid: 4507,\n\t\tcwd: '/mnt/c/Users/alros/AppData/Local/Programs/Microsoft VS Code Insiders',\n\t\tcmd: '/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/node/home/alex/.vscode-server-insiders/bin/bc13785d3dd99b4b0e9da9aed17bb79809a50804/extensions/ms-vscode.js-debug/src/hash.bundle.js'\n\t}\n];\n\nconst psStdOut =\n\t`4 S root         1     0  0  80   0 -   596 -       1440   2 14:41 ?        00:00:00 /bin/sh -c echo Container started ; trap \"exit 0\" 15; while sleep 1 & wait $!; do :; done\n4 S root        14     0  0  80   0 -   596 -        764   4 14:41 ?        00:00:00 /bin/sh\n4 S root        40     0  0  80   0 -   596 -        700   4 14:41 ?        00:00:00 /bin/sh\n4 S root       513   380  0  80   0 -  2476 -       3404   1 14:41 pts/1    00:00:00 sudo npx http-server -p 5000\n4 S root       514   513  0  80   0 - 165439 -     41380   5 14:41 pts/1    00:00:00 http-server\n0 S root      1052     1  0  80   0 -   573 -        752   5 14:43 ?        00:00:00 sleep 1\n0 S node      1056   329  0  80   0 -   596 do_wai   764  10 14:43 ?        00:00:00 /bin/sh -c ps -F -A -l | grep root\n0 S node      1058  1056  0  80   0 -   770 pipe_w   888   9 14:43 ?        00:00:00 grep root`;\n\nsuite('ExtHostTunnelService', () => {\n\ttest('getSockets', function () {\n\t\tconst result = getSockets(procSockets);\n\t\tassert.strictEqual(Object.keys(result).length, 75);\n\t\t// 4412 is the pid of the http-server in the test data\n\t\tassert.notStrictEqual(Object.keys(result).find(key => result[key].pid === 4412), undefined);\n\t});\n\n\ttest('loadConnectionTable', function () {\n\t\tconst result = loadConnectionTable(tcp);\n\t\tassert.strictEqual(result.length, 6);\n\t\tassert.deepStrictEqual(result[0], {\n\t\t\t10: '1',\n\t\t\t11: '0000000010173312',\n\t\t\t12: '100',\n\t\t\t13: '0',\n\t\t\t14: '0',\n\t\t\t15: '10',\n\t\t\t16: '0',\n\t\t\tinode: '2335214',\n\t\t\tlocal_address: '00000000:0BBA',\n\t\t\trem_address: '00000000:0000',\n\t\t\tretrnsmt: '00000000',\n\t\t\tsl: '0:',\n\t\t\tst: '0A',\n\t\t\ttimeout: '0',\n\t\t\ttr: '00:00000000',\n\t\t\ttx_queue: '00000000:00000000',\n\t\t\tuid: '1000'\n\t\t});\n\t});\n\n\ttest('loadListeningPorts', function () {\n\t\tconst result = loadListeningPorts(tcp, tcp6);\n\t\t// There should be 7 based on the input data. One of them should be 3002.\n\t\tassert.strictEqual(result.length, 7);\n\t\tassert.notStrictEqual(result.find(value => value.port === 3002), undefined);\n\t});\n\n\ttest('tryFindRootPorts', function () {\n\t\tconst rootProcesses = getRootProcesses(psStdOut);\n\t\tassert.strictEqual(rootProcesses.length, 6);\n\t\tconst result = tryFindRootPorts([{ socket: 1000, ip: '127.0.0.1', port: 5000 }], psStdOut, new Map());\n\t\tassert.strictEqual(result.size, 1);\n\t\tassert.strictEqual(result.get(5000)?.pid, 514);\n\t});\n\n\ttest('findPorts', async function () {\n\t\tconst result = await findPorts(loadListeningPorts(tcp, tcp6), getSockets(procSockets), processes);\n\t\tassert.strictEqual(result.length, 1);\n\t\tassert.strictEqual(result[0].host, '0.0.0.0');\n\t\tassert.strictEqual(result[0].port, 3002);\n\t\tassert.strictEqual(result[0].detail, 'http-server');\n\t});\n});\n"]}