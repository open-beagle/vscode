{"version":3,"file":"mainThreadDocumentsAndEditors.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/test/browser/api/mainThreadDocumentsAndEditors.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { MainThreadDocumentsAndEditors } from 'vs/workbench/api/browser/mainThreadDocumentsAndEditors';\nimport { SingleProxyRPCProtocol } from './testRPCProtocol';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { ModelServiceImpl } from 'vs/editor/common/services/modelServiceImpl';\nimport { TestCodeEditorService } from 'vs/editor/test/browser/editorTestServices';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { ExtHostDocumentsAndEditorsShape, IDocumentsAndEditorsDelta } from 'vs/workbench/api/common/extHost.protocol';\nimport { createTestCodeEditor, ITestCodeEditor } from 'vs/editor/test/browser/testCodeEditor';\nimport { mock } from 'vs/base/test/common/mock';\nimport { TestEditorService, TestEditorGroupsService, TestEnvironmentService, TestPathService } from 'vs/workbench/test/browser/workbenchTestServices';\nimport { Event } from 'vs/base/common/event';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IPanelService } from 'vs/workbench/services/panel/common/panelService';\nimport { TestThemeService } from 'vs/platform/theme/test/common/testThemeService';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { UndoRedoService } from 'vs/platform/undoRedo/common/undoRedoService';\nimport { TestDialogService } from 'vs/platform/dialogs/test/common/testDialogService';\nimport { TestNotificationService } from 'vs/platform/notification/test/common/testNotificationService';\nimport { TestTextResourcePropertiesService, TestWorkingCopyFileService } from 'vs/workbench/test/common/workbenchTestServices';\nimport { UriIdentityService } from 'vs/workbench/services/uriIdentity/common/uriIdentityService';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\n\nsuite('MainThreadDocumentsAndEditors', () => {\n\n\tlet modelService: ModelServiceImpl;\n\tlet codeEditorService: TestCodeEditorService;\n\tlet textFileService: ITextFileService;\n\tlet deltas: IDocumentsAndEditorsDelta[] = [];\n\tconst hugeModelString = new Array(2 + (50 * 1024 * 1024)).join('-');\n\n\tfunction myCreateTestCodeEditor(model: ITextModel | undefined): ITestCodeEditor {\n\t\treturn createTestCodeEditor({\n\t\t\tmodel: model,\n\t\t\thasTextFocus: false,\n\t\t\tserviceCollection: new ServiceCollection(\n\t\t\t\t[ICodeEditorService, codeEditorService]\n\t\t\t)\n\t\t});\n\t}\n\n\tsetup(() => {\n\t\tdeltas.length = 0;\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('editor', { 'detectIndentation': false });\n\t\tconst dialogService = new TestDialogService();\n\t\tconst notificationService = new TestNotificationService();\n\t\tconst undoRedoService = new UndoRedoService(dialogService, notificationService);\n\t\tmodelService = new ModelServiceImpl(configService, new TestTextResourcePropertiesService(configService), new TestThemeService(), new NullLogService(), undoRedoService);\n\t\tcodeEditorService = new TestCodeEditorService();\n\t\ttextFileService = new class extends mock<ITextFileService>() {\n\t\t\toverride isDirty() { return false; }\n\t\t\toverride files = <any>{\n\t\t\t\tonDidSave: Event.None,\n\t\t\t\tonDidRevert: Event.None,\n\t\t\t\tonDidChangeDirty: Event.None\n\t\t\t};\n\t\t};\n\t\tconst workbenchEditorService = new TestEditorService();\n\t\tconst editorGroupService = new TestEditorGroupsService();\n\n\t\tconst fileService = new class extends mock<IFileService>() {\n\t\t\toverride onDidRunOperation = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderCapabilities = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderRegistrations = Event.None;\n\t\t};\n\n\t\tnew MainThreadDocumentsAndEditors(\n\t\t\tSingleProxyRPCProtocol(new class extends mock<ExtHostDocumentsAndEditorsShape>() {\n\t\t\t\toverride $acceptDocumentsAndEditorsDelta(delta: IDocumentsAndEditorsDelta) { deltas.push(delta); }\n\t\t\t}),\n\t\t\tmodelService,\n\t\t\ttextFileService,\n\t\t\tworkbenchEditorService,\n\t\t\tcodeEditorService,\n\t\t\tfileService,\n\t\t\tnull!,\n\t\t\teditorGroupService,\n\t\t\tnull!,\n\t\t\tnew class extends mock<IPanelService>() implements IPanelService {\n\t\t\t\toverride onDidPanelOpen = Event.None;\n\t\t\t\toverride onDidPanelClose = Event.None;\n\t\t\t\toverride getActivePanel() {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestWorkingCopyFileService(),\n\t\t\tnew UriIdentityService(fileService),\n\t\t\tnew class extends mock<IClipboardService>() {\n\t\t\t\toverride readText() {\n\t\t\t\t\treturn Promise.resolve('clipboard_contents');\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew TestPathService()\n\t\t);\n\t});\n\n\n\ttest('Model#add', () => {\n\t\tdeltas.length = 0;\n\n\t\tmodelService.createModel('farboo', null);\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\n\t\tassert.strictEqual(delta.addedDocuments!.length, 1);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t\tassert.strictEqual(delta.newActiveEditor, undefined);\n\t});\n\n\ttest('ignore huge model', function () {\n\t\tthis.timeout(1000 * 60); // increase timeout for this one test\n\n\t\tconst model = modelService.createModel(hugeModelString, null);\n\t\tassert.ok(model.isTooLargeForSyncing());\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t});\n\n\ttest('ignore simple widget model', function () {\n\t\tthis.timeout(1000 * 60); // increase timeout for this one test\n\n\t\tconst model = modelService.createModel('test', null, undefined, true);\n\t\tassert.ok(model.isForSimpleWidget);\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t});\n\n\ttest('ignore huge model from editor', function () {\n\t\tthis.timeout(1000 * 60); // increase timeout for this one test\n\n\t\tconst model = modelService.createModel(hugeModelString, null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tdeltas.length = 0;\n\t\tassert.strictEqual(deltas.length, 0);\n\n\t\teditor.dispose();\n\t});\n\n\ttest('ignore editor w/o model', () => {\n\t\tconst editor = myCreateTestCodeEditor(undefined);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\n\t\teditor.dispose();\n\t});\n\n\ttest('editor with model', () => {\n\t\tdeltas.length = 0;\n\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\tassert.strictEqual(deltas.length, 2);\n\t\tconst [first, second] = deltas;\n\t\tassert.strictEqual(first.addedDocuments!.length, 1);\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\t\tassert.strictEqual(first.removedEditors, undefined);\n\n\t\tassert.strictEqual(second.addedEditors!.length, 1);\n\t\tassert.strictEqual(second.addedDocuments, undefined);\n\t\tassert.strictEqual(second.removedDocuments, undefined);\n\t\tassert.strictEqual(second.removedEditors, undefined);\n\t\tassert.strictEqual(second.newActiveEditor, undefined);\n\n\t\teditor.dispose();\n\t});\n\n\ttest('editor with dispos-ed/-ing model', () => {\n\t\tmodelService.createModel('foobar', null);\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\t// ignore things until now\n\t\tdeltas.length = 0;\n\n\t\tmodelService.destroyModel(model.uri);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [first] = deltas;\n\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedEditors!.length, 1);\n\t\tassert.strictEqual(first.removedDocuments!.length, 1);\n\t\tassert.strictEqual(first.addedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\n\t\teditor.dispose();\n\t});\n});\n"]}