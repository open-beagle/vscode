{"version":3,"file":"extHostNotebookConcatDocument.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/workbench/test/browser/api/extHostNotebookConcatDocument.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { TestRPCProtocol } from 'vs/workbench/test/browser/api/testRPCProtocol';\nimport { ExtHostDocuments } from 'vs/workbench/api/common/extHostDocuments';\nimport { ExtHostDocumentsAndEditors } from 'vs/workbench/api/common/extHostDocumentsAndEditors';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { ExtHostNotebookConcatDocument } from 'vs/workbench/api/common/extHostNotebookConcatDocument';\nimport { ExtHostNotebookController } from 'vs/workbench/api/common/extHostNotebook';\nimport { ExtHostNotebookDocument } from 'vs/workbench/api/common/extHostNotebookDocument';\nimport { URI } from 'vs/base/common/uri';\nimport { CellKind, CellUri, NotebookCellsChangeType } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { Position, Location, Range } from 'vs/workbench/api/common/extHostTypes';\nimport { ExtHostCommands } from 'vs/workbench/api/common/extHostCommands';\nimport { nullExtensionDescription } from 'vs/workbench/services/extensions/common/extensions';\nimport * as vscode from 'vscode';\nimport { mock } from 'vs/workbench/test/common/workbenchTestServices';\nimport { MainContext, MainThreadCommandsShape, MainThreadNotebookShape } from 'vs/workbench/api/common/extHost.protocol';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { IExtensionStoragePaths } from 'vs/workbench/api/common/extHostStoragePaths';\nimport { generateUuid } from 'vs/base/common/uuid';\n\nsuite('NotebookConcatDocument', function () {\n\n\tlet rpcProtocol: TestRPCProtocol;\n\tlet notebook: ExtHostNotebookDocument;\n\tlet extHostDocumentsAndEditors: ExtHostDocumentsAndEditors;\n\tlet extHostDocuments: ExtHostDocuments;\n\tlet extHostNotebooks: ExtHostNotebookController;\n\tconst notebookUri = URI.parse('test:///notebook.file');\n\tconst disposables = new DisposableStore();\n\n\tsetup(async function () {\n\t\tdisposables.clear();\n\n\t\trpcProtocol = new TestRPCProtocol();\n\t\trpcProtocol.set(MainContext.MainThreadCommands, new class extends mock<MainThreadCommandsShape>() {\n\t\t\toverride $registerCommand() { }\n\t\t});\n\t\trpcProtocol.set(MainContext.MainThreadNotebook, new class extends mock<MainThreadNotebookShape>() {\n\t\t\toverride async $registerNotebookProvider() { }\n\t\t\toverride async $unregisterNotebookProvider() { }\n\t\t});\n\t\textHostDocumentsAndEditors = new ExtHostDocumentsAndEditors(rpcProtocol, new NullLogService());\n\t\textHostDocuments = new ExtHostDocuments(rpcProtocol, extHostDocumentsAndEditors);\n\t\tconst extHostStoragePaths = new class extends mock<IExtensionStoragePaths>() {\n\t\t\toverride workspaceValue() {\n\t\t\t\treturn URI.from({ scheme: 'test', path: generateUuid() });\n\t\t\t}\n\t\t};\n\t\textHostNotebooks = new ExtHostNotebookController(rpcProtocol, new ExtHostCommands(rpcProtocol, new NullLogService()), extHostDocumentsAndEditors, extHostDocuments, new NullLogService(), extHostStoragePaths);\n\t\tlet reg = extHostNotebooks.registerNotebookContentProvider(nullExtensionDescription, 'test', new class extends mock<vscode.NotebookContentProvider>() {\n\t\t\t// async openNotebook() { }\n\t\t});\n\t\textHostNotebooks.$acceptDocumentAndEditorsDelta({\n\t\t\taddedDocuments: [{\n\t\t\t\turi: notebookUri,\n\t\t\t\tviewType: 'test',\n\t\t\t\tcells: [{\n\t\t\t\t\thandle: 0,\n\t\t\t\t\turi: CellUri.generate(notebookUri, 0),\n\t\t\t\t\tsource: ['### Heading'],\n\t\t\t\t\teol: '\\n',\n\t\t\t\t\tlanguage: 'markdown',\n\t\t\t\t\tcellKind: CellKind.Markdown,\n\t\t\t\t\toutputs: [],\n\t\t\t\t}],\n\t\t\t\tversionId: 0\n\t\t\t}],\n\t\t\taddedEditors: [{\n\t\t\t\tdocumentUri: notebookUri,\n\t\t\t\tid: '_notebook_editor_0',\n\t\t\t\tselections: [{ start: 0, end: 1 }],\n\t\t\t\tvisibleRanges: []\n\t\t\t}]\n\t\t});\n\t\textHostNotebooks.$acceptDocumentAndEditorsDelta({ newActiveEditor: '_notebook_editor_0' });\n\n\t\tnotebook = extHostNotebooks.notebookDocuments[0]!;\n\n\t\tdisposables.add(reg);\n\t\tdisposables.add(notebook);\n\t\tdisposables.add(extHostDocuments);\n\t});\n\n\ttest('empty', function () {\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassert.strictEqual(doc.getText(), '');\n\t\tassert.strictEqual(doc.version, 0);\n\n\t\t// assert.strictEqual(doc.locationAt(new Position(0, 0)), undefined);\n\t\t// assert.strictEqual(doc.positionAt(SOME_FAKE_LOCATION?), undefined);\n\t});\n\n\n\tfunction assertLocation(doc: vscode.NotebookConcatTextDocument, pos: Position, expected: Location, reverse = true) {\n\t\tconst actual = doc.locationAt(pos);\n\t\tassert.strictEqual(actual.uri.toString(), expected.uri.toString());\n\t\tassert.strictEqual(actual.range.isEqual(expected.range), true);\n\n\t\tif (reverse) {\n\t\t\t// reverse - offset\n\t\t\tconst offset = doc.offsetAt(pos);\n\t\t\tassert.strictEqual(doc.positionAt(offset).isEqual(pos), true);\n\n\t\t\t// reverse - pos\n\t\t\tconst actualPosition = doc.positionAt(actual);\n\t\t\tassert.strictEqual(actualPosition.isEqual(pos), true);\n\t\t}\n\t}\n\n\tfunction assertLines(doc: vscode.NotebookConcatTextDocument, ...lines: string[]) {\n\t\tlet actual = doc.getText().split(/\\r\\n|\\n|\\r/);\n\t\tassert.deepStrictEqual(actual, lines);\n\t}\n\n\ttest('contains', function () {\n\n\t\tconst cellUri1 = CellUri.generate(notebook.uri, 1);\n\t\tconst cellUri2 = CellUri.generate(notebook.uri, 2);\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [{\n\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\thandle: 1,\n\t\t\t\t\turi: cellUri1,\n\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\teol: '\\n',\n\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\toutputs: [],\n\t\t\t\t}, {\n\t\t\t\t\thandle: 2,\n\t\t\t\t\turi: cellUri2,\n\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\teol: '\\n',\n\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\toutputs: [],\n\t\t\t\t}]]\n\t\t\t\t]\n\t\t\t}]\n\t\t}, false);\n\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\n\t\tassert.strictEqual(doc.contains(cellUri1), true);\n\t\tassert.strictEqual(doc.contains(cellUri2), true);\n\t\tassert.strictEqual(doc.contains(URI.parse('some://miss/path')), false);\n\t});\n\n\ttest('location, position mapping', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\n\t\tassertLocation(doc, new Position(0, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(0, 0)));\n\t\tassertLocation(doc, new Position(4, 0), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 0)));\n\t\tassertLocation(doc, new Position(4, 3), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 3)));\n\t\tassertLocation(doc, new Position(5, 11), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(2, 11)));\n\t\tassertLocation(doc, new Position(5, 12), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(2, 11)), false); // don't check identity because position will be clamped\n\t});\n\n\n\ttest('location, position mapping, cell changes', function () {\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\n\t\t// UPDATE 1\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 1);\n\t\tassert.strictEqual(doc.version, 1);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!');\n\n\t\tassertLocation(doc, new Position(0, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(0, 0)));\n\t\tassertLocation(doc, new Position(2, 2), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 2)));\n\t\tassertLocation(doc, new Position(4, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 12)), false); // clamped\n\n\n\t\t// UPDATE 2\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[1, 0, [{\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2);\n\t\tassert.strictEqual(doc.version, 2);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\t\tassertLocation(doc, new Position(0, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(0, 0)));\n\t\tassertLocation(doc, new Position(4, 0), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 0)));\n\t\tassertLocation(doc, new Position(4, 3), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 3)));\n\t\tassertLocation(doc, new Position(5, 11), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(2, 11)));\n\t\tassertLocation(doc, new Position(5, 12), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(2, 11)), false); // don't check identity because position will be clamped\n\n\t\t// UPDATE 3 (remove cell #2 again)\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[1, 1, []]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 1);\n\t\tassert.strictEqual(doc.version, 3);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!');\n\t\tassertLocation(doc, new Position(0, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(0, 0)));\n\t\tassertLocation(doc, new Position(2, 2), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 2)));\n\t\tassertLocation(doc, new Position(4, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 12)), false); // clamped\n\t});\n\n\ttest('location, position mapping, cell-document changes', function () {\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\n\t\t// UPDATE 1\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2);\n\t\tassert.strictEqual(doc.version, 1);\n\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\t\tassertLocation(doc, new Position(0, 0), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(0, 0)));\n\t\tassertLocation(doc, new Position(2, 2), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 2)));\n\t\tassertLocation(doc, new Position(2, 12), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 12)));\n\t\tassertLocation(doc, new Position(4, 0), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 0)));\n\t\tassertLocation(doc, new Position(4, 3), new Location(notebook.apiNotebook.cellAt(1).document.uri, new Position(1, 3)));\n\n\t\t// offset math\n\t\tlet cell1End = doc.offsetAt(new Position(2, 12));\n\t\tassert.strictEqual(doc.positionAt(cell1End).isEqual(new Position(2, 12)), true);\n\n\t\textHostDocuments.$acceptModelChanged(notebook.apiNotebook.cellAt(0).document.uri, {\n\t\t\tversionId: 0,\n\t\t\teol: '\\n',\n\t\t\tchanges: [{\n\t\t\t\trange: { startLineNumber: 3, startColumn: 1, endLineNumber: 3, endColumn: 6 },\n\t\t\t\trangeLength: 6,\n\t\t\t\trangeOffset: 12,\n\t\t\t\ttext: 'Hi'\n\t\t\t}]\n\t\t}, false);\n\t\tassertLines(doc, 'Hello', 'World', 'Hi World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\t\tassertLocation(doc, new Position(2, 12), new Location(notebook.apiNotebook.cellAt(0).document.uri, new Position(2, 9)), false);\n\n\t\tassert.strictEqual(doc.positionAt(cell1End).isEqual(new Position(3, 2)), true);\n\n\t});\n\n\ttest('selector', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['fooLang-document'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'fooLang',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['barLang-document'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'barLang',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tconst mixedDoc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tconst fooLangDoc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, 'fooLang');\n\t\tconst barLangDoc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, 'barLang');\n\n\t\tassertLines(mixedDoc, 'fooLang-document', 'barLang-document');\n\t\tassertLines(fooLangDoc, 'fooLang-document');\n\t\tassertLines(barLangDoc, 'barLang-document');\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[2, 0, [{\n\t\t\t\t\t\thandle: 3,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 3),\n\t\t\t\t\t\tsource: ['barLang-document2'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'barLang',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassertLines(mixedDoc, 'fooLang-document', 'barLang-document', 'barLang-document2');\n\t\tassertLines(fooLangDoc, 'fooLang-document');\n\t\tassertLines(barLangDoc, 'barLang-document', 'barLang-document2');\n\t});\n\n\tfunction assertOffsetAtPosition(doc: vscode.NotebookConcatTextDocument, offset: number, expected: { line: number, character: number }, reverse = true) {\n\t\tconst actual = doc.positionAt(offset);\n\n\t\tassert.strictEqual(actual.line, expected.line);\n\t\tassert.strictEqual(actual.character, expected.character);\n\n\t\tif (reverse) {\n\t\t\tconst actualOffset = doc.offsetAt(actual);\n\t\t\tassert.strictEqual(actualOffset, offset);\n\t\t}\n\t}\n\n\n\ttest('offsetAt(position) <-> positionAt(offset)', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\n\t\tassertOffsetAtPosition(doc, 0, { line: 0, character: 0 });\n\t\tassertOffsetAtPosition(doc, 1, { line: 0, character: 1 });\n\t\tassertOffsetAtPosition(doc, 9, { line: 1, character: 3 });\n\t\tassertOffsetAtPosition(doc, 32, { line: 4, character: 1 });\n\t\tassertOffsetAtPosition(doc, 47, { line: 5, character: 11 });\n\t});\n\n\n\tfunction assertLocationAtPosition(doc: vscode.NotebookConcatTextDocument, pos: { line: number, character: number }, expected: { uri: URI, line: number, character: number }, reverse = true) {\n\n\t\tconst actual = doc.locationAt(new Position(pos.line, pos.character));\n\t\tassert.strictEqual(actual.uri.toString(), expected.uri.toString());\n\t\tassert.strictEqual(actual.range.start.line, expected.line);\n\t\tassert.strictEqual(actual.range.end.line, expected.line);\n\t\tassert.strictEqual(actual.range.start.character, expected.character);\n\t\tassert.strictEqual(actual.range.end.character, expected.character);\n\n\t\tif (reverse) {\n\t\t\tconst actualPos = doc.positionAt(actual);\n\t\t\tassert.strictEqual(actualPos.line, pos.line);\n\t\t\tassert.strictEqual(actualPos.character, pos.character);\n\t\t}\n\t}\n\n\ttest('locationAt(position) <-> positionAt(location)', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\n\t\tassertLocationAtPosition(doc, { line: 0, character: 0 }, { uri: notebook.apiNotebook.cellAt(0).document.uri, line: 0, character: 0 });\n\t\tassertLocationAtPosition(doc, { line: 2, character: 0 }, { uri: notebook.apiNotebook.cellAt(0).document.uri, line: 2, character: 0 });\n\t\tassertLocationAtPosition(doc, { line: 2, character: 12 }, { uri: notebook.apiNotebook.cellAt(0).document.uri, line: 2, character: 12 });\n\t\tassertLocationAtPosition(doc, { line: 3, character: 0 }, { uri: notebook.apiNotebook.cellAt(1).document.uri, line: 0, character: 0 });\n\t\tassertLocationAtPosition(doc, { line: 5, character: 0 }, { uri: notebook.apiNotebook.cellAt(1).document.uri, line: 2, character: 0 });\n\t\tassertLocationAtPosition(doc, { line: 5, character: 11 }, { uri: notebook.apiNotebook.cellAt(1).document.uri, line: 2, character: 11 });\n\t});\n\n\ttest('getText(range)', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\n\t\tassert.strictEqual(doc.getText(new Range(0, 0, 0, 0)), '');\n\t\tassert.strictEqual(doc.getText(new Range(0, 0, 1, 0)), 'Hello\\n');\n\t\tassert.strictEqual(doc.getText(new Range(2, 0, 4, 0)), 'Hello World!\\nHallo\\n');\n\t});\n\n\ttest('validateRange/Position', function () {\n\n\t\textHostNotebooks.$acceptModelChanged(notebookUri, {\n\t\t\tversionId: notebook.apiNotebook.version + 1,\n\t\t\trawEvents: [\n\t\t\t\t{\n\t\t\t\t\tkind: NotebookCellsChangeType.ModelChange,\n\t\t\t\t\tchanges: [[0, 0, [{\n\t\t\t\t\t\thandle: 1,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 1),\n\t\t\t\t\t\tsource: ['Hello', 'World', 'Hello World!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}, {\n\t\t\t\t\t\thandle: 2,\n\t\t\t\t\t\turi: CellUri.generate(notebook.uri, 2),\n\t\t\t\t\t\tsource: ['Hallo', 'Welt', 'Hallo Welt!'],\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t\tlanguage: 'test',\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t}]]]\n\t\t\t\t}\n\t\t\t]\n\t\t}, false);\n\n\t\tassert.strictEqual(notebook.apiNotebook.cellCount, 1 + 2); // markdown and code\n\n\t\tlet doc = new ExtHostNotebookConcatDocument(extHostNotebooks, extHostDocuments, notebook.apiNotebook, undefined);\n\t\tassertLines(doc, 'Hello', 'World', 'Hello World!', 'Hallo', 'Welt', 'Hallo Welt!');\n\n\n\t\tfunction assertPosition(actual: vscode.Position, expectedLine: number, expectedCh: number) {\n\t\t\tassert.strictEqual(actual.line, expectedLine);\n\t\t\tassert.strictEqual(actual.character, expectedCh);\n\t\t}\n\n\n\t\t// \"fixed\"\n\t\tassertPosition(doc.validatePosition(new Position(0, 1000)), 0, 5);\n\t\tassertPosition(doc.validatePosition(new Position(2, 1000)), 2, 12);\n\t\tassertPosition(doc.validatePosition(new Position(5, 1000)), 5, 11);\n\t\tassertPosition(doc.validatePosition(new Position(5000, 1000)), 5, 11);\n\n\t\t// \"good\"\n\t\tassertPosition(doc.validatePosition(new Position(0, 1)), 0, 1);\n\t\tassertPosition(doc.validatePosition(new Position(0, 5)), 0, 5);\n\t\tassertPosition(doc.validatePosition(new Position(2, 8)), 2, 8);\n\t\tassertPosition(doc.validatePosition(new Position(2, 12)), 2, 12);\n\t\tassertPosition(doc.validatePosition(new Position(5, 11)), 5, 11);\n\n\t});\n});\n"]}