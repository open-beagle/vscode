{"version":3,"file":"remoteAuthorityResolver.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/remote/common/remoteAuthorityResolver.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAKnF,QAAA,+BAA+B,GAAG,CAAA,GAAA,+BAAe,CAAA,CAAkC,gCAAgC,CAAC,CAAC;IASlI,IAAY,iBAIX;IAJD,WAAY,iBAAiB;QAC5B,+DAAW,CAAA;QACX,yEAAgB,CAAA;QAChB,6EAAkB,CAAA;IACnB,CAAC,EAJW,iBAAiB,GAAjB,yBAAiB,KAAjB,yBAAiB,QAI5B;IA2BD,IAAY,gCAKX;IALD,WAAY,gCAAgC;QAC3C,uDAAmB,CAAA;QACnB,iEAA6B,CAAA;QAC7B,uFAAmD,CAAA;QACnD,uEAAmC,CAAA;IACpC,CAAC,EALW,gCAAgC,GAAhC,wCAAgC,KAAhC,wCAAgC,QAK3C;IAED,MAAa,4BAA6B,SAAQ,KAAK;QAoBtD,YAAY,OAAgB,EAAE,OAAyC,gCAAgC,CAAC,OAAO,EAAE,MAAY;YAC5H,KAAK,CAAC,OAAO,CAAC,CAAC;YAEf,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YAEtB,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,KAAK,gCAAgC,CAAC,YAAY,CAAC,IAAI,MAAM,KAAK,IAAI,CAAC;YAE7F,4EAA4E;YAC5E,+IAA+I;YAC/I,IAAI,OAAa,MAAO,CAAC,cAAc,KAAK,UAAU,EAAE;gBACjD,MAAO,CAAC,cAAc,CAAC,IAAI,EAAE,4BAA4B,CAAC,SAAS,CAAC,CAAC;aAC3E;QACF,CAAC;QAhCM,MAAM,CAAC,yBAAyB,CAAC,GAAQ;YAC/C,OAAO,CAAC,GAAG,YAAY,4BAA4B,CAAC,IAAI,GAAG,CAAC,KAAK,KAAK,gCAAgC,CAAC,uBAAuB,CAAC;QAChI,CAAC;QAEM,MAAM,CAAC,iBAAiB,CAAC,GAAQ;YACvC,OAAO,CAAC,GAAG,YAAY,4BAA4B,CAAC,IAAI,GAAG,CAAC,KAAK,KAAK,gCAAgC,CAAC,eAAe,CAAC;QACxH,CAAC;QAEM,MAAM,CAAC,SAAS,CAAC,GAAQ;YAC/B,OAAO,CAAC,GAAG,YAAY,4BAA4B,CAAC,IAAI,GAAG,CAAC,SAAS,CAAC;QACvE,CAAC;KAuBD;IAnCD,oEAmCC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { Event } from 'vs/base/common/event';\n\nexport const IRemoteAuthorityResolverService = createDecorator<IRemoteAuthorityResolverService>('remoteAuthorityResolverService');\n\nexport interface ResolvedAuthority {\n\treadonly authority: string;\n\treadonly host: string;\n\treadonly port: number;\n\treadonly connectionToken: string | undefined;\n}\n\nexport enum RemoteTrustOption {\n\tUnknown = 0,\n\tDisableTrust = 1,\n\tMachineTrusted = 2\n}\n\nexport interface ResolvedOptions {\n\treadonly extensionHostEnv?: { [key: string]: string | null };\n\treadonly trust?: RemoteTrustOption;\n}\n\nexport interface TunnelDescription {\n\tremoteAddress: { port: number, host: string };\n\tlocalAddress: { port: number, host: string } | string;\n}\nexport interface TunnelInformation {\n\tenvironmentTunnels?: TunnelDescription[];\n}\n\nexport interface ResolverResult {\n\tauthority: ResolvedAuthority;\n\toptions?: ResolvedOptions;\n\ttunnelInformation?: TunnelInformation;\n}\n\nexport interface IRemoteConnectionData {\n\thost: string;\n\tport: number;\n\tconnectionToken: string | undefined;\n}\n\nexport enum RemoteAuthorityResolverErrorCode {\n\tUnknown = 'Unknown',\n\tNotAvailable = 'NotAvailable',\n\tTemporarilyNotAvailable = 'TemporarilyNotAvailable',\n\tNoResolverFound = 'NoResolverFound'\n}\n\nexport class RemoteAuthorityResolverError extends Error {\n\n\tpublic static isTemporarilyNotAvailable(err: any): boolean {\n\t\treturn (err instanceof RemoteAuthorityResolverError) && err._code === RemoteAuthorityResolverErrorCode.TemporarilyNotAvailable;\n\t}\n\n\tpublic static isNoResolverFound(err: any): err is RemoteAuthorityResolverError {\n\t\treturn (err instanceof RemoteAuthorityResolverError) && err._code === RemoteAuthorityResolverErrorCode.NoResolverFound;\n\t}\n\n\tpublic static isHandled(err: any): boolean {\n\t\treturn (err instanceof RemoteAuthorityResolverError) && err.isHandled;\n\t}\n\n\tpublic readonly _message: string | undefined;\n\tpublic readonly _code: RemoteAuthorityResolverErrorCode;\n\tpublic readonly _detail: any;\n\n\tpublic isHandled: boolean;\n\n\tconstructor(message?: string, code: RemoteAuthorityResolverErrorCode = RemoteAuthorityResolverErrorCode.Unknown, detail?: any) {\n\t\tsuper(message);\n\n\t\tthis._message = message;\n\t\tthis._code = code;\n\t\tthis._detail = detail;\n\n\t\tthis.isHandled = (code === RemoteAuthorityResolverErrorCode.NotAvailable) && detail === true;\n\n\t\t// workaround when extending builtin objects and when compiling to ES5, see:\n\t\t// https://github.com/microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\t\tif (typeof (<any>Object).setPrototypeOf === 'function') {\n\t\t\t(<any>Object).setPrototypeOf(this, RemoteAuthorityResolverError.prototype);\n\t\t}\n\t}\n}\n\nexport interface IRemoteAuthorityResolverService {\n\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeConnectionData: Event<void>;\n\n\tresolveAuthority(authority: string): Promise<ResolverResult>;\n\tgetConnectionData(authority: string): IRemoteConnectionData | null;\n\n\t_clearResolvedAuthority(authority: string): void;\n\t_setResolvedAuthority(resolvedAuthority: ResolvedAuthority, resolvedOptions?: ResolvedOptions): void;\n\t_setResolvedAuthorityError(authority: string, err: any): void;\n\t_setAuthorityConnectionToken(authority: string, connectionToken: string): void;\n}\n"]}