{"version":3,"file":"fileService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/files/test/browser/fileService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { FileService } from 'vs/platform/files/common/fileService';\nimport { URI } from 'vs/base/common/uri';\nimport { IFileSystemProviderRegistrationEvent, FileSystemProviderCapabilities, IFileSystemProviderCapabilitiesChangeEvent, FileOpenOptions, FileReadStreamOptions, IStat, FileType } from 'vs/platform/files/common/files';\nimport { IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { timeout } from 'vs/base/common/async';\nimport { NullFileSystemProvider } from 'vs/platform/files/test/common/nullFileSystemProvider';\nimport { consumeStream, newWriteableStream, ReadableStreamEvents } from 'vs/base/common/stream';\nimport { CancellationToken } from 'vs/base/common/cancellation';\n\nsuite('File Service', () => {\n\n\ttest('provider registration', async () => {\n\t\tconst service = new FileService(new NullLogService());\n\t\tconst resource = URI.parse('test://foo/bar');\n\t\tconst provider = new NullFileSystemProvider();\n\n\t\tassert.strictEqual(service.canHandleResource(resource), false);\n\t\tassert.strictEqual(service.getProvider(resource.scheme), undefined);\n\n\t\tconst registrations: IFileSystemProviderRegistrationEvent[] = [];\n\t\tservice.onDidChangeFileSystemProviderRegistrations(e => {\n\t\t\tregistrations.push(e);\n\t\t});\n\n\t\tconst capabilityChanges: IFileSystemProviderCapabilitiesChangeEvent[] = [];\n\t\tservice.onDidChangeFileSystemProviderCapabilities(e => {\n\t\t\tcapabilityChanges.push(e);\n\t\t});\n\n\t\tlet registrationDisposable: IDisposable | undefined;\n\t\tlet callCount = 0;\n\t\tservice.onWillActivateFileSystemProvider(e => {\n\t\t\tcallCount++;\n\n\t\t\tif (e.scheme === 'test' && callCount === 1) {\n\t\t\t\te.join(new Promise(resolve => {\n\t\t\t\t\tregistrationDisposable = service.registerProvider('test', provider);\n\n\t\t\t\t\tresolve();\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\n\t\tawait service.activateProvider('test');\n\n\t\tassert.strictEqual(service.canHandleResource(resource), true);\n\t\tassert.strictEqual(service.getProvider(resource.scheme), provider);\n\n\t\tassert.strictEqual(registrations.length, 1);\n\t\tassert.strictEqual(registrations[0].scheme, 'test');\n\t\tassert.strictEqual(registrations[0].added, true);\n\t\tassert.ok(registrationDisposable);\n\n\t\tassert.strictEqual(capabilityChanges.length, 0);\n\n\t\tprovider.setCapabilities(FileSystemProviderCapabilities.FileFolderCopy);\n\t\tassert.strictEqual(capabilityChanges.length, 1);\n\t\tprovider.setCapabilities(FileSystemProviderCapabilities.Readonly);\n\t\tassert.strictEqual(capabilityChanges.length, 2);\n\n\t\tawait service.activateProvider('test');\n\t\tassert.strictEqual(callCount, 2); // activation is called again\n\n\t\tassert.strictEqual(service.hasCapability(resource, FileSystemProviderCapabilities.Readonly), true);\n\t\tassert.strictEqual(service.hasCapability(resource, FileSystemProviderCapabilities.FileOpenReadWriteClose), false);\n\n\t\tregistrationDisposable!.dispose();\n\n\t\tassert.strictEqual(service.canHandleResource(resource), false);\n\n\t\tassert.strictEqual(registrations.length, 2);\n\t\tassert.strictEqual(registrations[1].scheme, 'test');\n\t\tassert.strictEqual(registrations[1].added, false);\n\n\t\tservice.dispose();\n\t});\n\n\ttest('watch', async () => {\n\t\tconst service = new FileService(new NullLogService());\n\n\t\tlet disposeCounter = 0;\n\t\tservice.registerProvider('test', new NullFileSystemProvider(() => {\n\t\t\treturn toDisposable(() => {\n\t\t\t\tdisposeCounter++;\n\t\t\t});\n\t\t}));\n\t\tawait service.activateProvider('test');\n\n\t\tconst resource1 = URI.parse('test://foo/bar1');\n\t\tconst watcher1Disposable = service.watch(resource1);\n\n\t\tawait timeout(0); // service.watch() is async\n\t\tassert.strictEqual(disposeCounter, 0);\n\t\twatcher1Disposable.dispose();\n\t\tassert.strictEqual(disposeCounter, 1);\n\n\t\tdisposeCounter = 0;\n\t\tconst resource2 = URI.parse('test://foo/bar2');\n\t\tconst watcher2Disposable1 = service.watch(resource2);\n\t\tconst watcher2Disposable2 = service.watch(resource2);\n\t\tconst watcher2Disposable3 = service.watch(resource2);\n\n\t\tawait timeout(0); // service.watch() is async\n\t\tassert.strictEqual(disposeCounter, 0);\n\t\twatcher2Disposable1.dispose();\n\t\tassert.strictEqual(disposeCounter, 0);\n\t\twatcher2Disposable2.dispose();\n\t\tassert.strictEqual(disposeCounter, 0);\n\t\twatcher2Disposable3.dispose();\n\t\tassert.strictEqual(disposeCounter, 1);\n\n\t\tdisposeCounter = 0;\n\t\tconst resource3 = URI.parse('test://foo/bar3');\n\t\tconst watcher3Disposable1 = service.watch(resource3);\n\t\tconst watcher3Disposable2 = service.watch(resource3, { recursive: true, excludes: [] });\n\n\t\tawait timeout(0); // service.watch() is async\n\t\tassert.strictEqual(disposeCounter, 0);\n\t\twatcher3Disposable1.dispose();\n\t\tassert.strictEqual(disposeCounter, 1);\n\t\twatcher3Disposable2.dispose();\n\t\tassert.strictEqual(disposeCounter, 2);\n\n\t\tservice.dispose();\n\t});\n\n\ttest('error from readFile bubbles through (https://github.com/microsoft/vscode/issues/118060) - async', async () => {\n\t\ttestReadErrorBubbles(true);\n\t});\n\n\ttest('error from readFile bubbles through (https://github.com/microsoft/vscode/issues/118060)', async () => {\n\t\ttestReadErrorBubbles(false);\n\t});\n\n\tasync function testReadErrorBubbles(async: boolean) {\n\t\tconst service = new FileService(new NullLogService());\n\n\t\tconst provider = new class extends NullFileSystemProvider {\n\t\t\toverride async stat(resource: URI): Promise<IStat> {\n\t\t\t\treturn {\n\t\t\t\t\tmtime: Date.now(),\n\t\t\t\t\tctime: Date.now(),\n\t\t\t\t\tsize: 100,\n\t\t\t\t\ttype: FileType.File\n\t\t\t\t};\n\t\t\t}\n\n\t\t\toverride readFile(resource: URI): Promise<Uint8Array> {\n\t\t\t\tif (async) {\n\t\t\t\t\treturn timeout(5).then(() => { throw new Error('failed'); });\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('failed');\n\t\t\t}\n\n\t\t\toverride open(resource: URI, opts: FileOpenOptions): Promise<number> {\n\t\t\t\tif (async) {\n\t\t\t\t\treturn timeout(5).then(() => { throw new Error('failed'); });\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('failed');\n\t\t\t}\n\n\t\t\treadFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> {\n\t\t\t\tif (async) {\n\t\t\t\t\tconst stream = newWriteableStream<Uint8Array>(chunk => chunk[0]);\n\t\t\t\t\ttimeout(5).then(() => stream.error(new Error('failed')));\n\n\t\t\t\t\treturn stream;\n\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('failed');\n\t\t\t}\n\t\t};\n\n\t\tconst disposable = service.registerProvider('test', provider);\n\n\t\tfor (const capabilities of [FileSystemProviderCapabilities.FileReadWrite, FileSystemProviderCapabilities.FileReadStream, FileSystemProviderCapabilities.FileOpenReadWriteClose]) {\n\t\t\tprovider.setCapabilities(capabilities);\n\n\t\t\tlet e1;\n\t\t\ttry {\n\t\t\t\tawait service.readFile(URI.parse('test://foo/bar'));\n\t\t\t} catch (error) {\n\t\t\t\te1 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e1);\n\n\t\t\tlet e2;\n\t\t\ttry {\n\t\t\t\tconst stream = await service.readFileStream(URI.parse('test://foo/bar'));\n\t\t\t\tawait consumeStream(stream.value, chunk => chunk[0]);\n\t\t\t} catch (error) {\n\t\t\t\te2 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e2);\n\t\t}\n\n\t\tdisposable.dispose();\n\t}\n});\n"]}