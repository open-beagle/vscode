{"version":3,"file":"errorTelemetry.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/telemetry/node/errorTelemetry.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAKhG,MAAqB,cAAe,SAAQ,wBAAkB;QAC1C,qBAAqB;YACvC,CAAA,GAAA,kCAAyB,CAAA,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAErD,sFAAsF;YACtF,2EAA2E;YAC3E,yEAAyE;YACzE,MAAM,iBAAiB,GAAmB,EAAE,CAAC;YAC7C,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,MAAW,EAAE,OAAqB,EAAE,EAAE;gBACvE,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAChC,UAAU,CAAC,GAAG,EAAE;oBACf,MAAM,GAAG,GAAG,iBAAiB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBAC/C,IAAI,GAAG,IAAI,CAAC,EAAE;wBACb,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;4BACjB,iBAAiB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;4BACjC,OAAO,CAAC,IAAI,CAAC,iDAAiD,CAAC,EAAE,CAAC,CAAC;4BACnE,IAAI,CAAC,CAAC,KAAK,EAAE;gCACZ,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;6BACxC;4BACD,CAAA,GAAA,0BAAiB,CAAA,CAAC,MAAM,CAAC,CAAC;wBAC3B,CAAC,CAAC,CAAC;qBACH;gBACF,CAAC,EAAE,IAAI,CAAC,CAAC;YACV,CAAC,CAAC,CAAC;YAEH,OAAO,CAAC,EAAE,CAAC,kBAAkB,EAAE,CAAC,OAAqB,EAAE,EAAE;gBACxD,MAAM,GAAG,GAAG,iBAAiB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBAC/C,IAAI,GAAG,IAAI,CAAC,EAAE;oBACb,iBAAiB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;iBACjC;YACF,CAAC,CAAC,CAAC;YAEH,2DAA2D;YAC3D,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,GAAU,EAAE,EAAE;gBAC9C,CAAA,GAAA,0BAAiB,CAAA,CAAC,GAAG,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC;QACJ,CAAC;KACD;IArCD,iCAqCC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedError, setUnexpectedErrorHandler } from 'vs/base/common/errors';\nimport BaseErrorTelemetry from 'vs/platform/telemetry/common/errorTelemetry';\n\nexport default class ErrorTelemetry extends BaseErrorTelemetry {\n\tprotected override installErrorListeners(): void {\n\t\tsetUnexpectedErrorHandler(err => console.error(err));\n\n\t\t// Print a console message when rejection isn't handled within N seconds. For details:\n\t\t// see https://nodejs.org/api/process.html#process_event_unhandledrejection\n\t\t// and https://nodejs.org/api/process.html#process_event_rejectionhandled\n\t\tconst unhandledPromises: Promise<any>[] = [];\n\t\tprocess.on('unhandledRejection', (reason: any, promise: Promise<any>) => {\n\t\t\tunhandledPromises.push(promise);\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst idx = unhandledPromises.indexOf(promise);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tpromise.catch(e => {\n\t\t\t\t\t\tunhandledPromises.splice(idx, 1);\n\t\t\t\t\t\tconsole.warn(`rejected promise not handled within 1 second: ${e}`);\n\t\t\t\t\t\tif (e.stack) {\n\t\t\t\t\t\t\tconsole.warn(`stack trace: ${e.stack}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonUnexpectedError(reason);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t});\n\n\t\tprocess.on('rejectionHandled', (promise: Promise<any>) => {\n\t\t\tconst idx = unhandledPromises.indexOf(promise);\n\t\t\tif (idx >= 0) {\n\t\t\t\tunhandledPromises.splice(idx, 1);\n\t\t\t}\n\t\t});\n\n\t\t// Print a console message when an exception isn't handled.\n\t\tprocess.on('uncaughtException', (err: Error) => {\n\t\t\tonUnexpectedError(err);\n\t\t});\n\t}\n}\n"]}