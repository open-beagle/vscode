{"version":3,"file":"telemetryService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/telemetry/test/browser/telemetryService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport { Emitter } from 'vs/base/common/event';\nimport { TelemetryService, ITelemetryServiceConfig } from 'vs/platform/telemetry/common/telemetryService';\nimport ErrorTelemetry from 'vs/platform/telemetry/browser/errorTelemetry';\nimport { NullAppender, ITelemetryAppender } from 'vs/platform/telemetry/common/telemetryUtils';\nimport * as Errors from 'vs/base/common/errors';\nimport * as sinon from 'sinon';\nimport { ITelemetryData } from 'vs/platform/telemetry/common/telemetry';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\n\nclass TestTelemetryAppender implements ITelemetryAppender {\n\n\tpublic events: any[];\n\tpublic isDisposed: boolean;\n\n\tconstructor() {\n\t\tthis.events = [];\n\t\tthis.isDisposed = false;\n\t}\n\n\tpublic log(eventName: string, data?: any): void {\n\t\tthis.events.push({ eventName, data });\n\t}\n\n\tpublic getEventsCount() {\n\t\treturn this.events.length;\n\t}\n\n\tpublic flush(): Promise<any> {\n\t\tthis.isDisposed = true;\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nclass ErrorTestingSettings {\n\tpublic personalInfo: string;\n\tpublic importantInfo: string;\n\tpublic filePrefix: string;\n\tpublic dangerousPathWithoutImportantInfo: string;\n\tpublic dangerousPathWithImportantInfo: string;\n\tpublic missingModelPrefix: string;\n\tpublic missingModelMessage: string;\n\tpublic noSuchFilePrefix: string;\n\tpublic noSuchFileMessage: string;\n\tpublic stack: string[];\n\tpublic randomUserFile: string = 'a/path/that/doe_snt/con-tain/code/names.js';\n\tpublic anonymizedRandomUserFile: string = '<REDACTED: user-file-path>';\n\tpublic nodeModulePathToRetain: string = 'node_modules/path/that/shouldbe/retained/names.js:14:15854';\n\tpublic nodeModuleAsarPathToRetain: string = 'node_modules.asar/path/that/shouldbe/retained/names.js:14:12354';\n\n\tconstructor() {\n\t\tthis.personalInfo = 'DANGEROUS/PATH';\n\t\tthis.importantInfo = 'important/information';\n\t\tthis.filePrefix = 'file:///';\n\t\tthis.dangerousPathWithImportantInfo = this.filePrefix + this.personalInfo + '/resources/app/' + this.importantInfo;\n\t\tthis.dangerousPathWithoutImportantInfo = this.filePrefix + this.personalInfo;\n\n\t\tthis.missingModelPrefix = 'Received model events for missing model ';\n\t\tthis.missingModelMessage = this.missingModelPrefix + ' ' + this.dangerousPathWithoutImportantInfo;\n\n\t\tthis.noSuchFilePrefix = 'ENOENT: no such file or directory';\n\t\tthis.noSuchFileMessage = this.noSuchFilePrefix + ' \\'' + this.personalInfo + '\\'';\n\n\t\tthis.stack = [`at e._modelEvents (${this.randomUserFile}:11:7309)`,\n\t\t`    at t.AllWorkers (${this.randomUserFile}:6:8844)`,\n\t\t`    at e.(anonymous function) [as _modelEvents] (${this.randomUserFile}:5:29552)`,\n\t\t`    at Function.<anonymous> (${this.randomUserFile}:6:8272)`,\n\t\t`    at e.dispatch (${this.randomUserFile}:5:26931)`,\n\t\t`    at e.request (/${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._handleMessage (${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._onmessage (/${this.nodeModulePathToRetain})`,\n\t\t`    at t.onmessage (${this.nodeModulePathToRetain})`,\n\t\t\t`    at DedicatedWorkerGlobalScope.self.onmessage`,\n\t\tthis.dangerousPathWithImportantInfo,\n\t\tthis.dangerousPathWithoutImportantInfo,\n\t\tthis.missingModelMessage,\n\t\tthis.noSuchFileMessage];\n\t}\n}\n\nsuite('TelemetryService', () => {\n\n\ttest('Disposing', sinon.test(function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({ appender: testAppender }, undefined!);\n\n\t\treturn service.publicLog('testPrivateEvent').then(() => {\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\n\t\t\tservice.dispose();\n\t\t\tassert.strictEqual(!testAppender.isDisposed, true);\n\t\t});\n\t}));\n\n\t// event reporting\n\ttest('Simple event', sinon.test(function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({ appender: testAppender }, undefined!);\n\n\t\treturn service.publicLog('testEvent').then(_ => {\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\ttest('Event with data', sinon.test(function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({ appender: testAppender }, undefined!);\n\n\t\treturn service.publicLog('testEvent', {\n\t\t\t'stringProp': 'property',\n\t\t\t'numberProp': 1,\n\t\t\t'booleanProp': true,\n\t\t\t'complexProp': {\n\t\t\t\t'value': 0\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\t\t\tassert.strictEqual(testAppender.events[0].data['stringProp'], 'property');\n\t\t\tassert.strictEqual(testAppender.events[0].data['numberProp'], 1);\n\t\t\tassert.strictEqual(testAppender.events[0].data['booleanProp'], true);\n\t\t\tassert.strictEqual(testAppender.events[0].data['complexProp'].value, 0);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t}));\n\n\ttest('common properties added to *all* events, simple event', function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({\n\t\t\tappender: testAppender,\n\t\t\tcommonProperties: Promise.resolve({ foo: 'JA!', get bar() { return Math.random(); } })\n\t\t}, undefined!);\n\n\t\treturn service.publicLog('testEvent').then(_ => {\n\t\t\tlet [first] = testAppender.events;\n\n\t\t\tassert.strictEqual(Object.keys(first.data).length, 2);\n\t\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\t\tassert.strictEqual(typeof first.data['bar'], 'number');\n\n\t\t\tservice.dispose();\n\t\t});\n\t});\n\n\ttest('common properties added to *all* events, event with data', function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({\n\t\t\tappender: testAppender,\n\t\t\tcommonProperties: Promise.resolve({ foo: 'JA!', get bar() { return Math.random(); } })\n\t\t}, undefined!);\n\n\t\treturn service.publicLog('testEvent', { hightower: 'xl', price: 8000 }).then(_ => {\n\t\t\tlet [first] = testAppender.events;\n\n\t\t\tassert.strictEqual(Object.keys(first.data).length, 4);\n\t\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\t\tassert.strictEqual(typeof first.data['bar'], 'number');\n\t\t\tassert.strictEqual(typeof first.data['hightower'], 'string');\n\t\t\tassert.strictEqual(typeof first.data['price'], 'number');\n\n\t\t\tservice.dispose();\n\t\t});\n\t});\n\n\ttest('TelemetryInfo comes from properties', function () {\n\t\tlet service = new TelemetryService({\n\t\t\tappender: NullAppender,\n\t\t\tcommonProperties: Promise.resolve({\n\t\t\t\tsessionID: 'one',\n\t\t\t\t['common.instanceId']: 'two',\n\t\t\t\t['common.machineId']: 'three',\n\t\t\t})\n\t\t}, undefined!);\n\n\t\treturn service.getTelemetryInfo().then(info => {\n\t\t\tassert.strictEqual(info.sessionId, 'one');\n\t\t\tassert.strictEqual(info.instanceId, 'two');\n\t\t\tassert.strictEqual(info.machineId, 'three');\n\n\t\t\tservice.dispose();\n\t\t});\n\t});\n\n\ttest('enableTelemetry on by default', sinon.test(function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({ appender: testAppender }, undefined!);\n\n\t\treturn service.publicLog('testEvent').then(() => {\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\tclass JoinableTelemetryService extends TelemetryService {\n\n\t\tprivate readonly promises: Promise<void>[] = [];\n\n\t\tconstructor(config: ITelemetryServiceConfig, configurationService: IConfigurationService) {\n\t\t\tsuper({ ...config, sendErrorTelemetry: true }, configurationService);\n\t\t}\n\n\t\tjoin(): Promise<any> {\n\t\t\treturn Promise.all(this.promises);\n\t\t}\n\n\t\toverride publicLog(eventName: string, data?: ITelemetryData, anonymizeFilePaths?: boolean): Promise<void> {\n\t\t\tlet p = super.publicLog(eventName, data, anonymizeFilePaths);\n\t\t\tthis.promises.push(p);\n\t\t\treturn p;\n\t\t}\n\t}\n\n\ttest('Error events', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\n\t\t\tlet e: any = new Error('This is a test.');\n\t\t\t// for Phantom\n\t\t\tif (!e.stack) {\n\t\t\t\te.stack = 'blah';\n\t\t\t}\n\n\t\t\tErrors.onUnexpectedError(e);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg, 'This is a test.');\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\t// \ttest('Unhandled Promise Error events', sinon.test(function() {\n\t//\n\t// \t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t// \t\tErrors.setUnexpectedErrorHandler(() => {});\n\t//\n\t// \t\ttry {\n\t// \t\t\tlet service = new MainTelemetryService();\n\t// \t\t\tlet testAppender = new TestTelemetryAppender();\n\t// \t\t\tservice.addTelemetryAppender(testAppender);\n\t//\n\t// \t\t\twinjs.Promise.wrapError(new Error('This should not get logged'));\n\t// \t\t\twinjs.TPromise.as(true).then(() => {\n\t// \t\t\t\tthrow new Error('This should get logged');\n\t// \t\t\t});\n\t// \t\t\t// prevent console output from failing the test\n\t// \t\t\tthis.stub(console, 'log');\n\t// \t\t\t// allow for the promise to finish\n\t// \t\t\tthis.clock.tick(MainErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t//\n\t// \t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t// \t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t// \t\t\tassert.strictEqual(testAppender.events[0].data.msg,  'This should get logged');\n\t//\n\t// \t\t\tservice.dispose();\n\t// \t\t} finally {\n\t// \t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t// \t\t}\n\t// \t}));\n\n\ttest('Handle global errors', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet testError = new Error('test');\n\t\t(<any>window.onerror)('Error Message', 'file.js', 2, 42, testError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.alwaysCalledWithExactly('Error Message', 'file.js', 2, 42, testError), true);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\tassert.strictEqual(testAppender.events[0].data.msg, 'Error Message');\n\t\tassert.strictEqual(testAppender.events[0].data.file, 'file.js');\n\t\tassert.strictEqual(testAppender.events[0].data.line, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.column, 42);\n\t\tassert.strictEqual(testAppender.events[0].data.uncaught_error_msg, 'test');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Error Telemetry removes PII from filename with spaces', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet personInfoWithSpaces = settings.personalInfo.slice(0, 2) + ' ' + settings.personalInfo.slice(2);\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces) + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII from filename', sinon.test(function (this: any) {\n\t\tlet clock = this.clock;\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\treturn service.join().then(() => {\n\t\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\n\t\t\tdangerousFilenameError = new Error('dangerousFilename');\n\t\t\tdangerousFilenameError.stack = settings.stack;\n\t\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\treturn service.join();\n\t\t}).then(() => {\n\t\t\tassert.strictEqual(errorStub.callCount, 2);\n\t\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII', sinon.test(async function (this: any) {\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet dangerousPathWithoutImportantInfoError: any = new Error(settings.dangerousPathWithoutImportantInfo);\n\t\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t\tErrors.onUnexpectedError(dangerousPathWithoutImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousPathWithoutImportantInfoError: any = new Error('dangerousPathWithoutImportantInfo');\n\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithoutImportantInfo, 'test.js', 2, 42, dangerousPathWithoutImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, esp. personal info\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path with node modules', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender, piiPaths: [settings.personalInfo + '/resources/app/'] }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender, piiPaths: [settings.personalInfo + '/resources/app/'] }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Missing Model error message', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet missingModelError: any = new Error(settings.missingModelMessage);\n\t\t\tmissingModelError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (Received model events for missing model)\n\t\t\tErrors.onUnexpectedError(missingModelError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Missing Model error message', sinon.test(async function (this: any) {\n\t\tlet errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet missingModelError: any = new Error('missingModelMessage');\n\t\tmissingModelError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.missingModelMessage, 'test.js', 2, 42, missingModelError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tawait service.join();\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, but this particular\n\t\t// error message does (Received model events for missing model)\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves No Such File error message', sinon.test(async function (this: any) {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet noSuchFileError: any = new Error(settings.noSuchFileMessage);\n\t\t\tnoSuchFileError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves No Such File error message', sinon.test(async function (this: any) {\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet errorStub = sinon.stub();\n\t\t\twindow.onerror = errorStub;\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tlet service = new JoinableTelemetryService({ appender: testAppender }, undefined!);\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tlet noSuchFileError: any = new Error('noSuchFileMessage');\n\t\t\tnoSuchFileError.stack = settings.stack;\n\t\t\t(<any>window.onerror)(settings.noSuchFileMessage, 'test.js', 2, 42, noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\t\tawait service.join();\n\n\t\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Telemetry Service sends events when enableTelemetry is on', sinon.test(function () {\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({ appender: testAppender }, undefined!);\n\n\t\treturn service.publicLog('testEvent').then(() => {\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\ttest('Telemetry Service checks with config service', function () {\n\n\t\tlet enableTelemetry = false;\n\t\tlet emitter = new Emitter<any>();\n\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet service = new TelemetryService({\n\t\t\tappender: testAppender\n\t\t}, new class extends TestConfigurationService {\n\t\t\toverride onDidChangeConfiguration = emitter.event;\n\t\t\toverride getValue() {\n\t\t\t\treturn {\n\t\t\t\t\tenableTelemetry: enableTelemetry\n\t\t\t\t} as any;\n\t\t\t}\n\t\t}());\n\n\t\tassert.strictEqual(service.isOptedIn, false);\n\n\t\tenableTelemetry = true;\n\t\temitter.fire({});\n\t\tassert.strictEqual(service.isOptedIn, true);\n\n\t\tenableTelemetry = false;\n\t\temitter.fire({});\n\t\tassert.strictEqual(service.isOptedIn, false);\n\n\t\tservice.dispose();\n\t});\n});\n"]}