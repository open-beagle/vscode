{"version":3,"file":"environmentService.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/environment/common/environmentService.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { IDebugParams, IExtensionHostDebugParams, INativeEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { NativeParsedArgs } from 'vs/platform/environment/common/argv';\nimport { dirname, join, normalize, resolve } from 'vs/base/common/path';\nimport { joinPath } from 'vs/base/common/resources';\nimport { memoize } from 'vs/base/common/decorators';\nimport { toLocalISOString } from 'vs/base/common/date';\nimport { FileAccess } from 'vs/base/common/network';\nimport { URI } from 'vs/base/common/uri';\nimport { ExtensionKind } from 'vs/platform/extensions/common/extensions';\nimport { env } from 'vs/base/common/process';\n\n\nfunction parsePathArg(arg: string | undefined, process: NodeJS.Process): string | undefined {\n\tif (!arg) {\n\t\treturn undefined;\n\t}\n\n\t// Determine if the arg is relative or absolute, if relative use the original CWD\n\t// (VSCODE_CWD), not the potentially overridden one (process.cwd()).\n\tconst resolved = resolve(arg);\n\n\tif (normalize(arg) === resolved) {\n\t\treturn resolved;\n\t}\n\n\treturn resolve(process.env['VSCODE_CWD'] || process.cwd(), arg);\n}\n\nexport interface INativeEnvironmentPaths {\n\n\t/**\n\t * The user data directory to use for anything that should be\n\t * persisted except for the content that is meant for the `homeDir`.\n\t *\n\t * Only one instance of VSCode can use the same `userDataDir`.\n\t */\n\tuserDataDir: string\n\n\t/**\n\t * The user home directory mainly used for persisting extensions\n\t * and global configuration that should be shared across all\n\t * versions.\n\t */\n\thomeDir: string;\n\n\t/**\n\t * OS tmp dir.\n\t */\n\ttmpDir: string,\n}\n\nexport abstract class AbstractNativeEnvironmentService implements INativeEnvironmentService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\t@memoize\n\tget appRoot(): string { return dirname(FileAccess.asFileUri('', require).fsPath); }\n\n\t@memoize\n\tget userHome(): URI { return URI.file(this.paths.homeDir); }\n\n\t@memoize\n\tget userDataPath(): string { return this.paths.userDataDir; }\n\n\t@memoize\n\tget appSettingsHome(): URI { return URI.file(join(this.userDataPath, 'User')); }\n\n\t@memoize\n\tget tmpDir(): URI { return URI.file(this.paths.tmpDir); }\n\n\t@memoize\n\tget userRoamingDataHome(): URI { return this.appSettingsHome; }\n\n\t@memoize\n\tget settingsResource(): URI { return joinPath(this.userRoamingDataHome, 'settings.json'); }\n\n\t@memoize\n\tget userDataSyncHome(): URI { return joinPath(this.userRoamingDataHome, 'sync'); }\n\n\tget logsPath(): string {\n\t\tif (!this.args.logsPath) {\n\t\t\tconst key = toLocalISOString(new Date()).replace(/-|:|\\.\\d+Z$/g, '');\n\t\t\tthis.args.logsPath = join(this.userDataPath, 'logs', key);\n\t\t}\n\n\t\treturn this.args.logsPath;\n\t}\n\n\t@memoize\n\tget userDataSyncLogResource(): URI { return URI.file(join(this.logsPath, 'userDataSync.log')); }\n\n\t@memoize\n\tget sync(): 'on' | 'off' | undefined { return this.args.sync; }\n\n\t@memoize\n\tget machineSettingsResource(): URI { return joinPath(URI.file(join(this.userDataPath, 'Machine')), 'settings.json'); }\n\n\t@memoize\n\tget globalStorageHome(): URI { return URI.joinPath(this.appSettingsHome, 'globalStorage'); }\n\n\t@memoize\n\tget workspaceStorageHome(): URI { return URI.joinPath(this.appSettingsHome, 'workspaceStorage'); }\n\n\t@memoize\n\tget keybindingsResource(): URI { return joinPath(this.userRoamingDataHome, 'keybindings.json'); }\n\n\t@memoize\n\tget keyboardLayoutResource(): URI { return joinPath(this.userRoamingDataHome, 'keyboardLayout.json'); }\n\n\t@memoize\n\tget argvResource(): URI {\n\t\tconst vscodePortable = env['VSCODE_PORTABLE'];\n\t\tif (vscodePortable) {\n\t\t\treturn URI.file(join(vscodePortable, 'argv.json'));\n\t\t}\n\n\t\treturn joinPath(this.userHome, this.productService.dataFolderName, 'argv.json');\n\t}\n\n\t@memoize\n\tget snippetsHome(): URI { return joinPath(this.userRoamingDataHome, 'snippets'); }\n\n\t@memoize\n\tget isExtensionDevelopment(): boolean { return !!this.args.extensionDevelopmentPath; }\n\n\t@memoize\n\tget untitledWorkspacesHome(): URI { return URI.file(join(this.userDataPath, 'Workspaces')); }\n\n\t@memoize\n\tget installSourcePath(): string { return join(this.userDataPath, 'installSource'); }\n\n\t@memoize\n\tget builtinExtensionsPath(): string {\n\t\tconst cliBuiltinExtensionsDir = this.args['builtin-extensions-dir'];\n\t\tif (cliBuiltinExtensionsDir) {\n\t\t\treturn resolve(cliBuiltinExtensionsDir);\n\t\t}\n\n\t\treturn normalize(join(FileAccess.asFileUri('', require).fsPath, '..', 'extensions'));\n\t}\n\n\tget extensionsDownloadPath(): string {\n\t\tconst cliExtensionsDownloadDir = this.args['extensions-download-dir'];\n\t\tif (cliExtensionsDownloadDir) {\n\t\t\treturn resolve(cliExtensionsDownloadDir);\n\t\t}\n\n\t\treturn join(this.userDataPath, 'CachedExtensionVSIXs');\n\t}\n\n\t@memoize\n\tget extensionsPath(): string {\n\t\tconst cliExtensionsDir = this.args['extensions-dir'];\n\t\tif (cliExtensionsDir) {\n\t\t\treturn resolve(cliExtensionsDir);\n\t\t}\n\n\t\tconst vscodeExtensions = env['VSCODE_EXTENSIONS'];\n\t\tif (vscodeExtensions) {\n\t\t\treturn vscodeExtensions;\n\t\t}\n\n\t\tconst vscodePortable = env['VSCODE_PORTABLE'];\n\t\tif (vscodePortable) {\n\t\t\treturn join(vscodePortable, 'extensions');\n\t\t}\n\n\t\treturn joinPath(this.userHome, this.productService.dataFolderName, 'extensions').fsPath;\n\t}\n\n\t@memoize\n\tget extensionDevelopmentLocationURI(): URI[] | undefined {\n\t\tconst extensionDevelopmentPaths = this.args.extensionDevelopmentPath;\n\t\tif (Array.isArray(extensionDevelopmentPaths)) {\n\t\t\treturn extensionDevelopmentPaths.map(extensionDevelopmentPath => {\n\t\t\t\tif (/^[^:/?#]+?:\\/\\//.test(extensionDevelopmentPath)) {\n\t\t\t\t\treturn URI.parse(extensionDevelopmentPath);\n\t\t\t\t}\n\n\t\t\t\treturn URI.file(normalize(extensionDevelopmentPath));\n\t\t\t});\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * NOTE@coder: add extraExtensionPaths and extraBuiltinExtensionPaths\n\t */\n\t@memoize\n\tget extraExtensionPaths(): string[] {\n\t\treturn (this._args['extra-extensions-dir'] || []).map((p) => <string>parsePathArg(p, process));\n\t}\n\n\t@memoize\n\tget extraBuiltinExtensionPaths(): string[] {\n\t\treturn (this._args['extra-builtin-extensions-dir'] || []).map((p) => <string>parsePathArg(p, process));\n\t}\n\n\t@memoize\n\tget extensionDevelopmentKind(): ExtensionKind[] | undefined {\n\t\treturn this.args.extensionDevelopmentKind?.map(kind => kind === 'ui' || kind === 'workspace' || kind === 'web' ? kind : 'workspace');\n\t}\n\n\t@memoize\n\tget extensionTestsLocationURI(): URI | undefined {\n\t\tconst extensionTestsPath = this.args.extensionTestsPath;\n\t\tif (extensionTestsPath) {\n\t\t\tif (/^[^:/?#]+?:\\/\\//.test(extensionTestsPath)) {\n\t\t\t\treturn URI.parse(extensionTestsPath);\n\t\t\t}\n\n\t\t\treturn URI.file(normalize(extensionTestsPath));\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget disableExtensions(): boolean | string[] {\n\t\tif (this.args['disable-extensions']) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst disableExtensions = this.args['disable-extension'];\n\t\tif (disableExtensions) {\n\t\t\tif (typeof disableExtensions === 'string') {\n\t\t\t\treturn [disableExtensions];\n\t\t\t}\n\n\t\t\tif (Array.isArray(disableExtensions) && disableExtensions.length > 0) {\n\t\t\t\treturn disableExtensions;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t@memoize\n\tget debugExtensionHost(): IExtensionHostDebugParams { return parseExtensionHostPort(this.args, this.isBuilt); }\n\tget debugRenderer(): boolean { return !!this.args.debugRenderer; }\n\n\tget isBuilt(): boolean { return !env['VSCODE_DEV']; }\n\tget verbose(): boolean { return !!this.args.verbose; }\n\tget logLevel(): string | undefined { return this.args.log; }\n\n\t@memoize\n\tget serviceMachineIdResource(): URI { return joinPath(URI.file(this.userDataPath), 'machineid'); }\n\n\tget crashReporterId(): string | undefined { return this.args['crash-reporter-id']; }\n\tget crashReporterDirectory(): string | undefined { return this.args['crash-reporter-directory']; }\n\n\tget driverHandle(): string | undefined { return this.args['driver']; }\n\n\t@memoize\n\tget telemetryLogResource(): URI { return URI.file(join(this.logsPath, 'telemetry.log')); }\n\tget disableTelemetry(): boolean { return !!this.args['disable-telemetry']; }\n\n\tget args(): NativeParsedArgs { return this._args; }\n\n\tconstructor(\n\t\tprivate readonly _args: NativeParsedArgs,\n\t\tprivate readonly paths: INativeEnvironmentPaths,\n\t\tprotected readonly productService: IProductService\n\t) { }\n}\n\nexport function parseExtensionHostPort(args: NativeParsedArgs, isBuild: boolean): IExtensionHostDebugParams {\n\treturn parseDebugPort(args['inspect-extensions'], args['inspect-brk-extensions'], 5870, isBuild, args.debugId);\n}\n\nexport function parseSearchPort(args: NativeParsedArgs, isBuild: boolean): IDebugParams {\n\treturn parseDebugPort(args['inspect-search'], args['inspect-brk-search'], 5876, isBuild);\n}\n\nfunction parseDebugPort(debugArg: string | undefined, debugBrkArg: string | undefined, defaultBuildPort: number, isBuild: boolean, debugId?: string): IExtensionHostDebugParams {\n\tconst portStr = debugBrkArg || debugArg;\n\tconst port = Number(portStr) || (!isBuild ? defaultBuildPort : null);\n\tconst brk = port ? Boolean(!!debugBrkArg) : false;\n\n\treturn { port, break: brk, debugId };\n}\n"]}