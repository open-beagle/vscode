{"version":3,"file":"userDataSyncStoreService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/userDataSync/test/common/userDataSyncStoreService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { IUserDataSyncStoreService, SyncResource, UserDataSyncErrorCode, UserDataSyncStoreError, IUserDataSyncStoreManagementService, IUserDataSyncStore } from 'vs/platform/userDataSync/common/userDataSync';\nimport { UserDataSyncClient, UserDataSyncTestServer } from 'vs/platform/userDataSync/test/common/userDataSyncClient';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { ConfigurationSyncStore } from 'vs/base/common/product';\nimport { isWeb } from 'vs/base/common/platform';\nimport { RequestsSession, UserDataSyncStoreService, UserDataSyncStoreManagementService } from 'vs/platform/userDataSync/common/userDataSyncStoreService';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { IRequestService } from 'vs/platform/request/common/request';\nimport { newWriteableBufferStream, VSBuffer } from 'vs/base/common/buffer';\nimport { timeout } from 'vs/base/common/async';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { Event } from 'vs/base/common/event';\nimport product from 'vs/platform/product/common/product';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { URI } from 'vs/base/common/uri';\n\nsuite('UserDataSyncStoreManagementService', () => {\n\tconst disposableStore = new DisposableStore();\n\n\tteardown(() => disposableStore.clear());\n\n\ttest('test sync store is read from settings', async () => {\n\t\tconst client = disposableStore.add(new UserDataSyncClient(new UserDataSyncTestServer()));\n\t\tawait client.setUp();\n\n\t\tclient.instantiationService.stub(IProductService, {\n\t\t\t_serviceBrand: undefined, ...product, ...{\n\t\t\t\t'configurationSync.store': undefined\n\t\t\t}\n\t\t});\n\n\t\tconst configuredStore: ConfigurationSyncStore = {\n\t\t\turl: 'http://configureHost:3000',\n\t\t\tstableUrl: 'http://configureHost:3000',\n\t\t\tinsidersUrl: 'http://configureHost:3000',\n\t\t\tcanSwitch: false,\n\t\t\tauthenticationProviders: { 'configuredAuthProvider': { scopes: [] } }\n\t\t};\n\t\tawait client.instantiationService.get(IFileService).writeFile(client.instantiationService.get(IEnvironmentService).settingsResource, VSBuffer.fromString(JSON.stringify({\n\t\t\t'configurationSync.store': configuredStore\n\t\t})));\n\t\tawait client.instantiationService.get(IConfigurationService).reloadConfiguration();\n\n\t\tconst expected: IUserDataSyncStore = {\n\t\t\turl: URI.parse('http://configureHost:3000'),\n\t\t\ttype: 'stable',\n\t\t\tdefaultUrl: URI.parse('http://configureHost:3000'),\n\t\t\tstableUrl: URI.parse('http://configureHost:3000'),\n\t\t\tinsidersUrl: URI.parse('http://configureHost:3000'),\n\t\t\tcanSwitch: false,\n\t\t\tauthenticationProviders: [{ id: 'configuredAuthProvider', scopes: [] }]\n\t\t};\n\n\t\tconst testObject: IUserDataSyncStoreManagementService = disposableStore.add(client.instantiationService.createInstance(UserDataSyncStoreManagementService));\n\n\t\tassert.strictEqual(testObject.userDataSyncStore?.url.toString(), expected.url.toString());\n\t\tassert.strictEqual(testObject.userDataSyncStore?.defaultUrl.toString(), expected.defaultUrl.toString());\n\t\tassert.deepStrictEqual(testObject.userDataSyncStore?.authenticationProviders, expected.authenticationProviders);\n\t});\n\n});\n\nsuite('UserDataSyncStoreService', () => {\n\n\tconst disposableStore = new DisposableStore();\n\n\tteardown(() => disposableStore.clear());\n\n\ttest('test read manifest for the first time', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\t\tconst productService = client.instantiationService.get(IProductService);\n\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Client-Name'], `${productService.applicationName}${isWeb ? '-web' : ''}`);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Client-Version'], productService.version);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test read manifest for the second time when session is not yet created', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test session id header is not set in the first manifest request after session is created', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test session id header is set from the second manifest request after session is created', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test headers are send for write request', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\tawait testObject.manifest();\n\n\t\ttarget.reset();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test headers are send for read request', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\tawait testObject.manifest();\n\n\t\ttarget.reset();\n\t\tawait testObject.read(SyncResource.Settings, null);\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test headers are reset after session is cleared ', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\tawait testObject.manifest();\n\t\tawait testObject.clear();\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test old headers are sent after session is changed on server ', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tconst userSessionId = target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'];\n\t\tawait target.clear();\n\n\t\t// client 2\n\t\tconst client2 = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client2.setUp();\n\t\tconst testObject2 = client2.instantiationService.get(IUserDataSyncStoreService);\n\t\tawait testObject2.write(SyncResource.Settings, 'some content', null);\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], userSessionId);\n\t});\n\n\ttest('test old headers are reset from second request after session is changed on server ', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tconst userSessionId = target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'];\n\t\tawait target.clear();\n\n\t\t// client 2\n\t\tconst client2 = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client2.setUp();\n\t\tconst testObject2 = client2.instantiationService.get(IUserDataSyncStoreService);\n\t\tawait testObject2.write(SyncResource.Settings, 'some content', null);\n\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], userSessionId);\n\t});\n\n\ttest('test old headers are sent after session is cleared from another server ', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tconst userSessionId = target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'];\n\n\t\t// client 2\n\t\tconst client2 = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client2.setUp();\n\t\tconst testObject2 = client2.instantiationService.get(IUserDataSyncStoreService);\n\t\tawait testObject2.clear();\n\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], userSessionId);\n\t});\n\n\ttest('test headers are reset after session is cleared from another server ', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\n\t\t// client 2\n\t\tconst client2 = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client2.setUp();\n\t\tconst testObject2 = client2.instantiationService.get(IUserDataSyncStoreService);\n\t\tawait testObject2.clear();\n\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.strictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test headers are reset after session is cleared from another server - started syncing again', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\t\tconst machineSessionId = target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'];\n\t\tconst userSessionId = target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'];\n\n\t\t// client 2\n\t\tconst client2 = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client2.setUp();\n\t\tconst testObject2 = client2.instantiationService.get(IUserDataSyncStoreService);\n\t\tawait testObject2.clear();\n\n\t\tawait testObject.manifest();\n\t\tawait testObject.write(SyncResource.Settings, 'some content', null);\n\t\tawait testObject.manifest();\n\t\ttarget.reset();\n\t\tawait testObject.manifest();\n\n\t\tassert.strictEqual(target.requestsWithAllHeaders.length, 1);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], undefined);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-Machine-Session-Id'], machineSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], userSessionId);\n\t\tassert.notStrictEqual(target.requestsWithAllHeaders[0].headers!['X-User-Session-Id'], undefined);\n\t});\n\n\ttest('test rate limit on server with retry after', async () => {\n\t\tconst target = new UserDataSyncTestServer(1, 1);\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeDonotMakeRequestsUntil);\n\t\ttry {\n\t\t\tawait testObject.manifest();\n\t\t\tassert.fail('should fail');\n\t\t} catch (e) {\n\t\t\tassert.ok(e instanceof UserDataSyncStoreError);\n\t\t\tassert.deepStrictEqual((<UserDataSyncStoreError>e).code, UserDataSyncErrorCode.TooManyRequestsAndRetryAfter);\n\t\t\tawait promise;\n\t\t\tassert.ok(!!testObject.donotMakeRequestsUntil);\n\t\t}\n\t});\n\n\ttest('test donotMakeRequestsUntil is reset after retry time is finished', async () => {\n\t\tconst client = disposableStore.add(new UserDataSyncClient(new UserDataSyncTestServer(1, 0.25)));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\ttry {\n\t\t\tawait testObject.manifest();\n\t\t} catch (e) { }\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeDonotMakeRequestsUntil);\n\t\tawait timeout(300);\n\t\tawait promise;\n\t\tassert.ok(!testObject.donotMakeRequestsUntil);\n\t});\n\n\ttest('test donotMakeRequestsUntil is retrieved', async () => {\n\t\tconst client = disposableStore.add(new UserDataSyncClient(new UserDataSyncTestServer(1, 1)));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\ttry {\n\t\t\tawait testObject.manifest();\n\t\t} catch (e) { }\n\n\t\tconst target = disposableStore.add(client.instantiationService.createInstance(UserDataSyncStoreService));\n\t\tassert.strictEqual(target.donotMakeRequestsUntil?.getTime(), testObject.donotMakeRequestsUntil?.getTime());\n\t});\n\n\ttest('test donotMakeRequestsUntil is checked and reset after retreived', async () => {\n\t\tconst client = disposableStore.add(new UserDataSyncClient(new UserDataSyncTestServer(1, 0.25)));\n\t\tawait client.setUp();\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\n\t\tawait testObject.manifest();\n\t\ttry {\n\t\t\tawait testObject.manifest();\n\t\t} catch (e) { }\n\n\t\tawait timeout(300);\n\t\tconst target = disposableStore.add(client.instantiationService.createInstance(UserDataSyncStoreService));\n\t\tassert.ok(!target.donotMakeRequestsUntil);\n\t});\n\n\ttest('test read resource request handles 304', async () => {\n\t\t// Setup the client\n\t\tconst target = new UserDataSyncTestServer();\n\t\tconst client = disposableStore.add(new UserDataSyncClient(target));\n\t\tawait client.setUp();\n\t\tawait client.sync();\n\n\t\tconst testObject = client.instantiationService.get(IUserDataSyncStoreService);\n\t\tconst expected = await testObject.read(SyncResource.Settings, null);\n\t\tconst actual = await testObject.read(SyncResource.Settings, expected);\n\n\t\tassert.strictEqual(actual, expected);\n\t});\n\n});\n\nsuite('UserDataSyncRequestsSession', () => {\n\n\tconst requestService: IRequestService = {\n\t\t_serviceBrand: undefined,\n\t\tasync request() { return { res: { headers: {} }, stream: newWriteableBufferStream() }; },\n\t\tasync resolveProxy() { return undefined; }\n\t};\n\n\ttest('too many requests are thrown when limit exceeded', async () => {\n\t\tconst testObject = new RequestsSession(1, 500, requestService, new NullLogService());\n\t\tawait testObject.request('url', {}, CancellationToken.None);\n\n\t\ttry {\n\t\t\tawait testObject.request('url', {}, CancellationToken.None);\n\t\t} catch (error) {\n\t\t\tassert.ok(error instanceof UserDataSyncStoreError);\n\t\t\tassert.strictEqual((<UserDataSyncStoreError>error).code, UserDataSyncErrorCode.LocalTooManyRequests);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with limit exceeded');\n\t});\n\n\ttest('requests are handled after session is expired', async () => {\n\t\tconst testObject = new RequestsSession(1, 500, requestService, new NullLogService());\n\t\tawait testObject.request('url', {}, CancellationToken.None);\n\t\tawait timeout(600);\n\t\tawait testObject.request('url', {}, CancellationToken.None);\n\t});\n\n\ttest('too many requests are thrown after session is expired', async () => {\n\t\tconst testObject = new RequestsSession(1, 500, requestService, new NullLogService());\n\t\tawait testObject.request('url', {}, CancellationToken.None);\n\t\tawait timeout(600);\n\t\tawait testObject.request('url', {}, CancellationToken.None);\n\n\t\ttry {\n\t\t\tawait testObject.request('url', {}, CancellationToken.None);\n\t\t} catch (error) {\n\t\t\tassert.ok(error instanceof UserDataSyncStoreError);\n\t\t\tassert.strictEqual((<UserDataSyncStoreError>error).code, UserDataSyncErrorCode.LocalTooManyRequests);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with limit exceeded');\n\t});\n\n});\n"]}