{"version":3,"file":"markerService.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/platform/markers/test/common/markerService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { URI } from 'vs/base/common/uri';\nimport * as markerService from 'vs/platform/markers/common/markerService';\nimport { IMarkerData, MarkerSeverity } from 'vs/platform/markers/common/markers';\n\nfunction randomMarkerData(severity = MarkerSeverity.Error): IMarkerData {\n\treturn {\n\t\tseverity,\n\t\tmessage: Math.random().toString(16),\n\t\tstartLineNumber: 1,\n\t\tstartColumn: 1,\n\t\tendLineNumber: 1,\n\t\tendColumn: 1\n\t};\n}\n\nsuite('Marker Service', () => {\n\n\ttest('query', () => {\n\n\t\tlet service = new markerService.MarkerService();\n\n\t\tservice.changeAll('far', [{\n\t\t\tresource: URI.parse('file:///c/test/file.cs'),\n\t\t\tmarker: randomMarkerData(MarkerSeverity.Error)\n\t\t}]);\n\n\t\tassert.strictEqual(service.read().length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\t\tassert.strictEqual(service.read({ resource: URI.parse('file:///c/test/file.cs') }).length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'far', resource: URI.parse('file:///c/test/file.cs') }).length, 1);\n\n\n\t\tservice.changeAll('boo', [{\n\t\t\tresource: URI.parse('file:///c/test/file.cs'),\n\t\t\tmarker: randomMarkerData(MarkerSeverity.Warning)\n\t\t}]);\n\n\t\tassert.strictEqual(service.read().length, 2);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 1);\n\n\t\tassert.strictEqual(service.read({ severities: MarkerSeverity.Error }).length, 1);\n\t\tassert.strictEqual(service.read({ severities: MarkerSeverity.Warning }).length, 1);\n\t\tassert.strictEqual(service.read({ severities: MarkerSeverity.Hint }).length, 0);\n\t\tassert.strictEqual(service.read({ severities: MarkerSeverity.Error | MarkerSeverity.Warning }).length, 2);\n\n\t});\n\n\n\ttest('changeOne override', () => {\n\n\t\tlet service = new markerService.MarkerService();\n\t\tservice.changeOne('far', URI.parse('file:///path/only.cs'), [randomMarkerData()]);\n\t\tassert.strictEqual(service.read().length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\n\t\tservice.changeOne('boo', URI.parse('file:///path/only.cs'), [randomMarkerData()]);\n\t\tassert.strictEqual(service.read().length, 2);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 1);\n\n\t\tservice.changeOne('far', URI.parse('file:///path/only.cs'), [randomMarkerData(), randomMarkerData()]);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 2);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 1);\n\n\t});\n\n\ttest('changeOne/All clears', () => {\n\n\t\tlet service = new markerService.MarkerService();\n\t\tservice.changeOne('far', URI.parse('file:///path/only.cs'), [randomMarkerData()]);\n\t\tservice.changeOne('boo', URI.parse('file:///path/only.cs'), [randomMarkerData()]);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 1);\n\t\tassert.strictEqual(service.read().length, 2);\n\n\t\tservice.changeOne('far', URI.parse('file:///path/only.cs'), []);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 0);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 1);\n\t\tassert.strictEqual(service.read().length, 1);\n\n\t\tservice.changeAll('boo', []);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 0);\n\t\tassert.strictEqual(service.read({ owner: 'boo' }).length, 0);\n\t\tassert.strictEqual(service.read().length, 0);\n\t});\n\n\ttest('changeAll sends event for cleared', () => {\n\n\t\tlet service = new markerService.MarkerService();\n\t\tservice.changeAll('far', [{\n\t\t\tresource: URI.parse('file:///d/path'),\n\t\t\tmarker: randomMarkerData()\n\t\t}, {\n\t\t\tresource: URI.parse('file:///d/path'),\n\t\t\tmarker: randomMarkerData()\n\t\t}]);\n\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 2);\n\n\t\tservice.onMarkerChanged(changedResources => {\n\t\t\tassert.strictEqual(changedResources.length, 1);\n\t\t\tchangedResources.forEach(u => assert.strictEqual(u.toString(), 'file:///d/path'));\n\t\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 0);\n\t\t});\n\n\t\tservice.changeAll('far', []);\n\t});\n\n\ttest('changeAll merges', () => {\n\t\tlet service = new markerService.MarkerService();\n\n\t\tservice.changeAll('far', [{\n\t\t\tresource: URI.parse('file:///c/test/file.cs'),\n\t\t\tmarker: randomMarkerData()\n\t\t}, {\n\t\t\tresource: URI.parse('file:///c/test/file.cs'),\n\t\t\tmarker: randomMarkerData()\n\t\t}]);\n\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 2);\n\t});\n\n\ttest('changeAll must not break integrety, issue #12635', () => {\n\t\tlet service = new markerService.MarkerService();\n\n\t\tservice.changeAll('far', [{\n\t\t\tresource: URI.parse('scheme:path1'),\n\t\t\tmarker: randomMarkerData()\n\t\t}, {\n\t\t\tresource: URI.parse('scheme:path2'),\n\t\t\tmarker: randomMarkerData()\n\t\t}]);\n\n\t\tservice.changeAll('boo', [{\n\t\t\tresource: URI.parse('scheme:path1'),\n\t\t\tmarker: randomMarkerData()\n\t\t}]);\n\n\t\tservice.changeAll('far', [{\n\t\t\tresource: URI.parse('scheme:path1'),\n\t\t\tmarker: randomMarkerData()\n\t\t}, {\n\t\t\tresource: URI.parse('scheme:path2'),\n\t\t\tmarker: randomMarkerData()\n\t\t}]);\n\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 2);\n\t\tassert.strictEqual(service.read({ resource: URI.parse('scheme:path1') }).length, 2);\n\t});\n\n\ttest('invalid marker data', () => {\n\n\t\tlet data = randomMarkerData();\n\t\tlet service = new markerService.MarkerService();\n\n\t\tdata.message = undefined!;\n\t\tservice.changeOne('far', URI.parse('some:uri/path'), [data]);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 0);\n\n\t\tdata.message = null!;\n\t\tservice.changeOne('far', URI.parse('some:uri/path'), [data]);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 0);\n\n\t\tdata.message = 'null';\n\t\tservice.changeOne('far', URI.parse('some:uri/path'), [data]);\n\t\tassert.strictEqual(service.read({ owner: 'far' }).length, 1);\n\t});\n\n\ttest('MapMap#remove returns bad values, https://github.com/microsoft/vscode/issues/13548', () => {\n\t\tlet service = new markerService.MarkerService();\n\n\t\tservice.changeOne('o', URI.parse('some:uri/1'), [randomMarkerData()]);\n\t\tservice.changeOne('o', URI.parse('some:uri/2'), []);\n\n\t});\n\n\ttest('Error code of zero in markers get removed, #31275', function () {\n\t\tlet data = <IMarkerData>{\n\t\t\tcode: '0',\n\t\t\tstartLineNumber: 1,\n\t\t\tstartColumn: 2,\n\t\t\tendLineNumber: 1,\n\t\t\tendColumn: 5,\n\t\t\tmessage: 'test',\n\t\t\tseverity: 0 as MarkerSeverity,\n\t\t\tsource: 'me'\n\t\t};\n\t\tlet service = new markerService.MarkerService();\n\n\t\tservice.changeOne('far', URI.parse('some:thing'), [data]);\n\t\tlet marker = service.read({ resource: URI.parse('some:thing') });\n\n\t\tassert.strictEqual(marker.length, 1);\n\t\tassert.strictEqual(marker[0].code, '0');\n\t});\n});\n"]}