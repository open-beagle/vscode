{"version":3,"file":"accessibilityHelp.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;IA+BhG,MAAM,oCAAoC,GAAG,IAAI,0BAAa,CAAU,gCAAgC,EAAE,KAAK,CAAC,CAAC;IAEjH,IAAM,2BAA2B,GAAjC,MAAM,2BAA4B,SAAQ,sBAAU;QAanD,YACC,MAAmB,EACI,oBAA2C;YAElE,KAAK,EAAE,CAAC;YAER,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAC5B,oBAAoB,CAAC,cAAc,CAAC,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,CAC1E,CAAC;QACH,CAAC;QAnBM,MAAM,CAAC,GAAG,CAAC,MAAmB;YACpC,OAAO,MAAM,CAAC,eAAe,CAC5B,2BAA2B,CAAC,EAAE,CAC9B,CAAC;QACH,CAAC;QAiBM,IAAI;YACV,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACrB,CAAC;QAEM,IAAI;YACV,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACrB,CAAC;KACD,CAAA;IA9BuB,8BAAE,GAAG,4CAA4C,CAAC;IAFpE,2BAA2B;QAe9B,WAAA,qCAAqB,CAAA;OAflB,2BAA2B,CAgChC;IAGD,SAAS,iBAAiB,CAAC,UAA8B,EAAE,kBAA0B;QACpF,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YAC3C,OAAO,wCAAoB,CAAC,WAAW,CAAC;SACxC;QAED,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,IAAI,kBAAkB,EAAE;gBACvB,OAAO,OAAO,CAAC,MAAM,CAAC,wCAAoB,CAAC,oBAAoB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;aACrJ;YAED,OAAO,OAAO,CAAC,MAAM,CAAC,wCAAoB,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;SAC5H;QAED,IAAI,kBAAkB,EAAE;YACvB,OAAO,OAAO,CAAC,MAAM,CAAC,wCAAoB,CAAC,mBAAmB,EAAE,UAAU,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;SACvG;QAED,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,OAAO,OAAO,CAAC,MAAM,CAAC,wCAAoB,CAAC,cAAc,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;SAC9E;QAED,OAAO,EAAE,CAAC;IACX,CAAC;IAED,IAAM,uBAAuB,GAA7B,MAAM,uBAAwB,SAAQ,eAAM;QAW3C,YACC,MAAmB,EACkB,kBAAsC,EACtC,kBAAsC,EAC1C,cAA8B;YAE/D,KAAK,EAAE,CAAC;YAJ6B,uBAAkB,GAAlB,kBAAkB,CAAoB;YACtC,uBAAkB,GAAlB,kBAAkB,CAAoB;YAC1C,mBAAc,GAAd,cAAc,CAAgB;YAI/D,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,oCAAoC,CAAC,MAAM,CAC/D,IAAI,CAAC,kBAAkB,CACvB,CAAC;YAEF,IAAI,CAAC,QAAQ,GAAG,CAAA,GAAA,+BAAiB,CAAA,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,yBAAyB,CAAC,CAAC;YACtD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAC7C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YAElD,IAAI,CAAC,eAAe,GAAG,CAAA,GAAA,+BAAiB,CAAA,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;YACxE,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YACtD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAEhD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YAExB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,GAAG,EAAE;gBAClD,IAAI,IAAI,CAAC,UAAU,EAAE;oBACpB,IAAI,CAAC,OAAO,EAAE,CAAC;iBACf;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,kCAAkC;YAClC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE;gBAC/F,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBACrB,OAAO;iBACP;gBAED,IAAI,CAAC,CAAC,MAAM,CAAC,mCAA8B,CAAC,EAAE;oBAC7C,CAAA,GAAA,YAAK,CAAA,CAAC,wCAAoB,CAAC,eAAe,CAAC,CAAC;oBAE5C,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;wBAC1B,oBAAoB,EAAE,IAAI;qBAC1B,CAAC,CAAC;oBAEH,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;oBAC5C,IAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;oBAErC,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;iBACpB;gBAED,IAAI,CAAC,CAAC,MAAM,CAAC,mCAA8B,CAAC,EAAE;oBAC7C,CAAA,GAAA,YAAK,CAAA,CAAC,wCAAoB,CAAC,WAAW,CAAC,CAAC;oBAExC,IAAI,GAAG,GAA0C,IAAI,CAAC,OAAO,CAAC,aAAa,EAAG,CAAC,oBAAoB,CAAC;oBACpG,IAAI,OAAO,GAAG,KAAK,WAAW,EAAE;wBAC/B,GAAG,GAAG,gDAAgD,CAAC;qBACvD;oBACD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;oBAEzC,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;iBACpB;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,GAAG,EAAE;gBAC9C,IAAI,CAAC,IAAI,EAAE,CAAC;YACb,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC;QAEe,OAAO;YACtB,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;YACvC,KAAK,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;QAEM,KAAK;YACX,OAAO,uBAAuB,CAAC,EAAE,CAAC;QACnC,CAAC;QAEM,UAAU;YAChB,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;QAC9B,CAAC;QAEM,WAAW;YACjB,OAAO;gBACN,UAAU,EAAE,IAAI;aAChB,CAAC;QACH,CAAC;QAEM,IAAI;YACV,IAAI,IAAI,CAAC,UAAU,EAAE;gBACpB,OAAO;aACP;YACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;YACnD,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACtC,CAAC;QAEO,sBAAsB,CAAC,SAAiB,EAAE,GAAW,EAAE,OAAe;YAC7E,IAAI,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;YAC7D,IAAI,EAAE,EAAE;gBACP,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;aAC9C;YACD,OAAO,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QAC3C,CAAC;QAEO,aAAa;YACpB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;YAE1C,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;YAChD,IAAI,kBAAkB,GAAG,CAAC,CAAC;YAE3B,IAAI,UAAU,EAAE;gBACf,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;gBACtC,IAAI,KAAK,EAAE;oBACV,UAAU,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;wBAChC,kBAAkB,IAAI,KAAK,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;oBAC9D,CAAC,CAAC,CAAC;iBACH;aACD;YAED,IAAI,IAAI,GAAG,iBAAiB,CAAC,UAAU,EAAE,kBAAkB,CAAC,CAAC;YAE7D,IAAI,OAAO,CAAC,GAAG,uBAA2B,EAAE;gBAC3C,IAAI,OAAO,CAAC,GAAG,mBAAuB,EAAE;oBACvC,IAAI,IAAI,wCAAoB,CAAC,kBAAkB,CAAC;iBAChD;qBAAM;oBACN,IAAI,IAAI,wCAAoB,CAAC,kBAAkB,CAAC;iBAChD;aACD;iBAAM;gBACN,IAAI,OAAO,CAAC,GAAG,mBAAuB,EAAE;oBACvC,IAAI,IAAI,wCAAoB,CAAC,cAAc,CAAC;iBAC5C;qBAAM;oBACN,IAAI,IAAI,wCAAoB,CAAC,cAAc,CAAC;iBAC5C;aACD;YAED,MAAM,aAAa,GAAG,CACrB,QAAQ,CAAC,WAAW;gBACnB,CAAC,CAAC,wCAAoB,CAAC,mBAAmB;gBAC1C,CAAC,CAAC,wCAAoB,CAAC,wBAAwB,CAChD,CAAC;YACF,QAAQ,OAAO,CAAC,GAAG,8BAAmC,EAAE;gBACvD;oBACC,IAAI,IAAI,SAAS,GAAG,aAAa,CAAC;oBAClC,MAAM;gBACP;oBACC,IAAI,IAAI,SAAS,GAAG,wCAAoB,CAAC,OAAO,CAAC;oBACjD,MAAM;gBACP;oBACC,IAAI,IAAI,SAAS,GAAG,wCAAoB,CAAC,QAAQ,CAAC;oBAClD,IAAI,IAAI,GAAG,GAAG,aAAa,CAAC;oBAC5B,MAAM;aACP;YAGD,IAAI,OAAO,CAAC,GAAG,wBAA2B,EAAE;gBAC3C,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,sBAAsB,CAAC,6CAAwB,CAAC,EAAE,EAAE,wCAAoB,CAAC,iBAAiB,EAAE,wCAAoB,CAAC,qBAAqB,CAAC,CAAC;aACjK;iBAAM;gBACN,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,sBAAsB,CAAC,6CAAwB,CAAC,EAAE,EAAE,wCAAoB,CAAC,kBAAkB,EAAE,wCAAoB,CAAC,sBAAsB,CAAC,CAAC;aACnK;YAED,MAAM,cAAc,GAAG,CACtB,QAAQ,CAAC,WAAW;gBACnB,CAAC,CAAC,wCAAoB,CAAC,UAAU;gBACjC,CAAC,CAAC,wCAAoB,CAAC,eAAe,CACvC,CAAC;YAEF,IAAI,IAAI,SAAS,GAAG,cAAc,CAAC;YAEnC,IAAI,IAAI,MAAM,GAAG,wCAAoB,CAAC,QAAQ,CAAC;YAE/C,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA,GAAA,2CAAmB,CAAA,CAAC,IAAI,CAAC,CAAC,CAAC;YACpE,2GAA2G;YAC3G,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAC/D,CAAC;QAEM,IAAI;YACV,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACrB,OAAO;aACP;YACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YAClD,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;YAC3C,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;YAE5C,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC;QAEO,OAAO;YACd,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;YAEhD,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,KAAK,EAAE,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC;YACtF,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,MAAM,EAAE,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YAExF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAE3B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE1B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;KACD,CAAA;IAhOwB,0BAAE,GAAG,wCAAwC,CAAC;IAC9C,6BAAK,GAAG,GAAG,CAAC;IACZ,8BAAM,GAAG,GAAG,CAAC;IAHhC,uBAAuB;QAa1B,WAAA,+BAAkB,CAAA;QAClB,WAAA,+BAAkB,CAAA;QAClB,WAAA,uBAAc,CAAA;OAfX,uBAAuB,CAiO5B;IAED,MAAM,2BAA4B,SAAQ,+BAAY;QACrD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,qCAAqC;gBACzC,KAAK,EAAE,wCAAoB,CAAC,2BAA2B;gBACvD,KAAK,EAAE,yBAAyB;gBAChC,YAAY,EAAE,SAAS;gBACvB,MAAM,EAAE;oBACP,OAAO,EAAE,2BAAuB;oBAChC,MAAM,yBAAgC;oBACtC,KAAK,EAAE;wBACN,OAAO,EAAE,gCAAyB,cAAa;wBAC/C,SAAS,EAAE,CAAC,2BAAuB,CAAC;qBACpC;iBACD;aACD,CAAC,CAAC;QACJ,CAAC;QAEM,GAAG,CAAC,QAA0B,EAAE,MAAmB;YACzD,IAAI,UAAU,GAAG,2BAA2B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACzD,IAAI,UAAU,EAAE;gBACf,UAAU,CAAC,IAAI,EAAE,CAAC;aAClB;QACF,CAAC;KACD;IAED,CAAA,GAAA,6CAA0B,CAAA,CAAC,2BAA2B,CAAC,EAAE,EAAE,2BAA2B,CAAC,CAAC;IACxF,CAAA,GAAA,uCAAoB,CAAA,CAAC,2BAA2B,CAAC,CAAC;IAElD,MAAM,wBAAwB,GAAG,gCAAa,CAAC,kBAAkB,CAA8B,2BAA2B,CAAC,GAAG,CAAC,CAAC;IAEhI,CAAA,GAAA,wCAAqB,CAAA,CACpB,IAAI,wBAAwB,CAAC;QAC5B,EAAE,EAAE,wBAAwB;QAC5B,YAAY,EAAE,oCAAoC;QAClD,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE;QACtB,MAAM,EAAE;YACP,MAAM,EAAE,0BAAiC,GAAG;YAC5C,MAAM,EAAE,qCAAiB,CAAC,KAAK;YAC/B,OAAO,gBAAgB;YACvB,SAAS,EAAE,CAAC,iCAA6B,CAAC;SAC1C;KACD,CAAC,CACF,CAAC;IAEF,CAAA,GAAA,yCAA0B,CAAA,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,EAAE;QAC/C,MAAM,gBAAgB,GAAG,KAAK,CAAC,QAAQ,CAAC,sCAAsB,CAAC,CAAC;QAChE,IAAI,gBAAgB,EAAE;YACrB,SAAS,CAAC,OAAO,CAAC,+DAA+D,gBAAgB,KAAK,CAAC,CAAC;SACxG;QACD,MAAM,gBAAgB,GAAG,KAAK,CAAC,QAAQ,CAAC,sCAAsB,CAAC,CAAC;QAChE,IAAI,gBAAgB,EAAE;YACrB,SAAS,CAAC,OAAO,CAAC,oDAAoD,gBAAgB,KAAK,CAAC,CAAC;SAC7F;QAGD,MAAM,iBAAiB,GAAG,KAAK,CAAC,QAAQ,CAAC,4BAAY,CAAC,CAAC;QACvD,IAAI,iBAAiB,EAAE;YACtB,SAAS,CAAC,OAAO,CAAC,mEAAmE,iBAAiB,KAAK,CAAC,CAAC;SAC7G;QAED,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,8BAAc,CAAC,CAAC;QAChD,IAAI,QAAQ,EAAE;YACb,SAAS,CAAC,OAAO,CAAC,+DAA+D,QAAQ,KAAK,CAAC,CAAC;SAChG;IACF,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./accessibilityHelp';\nimport * as dom from 'vs/base/browser/dom';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { renderFormattedText } from 'vs/base/browser/formattedTextRenderer';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport * as strings from 'vs/base/common/strings';\nimport { URI } from 'vs/base/common/uri';\nimport { ICodeEditor, IOverlayWidget, IOverlayWidgetPosition } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from 'vs/editor/browser/editorExtensions';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { ToggleTabFocusModeAction } from 'vs/editor/contrib/toggleTabFocusMode/toggleTabFocusMode';\nimport { IStandaloneEditorConstructionOptions } from 'vs/editor/standalone/browser/standaloneCodeEditor';\nimport { IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { AccessibilitySupport } from 'vs/platform/accessibility/common/accessibility';\nimport { AccessibilityHelpNLS } from 'vs/editor/common/standaloneStrings';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\n\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey<boolean>('accessibilityHelpWidgetVisible', false);\n\nclass AccessibilityHelpController extends Disposable\n\timplements IEditorContribution {\n\tpublic static readonly ID = 'editor.contrib.accessibilityHelpController';\n\n\tpublic static get(editor: ICodeEditor): AccessibilityHelpController {\n\t\treturn editor.getContribution<AccessibilityHelpController>(\n\t\t\tAccessibilityHelpController.ID\n\t\t);\n\t}\n\n\tprivate readonly _editor: ICodeEditor;\n\tprivate readonly _widget: AccessibilityHelpWidget;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tthis._editor = editor;\n\t\tthis._widget = this._register(\n\t\t\tinstantiationService.createInstance(AccessibilityHelpWidget, this._editor)\n\t\t);\n\t}\n\n\tpublic show(): void {\n\t\tthis._widget.show();\n\t}\n\n\tpublic hide(): void {\n\t\tthis._widget.hide();\n\t}\n}\n\n\nfunction getSelectionLabel(selections: Selection[] | null, charactersSelected: number): string {\n\tif (!selections || selections.length === 0) {\n\t\treturn AccessibilityHelpNLS.noSelection;\n\t}\n\n\tif (selections.length === 1) {\n\t\tif (charactersSelected) {\n\t\t\treturn strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n\t\t}\n\n\t\treturn strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n\t}\n\n\tif (charactersSelected) {\n\t\treturn strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n\t}\n\n\tif (selections.length > 0) {\n\t\treturn strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n\t}\n\n\treturn '';\n}\n\nclass AccessibilityHelpWidget extends Widget implements IOverlayWidget {\n\tprivate static readonly ID = 'editor.contrib.accessibilityHelpWidget';\n\tprivate static readonly WIDTH = 500;\n\tprivate static readonly HEIGHT = 300;\n\n\tprivate readonly _editor: ICodeEditor;\n\tprivate readonly _domNode: FastDomNode<HTMLElement>;\n\tprivate readonly _contentDomNode: FastDomNode<HTMLElement>;\n\tprivate _isVisible: boolean;\n\tprivate readonly _isVisibleKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService\n\t) {\n\t\tsuper();\n\n\t\tthis._editor = editor;\n\t\tthis._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(\n\t\t\tthis._contextKeyService\n\t\t);\n\n\t\tthis._domNode = createFastDomNode(document.createElement('div'));\n\t\tthis._domNode.setClassName('accessibilityHelpWidget');\n\t\tthis._domNode.setDisplay('none');\n\t\tthis._domNode.setAttribute('role', 'dialog');\n\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\n\t\tthis._contentDomNode = createFastDomNode(document.createElement('div'));\n\t\tthis._contentDomNode.setAttribute('role', 'document');\n\t\tthis._domNode.appendChild(this._contentDomNode);\n\n\t\tthis._isVisible = false;\n\n\t\tthis._register(this._editor.onDidLayoutChange(() => {\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis._layout();\n\t\t\t}\n\t\t}));\n\n\t\t// Intentionally not configurable!\n\t\tthis._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n\t\t\tif (!this._isVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.KEY_E)) {\n\t\t\t\talert(AccessibilityHelpNLS.emergencyConfOn);\n\n\t\t\t\tthis._editor.updateOptions({\n\t\t\t\t\taccessibilitySupport: 'on'\n\t\t\t\t});\n\n\t\t\t\tdom.clearNode(this._contentDomNode.domNode);\n\t\t\t\tthis._buildContent();\n\t\t\t\tthis._contentDomNode.domNode.focus();\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.KEY_H)) {\n\t\t\t\talert(AccessibilityHelpNLS.openingDocs);\n\n\t\t\t\tlet url = (<IStandaloneEditorConstructionOptions>this._editor.getRawOptions()).accessibilityHelpUrl;\n\t\t\t\tif (typeof url === 'undefined') {\n\t\t\t\t\turl = 'https://go.microsoft.com/fwlink/?linkid=852450';\n\t\t\t\t}\n\t\t\t\tthis._openerService.open(URI.parse(url));\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}));\n\n\t\tthis.onblur(this._contentDomNode.domNode, () => {\n\t\t\tthis.hide();\n\t\t});\n\n\t\tthis._editor.addOverlayWidget(this);\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._editor.removeOverlayWidget(this);\n\t\tsuper.dispose();\n\t}\n\n\tpublic getId(): string {\n\t\treturn AccessibilityHelpWidget.ID;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode.domNode;\n\t}\n\n\tpublic getPosition(): IOverlayWidgetPosition {\n\t\treturn {\n\t\t\tpreference: null\n\t\t};\n\t}\n\n\tpublic show(): void {\n\t\tif (this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = true;\n\t\tthis._isVisibleKey.set(true);\n\t\tthis._layout();\n\t\tthis._domNode.setDisplay('block');\n\t\tthis._domNode.setAttribute('aria-hidden', 'false');\n\t\tthis._contentDomNode.domNode.tabIndex = 0;\n\t\tthis._buildContent();\n\t\tthis._contentDomNode.domNode.focus();\n\t}\n\n\tprivate _descriptionForCommand(commandId: string, msg: string, noKbMsg: string): string {\n\t\tlet kb = this._keybindingService.lookupKeybinding(commandId);\n\t\tif (kb) {\n\t\t\treturn strings.format(msg, kb.getAriaLabel());\n\t\t}\n\t\treturn strings.format(noKbMsg, commandId);\n\t}\n\n\tprivate _buildContent() {\n\t\tconst options = this._editor.getOptions();\n\n\t\tconst selections = this._editor.getSelections();\n\t\tlet charactersSelected = 0;\n\n\t\tif (selections) {\n\t\t\tconst model = this._editor.getModel();\n\t\t\tif (model) {\n\t\t\t\tselections.forEach((selection) => {\n\t\t\t\t\tcharactersSelected += model.getValueLengthInRange(selection);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tlet text = getSelectionLabel(selections, charactersSelected);\n\n\t\tif (options.get(EditorOption.inDiffEditor)) {\n\t\t\tif (options.get(EditorOption.readOnly)) {\n\t\t\t\ttext += AccessibilityHelpNLS.readonlyDiffEditor;\n\t\t\t} else {\n\t\t\t\ttext += AccessibilityHelpNLS.editableDiffEditor;\n\t\t\t}\n\t\t} else {\n\t\t\tif (options.get(EditorOption.readOnly)) {\n\t\t\t\ttext += AccessibilityHelpNLS.readonlyEditor;\n\t\t\t} else {\n\t\t\t\ttext += AccessibilityHelpNLS.editableEditor;\n\t\t\t}\n\t\t}\n\n\t\tconst turnOnMessage = (\n\t\t\tplatform.isMacintosh\n\t\t\t\t? AccessibilityHelpNLS.changeConfigToOnMac\n\t\t\t\t: AccessibilityHelpNLS.changeConfigToOnWinLinux\n\t\t);\n\t\tswitch (options.get(EditorOption.accessibilitySupport)) {\n\t\t\tcase AccessibilitySupport.Unknown:\n\t\t\t\ttext += '\\n\\n - ' + turnOnMessage;\n\t\t\t\tbreak;\n\t\t\tcase AccessibilitySupport.Enabled:\n\t\t\t\ttext += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n\t\t\t\tbreak;\n\t\t\tcase AccessibilitySupport.Disabled:\n\t\t\t\ttext += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n\t\t\t\ttext += ' ' + turnOnMessage;\n\t\t\t\tbreak;\n\t\t}\n\n\n\t\tif (options.get(EditorOption.tabFocusMode)) {\n\t\t\ttext += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n\t\t} else {\n\t\t\ttext += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n\t\t}\n\n\t\tconst openDocMessage = (\n\t\t\tplatform.isMacintosh\n\t\t\t\t? AccessibilityHelpNLS.openDocMac\n\t\t\t\t: AccessibilityHelpNLS.openDocWinLinux\n\t\t);\n\n\t\ttext += '\\n\\n - ' + openDocMessage;\n\n\t\ttext += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n\n\t\tthis._contentDomNode.domNode.appendChild(renderFormattedText(text));\n\t\t// Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n\t\tthis._contentDomNode.domNode.setAttribute('aria-label', text);\n\t}\n\n\tpublic hide(): void {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tthis._isVisibleKey.reset();\n\t\tthis._domNode.setDisplay('none');\n\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\t\tthis._contentDomNode.domNode.tabIndex = -1;\n\t\tdom.clearNode(this._contentDomNode.domNode);\n\n\t\tthis._editor.focus();\n\t}\n\n\tprivate _layout(): void {\n\t\tlet editorLayout = this._editor.getLayoutInfo();\n\n\t\tlet w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n\t\tlet h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n\n\t\tthis._domNode.setWidth(w);\n\t\tthis._domNode.setHeight(h);\n\n\t\tlet top = Math.round((editorLayout.height - h) / 2);\n\t\tthis._domNode.setTop(top);\n\n\t\tlet left = Math.round((editorLayout.width - w) / 2);\n\t\tthis._domNode.setLeft(left);\n\t}\n}\n\nclass ShowAccessibilityHelpAction extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.showAccessibilityHelp',\n\t\t\tlabel: AccessibilityHelpNLS.showAccessibilityHelpAction,\n\t\t\talias: 'Show Accessibility Help',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tprimary: KeyMod.Alt | KeyCode.F1,\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\tlinux: {\n\t\t\t\t\tprimary: KeyMod.Alt | KeyMod.Shift | KeyCode.F1,\n\t\t\t\t\tsecondary: [KeyMod.Alt | KeyCode.F1]\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tlet controller = AccessibilityHelpController.get(editor);\n\t\tif (controller) {\n\t\t\tcontroller.show();\n\t\t}\n\t}\n}\n\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\n\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution<AccessibilityHelpController>(AccessibilityHelpController.get);\n\nregisterEditorCommand(\n\tnew AccessibilityHelpCommand({\n\t\tid: 'closeAccessibilityHelp',\n\t\tprecondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n\t\thandler: x => x.hide(),\n\t\tkbOpts: {\n\t\t\tweight: KeybindingWeight.EditorContrib + 100,\n\t\t\tkbExpr: EditorContextKeys.focus,\n\t\t\tprimary: KeyCode.Escape,\n\t\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t\t}\n\t})\n);\n\nregisterThemingParticipant((theme, collector) => {\n\tconst widgetBackground = theme.getColor(editorWidgetBackground);\n\tif (widgetBackground) {\n\t\tcollector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n\t}\n\tconst widgetForeground = theme.getColor(editorWidgetForeground);\n\tif (widgetForeground) {\n\t\tcollector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n\t}\n\n\n\tconst widgetShadowColor = theme.getColor(widgetShadow);\n\tif (widgetShadowColor) {\n\t\tcollector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n\t}\n\n\tconst hcBorder = theme.getColor(contrastBorder);\n\tif (hcBorder) {\n\t\tcollector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n\t}\n});\n"]}