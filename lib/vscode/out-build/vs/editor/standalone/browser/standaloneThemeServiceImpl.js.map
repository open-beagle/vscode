{"version":3,"file":"standaloneThemeServiceImpl.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/standalone/browser/standaloneThemeServiceImpl.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { Color } from 'vs/base/common/color';\nimport { Emitter } from 'vs/base/common/event';\nimport { FontStyle, TokenizationRegistry, TokenMetadata } from 'vs/editor/common/modes';\nimport { ITokenThemeRule, TokenTheme, generateTokensCSSForColorMap } from 'vs/editor/common/modes/supports/tokenization';\nimport { BuiltinTheme, IStandaloneTheme, IStandaloneThemeData, IStandaloneThemeService } from 'vs/editor/standalone/common/standaloneThemeService';\nimport { hc_black, vs, vs_dark } from 'vs/editor/standalone/common/themes';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { ColorIdentifier, Extensions, IColorRegistry } from 'vs/platform/theme/common/colorRegistry';\nimport { Extensions as ThemingExtensions, ICssStyleCollector, IFileIconTheme, IThemingRegistry, ITokenStyle } from 'vs/platform/theme/common/themeService';\nimport { IDisposable, Disposable } from 'vs/base/common/lifecycle';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\nimport { getIconsStyleSheet } from 'vs/platform/theme/browser/iconsStyleSheet';\n\nconst VS_THEME_NAME = 'vs';\nconst VS_DARK_THEME_NAME = 'vs-dark';\nconst HC_BLACK_THEME_NAME = 'hc-black';\n\nconst colorRegistry = Registry.as<IColorRegistry>(Extensions.ColorContribution);\nconst themingRegistry = Registry.as<IThemingRegistry>(ThemingExtensions.ThemingContribution);\n\nclass StandaloneTheme implements IStandaloneTheme {\n\n\tpublic readonly id: string;\n\tpublic readonly themeName: string;\n\n\tprivate readonly themeData: IStandaloneThemeData;\n\tprivate colors: Map<string, Color> | null;\n\tprivate readonly defaultColors: { [colorId: string]: Color | undefined; };\n\tprivate _tokenTheme: TokenTheme | null;\n\n\tconstructor(name: string, standaloneThemeData: IStandaloneThemeData) {\n\t\tthis.themeData = standaloneThemeData;\n\t\tlet base = standaloneThemeData.base;\n\t\tif (name.length > 0) {\n\t\t\tif (isBuiltinTheme(name)) {\n\t\t\t\tthis.id = name;\n\t\t\t} else {\n\t\t\t\tthis.id = base + ' ' + name;\n\t\t\t}\n\t\t\tthis.themeName = name;\n\t\t} else {\n\t\t\tthis.id = base;\n\t\t\tthis.themeName = base;\n\t\t}\n\t\tthis.colors = null;\n\t\tthis.defaultColors = Object.create(null);\n\t\tthis._tokenTheme = null;\n\t}\n\n\tpublic get label(): string {\n\t\treturn this.themeName;\n\t}\n\n\tpublic get base(): string {\n\t\treturn this.themeData.base;\n\t}\n\n\tpublic notifyBaseUpdated() {\n\t\tif (this.themeData.inherit) {\n\t\t\tthis.colors = null;\n\t\t\tthis._tokenTheme = null;\n\t\t}\n\t}\n\n\tprivate getColors(): Map<string, Color> {\n\t\tif (!this.colors) {\n\t\t\tconst colors = new Map<string, Color>();\n\t\t\tfor (let id in this.themeData.colors) {\n\t\t\t\tcolors.set(id, Color.fromHex(this.themeData.colors[id]));\n\t\t\t}\n\t\t\tif (this.themeData.inherit) {\n\t\t\t\tlet baseData = getBuiltinRules(this.themeData.base);\n\t\t\t\tfor (let id in baseData.colors) {\n\t\t\t\t\tif (!colors.has(id)) {\n\t\t\t\t\t\tcolors.set(id, Color.fromHex(baseData.colors[id]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.colors = colors;\n\t\t}\n\t\treturn this.colors;\n\t}\n\n\tpublic getColor(colorId: ColorIdentifier, useDefault?: boolean): Color | undefined {\n\t\tconst color = this.getColors().get(colorId);\n\t\tif (color) {\n\t\t\treturn color;\n\t\t}\n\t\tif (useDefault !== false) {\n\t\t\treturn this.getDefault(colorId);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getDefault(colorId: ColorIdentifier): Color | undefined {\n\t\tlet color = this.defaultColors[colorId];\n\t\tif (color) {\n\t\t\treturn color;\n\t\t}\n\t\tcolor = colorRegistry.resolveDefaultColor(colorId, this);\n\t\tthis.defaultColors[colorId] = color;\n\t\treturn color;\n\t}\n\n\tpublic defines(colorId: ColorIdentifier): boolean {\n\t\treturn Object.prototype.hasOwnProperty.call(this.getColors(), colorId);\n\t}\n\n\tpublic get type(): ColorScheme {\n\t\tswitch (this.base) {\n\t\t\tcase VS_THEME_NAME: return ColorScheme.LIGHT;\n\t\t\tcase HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST;\n\t\t\tdefault: return ColorScheme.DARK;\n\t\t}\n\t}\n\n\tpublic get tokenTheme(): TokenTheme {\n\t\tif (!this._tokenTheme) {\n\t\t\tlet rules: ITokenThemeRule[] = [];\n\t\t\tlet encodedTokensColors: string[] = [];\n\t\t\tif (this.themeData.inherit) {\n\t\t\t\tlet baseData = getBuiltinRules(this.themeData.base);\n\t\t\t\trules = baseData.rules;\n\t\t\t\tif (baseData.encodedTokensColors) {\n\t\t\t\t\tencodedTokensColors = baseData.encodedTokensColors;\n\t\t\t\t}\n\t\t\t}\n\t\t\trules = rules.concat(this.themeData.rules);\n\t\t\tif (this.themeData.encodedTokensColors) {\n\t\t\t\tencodedTokensColors = this.themeData.encodedTokensColors;\n\t\t\t}\n\t\t\tthis._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n\t\t}\n\t\treturn this._tokenTheme;\n\t}\n\n\tpublic getTokenStyleMetadata(type: string, modifiers: string[], modelLanguage: string): ITokenStyle | undefined {\n\t\t// use theme rules match\n\t\tconst style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n\t\tconst metadata = style.metadata;\n\t\tconst foreground = TokenMetadata.getForeground(metadata);\n\t\tconst fontStyle = TokenMetadata.getFontStyle(metadata);\n\t\treturn {\n\t\t\tforeground: foreground,\n\t\t\titalic: Boolean(fontStyle & FontStyle.Italic),\n\t\t\tbold: Boolean(fontStyle & FontStyle.Bold),\n\t\t\tunderline: Boolean(fontStyle & FontStyle.Underline)\n\t\t};\n\t}\n\n\tpublic get tokenColorMap(): string[] {\n\t\treturn [];\n\t}\n\n\tpublic readonly semanticHighlighting = false;\n}\n\nfunction isBuiltinTheme(themeName: string): themeName is BuiltinTheme {\n\treturn (\n\t\tthemeName === VS_THEME_NAME\n\t\t|| themeName === VS_DARK_THEME_NAME\n\t\t|| themeName === HC_BLACK_THEME_NAME\n\t);\n}\n\nfunction getBuiltinRules(builtinTheme: BuiltinTheme): IStandaloneThemeData {\n\tswitch (builtinTheme) {\n\t\tcase VS_THEME_NAME:\n\t\t\treturn vs;\n\t\tcase VS_DARK_THEME_NAME:\n\t\t\treturn vs_dark;\n\t\tcase HC_BLACK_THEME_NAME:\n\t\t\treturn hc_black;\n\t}\n}\n\nfunction newBuiltInTheme(builtinTheme: BuiltinTheme): StandaloneTheme {\n\tlet themeData = getBuiltinRules(builtinTheme);\n\treturn new StandaloneTheme(builtinTheme, themeData);\n}\n\nexport class StandaloneThemeServiceImpl extends Disposable implements IStandaloneThemeService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onColorThemeChange = this._register(new Emitter<IStandaloneTheme>());\n\tpublic readonly onDidColorThemeChange = this._onColorThemeChange.event;\n\n\tprivate readonly _onFileIconThemeChange = this._register(new Emitter<IFileIconTheme>());\n\tpublic readonly onDidFileIconThemeChange = this._onFileIconThemeChange.event;\n\n\tprivate readonly _environment: IEnvironmentService = Object.create(null);\n\tprivate readonly _knownThemes: Map<string, StandaloneTheme>;\n\tprivate _autoDetectHighContrast: boolean;\n\tprivate _codiconCSS: string;\n\tprivate _themeCSS: string;\n\tprivate _allCSS: string;\n\tprivate _globalStyleElement: HTMLStyleElement | null;\n\tprivate _styleElements: HTMLStyleElement[];\n\tprivate _colorMapOverride: Color[] | null;\n\tprivate _desiredTheme!: IStandaloneTheme;\n\tprivate _theme!: IStandaloneTheme;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._autoDetectHighContrast = true;\n\n\t\tthis._knownThemes = new Map<string, StandaloneTheme>();\n\t\tthis._knownThemes.set(VS_THEME_NAME, newBuiltInTheme(VS_THEME_NAME));\n\t\tthis._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n\t\tthis._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n\n\t\tconst iconsStyleSheet = getIconsStyleSheet();\n\n\t\tthis._codiconCSS = iconsStyleSheet.getCSS();\n\t\tthis._themeCSS = '';\n\t\tthis._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n\t\tthis._globalStyleElement = null;\n\t\tthis._styleElements = [];\n\t\tthis._colorMapOverride = null;\n\t\tthis.setTheme(VS_THEME_NAME);\n\n\t\ticonsStyleSheet.onDidChange(() => {\n\t\t\tthis._codiconCSS = iconsStyleSheet.getCSS();\n\t\t\tthis._updateCSS();\n\t\t});\n\n\t\twindow.matchMedia('(forced-colors: active)').addEventListener('change', () => {\n\t\t\tthis._updateActualTheme();\n\t\t});\n\t}\n\n\tpublic registerEditorContainer(domNode: HTMLElement): IDisposable {\n\t\tif (dom.isInShadowDOM(domNode)) {\n\t\t\treturn this._registerShadowDomContainer(domNode);\n\t\t}\n\t\treturn this._registerRegularEditorContainer();\n\t}\n\n\tprivate _registerRegularEditorContainer(): IDisposable {\n\t\tif (!this._globalStyleElement) {\n\t\t\tthis._globalStyleElement = dom.createStyleSheet();\n\t\t\tthis._globalStyleElement.className = 'monaco-colors';\n\t\t\tthis._globalStyleElement.textContent = this._allCSS;\n\t\t\tthis._styleElements.push(this._globalStyleElement);\n\t\t}\n\t\treturn Disposable.None;\n\t}\n\n\tprivate _registerShadowDomContainer(domNode: HTMLElement): IDisposable {\n\t\tconst styleElement = dom.createStyleSheet(domNode);\n\t\tstyleElement.className = 'monaco-colors';\n\t\tstyleElement.textContent = this._allCSS;\n\t\tthis._styleElements.push(styleElement);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tfor (let i = 0; i < this._styleElements.length; i++) {\n\t\t\t\t\tif (this._styleElements[i] === styleElement) {\n\t\t\t\t\t\tthis._styleElements.splice(i, 1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic defineTheme(themeName: string, themeData: IStandaloneThemeData): void {\n\t\tif (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n\t\t\tthrow new Error('Illegal theme name!');\n\t\t}\n\t\tif (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n\t\t\tthrow new Error('Illegal theme base!');\n\t\t}\n\t\t// set or replace theme\n\t\tthis._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n\n\t\tif (isBuiltinTheme(themeName)) {\n\t\t\tthis._knownThemes.forEach(theme => {\n\t\t\t\tif (theme.base === themeName) {\n\t\t\t\t\ttheme.notifyBaseUpdated();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (this._theme.themeName === themeName) {\n\t\t\tthis.setTheme(themeName); // refresh theme\n\t\t}\n\t}\n\n\tpublic getColorTheme(): IStandaloneTheme {\n\t\treturn this._theme;\n\t}\n\n\tpublic setColorMapOverride(colorMapOverride: Color[] | null): void {\n\t\tthis._colorMapOverride = colorMapOverride;\n\t\tthis._updateThemeOrColorMap();\n\t}\n\n\tpublic setTheme(themeName: string): void {\n\t\tlet theme: StandaloneTheme;\n\t\tif (this._knownThemes.has(themeName)) {\n\t\t\ttheme = this._knownThemes.get(themeName)!;\n\t\t} else {\n\t\t\ttheme = this._knownThemes.get(VS_THEME_NAME)!;\n\t\t}\n\t\tthis._desiredTheme = theme;\n\t\tthis._updateActualTheme();\n\t}\n\n\tprivate _updateActualTheme(): void {\n\t\tconst theme = (\n\t\t\tthis._autoDetectHighContrast && window.matchMedia(`(forced-colors: active)`).matches\n\t\t\t\t? this._knownThemes.get(HC_BLACK_THEME_NAME)!\n\t\t\t\t: this._desiredTheme\n\t\t);\n\t\tif (this._theme === theme) {\n\t\t\t// Nothing to do\n\t\t\treturn;\n\t\t}\n\t\tthis._theme = theme;\n\t\tthis._updateThemeOrColorMap();\n\t}\n\n\tpublic setAutoDetectHighContrast(autoDetectHighContrast: boolean): void {\n\t\tthis._autoDetectHighContrast = autoDetectHighContrast;\n\t\tthis._updateActualTheme();\n\t}\n\n\tprivate _updateThemeOrColorMap(): void {\n\t\tlet cssRules: string[] = [];\n\t\tlet hasRule: { [rule: string]: boolean; } = {};\n\t\tlet ruleCollector: ICssStyleCollector = {\n\t\t\taddRule: (rule: string) => {\n\t\t\t\tif (!hasRule[rule]) {\n\t\t\t\t\tcssRules.push(rule);\n\t\t\t\t\thasRule[rule] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthemingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n\n\t\tconst colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n\t\truleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n\n\t\tthis._themeCSS = cssRules.join('\\n');\n\t\tthis._updateCSS();\n\n\t\tTokenizationRegistry.setColorMap(colorMap);\n\t\tthis._onColorThemeChange.fire(this._theme);\n\t}\n\n\tprivate _updateCSS(): void {\n\t\tthis._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n\t\tthis._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n\t}\n\n\tpublic getFileIconTheme(): IFileIconTheme {\n\t\treturn {\n\t\t\thasFileIcons: false,\n\t\t\thasFolderIcons: false,\n\t\t\thidesExplorerArrows: false\n\t\t};\n\t}\n}\n"]}