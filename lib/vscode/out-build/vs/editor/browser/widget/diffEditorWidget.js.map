{"version":3,"sources":["vs/editor/browser/widget/diffEditorWidget.ts"],"names":[],"mappings":"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","file":"diffEditorWidget.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/diffEditor';\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { ISashEvent, IVerticalSashLayoutProvider, Sash, SashState, Orientation } from 'vs/base/browser/ui/sash/sash';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { Color } from 'vs/base/common/color';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { Configuration } from 'vs/editor/browser/config/configuration';\nimport { StableEditorScrollState } from 'vs/editor/browser/core/editorState';\nimport * as editorBrowser from 'vs/editor/browser/editorBrowser';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { DiffReview } from 'vs/editor/browser/widget/diffReview';\nimport { IDiffEditorOptions, EditorLayoutInfo, EditorOption, EditorOptions, EditorFontLigatures, stringSet as validateStringSetOption, boolean as validateBooleanOption } from 'vs/editor/common/config/editorOptions';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { ISelection, Selection } from 'vs/editor/common/core/selection';\nimport { IStringBuilder, createStringBuilder } from 'vs/editor/common/core/stringBuilder';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport { IModelDecorationsChangeAccessor, IModelDeltaDecoration, ITextModel } from 'vs/editor/common/model';\nimport { ModelDecorationOptions } from 'vs/editor/common/model/textModel';\nimport { IDiffComputationResult, IEditorWorkerService } from 'vs/editor/common/services/editorWorkerService';\nimport { OverviewRulerZone } from 'vs/editor/common/view/overviewZoneManager';\nimport { LineDecoration } from 'vs/editor/common/viewLayout/lineDecorations';\nimport { RenderLineInput, renderViewLine } from 'vs/editor/common/viewLayout/viewLineRenderer';\nimport { IEditorWhitespace } from 'vs/editor/common/viewLayout/linesLayout';\nimport { ILineBreaksComputer, InlineDecoration, InlineDecorationType, IViewModel, ViewLineRenderingData } from 'vs/editor/common/viewModel/viewModel';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { defaultInsertColor, defaultRemoveColor, diffBorder, diffInserted, diffInsertedOutline, diffRemoved, diffRemovedOutline, scrollbarShadow, scrollbarSliderBackground, scrollbarSliderHoverBackground, scrollbarSliderActiveBackground, diffDiagonalFill } from 'vs/platform/theme/common/colorRegistry';\nimport { IColorTheme, IThemeService, getThemeTypeSelector, registerThemingParticipant, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IDiffLinesChange, InlineDiffMargin } from 'vs/editor/browser/widget/inlineDiffMargin';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { Constants } from 'vs/base/common/uint';\nimport { EditorExtensionsRegistry, IDiffEditorContributionDescription } from 'vs/editor/browser/editorExtensions';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { IEditorProgressService, IProgressRunner } from 'vs/platform/progress/common/progress';\nimport { ElementSizeObserver } from 'vs/editor/browser/config/elementSizeObserver';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from 'vs/base/browser/ui/mouseCursor/mouseCursor';\nimport { IViewLineTokens } from 'vs/editor/common/core/lineTokens';\nimport { FontInfo } from 'vs/editor/common/config/fontInfo';\nimport { registerIcon } from 'vs/platform/theme/common/iconRegistry';\n\nexport interface IDiffCodeEditorWidgetOptions {\n\toriginalEditor?: ICodeEditorWidgetOptions;\n\tmodifiedEditor?: ICodeEditorWidgetOptions;\n}\n\ninterface IEditorDiffDecorations {\n\tdecorations: IModelDeltaDecoration[];\n\toverviewZones: OverviewRulerZone[];\n}\n\ninterface IEditorDiffDecorationsWithZones extends IEditorDiffDecorations {\n\tzones: IMyViewZone[];\n}\n\ninterface IEditorsDiffDecorationsWithZones {\n\toriginal: IEditorDiffDecorationsWithZones;\n\tmodified: IEditorDiffDecorationsWithZones;\n}\n\ninterface IEditorsZones {\n\toriginal: IMyViewZone[];\n\tmodified: IMyViewZone[];\n}\n\nclass VisualEditorState {\n\tprivate _zones: string[];\n\tprivate _inlineDiffMargins: InlineDiffMargin[];\n\tprivate _zonesMap: { [zoneId: string]: boolean; };\n\tprivate _decorations: string[];\n\n\tconstructor(\n\t\tprivate _contextMenuService: IContextMenuService,\n\t\tprivate _clipboardService: IClipboardService\n\t) {\n\t\tthis._zones = [];\n\t\tthis._inlineDiffMargins = [];\n\t\tthis._zonesMap = {};\n\t\tthis._decorations = [];\n\t}\n\n\tpublic getForeignViewZones(allViewZones: IEditorWhitespace[]): IEditorWhitespace[] {\n\t\treturn allViewZones.filter((z) => !this._zonesMap[String(z.id)]);\n\t}\n\n\tpublic clean(editor: CodeEditorWidget): void {\n\t\t// (1) View zones\n\t\tif (this._zones.length > 0) {\n\t\t\teditor.changeViewZones((viewChangeAccessor: editorBrowser.IViewZoneChangeAccessor) => {\n\t\t\t\tfor (const zoneId of this._zones) {\n\t\t\t\t\tviewChangeAccessor.removeZone(zoneId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis._zones = [];\n\t\tthis._zonesMap = {};\n\n\t\t// (2) Model decorations\n\t\tthis._decorations = editor.deltaDecorations(this._decorations, []);\n\t}\n\n\tpublic apply(editor: CodeEditorWidget, overviewRuler: editorBrowser.IOverviewRuler | null, newDecorations: IEditorDiffDecorationsWithZones, restoreScrollState: boolean): void {\n\n\t\tconst scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\n\n\t\t// view zones\n\t\teditor.changeViewZones((viewChangeAccessor: editorBrowser.IViewZoneChangeAccessor) => {\n\t\t\tfor (const zoneId of this._zones) {\n\t\t\t\tviewChangeAccessor.removeZone(zoneId);\n\t\t\t}\n\t\t\tfor (const inlineDiffMargin of this._inlineDiffMargins) {\n\t\t\t\tinlineDiffMargin.dispose();\n\t\t\t}\n\t\t\tthis._zones = [];\n\t\t\tthis._zonesMap = {};\n\t\t\tthis._inlineDiffMargins = [];\n\t\t\tfor (let i = 0, length = newDecorations.zones.length; i < length; i++) {\n\t\t\t\tconst viewZone = <editorBrowser.IViewZone>newDecorations.zones[i];\n\t\t\t\tviewZone.suppressMouseDown = true;\n\t\t\t\tconst zoneId = viewChangeAccessor.addZone(viewZone);\n\t\t\t\tthis._zones.push(zoneId);\n\t\t\t\tthis._zonesMap[String(zoneId)] = true;\n\n\t\t\t\tif (newDecorations.zones[i].diff && viewZone.marginDomNode) {\n\t\t\t\t\tviewZone.suppressMouseDown = false;\n\t\t\t\t\tthis._inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff!, this._contextMenuService, this._clipboardService));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (scrollState) {\n\t\t\tscrollState.restore(editor);\n\t\t}\n\n\t\t// decorations\n\t\tthis._decorations = editor.deltaDecorations(this._decorations, newDecorations.decorations);\n\n\t\t// overview ruler\n\t\tif (overviewRuler) {\n\t\t\toverviewRuler.setZones(newDecorations.overviewZones);\n\t\t}\n\t}\n}\n\nlet DIFF_EDITOR_ID = 0;\n\n\nconst diffInsertIcon = registerIcon('diff-insert', Codicon.add, nls.localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nconst diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, nls.localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nconst ttPolicy = window.trustedTypes?.createPolicy('diffEditorWidget', { createHTML: value => value });\n\nexport class DiffEditorWidget extends Disposable implements editorBrowser.IDiffEditor {\n\n\tprivate static readonly ONE_OVERVIEW_WIDTH = 15;\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\n\tprivate static readonly UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\n\n\tprivate readonly _onDidDispose: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidDispose: Event<void> = this._onDidDispose.event;\n\n\tprivate readonly _onDidUpdateDiff: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidUpdateDiff: Event<void> = this._onDidUpdateDiff.event;\n\n\tprivate readonly _onDidContentSizeChange: Emitter<editorCommon.IContentSizeChangedEvent> = this._register(new Emitter<editorCommon.IContentSizeChangedEvent>());\n\tpublic readonly onDidContentSizeChange: Event<editorCommon.IContentSizeChangedEvent> = this._onDidContentSizeChange.event;\n\n\tprivate readonly _id: number;\n\tprivate _state: editorBrowser.DiffEditorState;\n\tprivate _updatingDiffProgress: IProgressRunner | null;\n\n\tprivate readonly _domElement: HTMLElement;\n\tprotected readonly _containerDomElement: HTMLElement;\n\tprivate readonly _overviewDomElement: HTMLElement;\n\tprivate readonly _overviewViewportDomElement: FastDomNode<HTMLElement>;\n\n\tprivate readonly _elementSizeObserver: ElementSizeObserver;\n\n\tprivate readonly _originalEditor: CodeEditorWidget;\n\tprivate readonly _originalDomNode: HTMLElement;\n\tprivate readonly _originalEditorState: VisualEditorState;\n\tprivate _originalOverviewRuler: editorBrowser.IOverviewRuler | null;\n\n\tprivate readonly _modifiedEditor: CodeEditorWidget;\n\tprivate readonly _modifiedDomNode: HTMLElement;\n\tprivate readonly _modifiedEditorState: VisualEditorState;\n\tprivate _modifiedOverviewRuler: editorBrowser.IOverviewRuler | null;\n\n\tprivate _currentlyChangingViewZones: boolean;\n\tprivate _beginUpdateDecorationsTimeout: number;\n\tprivate _diffComputationToken: number;\n\tprivate _diffComputationResult: IDiffComputationResult | null;\n\n\tprivate _isVisible: boolean;\n\tprivate _isHandlingScrollEvent: boolean;\n\n\tprivate _ignoreTrimWhitespace: boolean;\n\tprivate _originalIsEditable: boolean;\n\tprivate _diffCodeLens: boolean;\n\tprivate _diffWordWrap: 'off' | 'on' | 'inherit';\n\n\tprivate _renderSideBySide: boolean;\n\tprivate _maxComputationTime: number;\n\tprivate _renderIndicators: boolean;\n\tprivate _enableSplitViewResizing: boolean;\n\tprivate _renderOverviewRuler: boolean;\n\tprivate _strategy!: DiffEditorWidgetStyle;\n\n\tprivate readonly _updateDecorationsRunner: RunOnceScheduler;\n\n\tprivate readonly _editorWorkerService: IEditorWorkerService;\n\tprivate readonly _contextKeyService: IContextKeyService;\n\tprivate readonly _instantiationService: IInstantiationService;\n\tprivate readonly _codeEditorService: ICodeEditorService;\n\tprivate readonly _themeService: IThemeService;\n\tprivate readonly _notificationService: INotificationService;\n\n\tprivate readonly _reviewPane: DiffReview;\n\n\tconstructor(\n\t\tdomElement: HTMLElement,\n\t\toptions: Readonly<editorBrowser.IDiffEditorConstructionOptions>,\n\t\tcodeEditorWidgetOptions: IDiffCodeEditorWidgetOptions,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@IEditorWorkerService editorWorkerService: IEditorWorkerService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IEditorProgressService private readonly _editorProgressService: IEditorProgressService\n\t) {\n\t\tsuper();\n\n\t\tthis._editorWorkerService = editorWorkerService;\n\t\tthis._codeEditorService = codeEditorService;\n\t\tthis._contextKeyService = this._register(contextKeyService.createScoped(domElement));\n\t\tthis._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n\t\tthis._contextKeyService.createKey('isInDiffEditor', true);\n\t\tthis._themeService = themeService;\n\t\tthis._notificationService = notificationService;\n\n\t\tthis._id = (++DIFF_EDITOR_ID);\n\t\tthis._state = editorBrowser.DiffEditorState.Idle;\n\t\tthis._updatingDiffProgress = null;\n\n\t\tthis._domElement = domElement;\n\t\toptions = options || {};\n\n\t\t// renderSideBySide\n\t\tthis._renderSideBySide = true;\n\t\tif (typeof options.renderSideBySide !== 'undefined') {\n\t\t\tthis._renderSideBySide = options.renderSideBySide;\n\t\t}\n\n\t\t// maxComputationTime\n\t\tthis._maxComputationTime = 5000;\n\t\tif (typeof options.maxComputationTime !== 'undefined') {\n\t\t\tthis._maxComputationTime = options.maxComputationTime;\n\t\t}\n\n\t\t// ignoreTrimWhitespace\n\t\tthis._ignoreTrimWhitespace = true;\n\t\tif (typeof options.ignoreTrimWhitespace !== 'undefined') {\n\t\t\tthis._ignoreTrimWhitespace = options.ignoreTrimWhitespace;\n\t\t}\n\n\t\t// renderIndicators\n\t\tthis._renderIndicators = true;\n\t\tif (typeof options.renderIndicators !== 'undefined') {\n\t\t\tthis._renderIndicators = options.renderIndicators;\n\t\t}\n\n\t\tthis._originalIsEditable = validateBooleanOption(options.originalEditable, false);\n\t\tthis._diffCodeLens = validateBooleanOption(options.diffCodeLens, false);\n\t\tthis._diffWordWrap = validateDiffWordWrap(options.diffWordWrap, 'inherit');\n\n\t\tif (typeof options.isInEmbeddedEditor !== 'undefined') {\n\t\t\tthis._contextKeyService.createKey('isInEmbeddedDiffEditor', options.isInEmbeddedEditor);\n\t\t} else {\n\t\t\tthis._contextKeyService.createKey('isInEmbeddedDiffEditor', false);\n\t\t}\n\n\t\tthis._renderOverviewRuler = true;\n\t\tif (typeof options.renderOverviewRuler !== 'undefined') {\n\t\t\tthis._renderOverviewRuler = Boolean(options.renderOverviewRuler);\n\t\t}\n\n\t\tthis._updateDecorationsRunner = this._register(new RunOnceScheduler(() => this._updateDecorations(), 0));\n\n\t\tthis._containerDomElement = document.createElement('div');\n\t\tthis._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._renderSideBySide);\n\t\tthis._containerDomElement.style.position = 'relative';\n\t\tthis._containerDomElement.style.height = '100%';\n\t\tthis._domElement.appendChild(this._containerDomElement);\n\n\t\tthis._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\n\t\tthis._overviewViewportDomElement.setClassName('diffViewport');\n\t\tthis._overviewViewportDomElement.setPosition('absolute');\n\n\t\tthis._overviewDomElement = document.createElement('div');\n\t\tthis._overviewDomElement.className = 'diffOverview';\n\t\tthis._overviewDomElement.style.position = 'absolute';\n\n\t\tthis._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode);\n\n\t\tthis._register(dom.addStandardDisposableListener(this._overviewDomElement, 'mousedown', (e) => {\n\t\t\tthis._modifiedEditor.delegateVerticalScrollbarMouseDown(e);\n\t\t}));\n\t\tif (this._renderOverviewRuler) {\n\t\t\tthis._containerDomElement.appendChild(this._overviewDomElement);\n\t\t}\n\n\t\t// Create left side\n\t\tthis._originalDomNode = document.createElement('div');\n\t\tthis._originalDomNode.className = 'editor original';\n\t\tthis._originalDomNode.style.position = 'absolute';\n\t\tthis._originalDomNode.style.height = '100%';\n\t\tthis._containerDomElement.appendChild(this._originalDomNode);\n\n\t\t// Create right side\n\t\tthis._modifiedDomNode = document.createElement('div');\n\t\tthis._modifiedDomNode.className = 'editor modified';\n\t\tthis._modifiedDomNode.style.position = 'absolute';\n\t\tthis._modifiedDomNode.style.height = '100%';\n\t\tthis._containerDomElement.appendChild(this._modifiedDomNode);\n\n\t\tthis._beginUpdateDecorationsTimeout = -1;\n\t\tthis._currentlyChangingViewZones = false;\n\t\tthis._diffComputationToken = 0;\n\n\t\tthis._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\n\t\tthis._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\n\n\t\tthis._isVisible = true;\n\t\tthis._isHandlingScrollEvent = false;\n\n\t\tthis._elementSizeObserver = this._register(new ElementSizeObserver(this._containerDomElement, options.dimension, () => this._onDidContainerSizeChanged()));\n\t\tif (options.automaticLayout) {\n\t\t\tthis._elementSizeObserver.startObserving();\n\t\t}\n\n\t\tthis._diffComputationResult = null;\n\n\t\tthis._originalEditor = this._createLeftHandSideEditor(options, codeEditorWidgetOptions.originalEditor || {});\n\t\tthis._modifiedEditor = this._createRightHandSideEditor(options, codeEditorWidgetOptions.modifiedEditor || {});\n\n\t\tthis._originalOverviewRuler = null;\n\t\tthis._modifiedOverviewRuler = null;\n\n\t\tthis._reviewPane = new DiffReview(this);\n\t\tthis._containerDomElement.appendChild(this._reviewPane.domNode.domNode);\n\t\tthis._containerDomElement.appendChild(this._reviewPane.shadow.domNode);\n\t\tthis._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode);\n\n\t\t// enableSplitViewResizing\n\t\tthis._enableSplitViewResizing = true;\n\t\tif (typeof options.enableSplitViewResizing !== 'undefined') {\n\t\t\tthis._enableSplitViewResizing = options.enableSplitViewResizing;\n\t\t}\n\n\t\tif (this._renderSideBySide) {\n\t\t\tthis._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\n\t\t} else {\n\t\t\tthis._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\n\t\t}\n\n\t\tthis._register(themeService.onDidColorThemeChange(t => {\n\t\t\tif (this._strategy && this._strategy.applyColors(t)) {\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t}\n\t\t\tthis._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._renderSideBySide);\n\t\t}));\n\n\t\tconst contributions: IDiffEditorContributionDescription[] = EditorExtensionsRegistry.getDiffEditorContributions();\n\t\tfor (const desc of contributions) {\n\t\t\ttry {\n\t\t\t\tthis._register(instantiationService.createInstance(desc.ctor, this));\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t}\n\n\t\tthis._codeEditorService.addDiffEditor(this);\n\t}\n\n\tpublic get ignoreTrimWhitespace(): boolean {\n\t\treturn this._ignoreTrimWhitespace;\n\t}\n\n\tpublic get renderSideBySide(): boolean {\n\t\treturn this._renderSideBySide;\n\t}\n\n\tpublic get maxComputationTime(): number {\n\t\treturn this._maxComputationTime;\n\t}\n\n\tpublic get renderIndicators(): boolean {\n\t\treturn this._renderIndicators;\n\t}\n\n\tpublic getContentHeight(): number {\n\t\treturn this._modifiedEditor.getContentHeight();\n\t}\n\n\tpublic getViewWidth(): number {\n\t\treturn this._elementSizeObserver.getWidth();\n\t}\n\n\tprivate _setState(newState: editorBrowser.DiffEditorState): void {\n\t\tif (this._state === newState) {\n\t\t\treturn;\n\t\t}\n\t\tthis._state = newState;\n\n\t\tif (this._updatingDiffProgress) {\n\t\t\tthis._updatingDiffProgress.done();\n\t\t\tthis._updatingDiffProgress = null;\n\t\t}\n\n\t\tif (this._state === editorBrowser.DiffEditorState.ComputingDiff) {\n\t\t\tthis._updatingDiffProgress = this._editorProgressService.show(true, 1000);\n\t\t}\n\t}\n\n\tpublic hasWidgetFocus(): boolean {\n\t\treturn dom.isAncestor(document.activeElement, this._domElement);\n\t}\n\n\tpublic diffReviewNext(): void {\n\t\tthis._reviewPane.next();\n\t}\n\n\tpublic diffReviewPrev(): void {\n\t\tthis._reviewPane.prev();\n\t}\n\n\tprivate static _getClassName(theme: IColorTheme, renderSideBySide: boolean): string {\n\t\tlet result = 'monaco-diff-editor monaco-editor-background ';\n\t\tif (renderSideBySide) {\n\t\t\tresult += 'side-by-side ';\n\t\t}\n\t\tresult += getThemeTypeSelector(theme.type);\n\t\treturn result;\n\t}\n\n\tprivate _recreateOverviewRulers(): void {\n\t\tif (!this._renderOverviewRuler) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._originalOverviewRuler) {\n\t\t\tthis._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n\t\t\tthis._originalOverviewRuler.dispose();\n\t\t}\n\t\tif (this._originalEditor.hasModel()) {\n\t\t\tthis._originalOverviewRuler = this._originalEditor.createOverviewRuler('original diffOverviewRuler')!;\n\t\t\tthis._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\n\t\t}\n\n\t\tif (this._modifiedOverviewRuler) {\n\t\t\tthis._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n\t\t\tthis._modifiedOverviewRuler.dispose();\n\t\t}\n\t\tif (this._modifiedEditor.hasModel()) {\n\t\t\tthis._modifiedOverviewRuler = this._modifiedEditor.createOverviewRuler('modified diffOverviewRuler')!;\n\t\t\tthis._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\n\t\t}\n\n\t\tthis._layoutOverviewRulers();\n\t}\n\n\tprivate _createLeftHandSideEditor(options: Readonly<editorBrowser.IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = this._createInnerEditor(this._instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options), codeEditorWidgetOptions);\n\n\t\tthis._register(editor.onDidScrollChange((e) => {\n\t\t\tif (this._isHandlingScrollEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._isHandlingScrollEvent = true;\n\t\t\tthis._modifiedEditor.setScrollPosition({\n\t\t\t\tscrollLeft: e.scrollLeft,\n\t\t\t\tscrollTop: e.scrollTop\n\t\t\t});\n\t\t\tthis._isHandlingScrollEvent = false;\n\n\t\t\tthis._layoutOverviewViewport();\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeViewZones(() => {\n\t\t\tthis._onViewZonesChanged();\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeConfiguration((e) => {\n\t\t\tif (!editor.getModel()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t}\n\t\t\tif (e.hasChanged(EditorOption.wrappingInfo)) {\n\t\t\t\tthis._updateDecorationsRunner.cancel();\n\t\t\t\tthis._updateDecorations();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeModelContent(() => {\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis._beginUpdateDecorationsSoon();\n\t\t\t}\n\t\t}));\n\n\t\tconst isInDiffLeftEditorKey = this._contextKeyService.createKey<boolean>('isInDiffLeftEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffLeftEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffLeftEditorKey.set(false)));\n\n\t\tthis._register(editor.onDidContentSizeChange(e => {\n\t\t\tconst width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n\t\t\tconst height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n\n\t\t\tthis._onDidContentSizeChange.fire({\n\t\t\t\tcontentHeight: height,\n\t\t\t\tcontentWidth: width,\n\t\t\t\tcontentHeightChanged: e.contentHeightChanged,\n\t\t\t\tcontentWidthChanged: e.contentWidthChanged\n\t\t\t});\n\t\t}));\n\n\t\treturn editor;\n\t}\n\n\tprivate _createRightHandSideEditor(options: Readonly<editorBrowser.IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = this._createInnerEditor(this._instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options), codeEditorWidgetOptions);\n\n\t\tthis._register(editor.onDidScrollChange((e) => {\n\t\t\tif (this._isHandlingScrollEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._isHandlingScrollEvent = true;\n\t\t\tthis._originalEditor.setScrollPosition({\n\t\t\t\tscrollLeft: e.scrollLeft,\n\t\t\t\tscrollTop: e.scrollTop\n\t\t\t});\n\t\t\tthis._isHandlingScrollEvent = false;\n\n\t\t\tthis._layoutOverviewViewport();\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeViewZones(() => {\n\t\t\tthis._onViewZonesChanged();\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeConfiguration((e) => {\n\t\t\tif (!editor.getModel()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t}\n\t\t\tif (e.hasChanged(EditorOption.wrappingInfo)) {\n\t\t\t\tthis._updateDecorationsRunner.cancel();\n\t\t\t\tthis._updateDecorations();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeModelContent(() => {\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis._beginUpdateDecorationsSoon();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeModelOptions((e) => {\n\t\t\tif (e.tabSize) {\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tconst isInDiffRightEditorKey = this._contextKeyService.createKey<boolean>('isInDiffRightEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffRightEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffRightEditorKey.set(false)));\n\n\t\tthis._register(editor.onDidContentSizeChange(e => {\n\t\t\tconst width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n\t\t\tconst height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n\n\t\t\tthis._onDidContentSizeChange.fire({\n\t\t\t\tcontentHeight: height,\n\t\t\t\tcontentWidth: width,\n\t\t\t\tcontentHeightChanged: e.contentHeightChanged,\n\t\t\t\tcontentWidthChanged: e.contentWidthChanged\n\t\t\t});\n\t\t}));\n\n\t\treturn editor;\n\t}\n\n\tprotected _createInnerEditor(instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<editorBrowser.IEditorConstructionOptions>, editorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\treturn instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._codeEditorService.removeDiffEditor(this);\n\n\t\tif (this._beginUpdateDecorationsTimeout !== -1) {\n\t\t\twindow.clearTimeout(this._beginUpdateDecorationsTimeout);\n\t\t\tthis._beginUpdateDecorationsTimeout = -1;\n\t\t}\n\n\t\tthis._cleanViewZonesAndDecorations();\n\n\t\tif (this._originalOverviewRuler) {\n\t\t\tthis._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n\t\t\tthis._originalOverviewRuler.dispose();\n\t\t}\n\t\tif (this._modifiedOverviewRuler) {\n\t\t\tthis._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n\t\t\tthis._modifiedOverviewRuler.dispose();\n\t\t}\n\t\tthis._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\n\t\tif (this._renderOverviewRuler) {\n\t\t\tthis._containerDomElement.removeChild(this._overviewDomElement);\n\t\t}\n\n\t\tthis._containerDomElement.removeChild(this._originalDomNode);\n\t\tthis._originalEditor.dispose();\n\n\t\tthis._containerDomElement.removeChild(this._modifiedDomNode);\n\t\tthis._modifiedEditor.dispose();\n\n\t\tthis._strategy.dispose();\n\n\t\tthis._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\n\t\tthis._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\n\t\tthis._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\n\t\tthis._reviewPane.dispose();\n\n\t\tthis._domElement.removeChild(this._containerDomElement);\n\n\t\tthis._onDidDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n\n\t//------------ begin IDiffEditor methods\n\n\tpublic getId(): string {\n\t\treturn this.getEditorType() + ':' + this._id;\n\t}\n\n\tpublic getEditorType(): string {\n\t\treturn editorCommon.EditorType.IDiffEditor;\n\t}\n\n\tpublic getLineChanges(): editorCommon.ILineChange[] | null {\n\t\tif (!this._diffComputationResult) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._diffComputationResult.changes;\n\t}\n\n\tpublic getDiffComputationResult(): IDiffComputationResult | null {\n\t\treturn this._diffComputationResult;\n\t}\n\n\tpublic getOriginalEditor(): editorBrowser.ICodeEditor {\n\t\treturn this._originalEditor;\n\t}\n\n\tpublic getModifiedEditor(): editorBrowser.ICodeEditor {\n\t\treturn this._modifiedEditor;\n\t}\n\n\tpublic updateOptions(newOptions: Readonly<IDiffEditorOptions>): void {\n\n\t\t// Handle side by side\n\t\tlet renderSideBySideChanged = false;\n\t\tif (typeof newOptions.renderSideBySide !== 'undefined') {\n\t\t\tif (this._renderSideBySide !== newOptions.renderSideBySide) {\n\t\t\t\tthis._renderSideBySide = newOptions.renderSideBySide;\n\t\t\t\trenderSideBySideChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof newOptions.maxComputationTime !== 'undefined') {\n\t\t\tthis._maxComputationTime = newOptions.maxComputationTime;\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis._beginUpdateDecorationsSoon();\n\t\t\t}\n\t\t}\n\n\t\tlet beginUpdateDecorations = false;\n\n\t\tif (typeof newOptions.ignoreTrimWhitespace !== 'undefined') {\n\t\t\tif (this._ignoreTrimWhitespace !== newOptions.ignoreTrimWhitespace) {\n\t\t\t\tthis._ignoreTrimWhitespace = newOptions.ignoreTrimWhitespace;\n\t\t\t\t// Begin comparing\n\t\t\t\tbeginUpdateDecorations = true;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof newOptions.renderIndicators !== 'undefined') {\n\t\t\tif (this._renderIndicators !== newOptions.renderIndicators) {\n\t\t\t\tthis._renderIndicators = newOptions.renderIndicators;\n\t\t\t\tbeginUpdateDecorations = true;\n\t\t\t}\n\t\t}\n\n\t\tif (beginUpdateDecorations) {\n\t\t\tthis._beginUpdateDecorations();\n\t\t}\n\n\t\tthis._originalIsEditable = validateBooleanOption(newOptions.originalEditable, this._originalIsEditable);\n\t\tthis._diffCodeLens = validateBooleanOption(newOptions.diffCodeLens, this._diffCodeLens);\n\t\tthis._diffWordWrap = validateDiffWordWrap(newOptions.diffWordWrap, this._diffWordWrap);\n\n\t\tthis._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(newOptions));\n\t\tthis._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(newOptions));\n\n\t\t// enableSplitViewResizing\n\t\tif (typeof newOptions.enableSplitViewResizing !== 'undefined') {\n\t\t\tthis._enableSplitViewResizing = newOptions.enableSplitViewResizing;\n\t\t}\n\t\tthis._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing);\n\n\t\t// renderSideBySide\n\t\tif (renderSideBySideChanged) {\n\t\t\tif (this._renderSideBySide) {\n\t\t\t\tthis._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\n\t\t\t} else {\n\t\t\t\tthis._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\n\t\t\t}\n\t\t\t// Update class name\n\t\t\tthis._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._renderSideBySide);\n\t\t}\n\n\t\t// renderOverviewRuler\n\t\tif (typeof newOptions.renderOverviewRuler !== 'undefined' && this._renderOverviewRuler !== newOptions.renderOverviewRuler) {\n\t\t\tthis._renderOverviewRuler = newOptions.renderOverviewRuler;\n\t\t\tif (this._renderOverviewRuler) {\n\t\t\t\tthis._containerDomElement.appendChild(this._overviewDomElement);\n\t\t\t} else {\n\t\t\t\tthis._containerDomElement.removeChild(this._overviewDomElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getModel(): editorCommon.IDiffEditorModel {\n\t\treturn {\n\t\t\toriginal: this._originalEditor.getModel()!,\n\t\t\tmodified: this._modifiedEditor.getModel()!\n\t\t};\n\t}\n\n\tpublic setModel(model: editorCommon.IDiffEditorModel | null): void {\n\t\t// Guard us against partial null model\n\t\tif (model && (!model.original || !model.modified)) {\n\t\t\tthrow new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\n\t\t}\n\n\t\t// Remove all view zones & decorations\n\t\tthis._cleanViewZonesAndDecorations();\n\n\t\t// Update code editor models\n\t\tthis._originalEditor.setModel(model ? model.original : null);\n\t\tthis._modifiedEditor.setModel(model ? model.modified : null);\n\t\tthis._updateDecorationsRunner.cancel();\n\n\t\t// this.originalEditor.onDidChangeModelOptions\n\n\t\tif (model) {\n\t\t\tthis._originalEditor.setScrollTop(0);\n\t\t\tthis._modifiedEditor.setScrollTop(0);\n\t\t}\n\n\t\t// Disable any diff computations that will come in\n\t\tthis._diffComputationResult = null;\n\t\tthis._diffComputationToken++;\n\t\tthis._setState(editorBrowser.DiffEditorState.Idle);\n\n\t\tif (model) {\n\t\t\tthis._recreateOverviewRulers();\n\n\t\t\t// Begin comparing\n\t\t\tthis._beginUpdateDecorations();\n\t\t}\n\n\t\tthis._layoutOverviewViewport();\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domElement;\n\t}\n\n\tpublic getVisibleColumnFromPosition(position: IPosition): number {\n\t\treturn this._modifiedEditor.getVisibleColumnFromPosition(position);\n\t}\n\n\tpublic getStatusbarColumn(position: IPosition): number {\n\t\treturn this._modifiedEditor.getStatusbarColumn(position);\n\t}\n\n\tpublic getPosition(): Position | null {\n\t\treturn this._modifiedEditor.getPosition();\n\t}\n\n\tpublic setPosition(position: IPosition): void {\n\t\tthis._modifiedEditor.setPosition(position);\n\t}\n\n\tpublic revealLine(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLine(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenter(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLineInCenter(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineInCenterIfOutsideViewport(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n\t}\n\n\tpublic revealLineNearTop(lineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLineNearTop(lineNumber, scrollType);\n\t}\n\n\tpublic revealPosition(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealPosition(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenter(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealPositionInCenter(position, scrollType);\n\t}\n\n\tpublic revealPositionInCenterIfOutsideViewport(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n\t}\n\n\tpublic revealPositionNearTop(position: IPosition, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealPositionNearTop(position, scrollType);\n\t}\n\n\tpublic getSelection(): Selection | null {\n\t\treturn this._modifiedEditor.getSelection();\n\t}\n\n\tpublic getSelections(): Selection[] | null {\n\t\treturn this._modifiedEditor.getSelections();\n\t}\n\n\tpublic setSelection(range: IRange): void;\n\tpublic setSelection(editorRange: Range): void;\n\tpublic setSelection(selection: ISelection): void;\n\tpublic setSelection(editorSelection: Selection): void;\n\tpublic setSelection(something: any): void {\n\t\tthis._modifiedEditor.setSelection(something);\n\t}\n\n\tpublic setSelections(ranges: readonly ISelection[]): void {\n\t\tthis._modifiedEditor.setSelections(ranges);\n\t}\n\n\tpublic revealLines(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenter(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesInCenterIfOutsideViewport(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealLinesNearTop(startLineNumber: number, endLineNumber: number, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n\t}\n\n\tpublic revealRange(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth, revealVerticalInCenter: boolean = false, revealHorizontal: boolean = true): void {\n\t\tthis._modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n\t}\n\n\tpublic revealRangeInCenter(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealRangeInCenter(range, scrollType);\n\t}\n\n\tpublic revealRangeInCenterIfOutsideViewport(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTop(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealRangeNearTop(range, scrollType);\n\t}\n\n\tpublic revealRangeNearTopIfOutsideViewport(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n\t}\n\n\tpublic revealRangeAtTop(range: IRange, scrollType: editorCommon.ScrollType = editorCommon.ScrollType.Smooth): void {\n\t\tthis._modifiedEditor.revealRangeAtTop(range, scrollType);\n\t}\n\n\tpublic getSupportedActions(): editorCommon.IEditorAction[] {\n\t\treturn this._modifiedEditor.getSupportedActions();\n\t}\n\n\tpublic saveViewState(): editorCommon.IDiffEditorViewState {\n\t\tconst originalViewState = this._originalEditor.saveViewState();\n\t\tconst modifiedViewState = this._modifiedEditor.saveViewState();\n\t\treturn {\n\t\t\toriginal: originalViewState,\n\t\t\tmodified: modifiedViewState\n\t\t};\n\t}\n\n\tpublic restoreViewState(s: editorCommon.IDiffEditorViewState): void {\n\t\tif (s && s.original && s.modified) {\n\t\t\tconst diffEditorState = <editorCommon.IDiffEditorViewState>s;\n\t\t\tthis._originalEditor.restoreViewState(diffEditorState.original);\n\t\t\tthis._modifiedEditor.restoreViewState(diffEditorState.modified);\n\t\t}\n\t}\n\n\tpublic layout(dimension?: editorCommon.IDimension): void {\n\t\tthis._elementSizeObserver.observe(dimension);\n\t}\n\n\tpublic focus(): void {\n\t\tthis._modifiedEditor.focus();\n\t}\n\n\tpublic hasTextFocus(): boolean {\n\t\treturn this._originalEditor.hasTextFocus() || this._modifiedEditor.hasTextFocus();\n\t}\n\n\tpublic onVisible(): void {\n\t\tthis._isVisible = true;\n\t\tthis._originalEditor.onVisible();\n\t\tthis._modifiedEditor.onVisible();\n\t\t// Begin comparing\n\t\tthis._beginUpdateDecorations();\n\t}\n\n\tpublic onHide(): void {\n\t\tthis._isVisible = false;\n\t\tthis._originalEditor.onHide();\n\t\tthis._modifiedEditor.onHide();\n\t\t// Remove all view zones & decorations\n\t\tthis._cleanViewZonesAndDecorations();\n\t}\n\n\tpublic trigger(source: string | null | undefined, handlerId: string, payload: any): void {\n\t\tthis._modifiedEditor.trigger(source, handlerId, payload);\n\t}\n\n\tpublic changeDecorations(callback: (changeAccessor: IModelDecorationsChangeAccessor) => any): any {\n\t\treturn this._modifiedEditor.changeDecorations(callback);\n\t}\n\n\t//------------ end IDiffEditor methods\n\n\n\n\t//------------ begin layouting methods\n\n\tprivate _onDidContainerSizeChanged(): void {\n\t\tthis._doLayout();\n\t}\n\n\tprivate _getReviewHeight(): number {\n\t\treturn this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\n\t}\n\n\tprivate _layoutOverviewRulers(): void {\n\t\tif (!this._renderOverviewRuler) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\n\t\t\treturn;\n\t\t}\n\t\tconst height = this._elementSizeObserver.getHeight();\n\t\tconst reviewHeight = this._getReviewHeight();\n\n\t\tconst freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n\t\tconst layoutInfo = this._modifiedEditor.getLayoutInfo();\n\t\tif (layoutInfo) {\n\t\t\tthis._originalOverviewRuler.setLayout({\n\t\t\t\ttop: 0,\n\t\t\t\twidth: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n\t\t\t\tright: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n\t\t\t\theight: (height - reviewHeight)\n\t\t\t});\n\t\t\tthis._modifiedOverviewRuler.setLayout({\n\t\t\t\ttop: 0,\n\t\t\t\tright: 0,\n\t\t\t\twidth: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n\t\t\t\theight: (height - reviewHeight)\n\t\t\t});\n\t\t}\n\t}\n\n\t//------------ end layouting methods\n\n\tprivate _onViewZonesChanged(): void {\n\t\tif (this._currentlyChangingViewZones) {\n\t\t\treturn;\n\t\t}\n\t\tthis._updateDecorationsRunner.schedule();\n\t}\n\n\tprivate _beginUpdateDecorationsSoon(): void {\n\t\t// Clear previous timeout if necessary\n\t\tif (this._beginUpdateDecorationsTimeout !== -1) {\n\t\t\twindow.clearTimeout(this._beginUpdateDecorationsTimeout);\n\t\t\tthis._beginUpdateDecorationsTimeout = -1;\n\t\t}\n\t\tthis._beginUpdateDecorationsTimeout = window.setTimeout(() => this._beginUpdateDecorations(), DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\n\t}\n\n\tprivate _lastOriginalWarning: URI | null = null;\n\tprivate _lastModifiedWarning: URI | null = null;\n\n\tprivate static _equals(a: URI | null, b: URI | null): boolean {\n\t\tif (!a && !b) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (a.toString() === b.toString());\n\t}\n\n\tprivate _beginUpdateDecorations(): void {\n\t\tthis._beginUpdateDecorationsTimeout = -1;\n\t\tconst currentOriginalModel = this._originalEditor.getModel();\n\t\tconst currentModifiedModel = this._modifiedEditor.getModel();\n\t\tif (!currentOriginalModel || !currentModifiedModel) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Prevent old diff requests to come if a new request has been initiated\n\t\t// The best method would be to call cancel on the Promise, but this is not\n\t\t// yet supported, so using tokens for now.\n\t\tthis._diffComputationToken++;\n\t\tconst currentToken = this._diffComputationToken;\n\t\tthis._setState(editorBrowser.DiffEditorState.ComputingDiff);\n\n\t\tif (!this._editorWorkerService.canComputeDiff(currentOriginalModel.uri, currentModifiedModel.uri)) {\n\t\t\tif (\n\t\t\t\t!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\n\t\t\t\t|| !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)\n\t\t\t) {\n\t\t\t\tthis._lastOriginalWarning = currentOriginalModel.uri;\n\t\t\t\tthis._lastModifiedWarning = currentModifiedModel.uri;\n\t\t\t\tthis._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis._editorWorkerService.computeDiff(currentOriginalModel.uri, currentModifiedModel.uri, this._ignoreTrimWhitespace, this._maxComputationTime).then((result) => {\n\t\t\tif (currentToken === this._diffComputationToken\n\t\t\t\t&& currentOriginalModel === this._originalEditor.getModel()\n\t\t\t\t&& currentModifiedModel === this._modifiedEditor.getModel()\n\t\t\t) {\n\t\t\t\tthis._setState(editorBrowser.DiffEditorState.DiffComputed);\n\t\t\t\tthis._diffComputationResult = result;\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t\tthis._onDidUpdateDiff.fire();\n\t\t\t}\n\t\t}, (error) => {\n\t\t\tif (currentToken === this._diffComputationToken\n\t\t\t\t&& currentOriginalModel === this._originalEditor.getModel()\n\t\t\t\t&& currentModifiedModel === this._modifiedEditor.getModel()\n\t\t\t) {\n\t\t\t\tthis._setState(editorBrowser.DiffEditorState.DiffComputed);\n\t\t\t\tthis._diffComputationResult = null;\n\t\t\t\tthis._updateDecorationsRunner.schedule();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _cleanViewZonesAndDecorations(): void {\n\t\tthis._originalEditorState.clean(this._originalEditor);\n\t\tthis._modifiedEditorState.clean(this._modifiedEditor);\n\t}\n\n\tprivate _updateDecorations(): void {\n\t\tif (!this._originalEditor.getModel() || !this._modifiedEditor.getModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\n\n\t\tconst foreignOriginal = this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces());\n\t\tconst foreignModified = this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces());\n\n\t\tconst diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._ignoreTrimWhitespace, this._renderIndicators, foreignOriginal, foreignModified);\n\n\t\ttry {\n\t\t\tthis._currentlyChangingViewZones = true;\n\t\t\tthis._originalEditorState.apply(this._originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\n\t\t\tthis._modifiedEditorState.apply(this._modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\n\t\t} finally {\n\t\t\tthis._currentlyChangingViewZones = false;\n\t\t}\n\t}\n\n\tprivate _adjustOptionsForSubEditor(options: Readonly<editorBrowser.IDiffEditorConstructionOptions>): editorBrowser.IEditorConstructionOptions {\n\t\tconst clonedOptions = { ...options };\n\t\tclonedOptions.inDiffEditor = true;\n\t\tclonedOptions.automaticLayout = false;\n\t\t// Clone scrollbar options before changing them\n\t\tclonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\n\t\tclonedOptions.scrollbar.vertical = 'visible';\n\t\tclonedOptions.folding = false;\n\t\tclonedOptions.codeLens = this._diffCodeLens;\n\t\tclonedOptions.fixedOverflowWidgets = true;\n\t\t// clonedOptions.lineDecorationsWidth = '2ch';\n\t\t// Clone minimap options before changing them\n\t\tclonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\n\t\tclonedOptions.minimap.enabled = false;\n\t\treturn clonedOptions;\n\t}\n\n\tprivate _adjustOptionsForLeftHandSide(options: Readonly<editorBrowser.IDiffEditorConstructionOptions>): editorBrowser.IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(options);\n\t\tif (!this._renderSideBySide) {\n\t\t\t// never wrap hidden editor\n\t\t\tresult.wordWrapOverride1 = 'off';\n\t\t} else {\n\t\t\tresult.wordWrapOverride1 = this._diffWordWrap;\n\t\t}\n\t\tif (options.originalAriaLabel) {\n\t\t\tresult.ariaLabel = options.originalAriaLabel;\n\t\t}\n\t\tresult.readOnly = !this._originalIsEditable;\n\t\tresult.extraEditorClassName = 'original-in-monaco-diff-editor';\n\t\treturn {\n\t\t\t...result,\n\t\t\tdimension: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate _adjustOptionsForRightHandSide(options: Readonly<editorBrowser.IDiffEditorConstructionOptions>): editorBrowser.IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(options);\n\t\tif (options.modifiedAriaLabel) {\n\t\t\tresult.ariaLabel = options.modifiedAriaLabel;\n\t\t}\n\n\t\tresult.wordWrapOverride1 = this._diffWordWrap;\n\t\tresult.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\t\tresult.scrollbar!.verticalHasArrows = false;\n\t\tresult.extraEditorClassName = 'modified-in-monaco-diff-editor';\n\t\treturn {\n\t\t\t...result,\n\t\t\tdimension: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic doLayout(): void {\n\t\tthis._elementSizeObserver.observe();\n\t\tthis._doLayout();\n\t}\n\n\tprivate _doLayout(): void {\n\t\tconst width = this._elementSizeObserver.getWidth();\n\t\tconst height = this._elementSizeObserver.getHeight();\n\t\tconst reviewHeight = this._getReviewHeight();\n\n\t\tconst splitPoint = this._strategy.layout();\n\n\t\tthis._originalDomNode.style.width = splitPoint + 'px';\n\t\tthis._originalDomNode.style.left = '0px';\n\n\t\tthis._modifiedDomNode.style.width = (width - splitPoint) + 'px';\n\t\tthis._modifiedDomNode.style.left = splitPoint + 'px';\n\n\t\tthis._overviewDomElement.style.top = '0px';\n\t\tthis._overviewDomElement.style.height = (height - reviewHeight) + 'px';\n\t\tthis._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\n\t\tthis._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n\t\tthis._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\n\t\tthis._overviewViewportDomElement.setHeight(30);\n\n\t\tthis._originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\n\t\tthis._modifiedEditor.layout({ width: width - splitPoint - (this._renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0), height: (height - reviewHeight) });\n\n\t\tif (this._originalOverviewRuler || this._modifiedOverviewRuler) {\n\t\t\tthis._layoutOverviewRulers();\n\t\t}\n\n\t\tthis._reviewPane.layout(height - reviewHeight, width, reviewHeight);\n\n\t\tthis._layoutOverviewViewport();\n\t}\n\n\tprivate _layoutOverviewViewport(): void {\n\t\tconst layout = this._computeOverviewViewport();\n\t\tif (!layout) {\n\t\t\tthis._overviewViewportDomElement.setTop(0);\n\t\t\tthis._overviewViewportDomElement.setHeight(0);\n\t\t} else {\n\t\t\tthis._overviewViewportDomElement.setTop(layout.top);\n\t\t\tthis._overviewViewportDomElement.setHeight(layout.height);\n\t\t}\n\t}\n\n\tprivate _computeOverviewViewport(): { height: number; top: number; } | null {\n\t\tconst layoutInfo = this._modifiedEditor.getLayoutInfo();\n\t\tif (!layoutInfo) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst scrollTop = this._modifiedEditor.getScrollTop();\n\t\tconst scrollHeight = this._modifiedEditor.getScrollHeight();\n\n\t\tconst computedAvailableSize = Math.max(0, layoutInfo.height);\n\t\tconst computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\n\t\tconst computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\n\n\t\tconst computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\n\t\tconst computedSliderPosition = Math.floor(scrollTop * computedRatio);\n\n\t\treturn {\n\t\t\theight: computedSliderSize,\n\t\t\ttop: computedSliderPosition\n\t\t};\n\t}\n\n\tprivate _createDataSource(): IDataSource {\n\t\treturn {\n\t\t\tgetWidth: () => {\n\t\t\t\treturn this._elementSizeObserver.getWidth();\n\t\t\t},\n\n\t\t\tgetHeight: () => {\n\t\t\t\treturn (this._elementSizeObserver.getHeight() - this._getReviewHeight());\n\t\t\t},\n\n\t\t\tgetOptions: () => {\n\t\t\t\treturn {\n\t\t\t\t\trenderOverviewRuler: this._renderOverviewRuler\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tgetContainerDomNode: () => {\n\t\t\t\treturn this._containerDomElement;\n\t\t\t},\n\n\t\t\trelayoutEditors: () => {\n\t\t\t\tthis._doLayout();\n\t\t\t},\n\n\t\t\tgetOriginalEditor: () => {\n\t\t\t\treturn this._originalEditor;\n\t\t\t},\n\n\t\t\tgetModifiedEditor: () => {\n\t\t\t\treturn this._modifiedEditor;\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate _setStrategy(newStrategy: DiffEditorWidgetStyle): void {\n\t\tif (this._strategy) {\n\t\t\tthis._strategy.dispose();\n\t\t}\n\n\t\tthis._strategy = newStrategy;\n\t\tnewStrategy.applyColors(this._themeService.getColorTheme());\n\n\t\tif (this._diffComputationResult) {\n\t\t\tthis._updateDecorations();\n\t\t}\n\n\t\t// Just do a layout, the strategy might need it\n\t\tthis._doLayout();\n\t}\n\n\tprivate _getLineChangeAtOrBeforeLineNumber(lineNumber: number, startLineNumberExtractor: (lineChange: editorCommon.ILineChange) => number): editorCommon.ILineChange | null {\n\t\tconst lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\n\t\tif (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\n\t\t\t// There are no changes or `lineNumber` is before the first change\n\t\t\treturn null;\n\t\t}\n\n\t\tlet min = 0;\n\t\tlet max = lineChanges.length - 1;\n\t\twhile (min < max) {\n\t\t\tconst mid = Math.floor((min + max) / 2);\n\t\t\tconst midStart = startLineNumberExtractor(lineChanges[mid]);\n\t\t\tconst midEnd = (mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : Constants.MAX_SAFE_SMALL_INTEGER);\n\n\t\t\tif (lineNumber < midStart) {\n\t\t\t\tmax = mid - 1;\n\t\t\t} else if (lineNumber >= midEnd) {\n\t\t\t\tmin = mid + 1;\n\t\t\t} else {\n\t\t\t\t// HIT!\n\t\t\t\tmin = mid;\n\t\t\t\tmax = mid;\n\t\t\t}\n\t\t}\n\t\treturn lineChanges[min];\n\t}\n\n\tprivate _getEquivalentLineForOriginalLineNumber(lineNumber: number): number {\n\t\tconst lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, (lineChange) => lineChange.originalStartLineNumber);\n\n\t\tif (!lineChange) {\n\t\t\treturn lineNumber;\n\t\t}\n\n\t\tconst originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n\t\tconst modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n\t\tconst lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\n\t\tconst lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\n\n\n\t\tconst delta = lineNumber - originalEquivalentLineNumber;\n\n\t\tif (delta <= lineChangeOriginalLength) {\n\t\t\treturn modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\n\t\t}\n\n\t\treturn modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\n\t}\n\n\tprivate _getEquivalentLineForModifiedLineNumber(lineNumber: number): number {\n\t\tconst lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, (lineChange) => lineChange.modifiedStartLineNumber);\n\n\t\tif (!lineChange) {\n\t\t\treturn lineNumber;\n\t\t}\n\n\t\tconst originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n\t\tconst modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n\t\tconst lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\n\t\tconst lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\n\n\n\t\tconst delta = lineNumber - modifiedEquivalentLineNumber;\n\n\t\tif (delta <= lineChangeModifiedLength) {\n\t\t\treturn originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\n\t\t}\n\n\t\treturn originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\n\t}\n\n\tpublic getDiffLineInformationForOriginal(lineNumber: number): editorBrowser.IDiffLineInformation | null {\n\t\tif (!this._diffComputationResult) {\n\t\t\t// Cannot answer that which I don't know\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tequivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\n\t\t};\n\t}\n\n\tpublic getDiffLineInformationForModified(lineNumber: number): editorBrowser.IDiffLineInformation | null {\n\t\tif (!this._diffComputationResult) {\n\t\t\t// Cannot answer that which I don't know\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tequivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\n\t\t};\n\t}\n}\n\ninterface IDataSource {\n\tgetWidth(): number;\n\tgetHeight(): number;\n\tgetOptions(): { renderOverviewRuler: boolean; };\n\tgetContainerDomNode(): HTMLElement;\n\trelayoutEditors(): void;\n\n\tgetOriginalEditor(): CodeEditorWidget;\n\tgetModifiedEditor(): CodeEditorWidget;\n}\n\nabstract class DiffEditorWidgetStyle extends Disposable {\n\n\tprotected _dataSource: IDataSource;\n\tprotected _insertColor: Color | null;\n\tprotected _removeColor: Color | null;\n\n\tconstructor(dataSource: IDataSource) {\n\t\tsuper();\n\t\tthis._dataSource = dataSource;\n\t\tthis._insertColor = null;\n\t\tthis._removeColor = null;\n\t}\n\n\tpublic applyColors(theme: IColorTheme): boolean {\n\t\tconst newInsertColor = (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n\t\tconst newRemoveColor = (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n\t\tconst hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\n\t\tthis._insertColor = newInsertColor;\n\t\tthis._removeColor = newRemoveColor;\n\t\treturn hasChanges;\n\t}\n\n\tpublic getEditorsDiffDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean, originalWhitespaces: IEditorWhitespace[], modifiedWhitespaces: IEditorWhitespace[]): IEditorsDiffDecorationsWithZones {\n\t\t// Get view zones\n\t\tmodifiedWhitespaces = modifiedWhitespaces.sort((a, b) => {\n\t\t\treturn a.afterLineNumber - b.afterLineNumber;\n\t\t});\n\t\toriginalWhitespaces = originalWhitespaces.sort((a, b) => {\n\t\t\treturn a.afterLineNumber - b.afterLineNumber;\n\t\t});\n\t\tconst zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, renderIndicators);\n\n\t\t// Get decorations & overview ruler zones\n\t\tconst originalDecorations = this._getOriginalEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators);\n\t\tconst modifiedDecorations = this._getModifiedEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators);\n\n\t\treturn {\n\t\t\toriginal: {\n\t\t\t\tdecorations: originalDecorations.decorations,\n\t\t\t\toverviewZones: originalDecorations.overviewZones,\n\t\t\t\tzones: zones.original\n\t\t\t},\n\t\t\tmodified: {\n\t\t\t\tdecorations: modifiedDecorations.decorations,\n\t\t\t\toverviewZones: modifiedDecorations.overviewZones,\n\t\t\t\tzones: zones.modified\n\t\t\t}\n\t\t};\n\t}\n\n\tprotected abstract _getViewZones(lineChanges: editorCommon.ILineChange[], originalForeignVZ: IEditorWhitespace[], modifiedForeignVZ: IEditorWhitespace[], renderIndicators: boolean): IEditorsZones;\n\tprotected abstract _getOriginalEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations;\n\tprotected abstract _getModifiedEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations;\n\n\tpublic abstract setEnableSplitViewResizing(enableSplitViewResizing: boolean): void;\n\tpublic abstract layout(): number;\n}\n\ninterface IMyViewZone {\n\tshouldNotShrink?: boolean;\n\tafterLineNumber: number;\n\tafterColumn?: number;\n\theightInLines: number;\n\tminWidthInPx?: number;\n\tdomNode: HTMLElement | null;\n\tmarginDomNode?: HTMLElement | null;\n\tdiff?: IDiffLinesChange;\n}\n\nclass ForeignViewZonesIterator {\n\n\tprivate _index: number;\n\tprivate readonly _source: IEditorWhitespace[];\n\tpublic current: IEditorWhitespace | null;\n\n\tconstructor(source: IEditorWhitespace[]) {\n\t\tthis._source = source;\n\t\tthis._index = -1;\n\t\tthis.current = null;\n\t\tthis.advance();\n\t}\n\n\tpublic advance(): void {\n\t\tthis._index++;\n\t\tif (this._index < this._source.length) {\n\t\t\tthis.current = this._source[this._index];\n\t\t} else {\n\t\t\tthis.current = null;\n\t\t}\n\t}\n}\n\nabstract class ViewZonesComputer {\n\n\tconstructor(\n\t\tprivate readonly _lineChanges: editorCommon.ILineChange[],\n\t\tprivate readonly _originalForeignVZ: IEditorWhitespace[],\n\t\tprivate readonly _modifiedForeignVZ: IEditorWhitespace[],\n\t\tprotected readonly _originalEditor: CodeEditorWidget,\n\t\tprotected readonly _modifiedEditor: CodeEditorWidget\n\t) {\n\t}\n\n\tprivate static _getViewLineCount(editor: CodeEditorWidget, startLineNumber: number, endLineNumber: number): number {\n\t\tconst model = editor.getModel();\n\t\tconst viewModel = editor._getViewModel();\n\t\tif (model && viewModel) {\n\t\t\tconst viewRange = getViewRange(model, viewModel, startLineNumber, endLineNumber);\n\t\t\treturn (viewRange.endLineNumber - viewRange.startLineNumber + 1);\n\t\t}\n\n\t\treturn (endLineNumber - startLineNumber + 1);\n\t}\n\n\tpublic getViewZones(): IEditorsZones {\n\t\tconst originalLineHeight = this._originalEditor.getOption(EditorOption.lineHeight);\n\t\tconst modifiedLineHeight = this._modifiedEditor.getOption(EditorOption.lineHeight);\n\t\tconst originalHasWrapping = (this._originalEditor.getOption(EditorOption.wrappingInfo).wrappingColumn !== -1);\n\t\tconst modifiedHasWrapping = (this._modifiedEditor.getOption(EditorOption.wrappingInfo).wrappingColumn !== -1);\n\t\tconst hasWrapping = (originalHasWrapping || modifiedHasWrapping);\n\t\tconst originalModel = this._originalEditor.getModel()!;\n\t\tconst originalCoordinatesConverter = this._originalEditor._getViewModel()!.coordinatesConverter;\n\t\tconst modifiedCoordinatesConverter = this._modifiedEditor._getViewModel()!.coordinatesConverter;\n\n\t\tconst result: { original: IMyViewZone[]; modified: IMyViewZone[]; } = {\n\t\t\toriginal: [],\n\t\t\tmodified: []\n\t\t};\n\n\t\tlet lineChangeModifiedLength: number = 0;\n\t\tlet lineChangeOriginalLength: number = 0;\n\t\tlet originalEquivalentLineNumber: number = 0;\n\t\tlet modifiedEquivalentLineNumber: number = 0;\n\t\tlet originalEndEquivalentLineNumber: number = 0;\n\t\tlet modifiedEndEquivalentLineNumber: number = 0;\n\n\t\tconst sortMyViewZones = (a: IMyViewZone, b: IMyViewZone) => {\n\t\t\treturn a.afterLineNumber - b.afterLineNumber;\n\t\t};\n\n\t\tconst addAndCombineIfPossible = (destination: IMyViewZone[], item: IMyViewZone) => {\n\t\t\tif (item.domNode === null && destination.length > 0) {\n\t\t\t\tconst lastItem = destination[destination.length - 1];\n\t\t\t\tif (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\n\t\t\t\t\tlastItem.heightInLines += item.heightInLines;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdestination.push(item);\n\t\t};\n\n\t\tconst modifiedForeignVZ = new ForeignViewZonesIterator(this._modifiedForeignVZ);\n\t\tconst originalForeignVZ = new ForeignViewZonesIterator(this._originalForeignVZ);\n\n\t\tlet lastOriginalLineNumber = 1;\n\t\tlet lastModifiedLineNumber = 1;\n\n\t\t// In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\n\t\tfor (let i = 0, length = this._lineChanges.length; i <= length; i++) {\n\t\t\tconst lineChange = (i < length ? this._lineChanges[i] : null);\n\n\t\t\tif (lineChange !== null) {\n\t\t\t\toriginalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n\t\t\t\tmodifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n\t\t\t\tlineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._originalEditor, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber) : 0);\n\t\t\t\tlineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._modifiedEditor, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber) : 0);\n\t\t\t\toriginalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n\t\t\t\tmodifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n\t\t\t} else {\n\t\t\t\t// Increase to very large value to get the producing tests of foreign view zones running\n\t\t\t\toriginalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\n\t\t\t\tmodifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\n\t\t\t\toriginalEndEquivalentLineNumber = originalEquivalentLineNumber;\n\t\t\t\tmodifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\n\t\t\t}\n\n\t\t\t// Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\n\t\t\tlet stepOriginal: IMyViewZone[] = [];\n\t\t\tlet stepModified: IMyViewZone[] = [];\n\n\t\t\t// ---------------------------- PRODUCE VIEW ZONES\n\n\t\t\t// [PRODUCE] View zones due to line mapping differences (equal lines but wrapped differently)\n\t\t\tif (hasWrapping) {\n\t\t\t\tlet count: number;\n\t\t\t\tif (lineChange) {\n\t\t\t\t\tif (lineChange.originalEndLineNumber > 0) {\n\t\t\t\t\t\tcount = lineChange.originalStartLineNumber - lastOriginalLineNumber;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcount = lineChange.modifiedStartLineNumber - lastModifiedLineNumber;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcount = originalModel.getLineCount() - lastOriginalLineNumber;\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\t\tconst originalLineNumber = lastOriginalLineNumber + i;\n\t\t\t\t\tconst modifiedLineNumber = lastModifiedLineNumber + i;\n\n\t\t\t\t\tconst originalViewLineCount = originalCoordinatesConverter.getModelLineViewLineCount(originalLineNumber);\n\t\t\t\t\tconst modifiedViewLineCount = modifiedCoordinatesConverter.getModelLineViewLineCount(modifiedLineNumber);\n\n\t\t\t\t\tif (originalViewLineCount < modifiedViewLineCount) {\n\t\t\t\t\t\tstepOriginal.push({\n\t\t\t\t\t\t\tafterLineNumber: originalLineNumber,\n\t\t\t\t\t\t\theightInLines: modifiedViewLineCount - originalViewLineCount,\n\t\t\t\t\t\t\tdomNode: null,\n\t\t\t\t\t\t\tmarginDomNode: null\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (originalViewLineCount > modifiedViewLineCount) {\n\t\t\t\t\t\tstepModified.push({\n\t\t\t\t\t\t\tafterLineNumber: modifiedLineNumber,\n\t\t\t\t\t\t\theightInLines: originalViewLineCount - modifiedViewLineCount,\n\t\t\t\t\t\t\tdomNode: null,\n\t\t\t\t\t\t\tmarginDomNode: null\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineChange) {\n\t\t\t\t\tlastOriginalLineNumber = (lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber : lineChange.originalStartLineNumber) + 1;\n\t\t\t\t\tlastModifiedLineNumber = (lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber : lineChange.modifiedStartLineNumber) + 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\n\t\t\twhile (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\n\t\t\t\tlet viewZoneLineNumber: number;\n\t\t\t\tif (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\n\t\t\t\t\tviewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\n\t\t\t\t} else {\n\t\t\t\t\tviewZoneLineNumber = originalEndEquivalentLineNumber;\n\t\t\t\t}\n\n\t\t\t\tlet marginDomNode: HTMLDivElement | null = null;\n\t\t\t\tif (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\n\t\t\t\t\tmarginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\n\t\t\t\t}\n\n\t\t\t\tstepOriginal.push({\n\t\t\t\t\tafterLineNumber: viewZoneLineNumber,\n\t\t\t\t\theightInLines: modifiedForeignVZ.current.height / modifiedLineHeight,\n\t\t\t\t\tdomNode: null,\n\t\t\t\t\tmarginDomNode: marginDomNode\n\t\t\t\t});\n\t\t\t\tmodifiedForeignVZ.advance();\n\t\t\t}\n\n\t\t\t// [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\n\t\t\twhile (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\n\t\t\t\tlet viewZoneLineNumber: number;\n\t\t\t\tif (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\n\t\t\t\t\tviewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\n\t\t\t\t} else {\n\t\t\t\t\tviewZoneLineNumber = modifiedEndEquivalentLineNumber;\n\t\t\t\t}\n\t\t\t\tstepModified.push({\n\t\t\t\t\tafterLineNumber: viewZoneLineNumber,\n\t\t\t\t\theightInLines: originalForeignVZ.current.height / originalLineHeight,\n\t\t\t\t\tdomNode: null\n\t\t\t\t});\n\t\t\t\toriginalForeignVZ.advance();\n\t\t\t}\n\n\t\t\tif (lineChange !== null && isChangeOrInsert(lineChange)) {\n\t\t\t\tconst r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n\t\t\t\tif (r) {\n\t\t\t\t\tstepOriginal.push(r);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lineChange !== null && isChangeOrDelete(lineChange)) {\n\t\t\t\tconst r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n\t\t\t\tif (r) {\n\t\t\t\t\tstepModified.push(r);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ---------------------------- END PRODUCE VIEW ZONES\n\n\n\t\t\t// ---------------------------- EMIT MINIMAL VIEW ZONES\n\n\t\t\t// [CANCEL & EMIT] Try to cancel view zones out\n\t\t\tlet stepOriginalIndex = 0;\n\t\t\tlet stepModifiedIndex = 0;\n\n\t\t\tstepOriginal = stepOriginal.sort(sortMyViewZones);\n\t\t\tstepModified = stepModified.sort(sortMyViewZones);\n\n\t\t\twhile (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\n\t\t\t\tconst original = stepOriginal[stepOriginalIndex];\n\t\t\t\tconst modified = stepModified[stepModifiedIndex];\n\n\t\t\t\tconst originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\n\t\t\t\tconst modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\n\n\t\t\t\tif (originalDelta < modifiedDelta) {\n\t\t\t\t\taddAndCombineIfPossible(result.original, original);\n\t\t\t\t\tstepOriginalIndex++;\n\t\t\t\t} else if (modifiedDelta < originalDelta) {\n\t\t\t\t\taddAndCombineIfPossible(result.modified, modified);\n\t\t\t\t\tstepModifiedIndex++;\n\t\t\t\t} else if (original.shouldNotShrink) {\n\t\t\t\t\taddAndCombineIfPossible(result.original, original);\n\t\t\t\t\tstepOriginalIndex++;\n\t\t\t\t} else if (modified.shouldNotShrink) {\n\t\t\t\t\taddAndCombineIfPossible(result.modified, modified);\n\t\t\t\t\tstepModifiedIndex++;\n\t\t\t\t} else {\n\t\t\t\t\tif (original.heightInLines >= modified.heightInLines) {\n\t\t\t\t\t\t// modified view zone gets removed\n\t\t\t\t\t\toriginal.heightInLines -= modified.heightInLines;\n\t\t\t\t\t\tstepModifiedIndex++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// original view zone gets removed\n\t\t\t\t\t\tmodified.heightInLines -= original.heightInLines;\n\t\t\t\t\t\tstepOriginalIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// [EMIT] Remaining original view zones\n\t\t\twhile (stepOriginalIndex < stepOriginal.length) {\n\t\t\t\taddAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\n\t\t\t\tstepOriginalIndex++;\n\t\t\t}\n\n\t\t\t// [EMIT] Remaining modified view zones\n\t\t\twhile (stepModifiedIndex < stepModified.length) {\n\t\t\t\taddAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\n\t\t\t\tstepModifiedIndex++;\n\t\t\t}\n\n\t\t\t// ---------------------------- END EMIT MINIMAL VIEW ZONES\n\t\t}\n\n\t\treturn {\n\t\t\toriginal: ViewZonesComputer._ensureDomNodes(result.original),\n\t\t\tmodified: ViewZonesComputer._ensureDomNodes(result.modified),\n\t\t};\n\t}\n\n\tprivate static _ensureDomNodes(zones: IMyViewZone[]): IMyViewZone[] {\n\t\treturn zones.map((z) => {\n\t\t\tif (!z.domNode) {\n\t\t\t\tz.domNode = createFakeLinesDiv();\n\t\t\t}\n\t\t\treturn z;\n\t\t});\n\t}\n\n\tprotected abstract _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(): HTMLDivElement | null;\n\n\tprotected abstract _produceOriginalFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null;\n\n\tprotected abstract _produceModifiedFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null;\n}\n\nfunction createDecoration(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number, options: ModelDecorationOptions) {\n\treturn {\n\t\trange: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n\t\toptions: options\n\t};\n}\n\nconst DECORATIONS = {\n\n\tcharDelete: ModelDecorationOptions.register({\n\t\tclassName: 'char-delete'\n\t}),\n\tcharDeleteWholeLine: ModelDecorationOptions.register({\n\t\tclassName: 'char-delete',\n\t\tisWholeLine: true\n\t}),\n\n\tcharInsert: ModelDecorationOptions.register({\n\t\tclassName: 'char-insert'\n\t}),\n\tcharInsertWholeLine: ModelDecorationOptions.register({\n\t\tclassName: 'char-insert',\n\t\tisWholeLine: true\n\t}),\n\n\tlineInsert: ModelDecorationOptions.register({\n\t\tclassName: 'line-insert',\n\t\tmarginClassName: 'line-insert',\n\t\tisWholeLine: true\n\t}),\n\tlineInsertWithSign: ModelDecorationOptions.register({\n\t\tclassName: 'line-insert',\n\t\tlinesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n\t\tmarginClassName: 'line-insert',\n\t\tisWholeLine: true\n\t}),\n\n\tlineDelete: ModelDecorationOptions.register({\n\t\tclassName: 'line-delete',\n\t\tmarginClassName: 'line-delete',\n\t\tisWholeLine: true\n\t}),\n\tlineDeleteWithSign: ModelDecorationOptions.register({\n\t\tclassName: 'line-delete',\n\t\tlinesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n\t\tmarginClassName: 'line-delete',\n\t\tisWholeLine: true\n\n\t}),\n\tlineDeleteMargin: ModelDecorationOptions.register({\n\t\tmarginClassName: 'line-delete',\n\t})\n\n};\n\nclass DiffEditorWidgetSideBySide extends DiffEditorWidgetStyle implements IVerticalSashLayoutProvider {\n\n\tstatic readonly MINIMUM_EDITOR_WIDTH = 100;\n\n\tprivate _disableSash: boolean;\n\tprivate readonly _sash: Sash;\n\tprivate _sashRatio: number | null;\n\tprivate _sashPosition: number | null;\n\tprivate _startSashPosition: number | null;\n\n\tconstructor(dataSource: IDataSource, enableSplitViewResizing: boolean) {\n\t\tsuper(dataSource);\n\n\t\tthis._disableSash = (enableSplitViewResizing === false);\n\t\tthis._sashRatio = null;\n\t\tthis._sashPosition = null;\n\t\tthis._startSashPosition = null;\n\t\tthis._sash = this._register(new Sash(this._dataSource.getContainerDomNode(), this, { orientation: Orientation.VERTICAL }));\n\n\t\tif (this._disableSash) {\n\t\t\tthis._sash.state = SashState.Disabled;\n\t\t}\n\n\t\tthis._sash.onDidStart(() => this._onSashDragStart());\n\t\tthis._sash.onDidChange((e: ISashEvent) => this._onSashDrag(e));\n\t\tthis._sash.onDidEnd(() => this._onSashDragEnd());\n\t\tthis._sash.onDidReset(() => this._onSashReset());\n\t}\n\n\tpublic setEnableSplitViewResizing(enableSplitViewResizing: boolean): void {\n\t\tconst newDisableSash = (enableSplitViewResizing === false);\n\t\tif (this._disableSash !== newDisableSash) {\n\t\t\tthis._disableSash = newDisableSash;\n\t\t\tthis._sash.state = this._disableSash ? SashState.Disabled : SashState.Enabled;\n\t\t}\n\t}\n\n\tpublic layout(sashRatio: number | null = this._sashRatio): number {\n\t\tconst w = this._dataSource.getWidth();\n\t\tconst contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n\n\t\tlet sashPosition = Math.floor((sashRatio || 0.5) * contentWidth);\n\t\tconst midPoint = Math.floor(0.5 * contentWidth);\n\n\t\tsashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\n\n\t\tif (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\tif (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n\t\t\t\tsashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n\t\t\t}\n\n\t\t\tif (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n\t\t\t\tsashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n\t\t\t}\n\t\t} else {\n\t\t\tsashPosition = midPoint;\n\t\t}\n\n\t\tif (this._sashPosition !== sashPosition) {\n\t\t\tthis._sashPosition = sashPosition;\n\t\t\tthis._sash.layout();\n\t\t}\n\n\t\treturn this._sashPosition;\n\t}\n\n\tprivate _onSashDragStart(): void {\n\t\tthis._startSashPosition = this._sashPosition!;\n\t}\n\n\tprivate _onSashDrag(e: ISashEvent): void {\n\t\tconst w = this._dataSource.getWidth();\n\t\tconst contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n\t\tconst sashPosition = this.layout((this._startSashPosition! + (e.currentX - e.startX)) / contentWidth);\n\n\t\tthis._sashRatio = sashPosition / contentWidth;\n\n\t\tthis._dataSource.relayoutEditors();\n\t}\n\n\tprivate _onSashDragEnd(): void {\n\t\tthis._sash.layout();\n\t}\n\n\tprivate _onSashReset(): void {\n\t\tthis._sashRatio = 0.5;\n\t\tthis._dataSource.relayoutEditors();\n\t\tthis._sash.layout();\n\t}\n\n\tpublic getVerticalSashTop(sash: Sash): number {\n\t\treturn 0;\n\t}\n\n\tpublic getVerticalSashLeft(sash: Sash): number {\n\t\treturn this._sashPosition!;\n\t}\n\n\tpublic getVerticalSashHeight(sash: Sash): number {\n\t\treturn this._dataSource.getHeight();\n\t}\n\n\tprotected _getViewZones(lineChanges: editorCommon.ILineChange[], originalForeignVZ: IEditorWhitespace[], modifiedForeignVZ: IEditorWhitespace[]): IEditorsZones {\n\t\tconst originalEditor = this._dataSource.getOriginalEditor();\n\t\tconst modifiedEditor = this._dataSource.getModifiedEditor();\n\t\tconst c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n\t\treturn c.getViewZones();\n\t}\n\n\tprotected _getOriginalEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations {\n\t\tconst originalEditor = this._dataSource.getOriginalEditor();\n\t\tconst overviewZoneColor = String(this._removeColor);\n\n\t\tconst result: IEditorDiffDecorations = {\n\t\t\tdecorations: [],\n\t\t\toverviewZones: []\n\t\t};\n\n\t\tconst originalModel = originalEditor.getModel()!;\n\t\tconst originalViewModel = originalEditor._getViewModel()!;\n\n\t\tfor (const lineChange of lineChanges) {\n\n\t\t\tif (isChangeOrDelete(lineChange)) {\n\t\t\t\tresult.decorations.push({\n\t\t\t\t\trange: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\t\t\toptions: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\n\t\t\t\t});\n\t\t\t\tif (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\n\t\t\t\t\tresult.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER, DECORATIONS.charDeleteWholeLine));\n\t\t\t\t}\n\n\t\t\t\tconst viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n\t\t\t\tresult.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, overviewZoneColor));\n\n\t\t\t\tif (lineChange.charChanges) {\n\t\t\t\t\tfor (const charChange of lineChange.charChanges) {\n\t\t\t\t\t\tif (isChangeOrDelete(charChange)) {\n\t\t\t\t\t\t\tif (ignoreTrimWhitespace) {\n\t\t\t\t\t\t\t\tfor (let lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\n\t\t\t\t\t\t\t\t\tlet startColumn: number;\n\t\t\t\t\t\t\t\t\tlet endColumn: number;\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.originalStartLineNumber) {\n\t\t\t\t\t\t\t\t\t\tstartColumn = charChange.originalStartColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tstartColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.originalEndLineNumber) {\n\t\t\t\t\t\t\t\t\t\tendColumn = charChange.originalEndColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tendColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected _getModifiedEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations {\n\t\tconst modifiedEditor = this._dataSource.getModifiedEditor();\n\t\tconst overviewZoneColor = String(this._insertColor);\n\n\t\tconst result: IEditorDiffDecorations = {\n\t\t\tdecorations: [],\n\t\t\toverviewZones: []\n\t\t};\n\n\t\tconst modifiedModel = modifiedEditor.getModel()!;\n\t\tconst modifiedViewModel = modifiedEditor._getViewModel()!;\n\n\t\tfor (const lineChange of lineChanges) {\n\n\t\t\tif (isChangeOrInsert(lineChange)) {\n\n\t\t\t\tresult.decorations.push({\n\t\t\t\t\trange: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\t\t\toptions: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n\t\t\t\t});\n\t\t\t\tif (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\n\t\t\t\t\tresult.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER, DECORATIONS.charInsertWholeLine));\n\t\t\t\t}\n\n\t\t\t\tconst viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n\t\t\t\tresult.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, overviewZoneColor));\n\n\t\t\t\tif (lineChange.charChanges) {\n\t\t\t\t\tfor (const charChange of lineChange.charChanges) {\n\t\t\t\t\t\tif (isChangeOrInsert(charChange)) {\n\t\t\t\t\t\t\tif (ignoreTrimWhitespace) {\n\t\t\t\t\t\t\t\tfor (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n\t\t\t\t\t\t\t\t\tlet startColumn: number;\n\t\t\t\t\t\t\t\t\tlet endColumn: number;\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.modifiedStartLineNumber) {\n\t\t\t\t\t\t\t\t\t\tstartColumn = charChange.modifiedStartColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tstartColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.modifiedEndLineNumber) {\n\t\t\t\t\t\t\t\t\t\tendColumn = charChange.modifiedEndColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tendColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass SideBySideViewZonesComputer extends ViewZonesComputer {\n\n\tconstructor(\n\t\tlineChanges: editorCommon.ILineChange[],\n\t\toriginalForeignVZ: IEditorWhitespace[],\n\t\tmodifiedForeignVZ: IEditorWhitespace[],\n\t\toriginalEditor: CodeEditorWidget,\n\t\tmodifiedEditor: CodeEditorWidget,\n\t) {\n\t\tsuper(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n\t}\n\n\tprotected _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(): HTMLDivElement | null {\n\t\treturn null;\n\t}\n\n\tprotected _produceOriginalFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null {\n\t\tif (lineChangeModifiedLength > lineChangeOriginalLength) {\n\t\t\treturn {\n\t\t\t\tafterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n\t\t\t\theightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\n\t\t\t\tdomNode: null\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected _produceModifiedFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null {\n\t\tif (lineChangeOriginalLength > lineChangeModifiedLength) {\n\t\t\treturn {\n\t\t\t\tafterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\n\t\t\t\theightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\n\t\t\t\tdomNode: null\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass DiffEditorWidgetInline extends DiffEditorWidgetStyle {\n\n\tprivate _decorationsLeft: number;\n\n\tconstructor(dataSource: IDataSource, enableSplitViewResizing: boolean) {\n\t\tsuper(dataSource);\n\n\t\tthis._decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\n\n\t\tthis._register(dataSource.getOriginalEditor().onDidLayoutChange((layoutInfo: EditorLayoutInfo) => {\n\t\t\tif (this._decorationsLeft !== layoutInfo.decorationsLeft) {\n\t\t\t\tthis._decorationsLeft = layoutInfo.decorationsLeft;\n\t\t\t\tdataSource.relayoutEditors();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic setEnableSplitViewResizing(enableSplitViewResizing: boolean): void {\n\t\t// Nothing to do..\n\t}\n\n\tprotected _getViewZones(lineChanges: editorCommon.ILineChange[], originalForeignVZ: IEditorWhitespace[], modifiedForeignVZ: IEditorWhitespace[], renderIndicators: boolean): IEditorsZones {\n\t\tconst originalEditor = this._dataSource.getOriginalEditor();\n\t\tconst modifiedEditor = this._dataSource.getModifiedEditor();\n\t\tconst computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\n\t\treturn computer.getViewZones();\n\t}\n\n\tprotected _getOriginalEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations {\n\t\tconst overviewZoneColor = String(this._removeColor);\n\n\t\tconst result: IEditorDiffDecorations = {\n\t\t\tdecorations: [],\n\t\t\toverviewZones: []\n\t\t};\n\n\t\tconst originalEditor = this._dataSource.getOriginalEditor();\n\t\tconst originalModel = originalEditor.getModel()!;\n\t\tconst originalViewModel = originalEditor._getViewModel()!;\n\n\t\tfor (const lineChange of lineChanges) {\n\n\t\t\t// Add overview zones in the overview ruler\n\t\t\tif (isChangeOrDelete(lineChange)) {\n\t\t\t\tresult.decorations.push({\n\t\t\t\t\trange: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\t\t\toptions: DECORATIONS.lineDeleteMargin\n\t\t\t\t});\n\n\t\t\t\tconst viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n\t\t\t\tresult.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, overviewZoneColor));\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected _getModifiedEditorDecorations(lineChanges: editorCommon.ILineChange[], ignoreTrimWhitespace: boolean, renderIndicators: boolean): IEditorDiffDecorations {\n\t\tconst modifiedEditor = this._dataSource.getModifiedEditor();\n\t\tconst overviewZoneColor = String(this._insertColor);\n\n\t\tconst result: IEditorDiffDecorations = {\n\t\t\tdecorations: [],\n\t\t\toverviewZones: []\n\t\t};\n\n\t\tconst modifiedModel = modifiedEditor.getModel()!;\n\t\tconst modifiedViewModel = modifiedEditor._getViewModel()!;\n\n\t\tfor (const lineChange of lineChanges) {\n\n\t\t\t// Add decorations & overview zones\n\t\t\tif (isChangeOrInsert(lineChange)) {\n\t\t\t\tresult.decorations.push({\n\t\t\t\t\trange: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER),\n\t\t\t\t\toptions: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n\t\t\t\t});\n\n\t\t\t\tconst viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n\t\t\t\tresult.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, overviewZoneColor));\n\n\t\t\t\tif (lineChange.charChanges) {\n\t\t\t\t\tfor (const charChange of lineChange.charChanges) {\n\t\t\t\t\t\tif (isChangeOrInsert(charChange)) {\n\t\t\t\t\t\t\tif (ignoreTrimWhitespace) {\n\t\t\t\t\t\t\t\tfor (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n\t\t\t\t\t\t\t\t\tlet startColumn: number;\n\t\t\t\t\t\t\t\t\tlet endColumn: number;\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.modifiedStartLineNumber) {\n\t\t\t\t\t\t\t\t\t\tstartColumn = charChange.modifiedStartColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tstartColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (lineNumber === charChange.modifiedEndLineNumber) {\n\t\t\t\t\t\t\t\t\t\tendColumn = charChange.modifiedEndColumn;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tendColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, Constants.MAX_SAFE_SMALL_INTEGER, DECORATIONS.charInsertWholeLine));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic layout(): number {\n\t\t// An editor should not be smaller than 5px\n\t\treturn Math.max(5, this._decorationsLeft);\n\t}\n\n}\n\ninterface InlineModifiedViewZone extends IMyViewZone {\n\tshouldNotShrink: boolean;\n\tafterLineNumber: number;\n\theightInLines: number;\n\tminWidthInPx: number;\n\tdomNode: HTMLElement;\n\tmarginDomNode: HTMLElement;\n\tdiff: IDiffLinesChange;\n}\n\nclass InlineViewZonesComputer extends ViewZonesComputer {\n\n\tprivate readonly _originalModel: ITextModel;\n\tprivate readonly _renderIndicators: boolean;\n\tprivate readonly _pendingLineChange: editorCommon.ILineChange[];\n\tprivate readonly _pendingViewZones: InlineModifiedViewZone[];\n\tprivate readonly _lineBreaksComputer: ILineBreaksComputer;\n\n\tconstructor(\n\t\tlineChanges: editorCommon.ILineChange[],\n\t\toriginalForeignVZ: IEditorWhitespace[],\n\t\tmodifiedForeignVZ: IEditorWhitespace[],\n\t\toriginalEditor: CodeEditorWidget,\n\t\tmodifiedEditor: CodeEditorWidget,\n\t\trenderIndicators: boolean\n\t) {\n\t\tsuper(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n\t\tthis._originalModel = originalEditor.getModel()!;\n\t\tthis._renderIndicators = renderIndicators;\n\t\tthis._pendingLineChange = [];\n\t\tthis._pendingViewZones = [];\n\t\tthis._lineBreaksComputer = this._modifiedEditor._getViewModel()!.createLineBreaksComputer();\n\t}\n\n\tpublic override getViewZones(): IEditorsZones {\n\t\tconst result = super.getViewZones();\n\t\tthis._finalize(result);\n\t\treturn result;\n\t}\n\n\tprotected _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(): HTMLDivElement | null {\n\t\tconst result = document.createElement('div');\n\t\tresult.className = 'inline-added-margin-view-zone';\n\t\treturn result;\n\t}\n\n\tprotected _produceOriginalFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null {\n\t\tconst marginDomNode = document.createElement('div');\n\t\tmarginDomNode.className = 'inline-added-margin-view-zone';\n\n\t\treturn {\n\t\t\tafterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n\t\t\theightInLines: lineChangeModifiedLength,\n\t\t\tdomNode: document.createElement('div'),\n\t\t\tmarginDomNode: marginDomNode\n\t\t};\n\t}\n\n\tprotected _produceModifiedFromDiff(lineChange: editorCommon.ILineChange, lineChangeOriginalLength: number, lineChangeModifiedLength: number): IMyViewZone | null {\n\t\tconst domNode = document.createElement('div');\n\t\tdomNode.className = `view-lines line-delete ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`;\n\n\t\tconst marginDomNode = document.createElement('div');\n\t\tmarginDomNode.className = 'inline-deleted-margin-view-zone';\n\n\t\tconst viewZone: InlineModifiedViewZone = {\n\t\t\tshouldNotShrink: true,\n\t\t\tafterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\n\t\t\theightInLines: lineChangeOriginalLength,\n\t\t\tminWidthInPx: 0,\n\t\t\tdomNode: domNode,\n\t\t\tmarginDomNode: marginDomNode,\n\t\t\tdiff: {\n\t\t\t\toriginalStartLineNumber: lineChange.originalStartLineNumber,\n\t\t\t\toriginalEndLineNumber: lineChange.originalEndLineNumber,\n\t\t\t\tmodifiedStartLineNumber: lineChange.modifiedStartLineNumber,\n\t\t\t\tmodifiedEndLineNumber: lineChange.modifiedEndLineNumber,\n\t\t\t\toriginalModel: this._originalModel,\n\t\t\t\tviewLineCounts: null,\n\t\t\t}\n\t\t};\n\n\t\tfor (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n\t\t\tthis._lineBreaksComputer.addRequest(this._originalModel.getLineContent(lineNumber), null);\n\t\t}\n\n\t\tthis._pendingLineChange.push(lineChange);\n\t\tthis._pendingViewZones.push(viewZone);\n\n\t\treturn viewZone;\n\t}\n\n\tprivate _finalize(result: IEditorsZones): void {\n\t\tconst modifiedEditorOptions = this._modifiedEditor.getOptions();\n\t\tconst tabSize = this._modifiedEditor.getModel()!.getOptions().tabSize;\n\t\tconst fontInfo = modifiedEditorOptions.get(EditorOption.fontInfo);\n\t\tconst disableMonospaceOptimizations = modifiedEditorOptions.get(EditorOption.disableMonospaceOptimizations);\n\t\tconst typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n\t\tconst scrollBeyondLastColumn = modifiedEditorOptions.get(EditorOption.scrollBeyondLastColumn);\n\t\tconst mightContainNonBasicASCII = this._originalModel.mightContainNonBasicASCII();\n\t\tconst mightContainRTL = this._originalModel.mightContainRTL();\n\t\tconst lineHeight = modifiedEditorOptions.get(EditorOption.lineHeight);\n\t\tconst layoutInfo = modifiedEditorOptions.get(EditorOption.layoutInfo);\n\t\tconst lineDecorationsWidth = layoutInfo.decorationsWidth;\n\t\tconst stopRenderingLineAfter = modifiedEditorOptions.get(EditorOption.stopRenderingLineAfter);\n\t\tconst renderWhitespace = modifiedEditorOptions.get(EditorOption.renderWhitespace);\n\t\tconst renderControlCharacters = modifiedEditorOptions.get(EditorOption.renderControlCharacters);\n\t\tconst fontLigatures = modifiedEditorOptions.get(EditorOption.fontLigatures);\n\n\t\tconst lineBreaks = this._lineBreaksComputer.finalize();\n\t\tlet lineBreakIndex = 0;\n\n\t\tfor (let i = 0; i < this._pendingLineChange.length; i++) {\n\t\t\tconst lineChange = this._pendingLineChange[i];\n\t\t\tconst viewZone = this._pendingViewZones[i];\n\t\t\tconst domNode = viewZone.domNode;\n\t\t\tConfiguration.applyFontInfoSlow(domNode, fontInfo);\n\n\t\t\tconst marginDomNode = viewZone.marginDomNode;\n\t\t\tConfiguration.applyFontInfoSlow(marginDomNode, fontInfo);\n\n\t\t\tconst decorations: InlineDecoration[] = [];\n\t\t\tif (lineChange.charChanges) {\n\t\t\t\tfor (const charChange of lineChange.charChanges) {\n\t\t\t\t\tif (isChangeOrDelete(charChange)) {\n\t\t\t\t\t\tdecorations.push(new InlineDecoration(\n\t\t\t\t\t\t\tnew Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn),\n\t\t\t\t\t\t\t'char-delete',\n\t\t\t\t\t\t\tInlineDecorationType.Regular\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst hasCharChanges = (decorations.length > 0);\n\n\t\t\tconst sb = createStringBuilder(10000);\n\t\t\tlet maxCharsPerLine = 0;\n\t\t\tlet renderedLineCount = 0;\n\t\t\tlet viewLineCounts: number[] | null = null;\n\t\t\tfor (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n\t\t\t\tconst lineIndex = lineNumber - lineChange.originalStartLineNumber;\n\t\t\t\tconst lineTokens = this._originalModel.getLineTokens(lineNumber);\n\t\t\t\tconst lineContent = lineTokens.getLineContent();\n\t\t\t\tconst lineBreakData = lineBreaks[lineBreakIndex++];\n\t\t\t\tconst actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\n\n\t\t\t\tif (lineBreakData) {\n\t\t\t\t\tlet lastBreakOffset = 0;\n\t\t\t\t\tfor (const breakOffset of lineBreakData.breakOffsets) {\n\t\t\t\t\t\tconst viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n\t\t\t\t\t\tconst viewLineContent = lineContent.substring(lastBreakOffset, breakOffset);\n\t\t\t\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(\n\t\t\t\t\t\t\trenderedLineCount++,\n\t\t\t\t\t\t\tviewLineContent,\n\t\t\t\t\t\t\tviewLineTokens,\n\t\t\t\t\t\t\tLineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset),\n\t\t\t\t\t\t\thasCharChanges,\n\t\t\t\t\t\t\tmightContainNonBasicASCII,\n\t\t\t\t\t\t\tmightContainRTL,\n\t\t\t\t\t\t\tfontInfo,\n\t\t\t\t\t\t\tdisableMonospaceOptimizations,\n\t\t\t\t\t\t\tlineHeight,\n\t\t\t\t\t\t\tlineDecorationsWidth,\n\t\t\t\t\t\t\tstopRenderingLineAfter,\n\t\t\t\t\t\t\trenderWhitespace,\n\t\t\t\t\t\t\trenderControlCharacters,\n\t\t\t\t\t\t\tfontLigatures,\n\t\t\t\t\t\t\ttabSize,\n\t\t\t\t\t\t\tsb,\n\t\t\t\t\t\t\tmarginDomNode\n\t\t\t\t\t\t));\n\t\t\t\t\t\tlastBreakOffset = breakOffset;\n\t\t\t\t\t}\n\t\t\t\t\tif (!viewLineCounts) {\n\t\t\t\t\t\tviewLineCounts = [];\n\t\t\t\t\t}\n\t\t\t\t\t// make sure all lines before this one have an entry in `viewLineCounts`\n\t\t\t\t\twhile (viewLineCounts.length < lineIndex) {\n\t\t\t\t\t\tviewLineCounts[viewLineCounts.length] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tviewLineCounts[lineIndex] = lineBreakData.breakOffsets.length;\n\t\t\t\t\tviewZone.heightInLines += (lineBreakData.breakOffsets.length - 1);\n\t\t\t\t\tconst marginDomNode2 = document.createElement('div');\n\t\t\t\t\tmarginDomNode2.className = 'line-delete';\n\t\t\t\t\tresult.original.push({\n\t\t\t\t\t\tafterLineNumber: lineNumber,\n\t\t\t\t\t\tafterColumn: 0,\n\t\t\t\t\t\theightInLines: lineBreakData.breakOffsets.length - 1,\n\t\t\t\t\t\tdomNode: createFakeLinesDiv(),\n\t\t\t\t\t\tmarginDomNode: marginDomNode2\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmaxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(\n\t\t\t\t\t\trenderedLineCount++,\n\t\t\t\t\t\tlineContent,\n\t\t\t\t\t\tlineTokens,\n\t\t\t\t\t\tactualDecorations,\n\t\t\t\t\t\thasCharChanges,\n\t\t\t\t\t\tmightContainNonBasicASCII,\n\t\t\t\t\t\tmightContainRTL,\n\t\t\t\t\t\tfontInfo,\n\t\t\t\t\t\tdisableMonospaceOptimizations,\n\t\t\t\t\t\tlineHeight,\n\t\t\t\t\t\tlineDecorationsWidth,\n\t\t\t\t\t\tstopRenderingLineAfter,\n\t\t\t\t\t\trenderWhitespace,\n\t\t\t\t\t\trenderControlCharacters,\n\t\t\t\t\t\tfontLigatures,\n\t\t\t\t\t\ttabSize,\n\t\t\t\t\t\tsb,\n\t\t\t\t\t\tmarginDomNode\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t}\n\t\t\tmaxCharsPerLine += scrollBeyondLastColumn;\n\n\t\t\tconst html = sb.build();\n\t\t\tconst trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n\t\t\tdomNode.innerHTML = trustedhtml as string;\n\t\t\tviewZone.minWidthInPx = (maxCharsPerLine * typicalHalfwidthCharacterWidth);\n\n\t\t\tif (viewLineCounts) {\n\t\t\t\t// make sure all lines have an entry in `viewLineCounts`\n\t\t\t\tconst cnt = lineChange.originalEndLineNumber - lineChange.originalStartLineNumber;\n\t\t\t\twhile (viewLineCounts.length <= cnt) {\n\t\t\t\t\tviewLineCounts[viewLineCounts.length] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tviewZone.diff.viewLineCounts = viewLineCounts;\n\t\t}\n\n\t\tresult.original.sort((a, b) => {\n\t\t\treturn a.afterLineNumber - b.afterLineNumber;\n\t\t});\n\t}\n\n\tprivate _renderOriginalLine(\n\t\trenderedLineCount: number,\n\t\tlineContent: string,\n\t\tlineTokens: IViewLineTokens,\n\t\tdecorations: LineDecoration[],\n\t\thasCharChanges: boolean,\n\t\tmightContainNonBasicASCII: boolean,\n\t\tmightContainRTL: boolean,\n\t\tfontInfo: FontInfo,\n\t\tdisableMonospaceOptimizations: boolean,\n\t\tlineHeight: number,\n\t\tlineDecorationsWidth: number,\n\t\tstopRenderingLineAfter: number,\n\t\trenderWhitespace: 'selection' | 'none' | 'boundary' | 'trailing' | 'all',\n\t\trenderControlCharacters: boolean,\n\t\tfontLigatures: string,\n\t\ttabSize: number,\n\t\tsb: IStringBuilder,\n\t\tmarginDomNode: HTMLElement\n\t): number {\n\n\t\tsb.appendASCIIString('<div class=\"view-line');\n\t\tif (!hasCharChanges) {\n\t\t\t// No char changes\n\t\t\tsb.appendASCIIString(' char-delete');\n\t\t}\n\t\tsb.appendASCIIString('\" style=\"top:');\n\t\tsb.appendASCIIString(String(renderedLineCount * lineHeight));\n\t\tsb.appendASCIIString('px;width:1000000px;\">');\n\n\t\tconst isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n\t\tconst containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n\t\tconst output = renderViewLine(new RenderLineInput(\n\t\t\t(fontInfo.isMonospace && !disableMonospaceOptimizations),\n\t\t\tfontInfo.canUseHalfwidthRightwardsArrow,\n\t\t\tlineContent,\n\t\t\tfalse,\n\t\t\tisBasicASCII,\n\t\t\tcontainsRTL,\n\t\t\t0,\n\t\t\tlineTokens,\n\t\t\tdecorations,\n\t\t\ttabSize,\n\t\t\t0,\n\t\t\tfontInfo.spaceWidth,\n\t\t\tfontInfo.middotWidth,\n\t\t\tfontInfo.wsmiddotWidth,\n\t\t\tstopRenderingLineAfter,\n\t\t\trenderWhitespace,\n\t\t\trenderControlCharacters,\n\t\t\tfontLigatures !== EditorFontLigatures.OFF,\n\t\t\tnull // Send no selections, original line cannot be selected\n\t\t), sb);\n\n\t\tsb.appendASCIIString('</div>');\n\n\t\tif (this._renderIndicators) {\n\t\t\tconst marginElement = document.createElement('div');\n\t\t\tmarginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n\t\t\tmarginElement.setAttribute('style', `position:absolute;top:${renderedLineCount * lineHeight}px;width:${lineDecorationsWidth}px;height:${lineHeight}px;right:0;`);\n\t\t\tmarginDomNode.appendChild(marginElement);\n\t\t}\n\n\t\tconst absoluteOffsets = output.characterMapping.getAbsoluteOffsets();\n\t\treturn absoluteOffsets.length > 0 ? absoluteOffsets[absoluteOffsets.length - 1] : 0;\n\t}\n}\n\nfunction validateDiffWordWrap(value: 'off' | 'on' | 'inherit' | undefined, defaultValue: 'off' | 'on' | 'inherit'): 'off' | 'on' | 'inherit' {\n\treturn validateStringSetOption<'off' | 'on' | 'inherit'>(value, defaultValue, ['off', 'on', 'inherit']);\n}\n\nfunction isChangeOrInsert(lineChange: editorCommon.IChange): boolean {\n\treturn lineChange.modifiedEndLineNumber > 0;\n}\n\nfunction isChangeOrDelete(lineChange: editorCommon.IChange): boolean {\n\treturn lineChange.originalEndLineNumber > 0;\n}\n\nfunction createFakeLinesDiv(): HTMLElement {\n\tconst r = document.createElement('div');\n\tr.className = 'diagonal-fill';\n\treturn r;\n}\n\nfunction getViewRange(model: ITextModel, viewModel: IViewModel, startLineNumber: number, endLineNumber: number): Range {\n\tconst lineCount = model.getLineCount();\n\tstartLineNumber = Math.min(lineCount, Math.max(1, startLineNumber));\n\tendLineNumber = Math.min(lineCount, Math.max(1, endLineNumber));\n\treturn viewModel.coordinatesConverter.convertModelRangeToViewRange(new Range(\n\t\tstartLineNumber, model.getLineMinColumn(startLineNumber),\n\t\tendLineNumber, model.getLineMaxColumn(endLineNumber)\n\t));\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst added = theme.getColor(diffInserted);\n\tif (added) {\n\t\tcollector.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${added}; }`);\n\t\tcollector.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${added}; }`);\n\t\tcollector.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${added}; }`);\n\t}\n\n\tconst removed = theme.getColor(diffRemoved);\n\tif (removed) {\n\t\tcollector.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${removed}; }`);\n\t\tcollector.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${removed}; }`);\n\t\tcollector.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${removed}; }`);\n\t}\n\n\tconst addedOutline = theme.getColor(diffInsertedOutline);\n\tif (addedOutline) {\n\t\tcollector.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${addedOutline}; }`);\n\t}\n\n\tconst removedOutline = theme.getColor(diffRemovedOutline);\n\tif (removedOutline) {\n\t\tcollector.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${removedOutline}; }`);\n\t}\n\n\tconst shadow = theme.getColor(scrollbarShadow);\n\tif (shadow) {\n\t\tcollector.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${shadow}; }`);\n\t}\n\n\tconst border = theme.getColor(diffBorder);\n\tif (border) {\n\t\tcollector.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${border}; }`);\n\t}\n\n\tconst scrollbarSliderBackgroundColor = theme.getColor(scrollbarSliderBackground);\n\tif (scrollbarSliderBackgroundColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst scrollbarSliderHoverBackgroundColor = theme.getColor(scrollbarSliderHoverBackground);\n\tif (scrollbarSliderHoverBackgroundColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst scrollbarSliderActiveBackgroundColor = theme.getColor(scrollbarSliderActiveBackground);\n\tif (scrollbarSliderActiveBackgroundColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n\tcollector.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n});\n"]}