{"version":3,"file":"selections.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/browser/viewParts/selections/selections.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./selections';\nimport { DynamicViewOverlay } from 'vs/editor/browser/view/dynamicViewOverlay';\nimport { Range } from 'vs/editor/common/core/range';\nimport { HorizontalRange, LineVisibleRanges, RenderingContext } from 'vs/editor/common/view/renderingContext';\nimport { ViewContext } from 'vs/editor/common/view/viewContext';\nimport * as viewEvents from 'vs/editor/common/view/viewEvents';\nimport { editorInactiveSelection, editorSelectionBackground, editorSelectionForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\n\nconst enum CornerStyle {\n\tEXTERN,\n\tINTERN,\n\tFLAT\n}\n\ninterface IVisibleRangeEndPointStyle {\n\ttop: CornerStyle;\n\tbottom: CornerStyle;\n}\n\nclass HorizontalRangeWithStyle {\n\tpublic left: number;\n\tpublic width: number;\n\tpublic startStyle: IVisibleRangeEndPointStyle | null;\n\tpublic endStyle: IVisibleRangeEndPointStyle | null;\n\n\tconstructor(other: HorizontalRange) {\n\t\tthis.left = other.left;\n\t\tthis.width = other.width;\n\t\tthis.startStyle = null;\n\t\tthis.endStyle = null;\n\t}\n}\n\nclass LineVisibleRangesWithStyle {\n\tpublic lineNumber: number;\n\tpublic ranges: HorizontalRangeWithStyle[];\n\n\tconstructor(lineNumber: number, ranges: HorizontalRangeWithStyle[]) {\n\t\tthis.lineNumber = lineNumber;\n\t\tthis.ranges = ranges;\n\t}\n}\n\nfunction toStyledRange(item: HorizontalRange): HorizontalRangeWithStyle {\n\treturn new HorizontalRangeWithStyle(item);\n}\n\nfunction toStyled(item: LineVisibleRanges): LineVisibleRangesWithStyle {\n\treturn new LineVisibleRangesWithStyle(item.lineNumber, item.ranges.map(toStyledRange));\n}\n\nexport class SelectionsOverlay extends DynamicViewOverlay {\n\n\tprivate static readonly SELECTION_CLASS_NAME = 'selected-text';\n\tprivate static readonly SELECTION_TOP_LEFT = 'top-left-radius';\n\tprivate static readonly SELECTION_BOTTOM_LEFT = 'bottom-left-radius';\n\tprivate static readonly SELECTION_TOP_RIGHT = 'top-right-radius';\n\tprivate static readonly SELECTION_BOTTOM_RIGHT = 'bottom-right-radius';\n\tprivate static readonly EDITOR_BACKGROUND_CLASS_NAME = 'monaco-editor-background';\n\n\tprivate static readonly ROUNDED_PIECE_WIDTH = 10;\n\n\tprivate readonly _context: ViewContext;\n\tprivate _lineHeight: number;\n\tprivate _roundedSelection: boolean;\n\tprivate _typicalHalfwidthCharacterWidth: number;\n\tprivate _selections: Range[];\n\tprivate _renderResult: string[] | null;\n\n\tconstructor(context: ViewContext) {\n\t\tsuper();\n\t\tthis._context = context;\n\t\tconst options = this._context.configuration.options;\n\t\tthis._lineHeight = options.get(EditorOption.lineHeight);\n\t\tthis._roundedSelection = options.get(EditorOption.roundedSelection);\n\t\tthis._typicalHalfwidthCharacterWidth = options.get(EditorOption.fontInfo).typicalHalfwidthCharacterWidth;\n\t\tthis._selections = [];\n\t\tthis._renderResult = null;\n\t\tthis._context.addEventHandler(this);\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._context.removeEventHandler(this);\n\t\tthis._renderResult = null;\n\t\tsuper.dispose();\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\tconst options = this._context.configuration.options;\n\t\tthis._lineHeight = options.get(EditorOption.lineHeight);\n\t\tthis._roundedSelection = options.get(EditorOption.roundedSelection);\n\t\tthis._typicalHalfwidthCharacterWidth = options.get(EditorOption.fontInfo).typicalHalfwidthCharacterWidth;\n\t\treturn true;\n\t}\n\tpublic override onCursorStateChanged(e: viewEvents.ViewCursorStateChangedEvent): boolean {\n\t\tthis._selections = e.selections.slice(0);\n\t\treturn true;\n\t}\n\tpublic override onDecorationsChanged(e: viewEvents.ViewDecorationsChangedEvent): boolean {\n\t\t// true for inline decorations that can end up relayouting text\n\t\treturn true;//e.inlineDecorationsChanged;\n\t}\n\tpublic override onFlushed(e: viewEvents.ViewFlushedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onLinesChanged(e: viewEvents.ViewLinesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onLinesDeleted(e: viewEvents.ViewLinesDeletedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onLinesInserted(e: viewEvents.ViewLinesInsertedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onScrollChanged(e: viewEvents.ViewScrollChangedEvent): boolean {\n\t\treturn e.scrollTopChanged;\n\t}\n\tpublic override onZonesChanged(e: viewEvents.ViewZonesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\tprivate _visibleRangesHaveGaps(linesVisibleRanges: LineVisibleRangesWithStyle[]): boolean {\n\n\t\tfor (let i = 0, len = linesVisibleRanges.length; i < len; i++) {\n\t\t\tconst lineVisibleRanges = linesVisibleRanges[i];\n\n\t\t\tif (lineVisibleRanges.ranges.length > 1) {\n\t\t\t\t// There are two ranges on the same line\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate _enrichVisibleRangesWithStyle(viewport: Range, linesVisibleRanges: LineVisibleRangesWithStyle[], previousFrame: LineVisibleRangesWithStyle[] | null): void {\n\t\tconst epsilon = this._typicalHalfwidthCharacterWidth / 4;\n\t\tlet previousFrameTop: HorizontalRangeWithStyle | null = null;\n\t\tlet previousFrameBottom: HorizontalRangeWithStyle | null = null;\n\n\t\tif (previousFrame && previousFrame.length > 0 && linesVisibleRanges.length > 0) {\n\n\t\t\tconst topLineNumber = linesVisibleRanges[0].lineNumber;\n\t\t\tif (topLineNumber === viewport.startLineNumber) {\n\t\t\t\tfor (let i = 0; !previousFrameTop && i < previousFrame.length; i++) {\n\t\t\t\t\tif (previousFrame[i].lineNumber === topLineNumber) {\n\t\t\t\t\t\tpreviousFrameTop = previousFrame[i].ranges[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst bottomLineNumber = linesVisibleRanges[linesVisibleRanges.length - 1].lineNumber;\n\t\t\tif (bottomLineNumber === viewport.endLineNumber) {\n\t\t\t\tfor (let i = previousFrame.length - 1; !previousFrameBottom && i >= 0; i--) {\n\t\t\t\t\tif (previousFrame[i].lineNumber === bottomLineNumber) {\n\t\t\t\t\t\tpreviousFrameBottom = previousFrame[i].ranges[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (previousFrameTop && !previousFrameTop.startStyle) {\n\t\t\t\tpreviousFrameTop = null;\n\t\t\t}\n\t\t\tif (previousFrameBottom && !previousFrameBottom.startStyle) {\n\t\t\t\tpreviousFrameBottom = null;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = linesVisibleRanges.length; i < len; i++) {\n\t\t\t// We know for a fact that there is precisely one range on each line\n\t\t\tconst curLineRange = linesVisibleRanges[i].ranges[0];\n\t\t\tconst curLeft = curLineRange.left;\n\t\t\tconst curRight = curLineRange.left + curLineRange.width;\n\n\t\t\tconst startStyle = {\n\t\t\t\ttop: CornerStyle.EXTERN,\n\t\t\t\tbottom: CornerStyle.EXTERN\n\t\t\t};\n\n\t\t\tconst endStyle = {\n\t\t\t\ttop: CornerStyle.EXTERN,\n\t\t\t\tbottom: CornerStyle.EXTERN\n\t\t\t};\n\n\t\t\tif (i > 0) {\n\t\t\t\t// Look above\n\t\t\t\tconst prevLeft = linesVisibleRanges[i - 1].ranges[0].left;\n\t\t\t\tconst prevRight = linesVisibleRanges[i - 1].ranges[0].left + linesVisibleRanges[i - 1].ranges[0].width;\n\n\t\t\t\tif (abs(curLeft - prevLeft) < epsilon) {\n\t\t\t\t\tstartStyle.top = CornerStyle.FLAT;\n\t\t\t\t} else if (curLeft > prevLeft) {\n\t\t\t\t\tstartStyle.top = CornerStyle.INTERN;\n\t\t\t\t}\n\n\t\t\t\tif (abs(curRight - prevRight) < epsilon) {\n\t\t\t\t\tendStyle.top = CornerStyle.FLAT;\n\t\t\t\t} else if (prevLeft < curRight && curRight < prevRight) {\n\t\t\t\t\tendStyle.top = CornerStyle.INTERN;\n\t\t\t\t}\n\t\t\t} else if (previousFrameTop) {\n\t\t\t\t// Accept some hiccups near the viewport edges to save on repaints\n\t\t\t\tstartStyle.top = previousFrameTop.startStyle!.top;\n\t\t\t\tendStyle.top = previousFrameTop.endStyle!.top;\n\t\t\t}\n\n\t\t\tif (i + 1 < len) {\n\t\t\t\t// Look below\n\t\t\t\tconst nextLeft = linesVisibleRanges[i + 1].ranges[0].left;\n\t\t\t\tconst nextRight = linesVisibleRanges[i + 1].ranges[0].left + linesVisibleRanges[i + 1].ranges[0].width;\n\n\t\t\t\tif (abs(curLeft - nextLeft) < epsilon) {\n\t\t\t\t\tstartStyle.bottom = CornerStyle.FLAT;\n\t\t\t\t} else if (nextLeft < curLeft && curLeft < nextRight) {\n\t\t\t\t\tstartStyle.bottom = CornerStyle.INTERN;\n\t\t\t\t}\n\n\t\t\t\tif (abs(curRight - nextRight) < epsilon) {\n\t\t\t\t\tendStyle.bottom = CornerStyle.FLAT;\n\t\t\t\t} else if (curRight < nextRight) {\n\t\t\t\t\tendStyle.bottom = CornerStyle.INTERN;\n\t\t\t\t}\n\t\t\t} else if (previousFrameBottom) {\n\t\t\t\t// Accept some hiccups near the viewport edges to save on repaints\n\t\t\t\tstartStyle.bottom = previousFrameBottom.startStyle!.bottom;\n\t\t\t\tendStyle.bottom = previousFrameBottom.endStyle!.bottom;\n\t\t\t}\n\n\t\t\tcurLineRange.startStyle = startStyle;\n\t\t\tcurLineRange.endStyle = endStyle;\n\t\t}\n\t}\n\n\tprivate _getVisibleRangesWithStyle(selection: Range, ctx: RenderingContext, previousFrame: LineVisibleRangesWithStyle[] | null): LineVisibleRangesWithStyle[] {\n\t\tconst _linesVisibleRanges = ctx.linesVisibleRangesForRange(selection, true) || [];\n\t\tconst linesVisibleRanges = _linesVisibleRanges.map(toStyled);\n\t\tconst visibleRangesHaveGaps = this._visibleRangesHaveGaps(linesVisibleRanges);\n\n\t\tif (!visibleRangesHaveGaps && this._roundedSelection) {\n\t\t\tthis._enrichVisibleRangesWithStyle(ctx.visibleRange, linesVisibleRanges, previousFrame);\n\t\t}\n\n\t\t// The visible ranges are sorted TOP-BOTTOM and LEFT-RIGHT\n\t\treturn linesVisibleRanges;\n\t}\n\n\tprivate _createSelectionPiece(top: number, height: string, className: string, left: number, width: number): string {\n\t\treturn (\n\t\t\t'<div class=\"cslr '\n\t\t\t+ className\n\t\t\t+ '\" style=\"top:'\n\t\t\t+ top.toString()\n\t\t\t+ 'px;left:'\n\t\t\t+ left.toString()\n\t\t\t+ 'px;width:'\n\t\t\t+ width.toString()\n\t\t\t+ 'px;height:'\n\t\t\t+ height\n\t\t\t+ 'px;\"></div>'\n\t\t);\n\t}\n\n\tprivate _actualRenderOneSelection(output2: [string, string][], visibleStartLineNumber: number, hasMultipleSelections: boolean, visibleRanges: LineVisibleRangesWithStyle[]): void {\n\t\tif (visibleRanges.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst visibleRangesHaveStyle = !!visibleRanges[0].ranges[0].startStyle;\n\t\tconst fullLineHeight = (this._lineHeight).toString();\n\t\tconst reducedLineHeight = (this._lineHeight - 1).toString();\n\n\t\tconst firstLineNumber = visibleRanges[0].lineNumber;\n\t\tconst lastLineNumber = visibleRanges[visibleRanges.length - 1].lineNumber;\n\n\t\tfor (let i = 0, len = visibleRanges.length; i < len; i++) {\n\t\t\tconst lineVisibleRanges = visibleRanges[i];\n\t\t\tconst lineNumber = lineVisibleRanges.lineNumber;\n\t\t\tconst lineIndex = lineNumber - visibleStartLineNumber;\n\n\t\t\tconst lineHeight = hasMultipleSelections ? (lineNumber === lastLineNumber || lineNumber === firstLineNumber ? reducedLineHeight : fullLineHeight) : fullLineHeight;\n\t\t\tconst top = hasMultipleSelections ? (lineNumber === firstLineNumber ? 1 : 0) : 0;\n\n\t\t\tlet innerCornerOutput = '';\n\t\t\tlet restOfSelectionOutput = '';\n\n\t\t\tfor (let j = 0, lenJ = lineVisibleRanges.ranges.length; j < lenJ; j++) {\n\t\t\t\tconst visibleRange = lineVisibleRanges.ranges[j];\n\n\t\t\t\tif (visibleRangesHaveStyle) {\n\t\t\t\t\tconst startStyle = visibleRange.startStyle!;\n\t\t\t\t\tconst endStyle = visibleRange.endStyle!;\n\t\t\t\t\tif (startStyle.top === CornerStyle.INTERN || startStyle.bottom === CornerStyle.INTERN) {\n\t\t\t\t\t\t// Reverse rounded corner to the left\n\n\t\t\t\t\t\t// First comes the selection (blue layer)\n\t\t\t\t\t\tinnerCornerOutput += this._createSelectionPiece(top, lineHeight, SelectionsOverlay.SELECTION_CLASS_NAME, visibleRange.left - SelectionsOverlay.ROUNDED_PIECE_WIDTH, SelectionsOverlay.ROUNDED_PIECE_WIDTH);\n\n\t\t\t\t\t\t// Second comes the background (white layer) with inverse border radius\n\t\t\t\t\t\tlet className = SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;\n\t\t\t\t\t\tif (startStyle.top === CornerStyle.INTERN) {\n\t\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_TOP_RIGHT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (startStyle.bottom === CornerStyle.INTERN) {\n\t\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_BOTTOM_RIGHT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinnerCornerOutput += this._createSelectionPiece(top, lineHeight, className, visibleRange.left - SelectionsOverlay.ROUNDED_PIECE_WIDTH, SelectionsOverlay.ROUNDED_PIECE_WIDTH);\n\t\t\t\t\t}\n\t\t\t\t\tif (endStyle.top === CornerStyle.INTERN || endStyle.bottom === CornerStyle.INTERN) {\n\t\t\t\t\t\t// Reverse rounded corner to the right\n\n\t\t\t\t\t\t// First comes the selection (blue layer)\n\t\t\t\t\t\tinnerCornerOutput += this._createSelectionPiece(top, lineHeight, SelectionsOverlay.SELECTION_CLASS_NAME, visibleRange.left + visibleRange.width, SelectionsOverlay.ROUNDED_PIECE_WIDTH);\n\n\t\t\t\t\t\t// Second comes the background (white layer) with inverse border radius\n\t\t\t\t\t\tlet className = SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;\n\t\t\t\t\t\tif (endStyle.top === CornerStyle.INTERN) {\n\t\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_TOP_LEFT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (endStyle.bottom === CornerStyle.INTERN) {\n\t\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_BOTTOM_LEFT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinnerCornerOutput += this._createSelectionPiece(top, lineHeight, className, visibleRange.left + visibleRange.width, SelectionsOverlay.ROUNDED_PIECE_WIDTH);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet className = SelectionsOverlay.SELECTION_CLASS_NAME;\n\t\t\t\tif (visibleRangesHaveStyle) {\n\t\t\t\t\tconst startStyle = visibleRange.startStyle!;\n\t\t\t\t\tconst endStyle = visibleRange.endStyle!;\n\t\t\t\t\tif (startStyle.top === CornerStyle.EXTERN) {\n\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_TOP_LEFT;\n\t\t\t\t\t}\n\t\t\t\t\tif (startStyle.bottom === CornerStyle.EXTERN) {\n\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_BOTTOM_LEFT;\n\t\t\t\t\t}\n\t\t\t\t\tif (endStyle.top === CornerStyle.EXTERN) {\n\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_TOP_RIGHT;\n\t\t\t\t\t}\n\t\t\t\t\tif (endStyle.bottom === CornerStyle.EXTERN) {\n\t\t\t\t\t\tclassName += ' ' + SelectionsOverlay.SELECTION_BOTTOM_RIGHT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trestOfSelectionOutput += this._createSelectionPiece(top, lineHeight, className, visibleRange.left, visibleRange.width);\n\t\t\t}\n\n\t\t\toutput2[lineIndex][0] += innerCornerOutput;\n\t\t\toutput2[lineIndex][1] += restOfSelectionOutput;\n\t\t}\n\t}\n\n\tprivate _previousFrameVisibleRangesWithStyle: (LineVisibleRangesWithStyle[] | null)[] = [];\n\tpublic prepareRender(ctx: RenderingContext): void {\n\n\t\t// Build HTML for inner corners separate from HTML for the rest of selections,\n\t\t// as the inner corner HTML can interfere with that of other selections.\n\t\t// In final render, make sure to place the inner corner HTML before the rest of selection HTML. See issue #77777.\n\t\tconst output: [string, string][] = [];\n\t\tconst visibleStartLineNumber = ctx.visibleRange.startLineNumber;\n\t\tconst visibleEndLineNumber = ctx.visibleRange.endLineNumber;\n\t\tfor (let lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\n\t\t\tconst lineIndex = lineNumber - visibleStartLineNumber;\n\t\t\toutput[lineIndex] = ['', ''];\n\t\t}\n\n\t\tconst thisFrameVisibleRangesWithStyle: (LineVisibleRangesWithStyle[] | null)[] = [];\n\t\tfor (let i = 0, len = this._selections.length; i < len; i++) {\n\t\t\tconst selection = this._selections[i];\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\tthisFrameVisibleRangesWithStyle[i] = null;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst visibleRangesWithStyle = this._getVisibleRangesWithStyle(selection, ctx, this._previousFrameVisibleRangesWithStyle[i]);\n\t\t\tthisFrameVisibleRangesWithStyle[i] = visibleRangesWithStyle;\n\t\t\tthis._actualRenderOneSelection(output, visibleStartLineNumber, this._selections.length > 1, visibleRangesWithStyle);\n\t\t}\n\n\t\tthis._previousFrameVisibleRangesWithStyle = thisFrameVisibleRangesWithStyle;\n\t\tthis._renderResult = output.map(([internalCorners, restOfSelection]) => internalCorners + restOfSelection);\n\t}\n\n\tpublic render(startLineNumber: number, lineNumber: number): string {\n\t\tif (!this._renderResult) {\n\t\t\treturn '';\n\t\t}\n\t\tconst lineIndex = lineNumber - startLineNumber;\n\t\tif (lineIndex < 0 || lineIndex >= this._renderResult.length) {\n\t\t\treturn '';\n\t\t}\n\t\treturn this._renderResult[lineIndex];\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst editorSelectionColor = theme.getColor(editorSelectionBackground);\n\tif (editorSelectionColor) {\n\t\tcollector.addRule(`.monaco-editor .focused .selected-text { background-color: ${editorSelectionColor}; }`);\n\t}\n\tconst editorInactiveSelectionColor = theme.getColor(editorInactiveSelection);\n\tif (editorInactiveSelectionColor) {\n\t\tcollector.addRule(`.monaco-editor .selected-text { background-color: ${editorInactiveSelectionColor}; }`);\n\t}\n\tconst editorSelectionForegroundColor = theme.getColor(editorSelectionForeground);\n\tif (editorSelectionForegroundColor && !editorSelectionForegroundColor.isTransparent()) {\n\t\tcollector.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${editorSelectionForegroundColor}; }`);\n\t}\n});\n\nfunction abs(n: number): number {\n\treturn n < 0 ? -n : n;\n}\n"]}