{"version":3,"file":"linkComputer.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/test/common/modes/linkComputer.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport { ILink } from 'vs/editor/common/modes';\nimport { ILinkComputerTarget, computeLinks } from 'vs/editor/common/modes/linkComputer';\n\nclass SimpleLinkComputerTarget implements ILinkComputerTarget {\n\n\tconstructor(private _lines: string[]) {\n\t\t// Intentional Empty\n\t}\n\n\tpublic getLineCount(): number {\n\t\treturn this._lines.length;\n\t}\n\n\tpublic getLineContent(lineNumber: number): string {\n\t\treturn this._lines[lineNumber - 1];\n\t}\n}\n\nfunction myComputeLinks(lines: string[]): ILink[] {\n\tlet target = new SimpleLinkComputerTarget(lines);\n\treturn computeLinks(target);\n}\n\nfunction assertLink(text: string, extractedLink: string): void {\n\tlet startColumn = 0,\n\t\tendColumn = 0,\n\t\tchr: string,\n\t\ti = 0;\n\n\tfor (i = 0; i < extractedLink.length; i++) {\n\t\tchr = extractedLink.charAt(i);\n\t\tif (chr !== ' ' && chr !== '\\t') {\n\t\t\tstartColumn = i + 1;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tfor (i = extractedLink.length - 1; i >= 0; i--) {\n\t\tchr = extractedLink.charAt(i);\n\t\tif (chr !== ' ' && chr !== '\\t') {\n\t\t\tendColumn = i + 2;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet r = myComputeLinks([text]);\n\tassert.deepStrictEqual(r, [{\n\t\trange: {\n\t\t\tstartLineNumber: 1,\n\t\t\tstartColumn: startColumn,\n\t\t\tendLineNumber: 1,\n\t\t\tendColumn: endColumn\n\t\t},\n\t\turl: extractedLink.substring(startColumn - 1, endColumn - 1)\n\t}]);\n}\n\nsuite('Editor Modes - Link Computer', () => {\n\n\ttest('Null model', () => {\n\t\tlet r = computeLinks(null);\n\t\tassert.deepStrictEqual(r, []);\n\t});\n\n\ttest('Parsing', () => {\n\n\t\tassertLink(\n\t\t\t'x = \"http://foo.bar\";',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = (http://foo.bar);',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = [http://foo.bar];',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \\'http://foo.bar\\';',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x =  http://foo.bar ;',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = <http://foo.bar>;',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = {http://foo.bar};',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'(see http://foo.bar)',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'[see http://foo.bar]',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'{see http://foo.bar}',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'<see http://foo.bar>',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'<url>http://mylink.com</url>',\n\t\t\t'     http://mylink.com      '\n\t\t);\n\t\tassertLink(\n\t\t\t'// Click here to learn more. https://go.microsoft.com/fwlink/?LinkID=513275&clcid=0x409',\n\t\t\t'                             https://go.microsoft.com/fwlink/?LinkID=513275&clcid=0x409'\n\t\t);\n\t\tassertLink(\n\t\t\t'// Click here to learn more. https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx',\n\t\t\t'                             https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx'\n\t\t);\n\t\tassertLink(\n\t\t\t'// https://github.com/projectkudu/kudu/blob/master/Kudu.Core/Scripts/selectNodeVersion.js',\n\t\t\t'   https://github.com/projectkudu/kudu/blob/master/Kudu.Core/Scripts/selectNodeVersion.js'\n\t\t);\n\t\tassertLink(\n\t\t\t'<!-- !!! Do not remove !!!   WebContentRef(link:https://go.microsoft.com/fwlink/?LinkId=166007, area:Admin, updated:2015, nextUpdate:2016, tags:SqlServer)   !!! Do not remove !!! -->',\n\t\t\t'                                                https://go.microsoft.com/fwlink/?LinkId=166007                                                                                        '\n\t\t);\n\t\tassertLink(\n\t\t\t'For instructions, see https://go.microsoft.com/fwlink/?LinkId=166007.</value>',\n\t\t\t'                      https://go.microsoft.com/fwlink/?LinkId=166007         '\n\t\t);\n\t\tassertLink(\n\t\t\t'For instructions, see https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx.</value>',\n\t\t\t'                      https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx         '\n\t\t);\n\t\tassertLink(\n\t\t\t'x = \"https://en.wikipedia.org/wiki/Zürich\";',\n\t\t\t'     https://en.wikipedia.org/wiki/Zürich  '\n\t\t);\n\t\tassertLink(\n\t\t\t'請參閱 http://go.microsoft.com/fwlink/?LinkId=761051。',\n\t\t\t'    http://go.microsoft.com/fwlink/?LinkId=761051 '\n\t\t);\n\t\tassertLink(\n\t\t\t'（請參閱 http://go.microsoft.com/fwlink/?LinkId=761051）',\n\t\t\t'     http://go.microsoft.com/fwlink/?LinkId=761051 '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file:///foo.bar\";',\n\t\t\t'     file:///foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'x = \"file://c:/foo.bar\";',\n\t\t\t'     file://c:/foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file://shares/foo.bar\";',\n\t\t\t'     file://shares/foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file://shäres/foo.bar\";',\n\t\t\t'     file://shäres/foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'Some text, then http://www.bing.com.',\n\t\t\t'                http://www.bing.com '\n\t\t);\n\t\tassertLink(\n\t\t\t'let url = `http://***/_api/web/lists/GetByTitle(\\'Teambuildingaanvragen\\')/items`;',\n\t\t\t'           http://***/_api/web/lists/GetByTitle(\\'Teambuildingaanvragen\\')/items  '\n\t\t);\n\t});\n\n\ttest('issue #7855', () => {\n\t\tassertLink(\n\t\t\t'7. At this point, ServiceMain has been called.  There is no functionality presently in ServiceMain, but you can consult the [MSDN documentation](https://msdn.microsoft.com/en-us/library/windows/desktop/ms687414(v=vs.85).aspx) to add functionality as desired!',\n\t\t\t'                                                                                                                                                 https://msdn.microsoft.com/en-us/library/windows/desktop/ms687414(v=vs.85).aspx                                  '\n\t\t);\n\t});\n\n\ttest('issue #62278: \"Ctrl + click to follow link\" for IPv6 URLs', () => {\n\t\tassertLink(\n\t\t\t'let x = \"http://[::1]:5000/connect/token\"',\n\t\t\t'         http://[::1]:5000/connect/token  '\n\t\t);\n\t});\n\n\ttest('issue #70254: bold links dont open in markdown file using editor mode with ctrl + click', () => {\n\t\tassertLink(\n\t\t\t'2. Navigate to **https://portal.azure.com**',\n\t\t\t'                 https://portal.azure.com  '\n\t\t);\n\t});\n\n\ttest('issue #86358: URL wrong recognition pattern', () => {\n\t\tassertLink(\n\t\t\t'POST|https://portal.azure.com|2019-12-05|',\n\t\t\t'     https://portal.azure.com            '\n\t\t);\n\t});\n\n\ttest('issue #67022: Space as end of hyperlink isn\\'t always good idea', () => {\n\t\tassertLink(\n\t\t\t'aa  https://foo.bar/[this is foo site]  aa',\n\t\t\t'    https://foo.bar/[this is foo site]    '\n\t\t);\n\t});\n\n\ttest('issue #100353: Link detection stops at ＆(double-byte)', () => {\n\t\tassertLink(\n\t\t\t'aa  http://tree-mark.chips.jp/レーズン＆ベリーミックス  aa',\n\t\t\t'    http://tree-mark.chips.jp/レーズン＆ベリーミックス    '\n\t\t);\n\t});\n});\n"]}