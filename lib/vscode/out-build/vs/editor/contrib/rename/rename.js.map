{"version":3,"sources":["vs/editor/contrib/rename/rename.ts"],"names":[],"mappings":"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","file":"rename.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { KeyMod, KeyCode } from 'vs/base/common/keyCodes';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { IEditorProgressService } from 'vs/platform/progress/common/progress';\nimport { registerEditorAction, registerEditorContribution, ServicesAccessor, EditorAction, EditorCommand, registerEditorCommand, registerModelAndPositionCommand } from 'vs/editor/browser/editorExtensions';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { RenameInputField, CONTEXT_RENAME_INPUT_VISIBLE } from './renameInputField';\nimport { WorkspaceEdit, RenameProviderRegistry, RenameProvider, RenameLocation, Rejection } from 'vs/editor/common/modes';\nimport { Position, IPosition } from 'vs/editor/common/core/position';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { Range } from 'vs/editor/common/core/range';\nimport { MessageController } from 'vs/editor/contrib/message/messageController';\nimport { CodeEditorStateFlag, EditorStateCancellationTokenSource } from 'vs/editor/browser/core/editorState';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IBulkEditService, ResourceEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { URI } from 'vs/base/common/uri';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { IdleValue, raceCancellation } from 'vs/base/common/async';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IConfigurationRegistry, ConfigurationScope, Extensions } from 'vs/platform/configuration/common/configurationRegistry';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfigurationService';\nimport { assertType } from 'vs/base/common/types';\n\nclass RenameSkeleton {\n\n\tprivate readonly _providers: RenameProvider[];\n\tprivate _providerRenameIdx: number = 0;\n\n\tconstructor(\n\t\tprivate readonly model: ITextModel,\n\t\tprivate readonly position: Position\n\t) {\n\t\tthis._providers = RenameProviderRegistry.ordered(model);\n\t}\n\n\thasProvider() {\n\t\treturn this._providers.length > 0;\n\t}\n\n\tasync resolveRenameLocation(token: CancellationToken): Promise<RenameLocation & Rejection | undefined> {\n\n\t\tconst rejects: string[] = [];\n\n\t\tfor (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n\t\t\tconst provider = this._providers[this._providerRenameIdx];\n\t\t\tif (!provider.resolveRenameLocation) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet res = await provider.resolveRenameLocation(this.model, this.position, token);\n\t\t\tif (!res) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (res.rejectReason) {\n\t\t\t\trejects.push(res.rejectReason);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tconst word = this.model.getWordAtPosition(this.position);\n\t\tif (!word) {\n\t\t\treturn {\n\t\t\t\trange: Range.fromPositions(this.position),\n\t\t\t\ttext: '',\n\t\t\t\trejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\trange: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n\t\t\ttext: word.word,\n\t\t\trejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n\t\t};\n\t}\n\n\tasync provideRenameEdits(newName: string, token: CancellationToken): Promise<WorkspaceEdit & Rejection> {\n\t\treturn this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n\t}\n\n\tprivate async _provideRenameEdits(newName: string, i: number, rejects: string[], token: CancellationToken): Promise<WorkspaceEdit & Rejection> {\n\t\tconst provider = this._providers[i];\n\t\tif (!provider) {\n\t\t\treturn {\n\t\t\t\tedits: [],\n\t\t\t\trejectReason: rejects.join('\\n')\n\t\t\t};\n\t\t}\n\n\t\tconst result = await provider.provideRenameEdits(this.model, this.position, newName, token);\n\t\tif (!result) {\n\t\t\treturn this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n\t\t} else if (result.rejectReason) {\n\t\t\treturn this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport async function rename(model: ITextModel, position: Position, newName: string): Promise<WorkspaceEdit & Rejection> {\n\tconst skeleton = new RenameSkeleton(model, position);\n\tconst loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n\tif (loc?.rejectReason) {\n\t\treturn { edits: [], rejectReason: loc.rejectReason };\n\t}\n\treturn skeleton.provideRenameEdits(newName, CancellationToken.None);\n}\n\n// ---  register actions and commands\n\nclass RenameController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.renameController';\n\n\tstatic get(editor: ICodeEditor): RenameController {\n\t\treturn editor.getContribution<RenameController>(RenameController.ID);\n\t}\n\n\tprivate readonly _renameInputField: IdleValue<RenameInputField>;\n\tprivate readonly _dispoableStore = new DisposableStore();\n\tprivate _cts: CancellationTokenSource = new CancellationTokenSource();\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IBulkEditService private readonly _bulkEditService: IBulkEditService,\n\t\t@IEditorProgressService private readonly _progressService: IEditorProgressService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@ITextResourceConfigurationService private readonly _configService: ITextResourceConfigurationService,\n\t) {\n\t\tthis._renameInputField = this._dispoableStore.add(new IdleValue(() => this._dispoableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n\t}\n\n\tdispose(): void {\n\t\tthis._dispoableStore.dispose();\n\t\tthis._cts.dispose(true);\n\t}\n\n\tasync run(): Promise<void> {\n\n\t\tthis._cts.dispose(true);\n\n\t\tif (!this.editor.hasModel()) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst position = this.editor.getPosition();\n\t\tconst skeleton = new RenameSkeleton(this.editor.getModel(), position);\n\n\t\tif (!skeleton.hasProvider()) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._cts = new EditorStateCancellationTokenSource(this.editor, CodeEditorStateFlag.Position | CodeEditorStateFlag.Value);\n\n\t\t// resolve rename location\n\t\tlet loc: RenameLocation & Rejection | undefined;\n\t\ttry {\n\t\t\tconst resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n\t\t\tthis._progressService.showWhile(resolveLocationOperation, 250);\n\t\t\tloc = await resolveLocationOperation;\n\t\t} catch (e) {\n\t\t\tMessageController.get(this.editor).showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!loc) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (loc.rejectReason) {\n\t\t\tMessageController.get(this.editor).showMessage(loc.rejectReason, position);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this._cts.token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._cts.dispose();\n\t\tthis._cts = new EditorStateCancellationTokenSource(this.editor, CodeEditorStateFlag.Position | CodeEditorStateFlag.Value, loc.range);\n\n\t\t// do rename at location\n\t\tlet selection = this.editor.getSelection();\n\t\tlet selectionStart = 0;\n\t\tlet selectionEnd = loc.text.length;\n\n\t\tif (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n\t\t\tselectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n\t\t\tselectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n\t\t}\n\n\t\tconst supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue<boolean>(this.editor.getModel().uri, 'editor.rename.enablePreview');\n\t\tconst inputFieldResult = await this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n\n\t\t// no result, only hint to focus the editor or not\n\t\tif (typeof inputFieldResult === 'boolean') {\n\t\t\tif (inputFieldResult) {\n\t\t\t\tthis.editor.focus();\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.editor.focus();\n\n\t\tconst renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then(async renameResult => {\n\n\t\t\tif (!renameResult || !this.editor.hasModel()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (renameResult.rejectReason) {\n\t\t\t\tthis._notificationService.info(renameResult.rejectReason);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n\t\t\t\teditor: this.editor,\n\t\t\t\tshowPreview: inputFieldResult.wantsPreview,\n\t\t\t\tlabel: nls.localize('label', \"Renaming '{0}'\", loc?.text),\n\t\t\t\tquotableLabel: nls.localize('quotableLabel', \"Renaming {0}\", loc?.text),\n\t\t\t}).then(result => {\n\t\t\t\tif (result.ariaSummary) {\n\t\t\t\t\talert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc!.text, inputFieldResult.newName, result.ariaSummary));\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tthis._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n\t\t\t\tthis._logService.error(err);\n\t\t\t});\n\n\t\t}, err => {\n\t\t\tthis._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n\t\t\tthis._logService.error(err);\n\t\t});\n\n\t\tthis._progressService.showWhile(renameOperation, 250);\n\t\treturn renameOperation;\n\n\t}\n\n\tacceptRenameInput(wantsPreview: boolean): void {\n\t\tthis._renameInputField.value.acceptInput(wantsPreview);\n\t}\n\n\tcancelRenameInput(): void {\n\t\tthis._renameInputField.value.cancelInput(true);\n\t}\n}\n\n// ---- action implementation\n\nexport class RenameAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.rename',\n\t\t\tlabel: nls.localize('rename.label', \"Rename Symbol\"),\n\t\t\talias: 'Rename Symbol',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.F2,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tcontextMenuOpts: {\n\t\t\t\tgroup: '1_modification',\n\t\t\t\torder: 1.1\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runCommand(accessor: ServicesAccessor, args: [URI, IPosition]): void | Promise<void> {\n\t\tconst editorService = accessor.get(ICodeEditorService);\n\t\tconst [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n\n\t\tif (URI.isUri(uri) && Position.isIPosition(pos)) {\n\t\t\treturn editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teditor.setPosition(pos);\n\t\t\t\teditor.invokeWithinContext(accessor => {\n\t\t\t\t\tthis.reportTelemetry(accessor, editor);\n\t\t\t\t\treturn this.run(accessor, editor);\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\n\t\treturn super.runCommand(accessor, args);\n\t}\n\n\trun(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = RenameController.get(editor);\n\t\tif (controller) {\n\t\t\treturn controller.run();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\n\nconst RenameCommand = EditorCommand.bindToContribution<RenameController>(RenameController.get);\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'acceptRenameInput',\n\tprecondition: CONTEXT_RENAME_INPUT_VISIBLE,\n\thandler: x => x.acceptRenameInput(false),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'acceptRenameInputWithPreview',\n\tprecondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n\thandler: x => x.acceptRenameInput(true),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyMod.Shift + KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'cancelRenameInput',\n\tprecondition: CONTEXT_RENAME_INPUT_VISIBLE,\n\thandler: x => x.cancelRenameInput(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t}\n}));\n\n// ---- api bridge command\n\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (model, position, ...args) {\n\tconst [newName] = args;\n\tassertType(typeof newName === 'string');\n\treturn rename(model, position, newName);\n});\n\n\n//todo@jrieken use editor options world\nRegistry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration({\n\tid: 'editor',\n\tproperties: {\n\t\t'editor.rename.enablePreview': {\n\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE,\n\t\t\tdescription: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n\t\t\tdefault: true,\n\t\t\ttype: 'boolean'\n\t\t}\n\t}\n});\n"]}