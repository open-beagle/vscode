{"version":3,"sources":["vs/editor/contrib/wordHighlighter/wordHighlighter.ts"],"names":[],"mappings":"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","file":"wordHighlighter.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport * as arrays from 'vs/base/common/arrays';\nimport { CancelablePromise, createCancelablePromise, first, timeout } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { onUnexpectedError, onUnexpectedExternalError } from 'vs/base/common/errors';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IActiveCodeEditor, ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, IActionOptions, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from 'vs/editor/browser/editorExtensions';\nimport { CursorChangeReason, ICursorPositionChangedEvent } from 'vs/editor/common/controller/cursorEvents';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { IModelDeltaDecoration, ITextModel, OverviewRulerLane, TrackedRangeStickiness, IWordAtPosition } from 'vs/editor/common/model';\nimport { ModelDecorationOptions } from 'vs/editor/common/model/textModel';\nimport { DocumentHighlight, DocumentHighlightKind, DocumentHighlightProviderRegistry } from 'vs/editor/common/modes';\nimport { IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, overviewRulerSelectionHighlightForeground, registerColor } from 'vs/platform/theme/common/colorRegistry';\nimport { registerThemingParticipant, themeColorFromId } from 'vs/platform/theme/common/themeService';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\n\nconst editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hc: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hc: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nconst editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hc: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hc: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hc: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst ctxHasWordHighlights = new RawContextKey<boolean>('hasWordHighlights', false);\n\nexport function getOccurrencesAtPosition(model: ITextModel, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | null | undefined> {\n\n\tconst orderedByScore = DocumentHighlightProviderRegistry.ordered(model);\n\n\t// in order of score ask the occurrences provider\n\t// until someone response with a good result\n\t// (good = none empty array)\n\treturn first<DocumentHighlight[] | null | undefined>(orderedByScore.map(provider => () => {\n\t\treturn Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n\t\t\t.then(undefined, onUnexpectedExternalError);\n\t}), arrays.isNonEmptyArray);\n}\n\ninterface IOccurenceAtPositionRequest {\n\treadonly result: Promise<DocumentHighlight[]>;\n\tisValid(model: ITextModel, selection: Selection, decorationIds: string[]): boolean;\n\tcancel(): void;\n}\n\nabstract class OccurenceAtPositionRequest implements IOccurenceAtPositionRequest {\n\n\tprivate readonly _wordRange: Range | null;\n\tpublic readonly result: CancelablePromise<DocumentHighlight[]>;\n\n\tconstructor(model: ITextModel, selection: Selection, wordSeparators: string) {\n\t\tthis._wordRange = this._getCurrentWordRange(model, selection);\n\t\tthis.result = createCancelablePromise(token => this._compute(model, selection, wordSeparators, token));\n\t}\n\n\tprotected abstract _compute(model: ITextModel, selection: Selection, wordSeparators: string, token: CancellationToken): Promise<DocumentHighlight[]>;\n\n\tprivate _getCurrentWordRange(model: ITextModel, selection: Selection): Range | null {\n\t\tconst word = model.getWordAtPosition(selection.getPosition());\n\t\tif (word) {\n\t\t\treturn new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic isValid(model: ITextModel, selection: Selection, decorationIds: string[]): boolean {\n\n\t\tconst lineNumber = selection.startLineNumber;\n\t\tconst startColumn = selection.startColumn;\n\t\tconst endColumn = selection.endColumn;\n\t\tconst currentWordRange = this._getCurrentWordRange(model, selection);\n\n\t\tlet requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n\n\t\t// Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n\t\t// (Same symbol)\n\t\tfor (let i = 0, len = decorationIds.length; !requestIsValid && i < len; i++) {\n\t\t\tlet range = model.getDecorationRange(decorationIds[i]);\n\t\t\tif (range && range.startLineNumber === lineNumber) {\n\t\t\t\tif (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n\t\t\t\t\trequestIsValid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn requestIsValid;\n\t}\n\n\tpublic cancel(): void {\n\t\tthis.result.cancel();\n\t}\n}\n\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n\tprotected _compute(model: ITextModel, selection: Selection, wordSeparators: string, token: CancellationToken): Promise<DocumentHighlight[]> {\n\t\treturn getOccurrencesAtPosition(model, selection.getPosition(), token).then(value => value || []);\n\t}\n}\n\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n\n\tprivate readonly _selectionIsEmpty: boolean;\n\n\tconstructor(model: ITextModel, selection: Selection, wordSeparators: string) {\n\t\tsuper(model, selection, wordSeparators);\n\t\tthis._selectionIsEmpty = selection.isEmpty();\n\t}\n\n\tprotected _compute(model: ITextModel, selection: Selection, wordSeparators: string, token: CancellationToken): Promise<DocumentHighlight[]> {\n\t\treturn timeout(250, token).then(() => {\n\t\t\tif (!selection.isEmpty()) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst word = model.getWordAtPosition(selection.getPosition());\n\n\t\t\tif (!word || word.word.length > 1000) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n\t\t\treturn matches.map(m => {\n\t\t\t\treturn {\n\t\t\t\t\trange: m.range,\n\t\t\t\t\tkind: DocumentHighlightKind.Text\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic override isValid(model: ITextModel, selection: Selection, decorationIds: string[]): boolean {\n\t\tconst currentSelectionIsEmpty = selection.isEmpty();\n\t\tif (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n\t\t\treturn false;\n\t\t}\n\t\treturn super.isValid(model, selection, decorationIds);\n\t}\n}\n\nfunction computeOccurencesAtPosition(model: ITextModel, selection: Selection, wordSeparators: string): IOccurenceAtPositionRequest {\n\tif (DocumentHighlightProviderRegistry.has(model)) {\n\t\treturn new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators);\n\t}\n\treturn new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\n\nregisterModelAndPositionCommand('_executeDocumentHighlights', (model, position) => getOccurrencesAtPosition(model, position, CancellationToken.None));\n\nclass WordHighlighter {\n\n\tprivate readonly editor: IActiveCodeEditor;\n\tprivate occurrencesHighlight: boolean;\n\tprivate readonly model: ITextModel;\n\tprivate _decorationIds: string[];\n\tprivate readonly toUnhook = new DisposableStore();\n\n\tprivate workerRequestTokenId: number = 0;\n\tprivate workerRequest: IOccurenceAtPositionRequest | null;\n\tprivate workerRequestCompleted: boolean = false;\n\tprivate workerRequestValue: DocumentHighlight[] = [];\n\n\tprivate lastCursorPositionChangeTime: number = 0;\n\tprivate renderDecorationsTimer: any = -1;\n\n\tprivate readonly _hasWordHighlights: IContextKey<boolean>;\n\tprivate _ignorePositionChangeEvent: boolean;\n\n\tconstructor(editor: IActiveCodeEditor, contextKeyService: IContextKeyService) {\n\t\tthis.editor = editor;\n\t\tthis._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n\t\tthis._ignorePositionChangeEvent = false;\n\t\tthis.occurrencesHighlight = this.editor.getOption(EditorOption.occurrencesHighlight);\n\t\tthis.model = this.editor.getModel();\n\t\tthis.toUnhook.add(editor.onDidChangeCursorPosition((e: ICursorPositionChangedEvent) => {\n\n\t\t\tif (this._ignorePositionChangeEvent) {\n\t\t\t\t// We are changing the position => ignore this event\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.occurrencesHighlight) {\n\t\t\t\t// Early exit if nothing needs to be done!\n\t\t\t\t// Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._onPositionChanged(e);\n\t\t}));\n\t\tthis.toUnhook.add(editor.onDidChangeModelContent((e) => {\n\t\t\tthis._stopAll();\n\t\t}));\n\t\tthis.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n\t\t\tlet newValue = this.editor.getOption(EditorOption.occurrencesHighlight);\n\t\t\tif (this.occurrencesHighlight !== newValue) {\n\t\t\t\tthis.occurrencesHighlight = newValue;\n\t\t\t\tthis._stopAll();\n\t\t\t}\n\t\t}));\n\n\t\tthis._decorationIds = [];\n\t\tthis.workerRequestTokenId = 0;\n\t\tthis.workerRequest = null;\n\t\tthis.workerRequestCompleted = false;\n\n\t\tthis.lastCursorPositionChangeTime = 0;\n\t\tthis.renderDecorationsTimer = -1;\n\t}\n\n\tpublic hasDecorations(): boolean {\n\t\treturn (this._decorationIds.length > 0);\n\t}\n\n\tpublic restore(): void {\n\t\tif (!this.occurrencesHighlight) {\n\t\t\treturn;\n\t\t}\n\t\tthis._run();\n\t}\n\n\tprivate _getSortedHighlights(): Range[] {\n\t\treturn arrays.coalesce(\n\t\t\tthis._decorationIds\n\t\t\t\t.map((id) => this.model.getDecorationRange(id))\n\t\t\t\t.sort(Range.compareRangesUsingStarts)\n\t\t);\n\t}\n\n\tpublic moveNext() {\n\t\tlet highlights = this._getSortedHighlights();\n\t\tlet index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n\t\tlet newIndex = ((index + 1) % highlights.length);\n\t\tlet dest = highlights[newIndex];\n\t\ttry {\n\t\t\tthis._ignorePositionChangeEvent = true;\n\t\t\tthis.editor.setPosition(dest.getStartPosition());\n\t\t\tthis.editor.revealRangeInCenterIfOutsideViewport(dest);\n\t\t\tconst word = this._getWord();\n\t\t\tif (word) {\n\t\t\t\tconst lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n\t\t\t\talert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis._ignorePositionChangeEvent = false;\n\t\t}\n\t}\n\n\tpublic moveBack() {\n\t\tlet highlights = this._getSortedHighlights();\n\t\tlet index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n\t\tlet newIndex = ((index - 1 + highlights.length) % highlights.length);\n\t\tlet dest = highlights[newIndex];\n\t\ttry {\n\t\t\tthis._ignorePositionChangeEvent = true;\n\t\t\tthis.editor.setPosition(dest.getStartPosition());\n\t\t\tthis.editor.revealRangeInCenterIfOutsideViewport(dest);\n\t\t\tconst word = this._getWord();\n\t\t\tif (word) {\n\t\t\t\tconst lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n\t\t\t\talert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis._ignorePositionChangeEvent = false;\n\t\t}\n\t}\n\n\tprivate _removeDecorations(): void {\n\t\tif (this._decorationIds.length > 0) {\n\t\t\t// remove decorations\n\t\t\tthis._decorationIds = this.editor.deltaDecorations(this._decorationIds, []);\n\t\t\tthis._hasWordHighlights.set(false);\n\t\t}\n\t}\n\n\tprivate _stopAll(): void {\n\t\t// Remove any existing decorations\n\t\tthis._removeDecorations();\n\n\t\t// Cancel any renderDecorationsTimer\n\t\tif (this.renderDecorationsTimer !== -1) {\n\t\t\tclearTimeout(this.renderDecorationsTimer);\n\t\t\tthis.renderDecorationsTimer = -1;\n\t\t}\n\n\t\t// Cancel any worker request\n\t\tif (this.workerRequest !== null) {\n\t\t\tthis.workerRequest.cancel();\n\t\t\tthis.workerRequest = null;\n\t\t}\n\n\t\t// Invalidate any worker request callback\n\t\tif (!this.workerRequestCompleted) {\n\t\t\tthis.workerRequestTokenId++;\n\t\t\tthis.workerRequestCompleted = true;\n\t\t}\n\t}\n\n\tprivate _onPositionChanged(e: ICursorPositionChangedEvent): void {\n\n\t\t// disabled\n\t\tif (!this.occurrencesHighlight) {\n\t\t\tthis._stopAll();\n\t\t\treturn;\n\t\t}\n\n\t\t// ignore typing & other\n\t\tif (e.reason !== CursorChangeReason.Explicit) {\n\t\t\tthis._stopAll();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._run();\n\t}\n\n\tprivate _getWord(): IWordAtPosition | null {\n\t\tlet editorSelection = this.editor.getSelection();\n\t\tlet lineNumber = editorSelection.startLineNumber;\n\t\tlet startColumn = editorSelection.startColumn;\n\n\t\treturn this.model.getWordAtPosition({\n\t\t\tlineNumber: lineNumber,\n\t\t\tcolumn: startColumn\n\t\t});\n\t}\n\n\tprivate _run(): void {\n\t\tlet editorSelection = this.editor.getSelection();\n\n\t\t// ignore multiline selection\n\t\tif (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n\t\t\tthis._stopAll();\n\t\t\treturn;\n\t\t}\n\n\t\tlet startColumn = editorSelection.startColumn;\n\t\tlet endColumn = editorSelection.endColumn;\n\n\t\tconst word = this._getWord();\n\n\t\t// The selection must be inside a word or surround one word at most\n\t\tif (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n\t\t\tthis._stopAll();\n\t\t\treturn;\n\t\t}\n\n\t\t// All the effort below is trying to achieve this:\n\t\t// - when cursor is moved to a word, trigger immediately a findOccurrences request\n\t\t// - 250ms later after the last cursor move event, render the occurrences\n\t\t// - no flickering!\n\n\t\tconst workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this._decorationIds));\n\n\t\t// There are 4 cases:\n\t\t// a) old workerRequest is valid & completed, renderDecorationsTimer fired\n\t\t// b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n\t\t// c) old workerRequest is valid, but not completed\n\t\t// d) old workerRequest is not valid\n\n\t\t// For a) no action is needed\n\t\t// For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n\n\t\tthis.lastCursorPositionChangeTime = (new Date()).getTime();\n\n\t\tif (workerRequestIsValid) {\n\t\t\tif (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n\t\t\t\t// case b)\n\t\t\t\t// Delay the firing of renderDecorationsTimer by an extra 250 ms\n\t\t\t\tclearTimeout(this.renderDecorationsTimer);\n\t\t\t\tthis.renderDecorationsTimer = -1;\n\t\t\t\tthis._beginRenderDecorations();\n\t\t\t}\n\t\t} else {\n\t\t\t// case d)\n\t\t\t// Stop all previous actions and start fresh\n\t\t\tthis._stopAll();\n\n\t\t\tlet myRequestId = ++this.workerRequestTokenId;\n\t\t\tthis.workerRequestCompleted = false;\n\n\t\t\tthis.workerRequest = computeOccurencesAtPosition(this.model, this.editor.getSelection(), this.editor.getOption(EditorOption.wordSeparators));\n\n\t\t\tthis.workerRequest.result.then(data => {\n\t\t\t\tif (myRequestId === this.workerRequestTokenId) {\n\t\t\t\t\tthis.workerRequestCompleted = true;\n\t\t\t\t\tthis.workerRequestValue = data || [];\n\t\t\t\t\tthis._beginRenderDecorations();\n\t\t\t\t}\n\t\t\t}, onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate _beginRenderDecorations(): void {\n\t\tlet currentTime = (new Date()).getTime();\n\t\tlet minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n\n\t\tif (currentTime >= minimumRenderTime) {\n\t\t\t// Synchronous\n\t\t\tthis.renderDecorationsTimer = -1;\n\t\t\tthis.renderDecorations();\n\t\t} else {\n\t\t\t// Asynchronous\n\t\t\tthis.renderDecorationsTimer = setTimeout(() => {\n\t\t\t\tthis.renderDecorations();\n\t\t\t}, (minimumRenderTime - currentTime));\n\t\t}\n\t}\n\n\tprivate renderDecorations(): void {\n\t\tthis.renderDecorationsTimer = -1;\n\t\tlet decorations: IModelDeltaDecoration[] = [];\n\t\tfor (const info of this.workerRequestValue) {\n\t\t\tif (info.range) {\n\t\t\t\tdecorations.push({\n\t\t\t\t\trange: info.range,\n\t\t\t\t\toptions: WordHighlighter._getDecorationOptions(info.kind)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._decorationIds = this.editor.deltaDecorations(this._decorationIds, decorations);\n\t\tthis._hasWordHighlights.set(this.hasDecorations());\n\t}\n\n\tprivate static _getDecorationOptions(kind: DocumentHighlightKind | undefined): ModelDecorationOptions {\n\t\tif (kind === DocumentHighlightKind.Write) {\n\t\t\treturn this._WRITE_OPTIONS;\n\t\t} else if (kind === DocumentHighlightKind.Text) {\n\t\t\treturn this._TEXT_OPTIONS;\n\t\t} else {\n\t\t\treturn this._REGULAR_OPTIONS;\n\t\t}\n\t}\n\n\tprivate static readonly _WRITE_OPTIONS = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'wordHighlightStrong',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t}\n\t});\n\n\tprivate static readonly _TEXT_OPTIONS = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'selectionHighlight',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerSelectionHighlightForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t}\n\t});\n\n\tprivate static readonly _REGULAR_OPTIONS = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'wordHighlight',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerWordHighlightForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t}\n\t});\n\n\tpublic dispose(): void {\n\t\tthis._stopAll();\n\t\tthis.toUnhook.dispose();\n\t}\n}\n\nclass WordHighlighterContribution extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.wordHighlighter';\n\n\tpublic static get(editor: ICodeEditor): WordHighlighterContribution {\n\t\treturn editor.getContribution<WordHighlighterContribution>(WordHighlighterContribution.ID);\n\t}\n\n\tprivate wordHighlighter: WordHighlighter | null;\n\n\tconstructor(editor: ICodeEditor, @IContextKeyService contextKeyService: IContextKeyService) {\n\t\tsuper();\n\t\tthis.wordHighlighter = null;\n\t\tconst createWordHighlighterIfPossible = () => {\n\t\t\tif (editor.hasModel()) {\n\t\t\t\tthis.wordHighlighter = new WordHighlighter(editor, contextKeyService);\n\t\t\t}\n\t\t};\n\t\tthis._register(editor.onDidChangeModel((e) => {\n\t\t\tif (this.wordHighlighter) {\n\t\t\t\tthis.wordHighlighter.dispose();\n\t\t\t\tthis.wordHighlighter = null;\n\t\t\t}\n\t\t\tcreateWordHighlighterIfPossible();\n\t\t}));\n\t\tcreateWordHighlighterIfPossible();\n\t}\n\n\tpublic saveViewState(): boolean {\n\t\tif (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic moveNext() {\n\t\tif (this.wordHighlighter) {\n\t\t\tthis.wordHighlighter.moveNext();\n\t\t}\n\t}\n\n\tpublic moveBack() {\n\t\tif (this.wordHighlighter) {\n\t\t\tthis.wordHighlighter.moveBack();\n\t\t}\n\t}\n\n\tpublic restoreViewState(state: boolean | undefined): void {\n\t\tif (this.wordHighlighter && state) {\n\t\t\tthis.wordHighlighter.restore();\n\t\t}\n\t}\n\n\tpublic override dispose(): void {\n\t\tif (this.wordHighlighter) {\n\t\t\tthis.wordHighlighter.dispose();\n\t\t\tthis.wordHighlighter = null;\n\t\t}\n\t\tsuper.dispose();\n\t}\n}\n\n\nclass WordHighlightNavigationAction extends EditorAction {\n\n\tprivate readonly _isNext: boolean;\n\n\tconstructor(next: boolean, opts: IActionOptions) {\n\t\tsuper(opts);\n\t\tthis._isNext = next;\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tconst controller = WordHighlighterContribution.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isNext) {\n\t\t\tcontroller.moveNext();\n\t\t} else {\n\t\t\tcontroller.moveBack();\n\t\t}\n\t}\n}\n\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n\tconstructor() {\n\t\tsuper(true, {\n\t\t\tid: 'editor.action.wordHighlight.next',\n\t\t\tlabel: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n\t\t\talias: 'Go to Next Symbol Highlight',\n\t\t\tprecondition: ctxHasWordHighlights,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.F7,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n\tconstructor() {\n\t\tsuper(false, {\n\t\t\tid: 'editor.action.wordHighlight.prev',\n\t\t\tlabel: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n\t\t\talias: 'Go to Previous Symbol Highlight',\n\t\t\tprecondition: ctxHasWordHighlights,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F7,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass TriggerWordHighlightAction extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.wordHighlight.trigger',\n\t\t\tlabel: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n\t\t\talias: 'Trigger Symbol Highlight',\n\t\t\tprecondition: ctxHasWordHighlights.toNegated(),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: 0,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor, args: any): void {\n\t\tconst controller = WordHighlighterContribution.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontroller.restoreViewState(true);\n\t}\n}\n\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\n\nregisterThemingParticipant((theme, collector) => {\n\tconst selectionHighlight = theme.getColor(editorSelectionHighlight);\n\tif (selectionHighlight) {\n\t\tcollector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`);\n\t\tcollector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n\t}\n\n\tconst wordHighlight = theme.getColor(editorWordHighlight);\n\tif (wordHighlight) {\n\t\tcollector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);\n\t}\n\n\tconst wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n\tif (wordHighlightStrong) {\n\t\tcollector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);\n\t}\n\n\tconst selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n\tif (selectionHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${theme.type === 'hc' ? 'dotted' : 'solid'} ${selectionHighlightBorder}; box-sizing: border-box; }`);\n\t}\n\n\tconst wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n\tif (wordHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .wordHighlight { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${wordHighlightBorder}; box-sizing: border-box; }`);\n\t}\n\n\tconst wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n\tif (wordHighlightStrongBorder) {\n\t\tcollector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${wordHighlightStrongBorder}; box-sizing: border-box; }`);\n\t}\n});\n"]}