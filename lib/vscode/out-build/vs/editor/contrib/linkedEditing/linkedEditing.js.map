{"version":3,"sources":["vs/editor/contrib/linkedEditing/linkedEditing.ts"],"names":[],"mappings":"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","file":"linkedEditing.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { registerEditorContribution, registerModelAndPositionCommand, EditorAction, EditorCommand, ServicesAccessor, registerEditorAction, registerEditorCommand } from 'vs/editor/browser/editorExtensions';\nimport * as arrays from 'vs/base/common/arrays';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Position, IPosition } from 'vs/editor/common/core/position';\nimport { ITextModel, IModelDeltaDecoration, TrackedRangeStickiness, IIdentifiedSingleEditOperation } from 'vs/editor/common/model';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { LinkedEditingRangeProviderRegistry, LinkedEditingRanges } from 'vs/editor/common/modes';\nimport { first, createCancelablePromise, CancelablePromise, Delayer } from 'vs/base/common/async';\nimport { ModelDecorationOptions } from 'vs/editor/common/model/textModel';\nimport { ContextKeyExpr, RawContextKey, IContextKeyService, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { URI } from 'vs/base/common/uri';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { isPromiseCanceledError, onUnexpectedError, onUnexpectedExternalError } from 'vs/base/common/errors';\nimport * as strings from 'vs/base/common/strings';\nimport { registerColor } from 'vs/platform/theme/common/colorRegistry';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { Color } from 'vs/base/common/color';\nimport { LanguageConfigurationRegistry } from 'vs/editor/common/modes/languageConfigurationRegistry';\n\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey<boolean>('LinkedEditingInputVisible', false);\n\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\n\nexport class LinkedEditingContribution extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.linkedEditing';\n\n\tprivate static readonly DECORATION = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tclassName: DECORATION_CLASS_NAME\n\t});\n\n\tstatic get(editor: ICodeEditor): LinkedEditingContribution {\n\t\treturn editor.getContribution<LinkedEditingContribution>(LinkedEditingContribution.ID);\n\t}\n\n\tprivate _debounceDuration = 200;\n\n\tprivate readonly _editor: ICodeEditor;\n\tprivate _enabled: boolean;\n\n\tprivate readonly _visibleContextKey: IContextKey<boolean>;\n\n\tprivate _rangeUpdateTriggerPromise: Promise<any> | null;\n\tprivate _rangeSyncTriggerPromise: Promise<any> | null;\n\n\tprivate _currentRequest: CancelablePromise<any> | null;\n\tprivate _currentRequestPosition: Position | null;\n\tprivate _currentRequestModelVersion: number | null;\n\n\tprivate _currentDecorations: string[]; // The one at index 0 is the reference one\n\tprivate _languageWordPattern: RegExp | null;\n\tprivate _currentWordPattern: RegExp | null;\n\tprivate _ignoreChangeEvent: boolean;\n\n\tprivate readonly _localToDispose = this._register(new DisposableStore());\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis._editor = editor;\n\t\tthis._enabled = false;\n\t\tthis._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n\n\t\tthis._currentDecorations = [];\n\t\tthis._languageWordPattern = null;\n\t\tthis._currentWordPattern = null;\n\t\tthis._ignoreChangeEvent = false;\n\t\tthis._localToDispose = this._register(new DisposableStore());\n\n\t\tthis._rangeUpdateTriggerPromise = null;\n\t\tthis._rangeSyncTriggerPromise = null;\n\n\t\tthis._currentRequest = null;\n\t\tthis._currentRequestPosition = null;\n\t\tthis._currentRequestModelVersion = null;\n\n\t\tthis._register(this._editor.onDidChangeModel(() => this.reinitialize()));\n\n\t\tthis._register(this._editor.onDidChangeConfiguration(e => {\n\t\t\tif (e.hasChanged(EditorOption.linkedEditing) || e.hasChanged(EditorOption.renameOnType)) {\n\t\t\t\tthis.reinitialize();\n\t\t\t}\n\t\t}));\n\t\tthis._register(LinkedEditingRangeProviderRegistry.onDidChange(() => this.reinitialize()));\n\t\tthis._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize()));\n\n\t\tthis.reinitialize();\n\t}\n\n\tprivate reinitialize() {\n\t\tconst model = this._editor.getModel();\n\t\tconst isEnabled = model !== null && (this._editor.getOption(EditorOption.linkedEditing) || this._editor.getOption(EditorOption.renameOnType)) && LinkedEditingRangeProviderRegistry.has(model);\n\t\tif (isEnabled === this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enabled = isEnabled;\n\n\t\tthis.clearRanges();\n\t\tthis._localToDispose.clear();\n\n\t\tif (!isEnabled || model === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\n\t\tthis._localToDispose.add(model.onDidChangeLanguageConfiguration(() => {\n\t\t\tthis._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\n\t\t}));\n\n\t\tconst rangeUpdateScheduler = new Delayer(this._debounceDuration);\n\t\tconst triggerRangeUpdate = () => {\n\t\t\tthis._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), this._debounceDuration);\n\t\t};\n\t\tconst rangeSyncScheduler = new Delayer(0);\n\t\tconst triggerRangeSync = (decorations: string[]) => {\n\t\t\tthis._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(decorations));\n\t\t};\n\t\tthis._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n\t\t\ttriggerRangeUpdate();\n\t\t}));\n\t\tthis._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n\t\t\tif (!this._ignoreChangeEvent) {\n\t\t\t\tif (this._currentDecorations.length > 0) {\n\t\t\t\t\tconst referenceRange = model.getDecorationRange(this._currentDecorations[0]);\n\t\t\t\t\tif (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n\t\t\t\t\t\ttriggerRangeSync(this._currentDecorations);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttriggerRangeUpdate();\n\t\t}));\n\t\tthis._localToDispose.add({\n\t\t\tdispose: () => {\n\t\t\t\trangeUpdateScheduler.cancel();\n\t\t\t\trangeSyncScheduler.cancel();\n\t\t\t}\n\t\t});\n\t\tthis.updateRanges();\n\t}\n\n\tprivate _syncRanges(decorations: string[]): void {\n\t\t// dalayed invocation, make sure we're still on\n\t\tif (!this._editor.hasModel() || decorations !== this._currentDecorations || decorations.length === 0) {\n\t\t\t// nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst referenceRange = model.getDecorationRange(decorations[0]);\n\n\t\tif (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n\t\t\treturn this.clearRanges();\n\t\t}\n\n\t\tconst referenceValue = model.getValueInRange(referenceRange);\n\t\tif (this._currentWordPattern) {\n\t\t\tconst match = referenceValue.match(this._currentWordPattern);\n\t\t\tconst matchLength = match ? match[0].length : 0;\n\t\t\tif (matchLength !== referenceValue.length) {\n\t\t\t\treturn this.clearRanges();\n\t\t\t}\n\t\t}\n\n\t\tlet edits: IIdentifiedSingleEditOperation[] = [];\n\t\tfor (let i = 1, len = decorations.length; i < len; i++) {\n\t\t\tconst mirrorRange = model.getDecorationRange(decorations[i]);\n\t\t\tif (!mirrorRange) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n\t\t\t\tedits.push({\n\t\t\t\t\trange: mirrorRange,\n\t\t\t\t\ttext: referenceValue\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet oldValue = model.getValueInRange(mirrorRange);\n\t\t\t\tlet newValue = referenceValue;\n\t\t\t\tlet rangeStartColumn = mirrorRange.startColumn;\n\t\t\t\tlet rangeEndColumn = mirrorRange.endColumn;\n\n\t\t\t\tconst commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n\t\t\t\trangeStartColumn += commonPrefixLength;\n\t\t\t\toldValue = oldValue.substr(commonPrefixLength);\n\t\t\t\tnewValue = newValue.substr(commonPrefixLength);\n\n\t\t\t\tconst commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n\t\t\t\trangeEndColumn -= commonSuffixLength;\n\t\t\t\toldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n\t\t\t\tnewValue = newValue.substr(0, newValue.length - commonSuffixLength);\n\n\t\t\t\tif (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n\t\t\t\t\tedits.push({\n\t\t\t\t\t\trange: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n\t\t\t\t\t\ttext: newValue\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (edits.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._editor.popUndoStop();\n\t\t\tthis._ignoreChangeEvent = true;\n\t\t\tconst prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n\t\t\tthis._editor.executeEdits('linkedEditing', edits);\n\t\t\tthis._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n\t\t} finally {\n\t\t\tthis._ignoreChangeEvent = false;\n\t\t}\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis.clearRanges();\n\t\tsuper.dispose();\n\t}\n\n\tpublic clearRanges(): void {\n\t\tthis._visibleContextKey.set(false);\n\t\tthis._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, []);\n\t\tif (this._currentRequest) {\n\t\t\tthis._currentRequest.cancel();\n\t\t\tthis._currentRequest = null;\n\t\t\tthis._currentRequestPosition = null;\n\t\t}\n\t}\n\n\tpublic get currentUpdateTriggerPromise(): Promise<any> {\n\t\treturn this._rangeUpdateTriggerPromise || Promise.resolve();\n\t}\n\n\tpublic get currentSyncTriggerPromise(): Promise<any> {\n\t\treturn this._rangeSyncTriggerPromise || Promise.resolve();\n\t}\n\n\tpublic async updateRanges(force = false): Promise<void> {\n\t\tif (!this._editor.hasModel()) {\n\t\t\tthis.clearRanges();\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = this._editor.getPosition();\n\t\tif (!this._enabled && !force || this._editor.getSelections().length > 1) {\n\t\t\t// disabled or multicursor\n\t\t\tthis.clearRanges();\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst modelVersionId = model.getVersionId();\n\t\tif (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n\t\t\tif (position.equals(this._currentRequestPosition)) {\n\t\t\t\treturn; // same position\n\t\t\t}\n\t\t\tif (this._currentDecorations && this._currentDecorations.length > 0) {\n\t\t\t\tconst range = model.getDecorationRange(this._currentDecorations[0]);\n\t\t\t\tif (range && range.containsPosition(position)) {\n\t\t\t\t\treturn; // just moving inside the existing primary range\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._currentRequestPosition = position;\n\t\tthis._currentRequestModelVersion = modelVersionId;\n\t\tconst request = createCancelablePromise(async token => {\n\t\t\ttry {\n\t\t\t\tconst response = await getLinkedEditingRanges(model, position, token);\n\t\t\t\tif (request !== this._currentRequest) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._currentRequest = null;\n\t\t\t\tif (modelVersionId !== model.getVersionId()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet ranges: IRange[] = [];\n\t\t\t\tif (response?.ranges) {\n\t\t\t\t\tranges = response.ranges;\n\t\t\t\t}\n\n\t\t\t\tthis._currentWordPattern = response?.wordPattern || this._languageWordPattern;\n\n\t\t\t\tlet foundReferenceRange = false;\n\t\t\t\tfor (let i = 0, len = ranges.length; i < len; i++) {\n\t\t\t\t\tif (Range.containsPosition(ranges[i], position)) {\n\t\t\t\t\t\tfoundReferenceRange = true;\n\t\t\t\t\t\tif (i !== 0) {\n\t\t\t\t\t\t\tconst referenceRange = ranges[i];\n\t\t\t\t\t\t\tranges.splice(i, 1);\n\t\t\t\t\t\t\tranges.unshift(referenceRange);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!foundReferenceRange) {\n\t\t\t\t\t// Cannot do linked editing if the ranges are not where the cursor is...\n\t\t\t\t\tthis.clearRanges();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst decorations: IModelDeltaDecoration[] = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n\t\t\t\tthis._visibleContextKey.set(true);\n\t\t\t\tthis._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, decorations);\n\t\t\t} catch (err) {\n\t\t\t\tif (!isPromiseCanceledError(err)) {\n\t\t\t\t\tonUnexpectedError(err);\n\t\t\t\t}\n\t\t\t\tif (this._currentRequest === request || !this._currentRequest) {\n\t\t\t\t\t// stop if we are still the latest request\n\t\t\t\t\tthis.clearRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._currentRequest = request;\n\t\treturn request;\n\t}\n\n\t// for testing\n\tpublic setDebounceDuration(timeInMS: number) {\n\t\tthis._debounceDuration = timeInMS;\n\t}\n\n\t// private printDecorators(model: ITextModel) {\n\t// \treturn this._currentDecorations.map(d => {\n\t// \t\tconst range = model.getDecorationRange(d);\n\t// \t\tif (range) {\n\t// \t\t\treturn this.printRange(range);\n\t// \t\t}\n\t// \t\treturn 'invalid';\n\t// \t}).join(',');\n\t// }\n\n\t// private printChanges(changes: IModelContentChange[]) {\n\t// \treturn changes.map(c => {\n\t// \t\treturn `${this.printRange(c.range)} - ${c.text}`;\n\t// \t}\n\t// \t).join(',');\n\t// }\n\n\t// private printRange(range: IRange) {\n\t// \treturn `${range.startLineNumber},${range.startColumn}/${range.endLineNumber},${range.endColumn}`;\n\t// }\n}\n\nexport class LinkedEditingAction extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.linkedEditing',\n\t\t\tlabel: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n\t\t\talias: 'Start Linked Editing',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F2,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runCommand(accessor: ServicesAccessor, args: [URI, IPosition]): void | Promise<void> {\n\t\tconst editorService = accessor.get(ICodeEditorService);\n\t\tconst [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n\n\t\tif (URI.isUri(uri) && Position.isIPosition(pos)) {\n\t\t\treturn editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teditor.setPosition(pos);\n\t\t\t\teditor.invokeWithinContext(accessor => {\n\t\t\t\t\tthis.reportTelemetry(accessor, editor);\n\t\t\t\t\treturn this.run(accessor, editor);\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\n\t\treturn super.runCommand(accessor, args);\n\t}\n\n\trun(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = LinkedEditingContribution.get(editor);\n\t\tif (controller) {\n\t\t\treturn Promise.resolve(controller.updateRanges(true));\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nconst LinkedEditingCommand = EditorCommand.bindToContribution<LinkedEditingContribution>(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n\tid: 'cancelLinkedEditingInput',\n\tprecondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n\thandler: x => x.clearRanges(),\n\tkbOpts: {\n\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t}\n}));\n\n\nfunction getLinkedEditingRanges(model: ITextModel, position: Position, token: CancellationToken): Promise<LinkedEditingRanges | undefined | null> {\n\tconst orderedByScore = LinkedEditingRangeProviderRegistry.ordered(model);\n\n\t// in order of score ask the linked editing range provider\n\t// until someone response with a good result\n\t// (good = not null)\n\treturn first<LinkedEditingRanges | undefined | null>(orderedByScore.map(provider => async () => {\n\t\ttry {\n\t\t\treturn await provider.provideLinkedEditingRanges(model, position, token);\n\t\t} catch (e) {\n\t\t\tonUnexpectedExternalError(e);\n\t\t\treturn undefined;\n\t\t}\n\t}), result => !!result && arrays.isNonEmptyArray(result?.ranges));\n}\n\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hc: Color.fromHex('#f00').transparent(0.3) }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n\tconst editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n\tif (editorLinkedEditingBackgroundColor) {\n\t\tcollector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\n\t}\n});\n\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (model, position) => getLinkedEditingRanges(model, position, CancellationToken.None));\n\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);\n"]}