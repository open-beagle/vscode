{"version":3,"file":"provideSignatureHelp.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/contrib/parameterHints/provideSignatureHelp.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAanF,QAAA,OAAO,GAAG;QACtB,OAAO,EAAE,IAAI,0BAAa,CAAU,uBAAuB,EAAE,KAAK,CAAC;QACnE,kBAAkB,EAAE,IAAI,0BAAa,CAAU,kCAAkC,EAAE,KAAK,CAAC;KACzF,CAAC;IAEK,KAAK,UAAU,oBAAoB,CACzC,KAAiB,EACjB,QAAkB,EAClB,OAAmC,EACnC,KAAwB;QAGxB,MAAM,QAAQ,GAAG,KAAK,CAAC,6BAA6B,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEpE,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC/B,IAAI;gBACH,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;gBACnF,IAAI,MAAM,EAAE;oBACX,OAAO,MAAM,CAAC;iBACd;aACD;YAAC,OAAO,GAAG,EAAE;gBACb,CAAA,GAAA,kCAAyB,CAAA,CAAC,GAAG,CAAC,CAAC;aAC/B;SACD;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IApBD,oDAoBC;IAED,2BAAgB,CAAC,eAAe,CAAC,+BAA+B,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAA+B,EAAE,EAAE;QACxH,MAAM,CAAC,GAAG,EAAE,QAAQ,EAAE,gBAAgB,CAAC,GAAG,IAAI,CAAC;QAC/C,CAAA,GAAA,kBAAU,CAAA,CAAC,SAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3B,CAAA,GAAA,kBAAU,CAAA,CAAC,mBAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC3C,CAAA,GAAA,kBAAU,CAAA,CAAC,OAAO,gBAAgB,KAAK,QAAQ,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEtE,MAAM,GAAG,GAAG,MAAM,QAAQ,CAAC,GAAG,CAAC,mCAAiB,CAAC,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QAC5E,IAAI;YAEH,MAAM,MAAM,GAAG,MAAM,oBAAoB,CAAC,GAAG,CAAC,MAAM,CAAC,eAAe,EAAE,mBAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAC9F,WAAW,EAAE,KAAK,CAAC,wBAAwB,CAAC,MAAM;gBAClD,WAAW,EAAE,KAAK;gBAClB,gBAAgB;aAChB,EAAE,gCAAiB,CAAC,IAAI,CAAC,CAAC;YAE3B,IAAI,CAAC,MAAM,EAAE;gBACZ,OAAO,SAAS,CAAC;aACjB;YAED,UAAU,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;YACtC,OAAO,MAAM,CAAC,KAAK,CAAC;SAEpB;gBAAS;YACT,GAAG,CAAC,OAAO,EAAE,CAAC;SACd;IACF,CAAC,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedExternalError } from 'vs/base/common/errors';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport { ITextModel } from 'vs/editor/common/model';\nimport * as modes from 'vs/editor/common/modes';\nimport { RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { URI } from 'vs/base/common/uri';\nimport { assertType } from 'vs/base/common/types';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\n\nexport const Context = {\n\tVisible: new RawContextKey<boolean>('parameterHintsVisible', false),\n\tMultipleSignatures: new RawContextKey<boolean>('parameterHintsMultipleSignatures', false),\n};\n\nexport async function provideSignatureHelp(\n\tmodel: ITextModel,\n\tposition: Position,\n\tcontext: modes.SignatureHelpContext,\n\ttoken: CancellationToken\n): Promise<modes.SignatureHelpResult | undefined> {\n\n\tconst supports = modes.SignatureHelpProviderRegistry.ordered(model);\n\n\tfor (const support of supports) {\n\t\ttry {\n\t\t\tconst result = await support.provideSignatureHelp(model, position, token, context);\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tonUnexpectedExternalError(err);\n\t\t}\n\t}\n\treturn undefined;\n}\n\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', async (accessor, ...args: [URI, IPosition, string?]) => {\n\tconst [uri, position, triggerCharacter] = args;\n\tassertType(URI.isUri(uri));\n\tassertType(Position.isIPosition(position));\n\tassertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n\n\tconst ref = await accessor.get(ITextModelService).createModelReference(uri);\n\ttry {\n\n\t\tconst result = await provideSignatureHelp(ref.object.textEditorModel, Position.lift(position), {\n\t\t\ttriggerKind: modes.SignatureHelpTriggerKind.Invoke,\n\t\t\tisRetrigger: false,\n\t\t\ttriggerCharacter,\n\t\t}, CancellationToken.None);\n\n\t\tif (!result) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tsetTimeout(() => result.dispose(), 0);\n\t\treturn result.value;\n\n\t} finally {\n\t\tref.dispose();\n\t}\n});\n"]}