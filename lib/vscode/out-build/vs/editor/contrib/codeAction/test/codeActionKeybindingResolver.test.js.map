{"version":3,"file":"codeActionKeybindingResolver.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/contrib/codeAction/test/codeActionKeybindingResolver.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { ChordKeybinding, KeyCode, SimpleKeybinding } from 'vs/base/common/keyCodes';\nimport { OperatingSystem } from 'vs/base/common/platform';\nimport { refactorCommandId, organizeImportsCommandId } from 'vs/editor/contrib/codeAction/codeAction';\nimport { CodeActionKind } from 'vs/editor/contrib/codeAction/types';\nimport { CodeActionKeybindingResolver } from 'vs/editor/contrib/codeAction/codeActionMenu';\nimport { ResolvedKeybindingItem } from 'vs/platform/keybinding/common/resolvedKeybindingItem';\nimport { USLayoutResolvedKeybinding } from 'vs/platform/keybinding/common/usLayoutResolvedKeybinding';\n\nsuite('CodeActionKeybindingResolver', () => {\n\tconst refactorKeybinding = createCodeActionKeybinding(\n\t\tKeyCode.KEY_A,\n\t\trefactorCommandId,\n\t\t{ kind: CodeActionKind.Refactor.value });\n\n\tconst refactorExtractKeybinding = createCodeActionKeybinding(\n\t\tKeyCode.KEY_B,\n\t\trefactorCommandId,\n\t\t{ kind: CodeActionKind.Refactor.append('extract').value });\n\n\tconst organizeImportsKeybinding = createCodeActionKeybinding(\n\t\tKeyCode.KEY_C,\n\t\torganizeImportsCommandId,\n\t\tundefined);\n\n\ttest('Should match refactor keybindings', async function () {\n\t\tconst resolver = new CodeActionKeybindingResolver({\n\t\t\tgetKeybindings: (): readonly ResolvedKeybindingItem[] => {\n\t\t\t\treturn [refactorKeybinding];\n\t\t\t},\n\t\t}).getResolver();\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '' }),\n\t\t\tundefined);\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.Refactor.value }),\n\t\t\trefactorKeybinding.resolvedKeybinding);\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.Refactor.append('extract').value }),\n\t\t\trefactorKeybinding.resolvedKeybinding);\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.QuickFix.value }),\n\t\t\tundefined);\n\t});\n\n\ttest('Should prefer most specific keybinding', async function () {\n\t\tconst resolver = new CodeActionKeybindingResolver({\n\t\t\tgetKeybindings: (): readonly ResolvedKeybindingItem[] => {\n\t\t\t\treturn [refactorKeybinding, refactorExtractKeybinding, organizeImportsKeybinding];\n\t\t\t},\n\t\t}).getResolver();\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.Refactor.value }),\n\t\t\trefactorKeybinding.resolvedKeybinding);\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.Refactor.append('extract').value }),\n\t\t\trefactorExtractKeybinding.resolvedKeybinding);\n\t});\n\n\ttest('Organize imports should still return a keybinding even though it does not have args', async function () {\n\t\tconst resolver = new CodeActionKeybindingResolver({\n\t\t\tgetKeybindings: (): readonly ResolvedKeybindingItem[] => {\n\t\t\t\treturn [refactorKeybinding, refactorExtractKeybinding, organizeImportsKeybinding];\n\t\t\t},\n\t\t}).getResolver();\n\n\t\tassert.strictEqual(\n\t\t\tresolver({ title: '', kind: CodeActionKind.SourceOrganizeImports.value }),\n\t\t\torganizeImportsKeybinding.resolvedKeybinding);\n\t});\n});\n\nfunction createCodeActionKeybinding(keycode: KeyCode, command: string, commandArgs: any) {\n\treturn new ResolvedKeybindingItem(\n\t\tnew USLayoutResolvedKeybinding(\n\t\t\tnew ChordKeybinding([new SimpleKeybinding(false, true, false, false, keycode)]),\n\t\t\tOperatingSystem.Linux),\n\t\tcommand,\n\t\tcommandArgs,\n\t\tundefined,\n\t\tfalse,\n\t\tnull,\n\t\tfalse);\n}\n\n"]}