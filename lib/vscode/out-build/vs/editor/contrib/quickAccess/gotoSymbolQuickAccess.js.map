{"version":3,"sources":["vs/editor/contrib/quickAccess/gotoSymbolQuickAccess.ts"],"names":[],"mappings":"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","file":"gotoSymbolQuickAccess.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { IQuickPick, IQuickPickItem, IQuickPickSeparator } from 'vs/platform/quickinput/common/quickInput';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { DisposableStore, IDisposable, Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { AbstractEditorNavigationQuickAccessProvider, IEditorNavigationQuickAccessOptions, IQuickAccessTextEditorContext } from 'vs/editor/contrib/quickAccess/editorNavigationQuickAccess';\nimport { DocumentSymbol, SymbolKinds, SymbolTag, DocumentSymbolProviderRegistry, SymbolKind } from 'vs/editor/common/modes';\nimport { OutlineModel } from 'vs/editor/contrib/documentSymbols/outlineModel';\nimport { trim, format } from 'vs/base/common/strings';\nimport { prepareQuery, IPreparedQuery, pieceToQuery, scoreFuzzy2 } from 'vs/base/common/fuzzyScorer';\nimport { IMatch } from 'vs/base/common/filters';\nimport { Codicon } from 'vs/base/common/codicons';\n\nexport interface IGotoSymbolQuickPickItem extends IQuickPickItem {\n\tkind: SymbolKind,\n\tindex: number,\n\tscore?: number;\n\trange?: { decoration: IRange, selection: IRange }\n}\n\nexport interface IGotoSymbolQuickAccessProviderOptions extends IEditorNavigationQuickAccessOptions {\n\topenSideBySideDirection?: () => undefined | 'right' | 'down'\n}\n\nexport abstract class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n\n\tstatic PREFIX = '@';\n\tstatic SCOPE_PREFIX = ':';\n\tstatic PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\n\n\tprotected override readonly options: IGotoSymbolQuickAccessProviderOptions;\n\n\tconstructor(options: IGotoSymbolQuickAccessProviderOptions = Object.create(null)) {\n\t\tsuper(options);\n\n\t\tthis.options = options;\n\t\tthis.options.canAcceptInBackground = true;\n\t}\n\n\tprotected provideWithoutTextEditor(picker: IQuickPick<IGotoSymbolQuickPickItem>): IDisposable {\n\t\tthis.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n\n\t\treturn Disposable.None;\n\t}\n\n\tprotected provideWithTextEditor(context: IQuickAccessTextEditorContext, picker: IQuickPick<IGotoSymbolQuickPickItem>, token: CancellationToken): IDisposable {\n\t\tconst editor = context.editor;\n\t\tconst model = this.getModel(editor);\n\t\tif (!model) {\n\t\t\treturn Disposable.None;\n\t\t}\n\n\t\t// Provide symbols from model if available in registry\n\t\tif (DocumentSymbolProviderRegistry.has(model)) {\n\t\t\treturn this.doProvideWithEditorSymbols(context, model, picker, token);\n\t\t}\n\n\t\t// Otherwise show an entry for a model without registry\n\t\t// But give a chance to resolve the symbols at a later\n\t\t// point if possible\n\t\treturn this.doProvideWithoutEditorSymbols(context, model, picker, token);\n\t}\n\n\tprivate doProvideWithoutEditorSymbols(context: IQuickAccessTextEditorContext, model: ITextModel, picker: IQuickPick<IGotoSymbolQuickPickItem>, token: CancellationToken): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\n\t\t// Generic pick for not having any symbol information\n\t\tthis.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n\n\t\t// Wait for changes to the registry and see if eventually\n\t\t// we do get symbols. This can happen if the picker is opened\n\t\t// very early after the model has loaded but before the\n\t\t// language registry is ready.\n\t\t// https://github.com/microsoft/vscode/issues/70607\n\t\t(async () => {\n\t\t\tconst result = await this.waitForLanguageSymbolRegistry(model, disposables);\n\t\t\tif (!result || token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdisposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n\t\t})();\n\n\t\treturn disposables;\n\t}\n\n\tprivate provideLabelPick(picker: IQuickPick<IGotoSymbolQuickPickItem>, label: string): void {\n\t\tpicker.items = [{ label, index: 0, kind: SymbolKind.String }];\n\t\tpicker.ariaLabel = label;\n\t}\n\n\tprotected async waitForLanguageSymbolRegistry(model: ITextModel, disposables: DisposableStore): Promise<boolean> {\n\t\tif (DocumentSymbolProviderRegistry.has(model)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet symbolProviderRegistryPromiseResolve: (res: boolean) => void;\n\t\tconst symbolProviderRegistryPromise = new Promise<boolean>(resolve => symbolProviderRegistryPromiseResolve = resolve);\n\n\t\t// Resolve promise when registry knows model\n\t\tconst symbolProviderListener = disposables.add(DocumentSymbolProviderRegistry.onDidChange(() => {\n\t\t\tif (DocumentSymbolProviderRegistry.has(model)) {\n\t\t\t\tsymbolProviderListener.dispose();\n\n\t\t\t\tsymbolProviderRegistryPromiseResolve(true);\n\t\t\t}\n\t\t}));\n\n\t\t// Resolve promise when we get disposed too\n\t\tdisposables.add(toDisposable(() => symbolProviderRegistryPromiseResolve(false)));\n\n\t\treturn symbolProviderRegistryPromise;\n\t}\n\n\tprivate doProvideWithEditorSymbols(context: IQuickAccessTextEditorContext, model: ITextModel, picker: IQuickPick<IGotoSymbolQuickPickItem>, token: CancellationToken): IDisposable {\n\t\tconst editor = context.editor;\n\t\tconst disposables = new DisposableStore();\n\n\t\t// Goto symbol once picked\n\t\tdisposables.add(picker.onDidAccept(event => {\n\t\t\tconst [item] = picker.selectedItems;\n\t\t\tif (item && item.range) {\n\t\t\t\tthis.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n\n\t\t\t\tif (!event.inBackground) {\n\t\t\t\t\tpicker.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Goto symbol side by side if enabled\n\t\tdisposables.add(picker.onDidTriggerItemButton(({ item }) => {\n\t\t\tif (item && item.range) {\n\t\t\t\tthis.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n\n\t\t\t\tpicker.hide();\n\t\t\t}\n\t\t}));\n\n\t\t// Resolve symbols from document once and reuse this\n\t\t// request for all filtering and typing then on\n\t\tconst symbolsPromise = this.getDocumentSymbols(model, token);\n\n\t\t// Set initial picks and update on type\n\t\tlet picksCts: CancellationTokenSource | undefined = undefined;\n\t\tconst updatePickerItems = async () => {\n\n\t\t\t// Cancel any previous ask for picks and busy\n\t\t\tpicksCts?.dispose(true);\n\t\t\tpicker.busy = false;\n\n\t\t\t// Create new cancellation source for this run\n\t\t\tpicksCts = new CancellationTokenSource(token);\n\n\t\t\t// Collect symbol picks\n\t\t\tpicker.busy = true;\n\t\t\ttry {\n\t\t\t\tconst query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n\t\t\t\tconst items = await this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (items.length > 0) {\n\t\t\t\t\tpicker.items = items;\n\t\t\t\t} else {\n\t\t\t\t\tif (query.original.length > 0) {\n\t\t\t\t\t\tthis.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (!token.isCancellationRequested) {\n\t\t\t\t\tpicker.busy = false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tdisposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n\t\tupdatePickerItems();\n\n\t\t// Reveal and decorate when active item changes\n\t\t// However, ignore the very first event so that\n\t\t// opening the picker is not immediately revealing\n\t\t// and decorating the first entry.\n\t\tlet ignoreFirstActiveEvent = true;\n\t\tdisposables.add(picker.onDidChangeActive(() => {\n\t\t\tconst [item] = picker.activeItems;\n\t\t\tif (item && item.range) {\n\t\t\t\tif (ignoreFirstActiveEvent) {\n\t\t\t\t\tignoreFirstActiveEvent = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Reveal\n\t\t\t\teditor.revealRangeInCenter(item.range.selection, ScrollType.Smooth);\n\n\t\t\t\t// Decorate\n\t\t\t\tthis.addDecorations(editor, item.range.decoration);\n\t\t\t}\n\t\t}));\n\n\t\treturn disposables;\n\t}\n\n\tprotected async doGetSymbolPicks(symbolsPromise: Promise<DocumentSymbol[]>, query: IPreparedQuery, options: { extraContainerLabel?: string } | undefined, token: CancellationToken): Promise<Array<IGotoSymbolQuickPickItem | IQuickPickSeparator>> {\n\t\tconst symbols = await symbolsPromise;\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n\t\tconst filterPos = filterBySymbolKind ? 1 : 0;\n\n\t\t// Split between symbol and container query\n\t\tlet symbolQuery: IPreparedQuery;\n\t\tlet containerQuery: IPreparedQuery | undefined;\n\t\tif (query.values && query.values.length > 1) {\n\t\t\tsymbolQuery = pieceToQuery(query.values[0]); \t\t  // symbol: only match on first part\n\t\t\tcontainerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n\t\t} else {\n\t\t\tsymbolQuery = query;\n\t\t}\n\n\t\t// Convert to symbol picks and apply filtering\n\t\tconst filteredSymbolPicks: IGotoSymbolQuickPickItem[] = [];\n\t\tfor (let index = 0; index < symbols.length; index++) {\n\t\t\tconst symbol = symbols[index];\n\n\t\t\tconst symbolLabel = trim(symbol.name);\n\t\t\tconst symbolLabelWithIcon = `$(symbol-${SymbolKinds.toString(symbol.kind) || 'property'}) ${symbolLabel}`;\n\t\t\tconst symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n\n\t\t\tlet containerLabel = symbol.containerName;\n\t\t\tif (options?.extraContainerLabel) {\n\t\t\t\tif (containerLabel) {\n\t\t\t\t\tcontainerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n\t\t\t\t} else {\n\t\t\t\t\tcontainerLabel = options.extraContainerLabel;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet symbolScore: number | undefined = undefined;\n\t\t\tlet symbolMatches: IMatch[] | undefined = undefined;\n\n\t\t\tlet containerScore: number | undefined = undefined;\n\t\t\tlet containerMatches: IMatch[] | undefined = undefined;\n\n\t\t\tif (query.original.length > filterPos) {\n\n\t\t\t\t// First: try to score on the entire query, it is possible that\n\t\t\t\t// the symbol matches perfectly (e.g. searching for \"change log\"\n\t\t\t\t// can be a match on a markdown symbol \"change log\"). In that\n\t\t\t\t// case we want to skip the container query altogether.\n\t\t\t\tlet skipContainerQuery = false;\n\t\t\t\tif (symbolQuery !== query) {\n\t\t\t\t\t[symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, { ...query, values: undefined /* disable multi-query support */ }, filterPos, symbolLabelIconOffset);\n\t\t\t\t\tif (typeof symbolScore === 'number') {\n\t\t\t\t\t\tskipContainerQuery = true; // since we consumed the query, skip any container matching\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Otherwise: score on the symbol query and match on the container later\n\t\t\t\tif (typeof symbolScore !== 'number') {\n\t\t\t\t\t[symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n\t\t\t\t\tif (typeof symbolScore !== 'number') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Score by container if specified\n\t\t\t\tif (!skipContainerQuery && containerQuery) {\n\t\t\t\t\tif (containerLabel && containerQuery.original.length > 0) {\n\t\t\t\t\t\t[containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof containerScore !== 'number') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof symbolScore === 'number') {\n\t\t\t\t\t\tsymbolScore += containerScore; // boost symbolScore by containerScore\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst deprecated = symbol.tags && symbol.tags.indexOf(SymbolTag.Deprecated) >= 0;\n\n\t\t\tfilteredSymbolPicks.push({\n\t\t\t\tindex,\n\t\t\t\tkind: symbol.kind,\n\t\t\t\tscore: symbolScore,\n\t\t\t\tlabel: symbolLabelWithIcon,\n\t\t\t\tariaLabel: symbolLabel,\n\t\t\t\tdescription: containerLabel,\n\t\t\t\thighlights: deprecated ? undefined : {\n\t\t\t\t\tlabel: symbolMatches,\n\t\t\t\t\tdescription: containerMatches\n\t\t\t\t},\n\t\t\t\trange: {\n\t\t\t\t\tselection: Range.collapseToStart(symbol.selectionRange),\n\t\t\t\t\tdecoration: symbol.range\n\t\t\t\t},\n\t\t\t\tstrikethrough: deprecated,\n\t\t\t\tbuttons: (() => {\n\t\t\t\t\tconst openSideBySideDirection = this.options?.openSideBySideDirection ? this.options?.openSideBySideDirection() : undefined;\n\t\t\t\t\tif (!openSideBySideDirection) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticonClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n\t\t\t\t\t\t\ttooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t})()\n\t\t\t});\n\t\t}\n\n\t\t// Sort by score\n\t\tconst sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n\t\t\tthis.compareByKindAndScore(symbolA, symbolB) :\n\t\t\tthis.compareByScore(symbolA, symbolB)\n\t\t);\n\n\t\t// Add separator for types\n\t\t// - @  only total number of symbols\n\t\t// - @: grouped by symbol kind\n\t\tlet symbolPicks: Array<IGotoSymbolQuickPickItem | IQuickPickSeparator> = [];\n\t\tif (filterBySymbolKind) {\n\t\t\tlet lastSymbolKind: SymbolKind | undefined = undefined;\n\t\t\tlet lastSeparator: IQuickPickSeparator | undefined = undefined;\n\t\t\tlet lastSymbolKindCounter = 0;\n\n\t\t\tfunction updateLastSeparatorLabel(): void {\n\t\t\t\tif (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n\t\t\t\t\tlastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const symbolPick of sortedFilteredSymbolPicks) {\n\n\t\t\t\t// Found new kind\n\t\t\t\tif (lastSymbolKind !== symbolPick.kind) {\n\n\t\t\t\t\t// Update last separator with number of symbols we found for kind\n\t\t\t\t\tupdateLastSeparatorLabel();\n\n\t\t\t\t\tlastSymbolKind = symbolPick.kind;\n\t\t\t\t\tlastSymbolKindCounter = 1;\n\n\t\t\t\t\t// Add new separator for new kind\n\t\t\t\t\tlastSeparator = { type: 'separator' };\n\t\t\t\t\tsymbolPicks.push(lastSeparator);\n\t\t\t\t}\n\n\t\t\t\t// Existing kind, keep counting\n\t\t\t\telse {\n\t\t\t\t\tlastSymbolKindCounter++;\n\t\t\t\t}\n\n\t\t\t\t// Add to final result\n\t\t\t\tsymbolPicks.push(symbolPick);\n\t\t\t}\n\n\t\t\t// Update last separator with number of symbols we found for kind\n\t\t\tupdateLastSeparatorLabel();\n\t\t} else if (sortedFilteredSymbolPicks.length > 0) {\n\t\t\tsymbolPicks = [\n\t\t\t\t{ label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n\t\t\t\t...sortedFilteredSymbolPicks\n\t\t\t];\n\t\t}\n\n\t\treturn symbolPicks;\n\t}\n\n\tprivate compareByScore(symbolA: IGotoSymbolQuickPickItem, symbolB: IGotoSymbolQuickPickItem): number {\n\t\tif (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n\t\t\treturn 1;\n\t\t} else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n\t\t\tif (symbolA.score > symbolB.score) {\n\t\t\t\treturn -1;\n\t\t\t} else if (symbolA.score < symbolB.score) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\n\t\tif (symbolA.index < symbolB.index) {\n\t\t\treturn -1;\n\t\t} else if (symbolA.index > symbolB.index) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tprivate compareByKindAndScore(symbolA: IGotoSymbolQuickPickItem, symbolB: IGotoSymbolQuickPickItem): number {\n\t\tconst kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n\t\tconst kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n\n\t\t// Sort by type first if scoped search\n\t\tconst result = kindA.localeCompare(kindB);\n\t\tif (result === 0) {\n\t\t\treturn this.compareByScore(symbolA, symbolB);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected async getDocumentSymbols(document: ITextModel, token: CancellationToken): Promise<DocumentSymbol[]> {\n\t\tconst model = await OutlineModel.create(document, token);\n\t\treturn token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n\t}\n}\n\n// #region NLS Helpers\n\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE: { [type: number]: string } = {\n\t[SymbolKind.Method]: localize('method', \"methods ({0})\"),\n\t[SymbolKind.Function]: localize('function', \"functions ({0})\"),\n\t[SymbolKind.Constructor]: localize('_constructor', \"constructors ({0})\"),\n\t[SymbolKind.Variable]: localize('variable', \"variables ({0})\"),\n\t[SymbolKind.Class]: localize('class', \"classes ({0})\"),\n\t[SymbolKind.Struct]: localize('struct', \"structs ({0})\"),\n\t[SymbolKind.Event]: localize('event', \"events ({0})\"),\n\t[SymbolKind.Operator]: localize('operator', \"operators ({0})\"),\n\t[SymbolKind.Interface]: localize('interface', \"interfaces ({0})\"),\n\t[SymbolKind.Namespace]: localize('namespace', \"namespaces ({0})\"),\n\t[SymbolKind.Package]: localize('package', \"packages ({0})\"),\n\t[SymbolKind.TypeParameter]: localize('typeParameter', \"type parameters ({0})\"),\n\t[SymbolKind.Module]: localize('modules', \"modules ({0})\"),\n\t[SymbolKind.Property]: localize('property', \"properties ({0})\"),\n\t[SymbolKind.Enum]: localize('enum', \"enumerations ({0})\"),\n\t[SymbolKind.EnumMember]: localize('enumMember', \"enumeration members ({0})\"),\n\t[SymbolKind.String]: localize('string', \"strings ({0})\"),\n\t[SymbolKind.File]: localize('file', \"files ({0})\"),\n\t[SymbolKind.Array]: localize('array', \"arrays ({0})\"),\n\t[SymbolKind.Number]: localize('number', \"numbers ({0})\"),\n\t[SymbolKind.Boolean]: localize('boolean', \"booleans ({0})\"),\n\t[SymbolKind.Object]: localize('object', \"objects ({0})\"),\n\t[SymbolKind.Key]: localize('key', \"keys ({0})\"),\n\t[SymbolKind.Field]: localize('field', \"fields ({0})\"),\n\t[SymbolKind.Constant]: localize('constant', \"constants ({0})\")\n};\n\n//#endregion\n"]}