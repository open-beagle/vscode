{"version":3,"sources":["vs/editor/contrib/hover/markerHoverParticipant.ts"],"names":[],"mappings":"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","file":"markerHoverParticipant.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { IDisposable, toDisposable, DisposableStore, Disposable } from 'vs/base/common/lifecycle';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { Range } from 'vs/editor/common/core/range';\nimport { CodeActionTriggerType } from 'vs/editor/common/modes';\nimport { isNonEmptyArray } from 'vs/base/common/arrays';\nimport { IMarker, IMarkerData, MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { basename } from 'vs/base/common/resources';\nimport { IMarkerDecorationsService } from 'vs/editor/common/services/markersDecorationService';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { MarkerController, NextMarkerAction } from 'vs/editor/contrib/gotoError/gotoError';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { CancelablePromise, createCancelablePromise, disposableTimeout } from 'vs/base/common/async';\nimport { getCodeActions, CodeActionSet } from 'vs/editor/contrib/codeAction/codeAction';\nimport { QuickFixAction, QuickFixController } from 'vs/editor/contrib/codeAction/codeActionCommands';\nimport { CodeActionKind, CodeActionTrigger } from 'vs/editor/contrib/codeAction/types';\nimport { IModelDecoration } from 'vs/editor/common/model';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Progress } from 'vs/platform/progress/common/progress';\nimport { ITextEditorOptions } from 'vs/platform/editor/common/editor';\nimport { renderHoverAction } from 'vs/base/browser/ui/hover/hoverWidget';\nimport { IEditorHover, IEditorHoverParticipant, IHoverPart } from 'vs/editor/contrib/hover/modesContentHover';\n\nconst $ = dom.$;\n\nexport class MarkerHover implements IHoverPart {\n\n\tconstructor(\n\t\tpublic readonly range: Range,\n\t\tpublic readonly marker: IMarker,\n\t) { }\n\n\tpublic equals(other: IHoverPart): boolean {\n\t\tif (other instanceof MarkerHover) {\n\t\t\treturn IMarkerData.makeKey(this.marker) === IMarkerData.makeKey(other.marker);\n\t\t}\n\t\treturn false;\n\t}\n}\n\nconst markerCodeActionTrigger: CodeActionTrigger = {\n\ttype: CodeActionTriggerType.Invoke,\n\tfilter: { include: CodeActionKind.QuickFix }\n};\n\nexport class MarkerHoverParticipant implements IEditorHoverParticipant<MarkerHover> {\n\n\tprivate recentMarkerCodeActionsInfo: { marker: IMarker, hasCodeActions: boolean } | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _hover: IEditorHover,\n\t\t@IMarkerDecorationsService private readonly _markerDecorationsService: IMarkerDecorationsService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t) { }\n\n\tpublic computeSync(hoverRange: Range, lineDecorations: IModelDecoration[]): MarkerHover[] {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst lineNumber = hoverRange.startLineNumber;\n\t\tconst maxColumn = model.getLineMaxColumn(lineNumber);\n\t\tconst result: MarkerHover[] = [];\n\t\tfor (const d of lineDecorations) {\n\t\t\tconst startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n\t\t\tconst endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n\n\t\t\tconst marker = this._markerDecorationsService.getMarker(model.uri, d);\n\t\t\tif (!marker) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\n\t\t\tresult.push(new MarkerHover(range, marker));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic renderHoverParts(hoverParts: MarkerHover[], fragment: DocumentFragment): IDisposable {\n\t\tif (!hoverParts.length) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tconst disposables = new DisposableStore();\n\t\thoverParts.forEach(msg => fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n\t\tconst markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n\t\tfragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar, disposables));\n\t\treturn disposables;\n\t}\n\n\tprivate renderMarkerHover(markerHover: MarkerHover, disposables: DisposableStore): HTMLElement {\n\t\tconst hoverElement = $('div.hover-row');\n\t\tconst markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n\t\tconst { source, message, code, relatedInformation } = markerHover.marker;\n\n\t\tthis._editor.applyFontInfo(markerElement);\n\t\tconst messageElement = dom.append(markerElement, $('span'));\n\t\tmessageElement.style.whiteSpace = 'pre-wrap';\n\t\tmessageElement.innerText = message;\n\n\t\tif (source || code) {\n\t\t\t// Code has link\n\t\t\tif (code && typeof code !== 'string') {\n\t\t\t\tconst sourceAndCodeElement = $('span');\n\t\t\t\tif (source) {\n\t\t\t\t\tconst sourceElement = dom.append(sourceAndCodeElement, $('span'));\n\t\t\t\t\tsourceElement.innerText = source;\n\t\t\t\t}\n\t\t\t\tconst codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n\t\t\t\tcodeLink.setAttribute('href', code.target.toString());\n\n\t\t\t\tdisposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n\t\t\t\t\tthis._openerService.open(code.target, { allowCommands: true });\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}));\n\n\t\t\t\tconst codeElement = dom.append(codeLink, $('span'));\n\t\t\t\tcodeElement.innerText = code.value;\n\n\t\t\t\tconst detailsElement = dom.append(markerElement, sourceAndCodeElement);\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t} else {\n\t\t\t\tconst detailsElement = dom.append(markerElement, $('span'));\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t\tdetailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n\t\t\t}\n\t\t}\n\n\t\tif (isNonEmptyArray(relatedInformation)) {\n\t\t\tfor (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n\t\t\t\tconst relatedInfoContainer = dom.append(markerElement, $('div'));\n\t\t\t\trelatedInfoContainer.style.marginTop = '8px';\n\t\t\t\tconst a = dom.append(relatedInfoContainer, $('a'));\n\t\t\t\ta.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n\t\t\t\ta.style.cursor = 'pointer';\n\t\t\t\tdisposables.add(dom.addDisposableListener(a, 'click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (this._openerService) {\n\t\t\t\t\t\tthis._openerService.open(resource, {\n\t\t\t\t\t\t\tfromUserGesture: true,\n\t\t\t\t\t\t\teditorOptions: <ITextEditorOptions>{ selection: { startLineNumber, startColumn } }\n\t\t\t\t\t\t}).catch(onUnexpectedError);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tconst messageElement = dom.append<HTMLAnchorElement>(relatedInfoContainer, $('span'));\n\t\t\t\tmessageElement.innerText = message;\n\t\t\t\tthis._editor.applyFontInfo(messageElement);\n\t\t\t}\n\t\t}\n\n\t\treturn hoverElement;\n\t}\n\n\tprivate renderMarkerStatusbar(markerHover: MarkerHover, disposables: DisposableStore): HTMLElement {\n\t\tconst hoverElement = $('div.hover-row.status-bar');\n\t\tconst actionsElement = dom.append(hoverElement, $('div.actions'));\n\t\tif (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n\t\t\tdisposables.add(this.renderAction(actionsElement, {\n\t\t\t\tlabel: nls.localize('view problem', \"View Problem\"),\n\t\t\t\tcommandId: NextMarkerAction.ID,\n\t\t\t\trun: () => {\n\t\t\t\t\tthis._hover.hide();\n\t\t\t\t\tMarkerController.get(this._editor).showAtMarker(markerHover.marker);\n\t\t\t\t\tthis._editor.focus();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tif (!this._editor.getOption(EditorOption.readOnly)) {\n\t\t\tconst quickfixPlaceholderElement = dom.append(actionsElement, $('div'));\n\t\t\tif (this.recentMarkerCodeActionsInfo) {\n\t\t\t\tif (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n\t\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.recentMarkerCodeActionsInfo = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n\t\t\tif (!quickfixPlaceholderElement.textContent) {\n\t\t\t\t// Have some content in here to avoid flickering\n\t\t\t\tquickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n\t\t\t}\n\t\t\tconst codeActionsPromise = this.getCodeActions(markerHover.marker);\n\t\t\tdisposables.add(toDisposable(() => codeActionsPromise.cancel()));\n\t\t\tcodeActionsPromise.then(actions => {\n\t\t\t\tupdatePlaceholderDisposable.dispose();\n\t\t\t\tthis.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n\n\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\tactions.dispose();\n\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquickfixPlaceholderElement.style.display = 'none';\n\n\t\t\t\tlet showing = false;\n\t\t\t\tdisposables.add(toDisposable(() => {\n\t\t\t\t\tif (!showing) {\n\t\t\t\t\t\tactions.dispose();\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tdisposables.add(this.renderAction(actionsElement, {\n\t\t\t\t\tlabel: nls.localize('quick fixes', \"Quick Fix...\"),\n\t\t\t\t\tcommandId: QuickFixAction.Id,\n\t\t\t\t\trun: (target) => {\n\t\t\t\t\t\tshowing = true;\n\t\t\t\t\t\tconst controller = QuickFixController.get(this._editor);\n\t\t\t\t\t\tconst elementPosition = dom.getDomNodePagePosition(target);\n\t\t\t\t\t\t// Hide the hover pre-emptively, otherwise the editor can close the code actions\n\t\t\t\t\t\t// context menu as well when using keyboard navigation\n\t\t\t\t\t\tthis._hover.hide();\n\t\t\t\t\t\tcontroller.showCodeActions(markerCodeActionTrigger, actions, {\n\t\t\t\t\t\t\tx: elementPosition.left + 6,\n\t\t\t\t\t\t\ty: elementPosition.top + elementPosition.height + 6\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t}\n\n\t\treturn hoverElement;\n\t}\n\n\tprivate renderAction(parent: HTMLElement, actionOptions: { label: string, iconClass?: string, run: (target: HTMLElement) => void, commandId: string }): IDisposable {\n\t\tconst keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n\t\tconst keybindingLabel = keybinding ? keybinding.getLabel() : null;\n\t\treturn renderHoverAction(parent, actionOptions, keybindingLabel);\n\t}\n\n\tprivate getCodeActions(marker: IMarker): CancelablePromise<CodeActionSet> {\n\t\treturn createCancelablePromise(cancellationToken => {\n\t\t\treturn getCodeActions(\n\t\t\t\tthis._editor.getModel()!,\n\t\t\t\tnew Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn),\n\t\t\t\tmarkerCodeActionTrigger,\n\t\t\t\tProgress.None,\n\t\t\t\tcancellationToken);\n\t\t});\n\t}\n}\n"]}