{"version":3,"sources":["vs/editor/contrib/hover/hover.ts"],"names":[],"mappings":"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","file":"hover.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyChord, KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { IDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IEmptyContentData } from 'vs/editor/browser/controller/mouseTarget';\nimport { ICodeEditor, IEditorMouseEvent, MouseTargetType } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, ServicesAccessor, registerEditorAction, registerEditorContribution } from 'vs/editor/browser/editorExtensions';\nimport { ConfigurationChangedEvent, EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IEditorContribution, IScrollEvent } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { HoverStartMode } from 'vs/editor/contrib/hover/hoverOperation';\nimport { ModesContentHoverWidget } from 'vs/editor/contrib/hover/modesContentHover';\nimport { ModesGlyphHoverWidget } from 'vs/editor/contrib/hover/modesGlyphHover';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { editorHoverBackground, editorHoverBorder, editorHoverHighlight, textCodeBlockBackground, textLinkForeground, editorHoverStatusBarBackground, editorHoverForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { AccessibilitySupport } from 'vs/platform/accessibility/common/accessibility';\nimport { GotoDefinitionAtPositionEditorContribution } from 'vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition';\nimport { IContextKeyService, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\n\nexport class ModesHoverController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.hover';\n\n\tprivate readonly _toUnhook = new DisposableStore();\n\tprivate readonly _didChangeConfigurationHandler: IDisposable;\n\n\tprivate _contentWidget: ModesContentHoverWidget | null;\n\tprivate _glyphWidget: ModesGlyphHoverWidget | null;\n\n\tprivate _isMouseDown: boolean;\n\tprivate _hoverClicked: boolean;\n\tprivate _isHoverEnabled!: boolean;\n\tprivate _isHoverSticky!: boolean;\n\n\tprivate _hoverVisibleKey: IContextKey<boolean>;\n\n\tstatic get(editor: ICodeEditor): ModesHoverController {\n\t\treturn editor.getContribution<ModesHoverController>(ModesHoverController.ID);\n\t}\n\n\tconstructor(private readonly _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IModeService private readonly _modeService: IModeService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IContextKeyService _contextKeyService: IContextKeyService\n\t) {\n\t\tthis._isMouseDown = false;\n\t\tthis._hoverClicked = false;\n\t\tthis._contentWidget = null;\n\t\tthis._glyphWidget = null;\n\n\t\tthis._hookEvents();\n\n\t\tthis._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (e.hasChanged(EditorOption.hover)) {\n\t\t\t\tthis._unhookEvents();\n\t\t\t\tthis._hookEvents();\n\t\t\t}\n\t\t});\n\n\t\tthis._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(_contextKeyService);\n\t}\n\n\tprivate _hookEvents(): void {\n\t\tconst hideWidgetsEventHandler = () => this._hideWidgets();\n\n\t\tconst hoverOpts = this._editor.getOption(EditorOption.hover);\n\t\tthis._isHoverEnabled = hoverOpts.enabled;\n\t\tthis._isHoverSticky = hoverOpts.sticky;\n\t\tif (this._isHoverEnabled) {\n\t\t\tthis._toUnhook.add(this._editor.onMouseDown((e: IEditorMouseEvent) => this._onEditorMouseDown(e)));\n\t\t\tthis._toUnhook.add(this._editor.onMouseUp((e: IEditorMouseEvent) => this._onEditorMouseUp(e)));\n\t\t\tthis._toUnhook.add(this._editor.onMouseMove((e: IEditorMouseEvent) => this._onEditorMouseMove(e)));\n\t\t\tthis._toUnhook.add(this._editor.onKeyDown((e: IKeyboardEvent) => this._onKeyDown(e)));\n\t\t\tthis._toUnhook.add(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n\t\t} else {\n\t\t\tthis._toUnhook.add(this._editor.onMouseMove((e: IEditorMouseEvent) => this._onEditorMouseMove(e)));\n\t\t\tthis._toUnhook.add(this._editor.onKeyDown((e: IKeyboardEvent) => this._onKeyDown(e)));\n\t\t}\n\n\t\tthis._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n\t\tthis._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n\t\tthis._toUnhook.add(this._editor.onDidScrollChange((e: IScrollEvent) => this._onEditorScrollChanged(e)));\n\t}\n\n\tprivate _unhookEvents(): void {\n\t\tthis._toUnhook.clear();\n\t}\n\n\tprivate _onModelDecorationsChanged(): void {\n\t\tthis._contentWidget?.onModelDecorationsChanged();\n\t\tthis._glyphWidget?.onModelDecorationsChanged();\n\t}\n\n\tprivate _onEditorScrollChanged(e: IScrollEvent): void {\n\t\tif (e.scrollTopChanged || e.scrollLeftChanged) {\n\t\t\tthis._hideWidgets();\n\t\t}\n\t}\n\n\tprivate _onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\tthis._isMouseDown = true;\n\n\t\tconst targetType = mouseEvent.target.type;\n\n\t\tif (targetType === MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n\t\t\tthis._hoverClicked = true;\n\t\t\t// mouse down on top of content hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (targetType === MouseTargetType.OVERLAY_WIDGET && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n\t\t\t// mouse down on top of overlay hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (targetType !== MouseTargetType.OVERLAY_WIDGET && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\n\t\t\tthis._hoverClicked = false;\n\t\t}\n\n\t\tthis._hideWidgets();\n\t}\n\n\tprivate _onEditorMouseUp(mouseEvent: IEditorMouseEvent): void {\n\t\tthis._isMouseDown = false;\n\t}\n\n\tprivate _onEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tlet targetType = mouseEvent.target.type;\n\n\t\tif (this._isMouseDown && this._hoverClicked) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isHoverSticky && targetType === MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n\t\t\t// mouse moved on top of content hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isHoverSticky && !mouseEvent.event.browserEvent.view?.getSelection()?.isCollapsed) {\n\t\t\t// selected text within content hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t!this._isHoverSticky && targetType === MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === ModesContentHoverWidget.ID\n\t\t\t&& this._contentWidget?.isColorPickerVisible()\n\t\t) {\n\t\t\t// though the hover is not sticky, the color picker needs to.\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isHoverSticky && targetType === MouseTargetType.OVERLAY_WIDGET && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n\t\t\t// mouse moved on top of overlay hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (targetType === MouseTargetType.CONTENT_EMPTY) {\n\t\t\tconst epsilon = this._editor.getOption(EditorOption.fontInfo).typicalHalfwidthCharacterWidth / 2;\n\t\t\tconst data = <IEmptyContentData>mouseEvent.target.detail;\n\t\t\tif (data && !data.isAfterLines && typeof data.horizontalDistanceToText === 'number' && data.horizontalDistanceToText < epsilon) {\n\t\t\t\t// Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n\t\t\t\ttargetType = MouseTargetType.CONTENT_TEXT;\n\t\t\t}\n\t\t}\n\n\t\tif (targetType === MouseTargetType.CONTENT_TEXT) {\n\t\t\tthis._glyphWidget?.hide();\n\n\t\t\tif (this._isHoverEnabled && mouseEvent.target.range) {\n\t\t\t\t// TODO@rebornix. This should be removed if we move Color Picker out of Hover component.\n\t\t\t\t// Check if mouse is hovering on color decorator\n\t\t\t\tconst hoverOnColorDecorator = [...mouseEvent.target.element?.classList.values() || []].find(className => className.startsWith('ced-colorBox'))\n\t\t\t\t\t&& mouseEvent.target.range.endColumn - mouseEvent.target.range.startColumn === 1;\n\t\t\t\tconst showAtRange = (\n\t\t\t\t\thoverOnColorDecorator // shift the mouse focus by one as color decorator is a `before` decoration of next character.\n\t\t\t\t\t\t? new Range(mouseEvent.target.range.startLineNumber, mouseEvent.target.range.startColumn + 1, mouseEvent.target.range.endLineNumber, mouseEvent.target.range.endColumn + 1)\n\t\t\t\t\t\t: mouseEvent.target.range\n\t\t\t\t);\n\t\t\t\tif (!this._contentWidget) {\n\t\t\t\t\tthis._contentWidget = new ModesContentHoverWidget(this._editor, this._hoverVisibleKey, this._instantiationService, this._themeService);\n\t\t\t\t}\n\t\t\t\tthis._contentWidget.startShowingAt(showAtRange, HoverStartMode.Delayed, false);\n\t\t\t}\n\t\t} else if (targetType === MouseTargetType.GUTTER_GLYPH_MARGIN) {\n\t\t\tthis._contentWidget?.hide();\n\n\t\t\tif (this._isHoverEnabled && mouseEvent.target.position) {\n\t\t\t\tif (!this._glyphWidget) {\n\t\t\t\t\tthis._glyphWidget = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\n\t\t\t\t}\n\t\t\t\tthis._glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._hideWidgets();\n\t\t}\n\t}\n\n\tprivate _onKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.keyCode !== KeyCode.Ctrl && e.keyCode !== KeyCode.Alt && e.keyCode !== KeyCode.Meta && e.keyCode !== KeyCode.Shift) {\n\t\t\t// Do not hide hover when a modifier key is pressed\n\t\t\tthis._hideWidgets();\n\t\t}\n\t}\n\n\tprivate _hideWidgets(): void {\n\t\tif ((this._isMouseDown && this._hoverClicked && this._contentWidget?.isColorPickerVisible())) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._hoverClicked = false;\n\t\tthis._glyphWidget?.hide();\n\t\tthis._contentWidget?.hide();\n\t}\n\n\tpublic isColorPickerVisible(): boolean {\n\t\treturn this._contentWidget?.isColorPickerVisible() || false;\n\t}\n\n\tpublic showContentHover(range: Range, mode: HoverStartMode, focus: boolean): void {\n\t\tif (!this._contentWidget) {\n\t\t\tthis._contentWidget = new ModesContentHoverWidget(this._editor, this._hoverVisibleKey, this._instantiationService, this._themeService);\n\t\t}\n\t\tthis._contentWidget.startShowingAt(range, mode, focus);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._unhookEvents();\n\t\tthis._toUnhook.dispose();\n\t\tthis._didChangeConfigurationHandler.dispose();\n\t\tthis._glyphWidget?.dispose();\n\t\tthis._contentWidget?.dispose();\n\t}\n}\n\nclass ShowHoverAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.showHover',\n\t\t\tlabel: nls.localize({\n\t\t\t\tkey: 'showHover',\n\t\t\t\tcomment: [\n\t\t\t\t\t'Label for action that will trigger the showing of a hover in the editor.',\n\t\t\t\t\t'This allows for users to show the hover without using the mouse.'\n\t\t\t\t]\n\t\t\t}, \"Show Hover\"),\n\t\t\talias: 'Show Hover',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KEY_K, KeyMod.CtrlCmd | KeyCode.KEY_I),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tlet controller = ModesHoverController.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\t\tconst position = editor.getPosition();\n\t\tconst range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n\t\tconst focus = editor.getOption(EditorOption.accessibilitySupport) === AccessibilitySupport.Enabled;\n\t\tcontroller.showContentHover(range, HoverStartMode.Immediate, focus);\n\t}\n}\n\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.showDefinitionPreviewHover',\n\t\t\tlabel: nls.localize({\n\t\t\t\tkey: 'showDefinitionPreviewHover',\n\t\t\t\tcomment: [\n\t\t\t\t\t'Label for action that will trigger the showing of definition preview hover in the editor.',\n\t\t\t\t\t'This allows for users to show the definition preview hover without using the mouse.'\n\t\t\t\t]\n\t\t\t}, \"Show Definition Preview Hover\"),\n\t\t\talias: 'Show Definition Preview Hover',\n\t\t\tprecondition: undefined\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tlet controller = ModesHoverController.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\t\tconst position = editor.getPosition();\n\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n\t\tconst goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n\t\tconst promise = goto.startFindDefinitionFromCursor(position);\n\t\tpromise.then(() => {\n\t\t\tcontroller.showContentHover(range, HoverStartMode.Immediate, true);\n\t\t});\n\t}\n}\n\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\n\n// theming\nregisterThemingParticipant((theme, collector) => {\n\tconst editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n\tif (editorHoverHighlightColor) {\n\t\tcollector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n\t}\n\tconst hoverBackground = theme.getColor(editorHoverBackground);\n\tif (hoverBackground) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n\t}\n\tconst hoverBorder = theme.getColor(editorHoverBorder);\n\tif (hoverBorder) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n\t\tcollector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n\t}\n\tconst link = theme.getColor(textLinkForeground);\n\tif (link) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n\t}\n\tconst hoverForeground = theme.getColor(editorHoverForeground);\n\tif (hoverForeground) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n\t}\n\tconst actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n\tif (actionsBackground) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n\t}\n\tconst codeBackground = theme.getColor(textCodeBlockBackground);\n\tif (codeBackground) {\n\t\tcollector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n\t}\n});\n"]}