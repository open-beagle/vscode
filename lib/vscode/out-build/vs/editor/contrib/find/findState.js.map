{"version":3,"file":"findState.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/contrib/find/findState.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { Range } from 'vs/editor/common/core/range';\nimport { MATCHES_LIMIT } from './findModel';\n\nexport interface FindReplaceStateChangedEvent {\n\tmoveCursor: boolean;\n\tupdateHistory: boolean;\n\n\tsearchString: boolean;\n\treplaceString: boolean;\n\tisRevealed: boolean;\n\tisReplaceRevealed: boolean;\n\tisRegex: boolean;\n\twholeWord: boolean;\n\tmatchCase: boolean;\n\tpreserveCase: boolean;\n\tsearchScope: boolean;\n\tmatchesPosition: boolean;\n\tmatchesCount: boolean;\n\tcurrentMatch: boolean;\n\tloop: boolean;\n}\n\nexport const enum FindOptionOverride {\n\tNotSet = 0,\n\tTrue = 1,\n\tFalse = 2\n}\n\nexport interface INewFindReplaceState {\n\tsearchString?: string;\n\treplaceString?: string;\n\tisRevealed?: boolean;\n\tisReplaceRevealed?: boolean;\n\tisRegex?: boolean;\n\tisRegexOverride?: FindOptionOverride;\n\twholeWord?: boolean;\n\twholeWordOverride?: FindOptionOverride;\n\tmatchCase?: boolean;\n\tmatchCaseOverride?: FindOptionOverride;\n\tpreserveCase?: boolean;\n\tpreserveCaseOverride?: FindOptionOverride;\n\tsearchScope?: Range[] | null;\n\tloop?: boolean;\n}\n\nfunction effectiveOptionValue(override: FindOptionOverride, value: boolean): boolean {\n\tif (override === FindOptionOverride.True) {\n\t\treturn true;\n\t}\n\tif (override === FindOptionOverride.False) {\n\t\treturn false;\n\t}\n\treturn value;\n}\n\nexport class FindReplaceState extends Disposable {\n\tprivate _searchString: string;\n\tprivate _replaceString: string;\n\tprivate _isRevealed: boolean;\n\tprivate _isReplaceRevealed: boolean;\n\tprivate _isRegex: boolean;\n\tprivate _isRegexOverride: FindOptionOverride;\n\tprivate _wholeWord: boolean;\n\tprivate _wholeWordOverride: FindOptionOverride;\n\tprivate _matchCase: boolean;\n\tprivate _matchCaseOverride: FindOptionOverride;\n\tprivate _preserveCase: boolean;\n\tprivate _preserveCaseOverride: FindOptionOverride;\n\tprivate _searchScope: Range[] | null;\n\tprivate _matchesPosition: number;\n\tprivate _matchesCount: number;\n\tprivate _currentMatch: Range | null;\n\tprivate _loop: boolean;\n\tprivate readonly _onFindReplaceStateChange = this._register(new Emitter<FindReplaceStateChangedEvent>());\n\n\tpublic get searchString(): string { return this._searchString; }\n\tpublic get replaceString(): string { return this._replaceString; }\n\tpublic get isRevealed(): boolean { return this._isRevealed; }\n\tpublic get isReplaceRevealed(): boolean { return this._isReplaceRevealed; }\n\tpublic get isRegex(): boolean { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n\tpublic get wholeWord(): boolean { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n\tpublic get matchCase(): boolean { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n\tpublic get preserveCase(): boolean { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n\n\tpublic get actualIsRegex(): boolean { return this._isRegex; }\n\tpublic get actualWholeWord(): boolean { return this._wholeWord; }\n\tpublic get actualMatchCase(): boolean { return this._matchCase; }\n\tpublic get actualPreserveCase(): boolean { return this._preserveCase; }\n\n\tpublic get searchScope(): Range[] | null { return this._searchScope; }\n\tpublic get matchesPosition(): number { return this._matchesPosition; }\n\tpublic get matchesCount(): number { return this._matchesCount; }\n\tpublic get currentMatch(): Range | null { return this._currentMatch; }\n\tpublic readonly onFindReplaceStateChange: Event<FindReplaceStateChangedEvent> = this._onFindReplaceStateChange.event;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._searchString = '';\n\t\tthis._replaceString = '';\n\t\tthis._isRevealed = false;\n\t\tthis._isReplaceRevealed = false;\n\t\tthis._isRegex = false;\n\t\tthis._isRegexOverride = FindOptionOverride.NotSet;\n\t\tthis._wholeWord = false;\n\t\tthis._wholeWordOverride = FindOptionOverride.NotSet;\n\t\tthis._matchCase = false;\n\t\tthis._matchCaseOverride = FindOptionOverride.NotSet;\n\t\tthis._preserveCase = false;\n\t\tthis._preserveCaseOverride = FindOptionOverride.NotSet;\n\t\tthis._searchScope = null;\n\t\tthis._matchesPosition = 0;\n\t\tthis._matchesCount = 0;\n\t\tthis._currentMatch = null;\n\t\tthis._loop = true;\n\t}\n\n\tpublic changeMatchInfo(matchesPosition: number, matchesCount: number, currentMatch: Range | undefined): void {\n\t\tlet changeEvent: FindReplaceStateChangedEvent = {\n\t\t\tmoveCursor: false,\n\t\t\tupdateHistory: false,\n\t\t\tsearchString: false,\n\t\t\treplaceString: false,\n\t\t\tisRevealed: false,\n\t\t\tisReplaceRevealed: false,\n\t\t\tisRegex: false,\n\t\t\twholeWord: false,\n\t\t\tmatchCase: false,\n\t\t\tpreserveCase: false,\n\t\t\tsearchScope: false,\n\t\t\tmatchesPosition: false,\n\t\t\tmatchesCount: false,\n\t\t\tcurrentMatch: false,\n\t\t\tloop: false\n\t\t};\n\t\tlet somethingChanged = false;\n\n\t\tif (matchesCount === 0) {\n\t\t\tmatchesPosition = 0;\n\t\t}\n\t\tif (matchesPosition > matchesCount) {\n\t\t\tmatchesPosition = matchesCount;\n\t\t}\n\n\t\tif (this._matchesPosition !== matchesPosition) {\n\t\t\tthis._matchesPosition = matchesPosition;\n\t\t\tchangeEvent.matchesPosition = true;\n\t\t\tsomethingChanged = true;\n\t\t}\n\t\tif (this._matchesCount !== matchesCount) {\n\t\t\tthis._matchesCount = matchesCount;\n\t\t\tchangeEvent.matchesCount = true;\n\t\t\tsomethingChanged = true;\n\t\t}\n\n\t\tif (typeof currentMatch !== 'undefined') {\n\t\t\tif (!Range.equalsRange(this._currentMatch, currentMatch)) {\n\t\t\t\tthis._currentMatch = currentMatch;\n\t\t\t\tchangeEvent.currentMatch = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif (somethingChanged) {\n\t\t\tthis._onFindReplaceStateChange.fire(changeEvent);\n\t\t}\n\t}\n\n\tpublic change(newState: INewFindReplaceState, moveCursor: boolean, updateHistory: boolean = true): void {\n\t\tlet changeEvent: FindReplaceStateChangedEvent = {\n\t\t\tmoveCursor: moveCursor,\n\t\t\tupdateHistory: updateHistory,\n\t\t\tsearchString: false,\n\t\t\treplaceString: false,\n\t\t\tisRevealed: false,\n\t\t\tisReplaceRevealed: false,\n\t\t\tisRegex: false,\n\t\t\twholeWord: false,\n\t\t\tmatchCase: false,\n\t\t\tpreserveCase: false,\n\t\t\tsearchScope: false,\n\t\t\tmatchesPosition: false,\n\t\t\tmatchesCount: false,\n\t\t\tcurrentMatch: false,\n\t\t\tloop: false\n\t\t};\n\t\tlet somethingChanged = false;\n\n\t\tconst oldEffectiveIsRegex = this.isRegex;\n\t\tconst oldEffectiveWholeWords = this.wholeWord;\n\t\tconst oldEffectiveMatchCase = this.matchCase;\n\t\tconst oldEffectivePreserveCase = this.preserveCase;\n\n\t\tif (typeof newState.searchString !== 'undefined') {\n\t\t\tif (this._searchString !== newState.searchString) {\n\t\t\t\tthis._searchString = newState.searchString;\n\t\t\t\tchangeEvent.searchString = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.replaceString !== 'undefined') {\n\t\t\tif (this._replaceString !== newState.replaceString) {\n\t\t\t\tthis._replaceString = newState.replaceString;\n\t\t\t\tchangeEvent.replaceString = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isRevealed !== 'undefined') {\n\t\t\tif (this._isRevealed !== newState.isRevealed) {\n\t\t\t\tthis._isRevealed = newState.isRevealed;\n\t\t\t\tchangeEvent.isRevealed = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isReplaceRevealed !== 'undefined') {\n\t\t\tif (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n\t\t\t\tthis._isReplaceRevealed = newState.isReplaceRevealed;\n\t\t\t\tchangeEvent.isReplaceRevealed = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.isRegex !== 'undefined') {\n\t\t\tthis._isRegex = newState.isRegex;\n\t\t}\n\t\tif (typeof newState.wholeWord !== 'undefined') {\n\t\t\tthis._wholeWord = newState.wholeWord;\n\t\t}\n\t\tif (typeof newState.matchCase !== 'undefined') {\n\t\t\tthis._matchCase = newState.matchCase;\n\t\t}\n\t\tif (typeof newState.preserveCase !== 'undefined') {\n\t\t\tthis._preserveCase = newState.preserveCase;\n\t\t}\n\t\tif (typeof newState.searchScope !== 'undefined') {\n\t\t\tif (!newState.searchScope?.every((newSearchScope) => {\n\t\t\t\treturn this._searchScope?.some(existingSearchScope => {\n\t\t\t\t\treturn !Range.equalsRange(existingSearchScope, newSearchScope);\n\t\t\t\t});\n\t\t\t})) {\n\t\t\t\tthis._searchScope = newState.searchScope;\n\t\t\t\tchangeEvent.searchScope = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\tif (typeof newState.loop !== 'undefined') {\n\t\t\tif (this._loop !== newState.loop) {\n\t\t\t\tthis._loop = newState.loop;\n\t\t\t\tchangeEvent.loop = true;\n\t\t\t\tsomethingChanged = true;\n\t\t\t}\n\t\t}\n\t\t// Overrides get set when they explicitly come in and get reset anytime something else changes\n\t\tthis._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : FindOptionOverride.NotSet);\n\t\tthis._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : FindOptionOverride.NotSet);\n\t\tthis._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : FindOptionOverride.NotSet);\n\t\tthis._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : FindOptionOverride.NotSet);\n\n\t\tif (oldEffectiveIsRegex !== this.isRegex) {\n\t\t\tsomethingChanged = true;\n\t\t\tchangeEvent.isRegex = true;\n\t\t}\n\t\tif (oldEffectiveWholeWords !== this.wholeWord) {\n\t\t\tsomethingChanged = true;\n\t\t\tchangeEvent.wholeWord = true;\n\t\t}\n\t\tif (oldEffectiveMatchCase !== this.matchCase) {\n\t\t\tsomethingChanged = true;\n\t\t\tchangeEvent.matchCase = true;\n\t\t}\n\n\t\tif (oldEffectivePreserveCase !== this.preserveCase) {\n\t\t\tsomethingChanged = true;\n\t\t\tchangeEvent.preserveCase = true;\n\t\t}\n\n\t\tif (somethingChanged) {\n\t\t\tthis._onFindReplaceStateChange.fire(changeEvent);\n\t\t}\n\t}\n\n\tpublic canNavigateBack(): boolean {\n\t\treturn this.canNavigateInLoop() || (this.matchesPosition !== 1);\n\t}\n\n\tpublic canNavigateForward(): boolean {\n\t\treturn this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n\t}\n\n\tprivate canNavigateInLoop(): boolean {\n\t\treturn this._loop || (this.matchesCount >= MATCHES_LIMIT);\n\t}\n\n}\n"]}