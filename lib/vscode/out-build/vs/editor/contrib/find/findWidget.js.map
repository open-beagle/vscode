{"version":3,"sources":["vs/editor/contrib/find/findWidget.ts"],"names":[],"mappings":"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","file":"findWidget.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./findWidget';\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { IContextViewProvider } from 'vs/base/browser/ui/contextview/contextview';\nimport { alert as alertFn } from 'vs/base/browser/ui/aria/aria';\nimport { Checkbox } from 'vs/base/browser/ui/checkbox/checkbox';\nimport { FindInput, IFindInputStyles } from 'vs/base/browser/ui/findinput/findInput';\nimport { IMessage as InputBoxMessage } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { ReplaceInput } from 'vs/base/browser/ui/findinput/replaceInput';\nimport { IVerticalSashLayoutProvider, ISashEvent, Orientation, Sash } from 'vs/base/browser/ui/sash/sash';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Delayer } from 'vs/base/common/async';\nimport { Color } from 'vs/base/common/color';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { toDisposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport * as strings from 'vs/base/common/strings';\nimport { ICodeEditor, IOverlayWidget, IOverlayWidgetPosition, IViewZone, OverlayWidgetPositionPreference } from 'vs/editor/browser/editorBrowser';\nimport { ConfigurationChangedEvent, EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Range } from 'vs/editor/common/core/range';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from 'vs/editor/contrib/find/findModel';\nimport { FindReplaceState, FindReplaceStateChangedEvent } from 'vs/editor/contrib/find/findState';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetResizeBorder, errorForeground, inputActiveOptionBorder, inputActiveOptionBackground, inputActiveOptionForeground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, widgetShadow, editorWidgetForeground, focusBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { IColorTheme, IThemeService, registerThemingParticipant, ThemeIcon } from 'vs/platform/theme/common/themeService';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from 'vs/platform/browser/contextScopedHistoryWidget';\nimport { AccessibilitySupport } from 'vs/platform/accessibility/common/accessibility';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { registerIcon, widgetClose } from 'vs/platform/theme/common/iconRegistry';\n\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\n\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\n\nexport interface IFindController {\n\treplace(): void;\n\treplaceAll(): void;\n\tgetGlobalBufferTerm(): Promise<string>;\n}\n\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace mode\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\n\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\n\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\n\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\n\nconst ctrlKeyMod = (platform.isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\nexport class FindWidgetViewZone implements IViewZone {\n\tpublic readonly afterLineNumber: number;\n\tpublic heightInPx: number;\n\tpublic readonly suppressMouseDown: boolean;\n\tpublic readonly domNode: HTMLElement;\n\n\tconstructor(afterLineNumber: number) {\n\t\tthis.afterLineNumber = afterLineNumber;\n\n\t\tthis.heightInPx = FIND_INPUT_AREA_HEIGHT;\n\t\tthis.suppressMouseDown = false;\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = 'dock-find-viewzone';\n\t}\n}\n\nfunction stopPropagationForMultiLineUpwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && isMultiline && textarea.selectionStart > 0) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nexport class FindWidget extends Widget implements IOverlayWidget, IVerticalSashLayoutProvider {\n\tprivate static readonly ID = 'editor.contrib.findWidget';\n\tprivate readonly _codeEditor: ICodeEditor;\n\tprivate readonly _state: FindReplaceState;\n\tprivate readonly _controller: IFindController;\n\tprivate readonly _contextViewProvider: IContextViewProvider;\n\tprivate readonly _keybindingService: IKeybindingService;\n\tprivate readonly _contextKeyService: IContextKeyService;\n\tprivate readonly _storageService: IStorageService;\n\tprivate readonly _notificationService: INotificationService;\n\n\tprivate _domNode!: HTMLElement;\n\tprivate _cachedHeight: number | null = null;\n\tprivate _findInput!: FindInput;\n\tprivate _replaceInput!: ReplaceInput;\n\n\tprivate _toggleReplaceBtn!: SimpleButton;\n\tprivate _matchesCount!: HTMLElement;\n\tprivate _prevBtn!: SimpleButton;\n\tprivate _nextBtn!: SimpleButton;\n\tprivate _toggleSelectionFind!: Checkbox;\n\tprivate _closeBtn!: SimpleButton;\n\tprivate _replaceBtn!: SimpleButton;\n\tprivate _replaceAllBtn!: SimpleButton;\n\n\tprivate _isVisible: boolean;\n\tprivate _isReplaceVisible: boolean;\n\tprivate _ignoreChangeEvent: boolean;\n\tprivate _ctrlEnterReplaceAllWarningPrompted: boolean;\n\n\tprivate readonly _findFocusTracker: dom.IFocusTracker;\n\tprivate readonly _findInputFocused: IContextKey<boolean>;\n\tprivate readonly _replaceFocusTracker: dom.IFocusTracker;\n\tprivate readonly _replaceInputFocused: IContextKey<boolean>;\n\tprivate _viewZone?: FindWidgetViewZone;\n\tprivate _viewZoneId?: string;\n\n\tprivate _resizeSash!: Sash;\n\tprivate _resized!: boolean;\n\tprivate readonly _updateHistoryDelayer: Delayer<void>;\n\n\tconstructor(\n\t\tcodeEditor: ICodeEditor,\n\t\tcontroller: IFindController,\n\t\tstate: FindReplaceState,\n\t\tcontextViewProvider: IContextViewProvider,\n\t\tkeybindingService: IKeybindingService,\n\t\tcontextKeyService: IContextKeyService,\n\t\tthemeService: IThemeService,\n\t\tstorageService: IStorageService,\n\t\tnotificationService: INotificationService,\n\t) {\n\t\tsuper();\n\t\tthis._codeEditor = codeEditor;\n\t\tthis._controller = controller;\n\t\tthis._state = state;\n\t\tthis._contextViewProvider = contextViewProvider;\n\t\tthis._keybindingService = keybindingService;\n\t\tthis._contextKeyService = contextKeyService;\n\t\tthis._storageService = storageService;\n\t\tthis._notificationService = notificationService;\n\n\t\tthis._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, StorageScope.GLOBAL);\n\n\t\tthis._isVisible = false;\n\t\tthis._isReplaceVisible = false;\n\t\tthis._ignoreChangeEvent = false;\n\n\t\tthis._updateHistoryDelayer = new Delayer<void>(500);\n\t\tthis._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n\t\tthis._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n\t\tthis._buildDomNode();\n\t\tthis._updateButtons();\n\t\tthis._tryUpdateWidgetWidth();\n\t\tthis._findInput.inputBox.layout();\n\n\t\tthis._register(this._codeEditor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (e.hasChanged(EditorOption.readOnly)) {\n\t\t\t\tif (this._codeEditor.getOption(EditorOption.readOnly)) {\n\t\t\t\t\t// Hide replace part if editor becomes read only\n\t\t\t\t\tthis._state.change({ isReplaceRevealed: false }, false);\n\t\t\t\t}\n\t\t\t\tthis._updateButtons();\n\t\t\t}\n\t\t\tif (e.hasChanged(EditorOption.layoutInfo)) {\n\t\t\t\tthis._tryUpdateWidgetWidth();\n\t\t\t}\n\n\t\t\tif (e.hasChanged(EditorOption.accessibilitySupport)) {\n\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t}\n\n\t\t\tif (e.hasChanged(EditorOption.find)) {\n\t\t\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(EditorOption.find).addExtraSpaceOnTop;\n\t\t\t\tif (addExtraSpaceOnTop && !this._viewZone) {\n\t\t\t\t\tthis._viewZone = new FindWidgetViewZone(0);\n\t\t\t\t\tthis._showViewZone();\n\t\t\t\t}\n\t\t\t\tif (!addExtraSpaceOnTop && this._viewZone) {\n\t\t\t\t\tthis._removeViewZone();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis.updateAccessibilitySupport();\n\t\tthis._register(this._codeEditor.onDidChangeCursorSelection(() => {\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis._updateToggleSelectionFindButton();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._codeEditor.onDidFocusEditorWidget(async () => {\n\t\t\tif (this._isVisible) {\n\t\t\t\tlet globalBufferTerm = await this._controller.getGlobalBufferTerm();\n\t\t\t\tif (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n\t\t\t\t\tthis._state.change({ searchString: globalBufferTerm }, false);\n\t\t\t\t\tthis._findInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n\t\tthis._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n\t\tthis._register(this._findFocusTracker.onDidFocus(() => {\n\t\t\tthis._findInputFocused.set(true);\n\t\t\tthis._updateSearchScope();\n\t\t}));\n\t\tthis._register(this._findFocusTracker.onDidBlur(() => {\n\t\t\tthis._findInputFocused.set(false);\n\t\t}));\n\n\t\tthis._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n\t\tthis._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n\t\tthis._register(this._replaceFocusTracker.onDidFocus(() => {\n\t\t\tthis._replaceInputFocused.set(true);\n\t\t\tthis._updateSearchScope();\n\t\t}));\n\t\tthis._register(this._replaceFocusTracker.onDidBlur(() => {\n\t\t\tthis._replaceInputFocused.set(false);\n\t\t}));\n\n\t\tthis._codeEditor.addOverlayWidget(this);\n\t\tif (this._codeEditor.getOption(EditorOption.find).addExtraSpaceOnTop) {\n\t\t\tthis._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n\t\t}\n\n\t\tthis._applyTheme(themeService.getColorTheme());\n\t\tthis._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n\n\t\tthis._register(this._codeEditor.onDidChangeModel(() => {\n\t\t\tif (!this._isVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._viewZoneId = undefined;\n\t\t}));\n\n\n\t\tthis._register(this._codeEditor.onDidScrollChange((e) => {\n\t\t\tif (e.scrollTopChanged) {\n\t\t\t\tthis._layoutViewZone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._layoutViewZone();\n\t\t\t}, 0);\n\t\t}));\n\t}\n\n\t// ----- IOverlayWidget API\n\n\tpublic getId(): string {\n\t\treturn FindWidget.ID;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic getPosition(): IOverlayWidgetPosition | null {\n\t\tif (this._isVisible) {\n\t\t\treturn {\n\t\t\t\tpreference: OverlayWidgetPositionPreference.TOP_RIGHT_CORNER\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\t// ----- React to state changes\n\n\tprivate _onStateChanged(e: FindReplaceStateChangedEvent): void {\n\t\tif (e.searchString) {\n\t\t\ttry {\n\t\t\t\tthis._ignoreChangeEvent = true;\n\t\t\t\tthis._findInput.setValue(this._state.searchString);\n\t\t\t} finally {\n\t\t\t\tthis._ignoreChangeEvent = false;\n\t\t\t}\n\t\t\tthis._updateButtons();\n\t\t}\n\t\tif (e.replaceString) {\n\t\t\tthis._replaceInput.inputBox.value = this._state.replaceString;\n\t\t}\n\t\tif (e.isRevealed) {\n\t\t\tif (this._state.isRevealed) {\n\t\t\t\tthis._reveal();\n\t\t\t} else {\n\t\t\t\tthis._hide(true);\n\t\t\t}\n\t\t}\n\t\tif (e.isReplaceRevealed) {\n\t\t\tif (this._state.isReplaceRevealed) {\n\t\t\t\tif (!this._codeEditor.getOption(EditorOption.readOnly) && !this._isReplaceVisible) {\n\t\t\t\t\tthis._isReplaceVisible = true;\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t\t\t\tthis._updateButtons();\n\t\t\t\t\tthis._replaceInput.inputBox.layout();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._isReplaceVisible = false;\n\t\t\t\t\tthis._updateButtons();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n\t\t\tif (this._tryUpdateHeight()) {\n\t\t\t\tthis._showViewZone();\n\t\t\t}\n\t\t}\n\n\t\tif (e.isRegex) {\n\t\t\tthis._findInput.setRegex(this._state.isRegex);\n\t\t}\n\t\tif (e.wholeWord) {\n\t\t\tthis._findInput.setWholeWords(this._state.wholeWord);\n\t\t}\n\t\tif (e.matchCase) {\n\t\t\tthis._findInput.setCaseSensitive(this._state.matchCase);\n\t\t}\n\t\tif (e.preserveCase) {\n\t\t\tthis._replaceInput.setPreserveCase(this._state.preserveCase);\n\t\t}\n\t\tif (e.searchScope) {\n\t\t\tif (this._state.searchScope) {\n\t\t\t\tthis._toggleSelectionFind.checked = true;\n\t\t\t} else {\n\t\t\t\tthis._toggleSelectionFind.checked = false;\n\t\t\t}\n\t\t\tthis._updateToggleSelectionFindButton();\n\t\t}\n\t\tif (e.searchString || e.matchesCount || e.matchesPosition) {\n\t\t\tlet showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n\t\t\tthis._domNode.classList.toggle('no-results', showRedOutline);\n\n\t\t\tthis._updateMatchesCount();\n\t\t\tthis._updateButtons();\n\t\t}\n\t\tif (e.searchString || e.currentMatch) {\n\t\t\tthis._layoutViewZone();\n\t\t}\n\t\tif (e.updateHistory) {\n\t\t\tthis._delayedUpdateHistory();\n\t\t}\n\t\tif (e.loop) {\n\t\t\tthis._updateButtons();\n\t\t}\n\t}\n\n\tprivate _delayedUpdateHistory() {\n\t\tthis._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n\t}\n\n\tprivate _updateHistory() {\n\t\tif (this._state.searchString) {\n\t\t\tthis._findInput.inputBox.addToHistory();\n\t\t}\n\t\tif (this._state.replaceString) {\n\t\t\tthis._replaceInput.inputBox.addToHistory();\n\t\t}\n\t}\n\n\tprivate _updateMatchesCount(): void {\n\t\tthis._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n\t\tif (this._state.matchesCount >= MATCHES_LIMIT) {\n\t\t\tthis._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n\t\t} else {\n\t\t\tthis._matchesCount.title = '';\n\t\t}\n\n\t\t// remove previous content\n\t\tif (this._matchesCount.firstChild) {\n\t\t\tthis._matchesCount.removeChild(this._matchesCount.firstChild);\n\t\t}\n\n\t\tlet label: string;\n\t\tif (this._state.matchesCount > 0) {\n\t\t\tlet matchesCount: string = String(this._state.matchesCount);\n\t\t\tif (this._state.matchesCount >= MATCHES_LIMIT) {\n\t\t\t\tmatchesCount += '+';\n\t\t\t}\n\t\t\tlet matchesPosition: string = String(this._state.matchesPosition);\n\t\t\tif (matchesPosition === '0') {\n\t\t\t\tmatchesPosition = '?';\n\t\t\t}\n\t\t\tlabel = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n\t\t} else {\n\t\t\tlabel = NLS_NO_RESULTS;\n\t\t}\n\n\t\tthis._matchesCount.appendChild(document.createTextNode(label));\n\n\t\talertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n\t\tMAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n\t}\n\n\t// ----- actions\n\n\tprivate _getAriaLabel(label: string, currentMatch: Range | null, searchString: string): string {\n\t\tif (label === NLS_NO_RESULTS) {\n\t\t\treturn searchString === ''\n\t\t\t\t? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n\t\t\t\t: nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n\t\t}\n\t\tif (currentMatch) {\n\t\t\tconst ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n\t\t\tconst model = this._codeEditor.getModel();\n\t\t\tif (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n\t\t\t\tconst lineContent = model.getLineContent(currentMatch.startLineNumber);\n\t\t\t\treturn `${lineContent}, ${ariaLabel}`;\n\t\t\t}\n\n\t\t\treturn ariaLabel;\n\t\t}\n\n\t\treturn nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n\t}\n\n\t/**\n\t * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n\t * If 'selection find' is OFF we enable the button only if there is a selection.\n\t */\n\tprivate _updateToggleSelectionFindButton(): void {\n\t\tlet selection = this._codeEditor.getSelection();\n\t\tlet isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n\t\tlet isChecked = this._toggleSelectionFind.checked;\n\n\t\tif (this._isVisible && (isChecked || isSelection)) {\n\t\t\tthis._toggleSelectionFind.enable();\n\t\t} else {\n\t\t\tthis._toggleSelectionFind.disable();\n\t\t}\n\t}\n\n\tprivate _updateButtons(): void {\n\t\tthis._findInput.setEnabled(this._isVisible);\n\t\tthis._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n\t\tthis._updateToggleSelectionFindButton();\n\t\tthis._closeBtn.setEnabled(this._isVisible);\n\n\t\tlet findInputIsNonEmpty = (this._state.searchString.length > 0);\n\t\tlet matchesCount = this._state.matchesCount ? true : false;\n\t\tthis._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n\t\tthis._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n\t\tthis._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n\t\tthis._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n\n\t\tthis._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n\t\tlet canReplace = !this._codeEditor.getOption(EditorOption.readOnly);\n\t\tthis._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n\t}\n\n\tprivate _revealTimeouts: any[] = [];\n\n\tprivate _reveal(): void {\n\t\tthis._revealTimeouts.forEach(e => {\n\t\t\tclearTimeout(e);\n\t\t});\n\n\t\tthis._revealTimeouts = [];\n\n\t\tif (!this._isVisible) {\n\t\t\tthis._isVisible = true;\n\n\t\t\tconst selection = this._codeEditor.getSelection();\n\n\t\t\tswitch (this._codeEditor.getOption(EditorOption.find).autoFindInSelection) {\n\t\t\t\tcase 'always':\n\t\t\t\t\tthis._toggleSelectionFind.checked = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'never':\n\t\t\t\t\tthis._toggleSelectionFind.checked = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'multiline':\n\t\t\t\t\tconst isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n\t\t\t\t\tthis._toggleSelectionFind.checked = isSelectionMultipleLine;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._tryUpdateWidgetWidth();\n\t\t\tthis._updateButtons();\n\n\t\t\tthis._revealTimeouts.push(setTimeout(() => {\n\t\t\t\tthis._domNode.classList.add('visible');\n\t\t\t\tthis._domNode.setAttribute('aria-hidden', 'false');\n\t\t\t}, 0));\n\n\t\t\t// validate query again as it's being dismissed when we hide the find widget.\n\t\t\tthis._revealTimeouts.push(setTimeout(() => {\n\t\t\t\tthis._findInput.validate();\n\t\t\t}, 200));\n\n\t\t\tthis._codeEditor.layoutOverlayWidget(this);\n\n\t\t\tlet adjustEditorScrollTop = true;\n\t\t\tif (this._codeEditor.getOption(EditorOption.find).seedSearchStringFromSelection && selection) {\n\t\t\t\tconst domNode = this._codeEditor.getDomNode();\n\t\t\t\tif (domNode) {\n\t\t\t\t\tconst editorCoords = dom.getDomNodePagePosition(domNode);\n\t\t\t\t\tconst startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n\t\t\t\t\tconst startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n\t\t\t\t\tconst startTop = startCoords ? startCoords.top : 0;\n\n\t\t\t\t\tif (this._viewZone && startTop < this._viewZone.heightInPx) {\n\t\t\t\t\t\tif (selection.endLineNumber > selection.startLineNumber) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n\t\t\t\t\t\tif (startLeft > leftOfFindWidget) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n\t\t\t\t\t\tconst endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n\t\t\t\t\t\tif (endLeft > leftOfFindWidget) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._showViewZone(adjustEditorScrollTop);\n\t\t}\n\t}\n\n\tprivate _hide(focusTheEditor: boolean): void {\n\t\tthis._revealTimeouts.forEach(e => {\n\t\t\tclearTimeout(e);\n\t\t});\n\n\t\tthis._revealTimeouts = [];\n\n\t\tif (this._isVisible) {\n\t\t\tthis._isVisible = false;\n\n\t\t\tthis._updateButtons();\n\n\t\t\tthis._domNode.classList.remove('visible');\n\t\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\t\t\tthis._findInput.clearMessage();\n\t\t\tif (focusTheEditor) {\n\t\t\t\tthis._codeEditor.focus();\n\t\t\t}\n\t\t\tthis._codeEditor.layoutOverlayWidget(this);\n\t\t\tthis._removeViewZone();\n\t\t}\n\t}\n\n\tprivate _layoutViewZone(targetScrollTop?: number) {\n\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(EditorOption.find).addExtraSpaceOnTop;\n\n\t\tif (!addExtraSpaceOnTop) {\n\t\t\tthis._removeViewZone();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tconst viewZone = this._viewZone;\n\t\tif (this._viewZoneId !== undefined || !viewZone) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tviewZone.heightInPx = this._getHeight();\n\t\t\tthis._viewZoneId = accessor.addZone(viewZone);\n\t\t\t// scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n\t\t\tthis._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n\t\t});\n\t}\n\n\tprivate _showViewZone(adjustScroll: boolean = true) {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(EditorOption.find).addExtraSpaceOnTop;\n\n\t\tif (!addExtraSpaceOnTop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._viewZone === undefined) {\n\t\t\tthis._viewZone = new FindWidgetViewZone(0);\n\t\t}\n\n\t\tconst viewZone = this._viewZone;\n\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tif (this._viewZoneId !== undefined) {\n\t\t\t\t// the view zone already exists, we need to update the height\n\t\t\t\tconst newHeight = this._getHeight();\n\t\t\t\tif (newHeight === viewZone.heightInPx) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet scrollAdjustment = newHeight - viewZone.heightInPx;\n\t\t\t\tviewZone.heightInPx = newHeight;\n\t\t\t\taccessor.layoutZone(this._viewZoneId);\n\n\t\t\t\tif (adjustScroll) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tlet scrollAdjustment = this._getHeight();\n\n\t\t\t\t// if the editor has top padding, factor that into the zone height\n\t\t\t\tscrollAdjustment -= this._codeEditor.getOption(EditorOption.padding).top;\n\t\t\t\tif (scrollAdjustment <= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tviewZone.heightInPx = scrollAdjustment;\n\t\t\t\tthis._viewZoneId = accessor.addZone(viewZone);\n\n\t\t\t\tif (adjustScroll) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _removeViewZone() {\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tif (this._viewZoneId !== undefined) {\n\t\t\t\taccessor.removeZone(this._viewZoneId);\n\t\t\t\tthis._viewZoneId = undefined;\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n\t\t\t\t\tthis._viewZone = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _applyTheme(theme: IColorTheme) {\n\t\tlet inputStyles: IFindInputStyles = {\n\t\t\tinputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n\t\t\tinputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n\t\t\tinputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n\t\t\tinputBackground: theme.getColor(inputBackground),\n\t\t\tinputForeground: theme.getColor(inputForeground),\n\t\t\tinputBorder: theme.getColor(inputBorder),\n\t\t\tinputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n\t\t\tinputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n\t\t\tinputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n\t\t\tinputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n\t\t\tinputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n\t\t\tinputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n\t\t\tinputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n\t\t\tinputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n\t\t\tinputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\n\t\t};\n\t\tthis._findInput.style(inputStyles);\n\t\tthis._replaceInput.style(inputStyles);\n\t\tthis._toggleSelectionFind.style(inputStyles);\n\t}\n\n\tprivate _tryUpdateWidgetWidth() {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tif (!dom.isInDOM(this._domNode)) {\n\t\t\t// the widget is not in the DOM\n\t\t\treturn;\n\t\t}\n\n\t\tconst layoutInfo = this._codeEditor.getLayoutInfo();\n\t\tconst editorContentWidth = layoutInfo.contentWidth;\n\n\t\tif (editorContentWidth <= 0) {\n\t\t\t// for example, diff view original editor\n\t\t\tthis._domNode.classList.add('hiddenEditor');\n\t\t\treturn;\n\t\t} else if (this._domNode.classList.contains('hiddenEditor')) {\n\t\t\tthis._domNode.classList.remove('hiddenEditor');\n\t\t}\n\n\t\tconst editorWidth = layoutInfo.width;\n\t\tconst minimapWidth = layoutInfo.minimap.minimapWidth;\n\t\tlet collapsedFindWidget = false;\n\t\tlet reducedFindWidget = false;\n\t\tlet narrowFindWidget = false;\n\n\t\tif (this._resized) {\n\t\t\tlet widgetWidth = dom.getTotalWidth(this._domNode);\n\n\t\t\tif (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t// as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n\t\t\t\tthis._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n\t\t\treducedFindWidget = true;\n\t\t}\n\t\tif (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n\t\t\tnarrowFindWidget = true;\n\t\t}\n\t\tif (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n\t\t\tcollapsedFindWidget = true;\n\t\t}\n\t\tthis._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n\t\tthis._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n\t\tthis._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n\n\t\tif (!narrowFindWidget && !collapsedFindWidget) {\n\t\t\t// the minimal left offset of findwidget is 15px.\n\t\t\tthis._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n\t\t}\n\n\t\tif (this._resized) {\n\t\t\tthis._findInput.inputBox.layout();\n\t\t\tlet findInputWidth = this._findInput.inputBox.element.clientWidth;\n\t\t\tif (findInputWidth > 0) {\n\t\t\t\tthis._replaceInput.width = findInputWidth;\n\t\t\t}\n\t\t} else if (this._isReplaceVisible) {\n\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t}\n\t}\n\n\tprivate _getHeight(): number {\n\t\tlet totalheight = 0;\n\n\t\t// find input margin top\n\t\ttotalheight += 4;\n\n\t\t// find input height\n\t\ttotalheight += this._findInput.inputBox.height + 2 /** input box border */;\n\n\t\tif (this._isReplaceVisible) {\n\t\t\t// replace input margin\n\t\t\ttotalheight += 4;\n\n\t\t\ttotalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n\t\t}\n\n\t\t// margin bottom\n\t\ttotalheight += 4;\n\t\treturn totalheight;\n\t}\n\n\tprivate _tryUpdateHeight(): boolean {\n\t\tconst totalHeight = this._getHeight();\n\t\tif (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._cachedHeight = totalHeight;\n\t\tthis._domNode.style.height = `${totalHeight}px`;\n\n\t\treturn true;\n\t}\n\n\t// ----- Public\n\n\tpublic focusFindInput(): void {\n\t\tthis._findInput.select();\n\t\t// Edge browser requires focus() in addition to select()\n\t\tthis._findInput.focus();\n\t}\n\n\tpublic focusReplaceInput(): void {\n\t\tthis._replaceInput.select();\n\t\t// Edge browser requires focus() in addition to select()\n\t\tthis._replaceInput.focus();\n\t}\n\n\tpublic highlightFindOptions(): void {\n\t\tthis._findInput.highlightFindOptions();\n\t}\n\n\tprivate _updateSearchScope(): void {\n\t\tif (!this._codeEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._toggleSelectionFind.checked) {\n\t\t\tlet selections = this._codeEditor.getSelections();\n\n\t\t\tselections.map(selection => {\n\t\t\t\tif (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n\t\t\t\t\tselection = selection.setEndPosition(\n\t\t\t\t\t\tselection.endLineNumber - 1,\n\t\t\t\t\t\tthis._codeEditor.getModel()!.getLineMaxColumn(selection.endLineNumber - 1)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst currentMatch = this._state.currentMatch;\n\t\t\t\tif (selection.startLineNumber !== selection.endLineNumber) {\n\t\t\t\t\tif (!Range.equalsRange(selection, currentMatch)) {\n\t\t\t\t\t\treturn selection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}).filter(element => !!element);\n\n\t\t\tif (selections.length) {\n\t\t\t\tthis._state.change({ searchScope: selections as Range[] }, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _onFindInputMouseDown(e: IMouseEvent): void {\n\t\t// on linux, middle key does pasting.\n\t\tif (e.middleButton) {\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\tprivate _onFindInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis._findInput.inputBox.insertAtCursor('\\n');\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\tif (this._isReplaceVisible) {\n\t\t\t\tthis._replaceInput.focus();\n\t\t\t} else {\n\t\t\t\tthis._findInput.focusOnCaseSensitive();\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.DownArrow)) {\n\t\t\tthis._codeEditor.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.UpArrow)) {\n\t\t\treturn stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n\t\t}\n\n\t\tif (e.equals(KeyCode.DownArrow)) {\n\t\t\treturn stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n\t\t}\n\t}\n\n\tprivate _onReplaceInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tif (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n\t\t\t\t// this is the first time when users press Ctrl + Enter to replace all\n\t\t\t\tthis._notificationService.info(\n\t\t\t\t\tnls.localize('ctrlEnter.keybindingChanged',\n\t\t\t\t\t\t'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.')\n\t\t\t\t);\n\n\t\t\t\tthis._ctrlEnterReplaceAllWarningPrompted = true;\n\t\t\t\tthis._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, StorageScope.GLOBAL, StorageTarget.USER);\n\n\t\t\t}\n\n\t\t\tthis._replaceInput.inputBox.insertAtCursor('\\n');\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\tthis._findInput.focusOnCaseSensitive();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis._findInput.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.DownArrow)) {\n\t\t\tthis._codeEditor.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.UpArrow)) {\n\t\t\treturn stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n\t\t}\n\n\t\tif (e.equals(KeyCode.DownArrow)) {\n\t\t\treturn stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n\t\t}\n\t}\n\n\t// ----- sash\n\tpublic getVerticalSashLeft(_sash: Sash): number {\n\t\treturn 0;\n\t}\n\t// ----- initialization\n\n\tprivate _keybindingLabelFor(actionId: string): string {\n\t\tlet kb = this._keybindingService.lookupKeybinding(actionId);\n\t\tif (!kb) {\n\t\t\treturn '';\n\t\t}\n\t\treturn ` (${kb.getLabel()})`;\n\t}\n\n\tprivate _buildDomNode(): void {\n\t\tconst flexibleHeight = true;\n\t\tconst flexibleWidth = true;\n\t\t// Find input\n\t\tthis._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n\t\t\twidth: FIND_INPUT_AREA_WIDTH,\n\t\t\tlabel: NLS_FIND_INPUT_LABEL,\n\t\t\tplaceholder: NLS_FIND_INPUT_PLACEHOLDER,\n\t\t\tappendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n\t\t\tappendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n\t\t\tappendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n\t\t\tvalidation: (value: string): InputBoxMessage | null => {\n\t\t\t\tif (value.length === 0 || !this._findInput.getRegex()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\t// use `g` and `u` which are also used by the TextModel search\n\t\t\t\t\tnew RegExp(value, 'gu');\n\t\t\t\t\treturn null;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn { content: e.message };\n\t\t\t\t}\n\t\t\t},\n\t\t\tflexibleHeight,\n\t\t\tflexibleWidth,\n\t\t\tflexibleMaxHeight: 118\n\t\t}, this._contextKeyService, true));\n\t\tthis._findInput.setRegex(!!this._state.isRegex);\n\t\tthis._findInput.setCaseSensitive(!!this._state.matchCase);\n\t\tthis._findInput.setWholeWords(!!this._state.wholeWord);\n\t\tthis._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n\t\tthis._register(this._findInput.inputBox.onDidChange(() => {\n\t\t\tif (this._ignoreChangeEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._state.change({ searchString: this._findInput.getValue() }, true);\n\t\t}));\n\t\tthis._register(this._findInput.onDidOptionChange(() => {\n\t\t\tthis._state.change({\n\t\t\t\tisRegex: this._findInput.getRegex(),\n\t\t\t\twholeWord: this._findInput.getWholeWords(),\n\t\t\t\tmatchCase: this._findInput.getCaseSensitive()\n\t\t\t}, true);\n\t\t}));\n\t\tthis._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n\t\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.focus();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._findInput.onRegexKeyDown((e) => {\n\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.focusOnPreserve();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._findInput.inputBox.onDidHeightChange((e) => {\n\t\t\tif (this._tryUpdateHeight()) {\n\t\t\t\tthis._showViewZone();\n\t\t\t}\n\t\t}));\n\t\tif (platform.isLinux) {\n\t\t\tthis._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n\t\t}\n\n\t\tthis._matchesCount = document.createElement('div');\n\t\tthis._matchesCount.className = 'matchesCount';\n\t\tthis._updateMatchesCount();\n\n\t\t// Previous button\n\t\tthis._prevBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n\t\t\ticon: findPreviousMatchIcon,\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n\t\t\t}\n\t\t}));\n\n\t\t// Next button\n\t\tthis._nextBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n\t\t\ticon: findNextMatchIcon,\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n\t\t\t}\n\t\t}));\n\n\t\tlet findPart = document.createElement('div');\n\t\tfindPart.className = 'find-part';\n\t\tfindPart.appendChild(this._findInput.domNode);\n\t\tconst actionsContainer = document.createElement('div');\n\t\tactionsContainer.className = 'find-actions';\n\t\tfindPart.appendChild(actionsContainer);\n\t\tactionsContainer.appendChild(this._matchesCount);\n\t\tactionsContainer.appendChild(this._prevBtn.domNode);\n\t\tactionsContainer.appendChild(this._nextBtn.domNode);\n\n\t\t// Toggle selection button\n\t\tthis._toggleSelectionFind = this._register(new Checkbox({\n\t\t\ticon: findSelectionIcon,\n\t\t\ttitle: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n\t\t\tisChecked: false\n\t\t}));\n\n\t\tthis._register(this._toggleSelectionFind.onChange(() => {\n\t\t\tif (this._toggleSelectionFind.checked) {\n\t\t\t\tif (this._codeEditor.hasModel()) {\n\t\t\t\t\tlet selections = this._codeEditor.getSelections();\n\t\t\t\t\tselections.map(selection => {\n\t\t\t\t\t\tif (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n\t\t\t\t\t\t\tselection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel()!.getLineMaxColumn(selection.endLineNumber - 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\t\t\treturn selection;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}).filter(element => !!element);\n\n\t\t\t\t\tif (selections.length) {\n\t\t\t\t\t\tthis._state.change({ searchScope: selections as Range[] }, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._state.change({ searchScope: null }, true);\n\t\t\t}\n\t\t}));\n\n\t\tactionsContainer.appendChild(this._toggleSelectionFind.domNode);\n\n\t\t// Close button\n\t\tthis._closeBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n\t\t\ticon: widgetClose,\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._state.change({ isRevealed: false, searchScope: null }, false);\n\t\t\t},\n\t\t\tonKeyDown: (e) => {\n\t\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\t\tif (this._replaceBtn.isEnabled()) {\n\t\t\t\t\t\t\tthis._replaceBtn.focus();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._codeEditor.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tactionsContainer.appendChild(this._closeBtn.domNode);\n\n\t\t// Replace input\n\t\tthis._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n\t\t\tlabel: NLS_REPLACE_INPUT_LABEL,\n\t\t\tplaceholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n\t\t\tappendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n\t\t\thistory: [],\n\t\t\tflexibleHeight,\n\t\t\tflexibleWidth,\n\t\t\tflexibleMaxHeight: 118\n\t\t}, this._contextKeyService, true));\n\t\tthis._replaceInput.setPreserveCase(!!this._state.preserveCase);\n\t\tthis._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n\t\tthis._register(this._replaceInput.inputBox.onDidChange(() => {\n\t\t\tthis._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n\t\t}));\n\t\tthis._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n\t\t\tif (this._isReplaceVisible && this._tryUpdateHeight()) {\n\t\t\t\tthis._showViewZone();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._replaceInput.onDidOptionChange(() => {\n\t\t\tthis._state.change({\n\t\t\t\tpreserveCase: this._replaceInput.getPreserveCase()\n\t\t\t}, true);\n\t\t}));\n\t\tthis._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\tif (this._prevBtn.isEnabled()) {\n\t\t\t\t\tthis._prevBtn.focus();\n\t\t\t\t} else if (this._nextBtn.isEnabled()) {\n\t\t\t\t\tthis._nextBtn.focus();\n\t\t\t\t} else if (this._toggleSelectionFind.enabled) {\n\t\t\t\t\tthis._toggleSelectionFind.focus();\n\t\t\t\t} else if (this._closeBtn.isEnabled()) {\n\t\t\t\t\tthis._closeBtn.focus();\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\t// Replace one button\n\t\tthis._replaceBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n\t\t\ticon: findReplaceIcon,\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._controller.replace();\n\t\t\t},\n\t\t\tonKeyDown: (e) => {\n\t\t\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\t\tthis._closeBtn.focus();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Replace all button\n\t\tthis._replaceAllBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n\t\t\ticon: findReplaceAllIcon,\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._controller.replaceAll();\n\t\t\t}\n\t\t}));\n\n\t\tlet replacePart = document.createElement('div');\n\t\treplacePart.className = 'replace-part';\n\t\treplacePart.appendChild(this._replaceInput.domNode);\n\n\t\tconst replaceActionsContainer = document.createElement('div');\n\t\treplaceActionsContainer.className = 'replace-actions';\n\t\treplacePart.appendChild(replaceActionsContainer);\n\n\t\treplaceActionsContainer.appendChild(this._replaceBtn.domNode);\n\t\treplaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n\n\t\t// Toggle replace button\n\t\tthis._toggleReplaceBtn = this._register(new SimpleButton({\n\t\t\tlabel: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n\t\t\tclassName: 'codicon toggle left',\n\t\t\tonTrigger: () => {\n\t\t\t\tthis._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t\t\t\tthis._replaceInput.inputBox.layout();\n\t\t\t\t}\n\t\t\t\tthis._showViewZone();\n\t\t\t}\n\t\t}));\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n\t\t// Widget\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'editor-widget find-widget';\n\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\t\t// We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n\t\tthis._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n\n\t\tthis._domNode.appendChild(this._toggleReplaceBtn.domNode);\n\t\tthis._domNode.appendChild(findPart);\n\t\tthis._domNode.appendChild(replacePart);\n\n\t\tthis._resizeSash = new Sash(this._domNode, this, { orientation: Orientation.VERTICAL, size: 2 });\n\t\tthis._resized = false;\n\t\tlet originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n\n\t\tthis._register(this._resizeSash.onDidStart(() => {\n\t\t\toriginalWidth = dom.getTotalWidth(this._domNode);\n\t\t}));\n\n\t\tthis._register(this._resizeSash.onDidChange((evt: ISashEvent) => {\n\t\t\tthis._resized = true;\n\t\t\tlet width = originalWidth + evt.startX - evt.currentX;\n\n\t\t\tif (width < FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t// narrow down the find widget should be handled by CSS.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth!) || 0;\n\t\t\tif (width > maxWidth) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._domNode.style.width = `${width}px`;\n\t\t\tif (this._isReplaceVisible) {\n\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t\t}\n\n\t\t\tthis._findInput.inputBox.layout();\n\t\t\tthis._tryUpdateHeight();\n\t\t}));\n\n\t\tthis._register(this._resizeSash.onDidReset(() => {\n\t\t\t// users double click on the sash\n\t\t\tconst currentWidth = dom.getTotalWidth(this._domNode);\n\n\t\t\tif (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t// The editor is narrow and the width of the find widget is controlled fully by CSS.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet width = FIND_WIDGET_INITIAL_WIDTH;\n\n\t\t\tif (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t// 1. never resized before, double click should maximizes it\n\t\t\t\t// 2. users resized it already but its width is the same as default\n\t\t\t\tconst layoutInfo = this._codeEditor.getLayoutInfo();\n\t\t\t\twidth = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n\t\t\t\tthis._resized = true;\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * no op, the find widget should be shrinked to its default size.\n\t\t\t\t */\n\t\t\t}\n\n\n\t\t\tthis._domNode.style.width = `${width}px`;\n\t\t\tif (this._isReplaceVisible) {\n\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t\t\t}\n\n\t\t\tthis._findInput.inputBox.layout();\n\t\t}));\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tconst value = this._codeEditor.getOption(EditorOption.accessibilitySupport);\n\t\tthis._findInput.setFocusInputOnOptionClick(value !== AccessibilitySupport.Enabled);\n\t}\n\n\tgetViewState() {\n\t\tlet widgetViewZoneVisible = false;\n\t\tif (this._viewZone && this._viewZoneId) {\n\t\t\twidgetViewZoneVisible = this._viewZone.heightInPx > this._codeEditor.getScrollTop();\n\t\t}\n\n\t\treturn {\n\t\t\twidgetViewZoneVisible,\n\t\t\tscrollTop: this._codeEditor.getScrollTop()\n\t\t};\n\t}\n\n\tsetViewState(state?: { widgetViewZoneVisible: boolean; scrollTop: number }) {\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (state.widgetViewZoneVisible) {\n\t\t\t// we should add the view zone\n\t\t\tthis._layoutViewZone(state.scrollTop);\n\t\t}\n\t}\n}\n\nexport interface ISimpleButtonOpts {\n\treadonly label: string;\n\treadonly className?: string;\n\treadonly icon?: ThemeIcon;\n\treadonly onTrigger: () => void;\n\treadonly onKeyDown?: (e: IKeyboardEvent) => void;\n}\n\nexport class SimpleButton extends Widget {\n\n\tprivate readonly _opts: ISimpleButtonOpts;\n\tprivate readonly _domNode: HTMLElement;\n\n\tconstructor(opts: ISimpleButtonOpts) {\n\t\tsuper();\n\t\tthis._opts = opts;\n\n\t\tlet className = 'button';\n\t\tif (this._opts.className) {\n\t\t\tclassName = className + ' ' + this._opts.className;\n\t\t}\n\t\tif (this._opts.icon) {\n\t\t\tclassName = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n\t\t}\n\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.title = this._opts.label;\n\t\tthis._domNode.tabIndex = 0;\n\t\tthis._domNode.className = className;\n\t\tthis._domNode.setAttribute('role', 'button');\n\t\tthis._domNode.setAttribute('aria-label', this._opts.label);\n\n\t\tthis.onclick(this._domNode, (e) => {\n\t\t\tthis._opts.onTrigger();\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tthis.onkeydown(this._domNode, (e) => {\n\t\t\tif (e.equals(KeyCode.Space) || e.equals(KeyCode.Enter)) {\n\t\t\t\tthis._opts.onTrigger();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._opts.onKeyDown) {\n\t\t\t\tthis._opts.onKeyDown(e);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic isEnabled(): boolean {\n\t\treturn (this._domNode.tabIndex >= 0);\n\t}\n\n\tpublic focus(): void {\n\t\tthis._domNode.focus();\n\t}\n\n\tpublic setEnabled(enabled: boolean): void {\n\t\tthis._domNode.classList.toggle('disabled', !enabled);\n\t\tthis._domNode.setAttribute('aria-disabled', String(!enabled));\n\t\tthis._domNode.tabIndex = enabled ? 0 : -1;\n\t}\n\n\tpublic setExpanded(expanded: boolean): void {\n\t\tthis._domNode.setAttribute('aria-expanded', String(!!expanded));\n\t\tif (expanded) {\n\t\t\tthis._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n\t\t\tthis._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n\t\t} else {\n\t\t\tthis._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n\t\t\tthis._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n\t\t}\n\t}\n}\n\n// theming\n\nregisterThemingParticipant((theme, collector) => {\n\tconst addBackgroundColorRule = (selector: string, color: Color | undefined): void => {\n\t\tif (color) {\n\t\t\tcollector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n\t\t}\n\t};\n\n\taddBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n\taddBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n\taddBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n\n\tconst widgetBackground = theme.getColor(editorWidgetBackground);\n\taddBackgroundColorRule('.find-widget', widgetBackground);\n\n\tconst widgetShadowColor = theme.getColor(widgetShadow);\n\tif (widgetShadowColor) {\n\t\tcollector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n\t}\n\n\tconst findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n\tif (findMatchHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .findMatch { border: 1px ${theme.type === 'hc' ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n\t}\n\n\tconst findMatchBorder = theme.getColor(editorFindMatchBorder);\n\tif (findMatchBorder) {\n\t\tcollector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n\t}\n\n\tconst findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n\tif (findRangeHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .findScope { border: 1px ${theme.type === 'hc' ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n\t}\n\n\tconst hcBorder = theme.getColor(contrastBorder);\n\tif (hcBorder) {\n\t\tcollector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n\t}\n\n\tconst foreground = theme.getColor(editorWidgetForeground);\n\tif (foreground) {\n\t\tcollector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n\t}\n\n\tconst error = theme.getColor(errorForeground);\n\tif (error) {\n\t\tcollector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n\t}\n\n\tconst resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n\tif (resizeBorderBackground) {\n\t\tcollector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n\t} else {\n\t\tconst border = theme.getColor(editorWidgetBorder);\n\t\tif (border) {\n\t\t\tcollector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n\t\t}\n\t}\n\n\t// This rule is used to override the outline color for synthetic-focus find input.\n\tconst focusOutline = theme.getColor(focusBorder);\n\tif (focusOutline) {\n\t\tcollector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n\n\t}\n});\n"]}