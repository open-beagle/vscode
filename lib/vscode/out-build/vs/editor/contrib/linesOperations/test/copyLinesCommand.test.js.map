{"version":3,"file":"copyLinesCommand.test.js","sourceRoot":"file:///go/src/gitlab.wodcloud.com/cloud/vscode/lib/vscode/src","sources":["vs/editor/contrib/linesOperations/test/copyLinesCommand.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { CopyLinesCommand } from 'vs/editor/contrib/linesOperations/copyLinesCommand';\nimport { testCommand } from 'vs/editor/test/browser/testCommand';\nimport { withTestCodeEditor } from 'vs/editor/test/browser/testCodeEditor';\nimport { DuplicateSelectionAction } from 'vs/editor/contrib/linesOperations/linesOperations';\n\nfunction testCopyLinesDownCommand(lines: string[], selection: Selection, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (sel) => new CopyLinesCommand(sel, true), expectedLines, expectedSelection);\n}\n\nfunction testCopyLinesUpCommand(lines: string[], selection: Selection, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (sel) => new CopyLinesCommand(sel, false), expectedLines, expectedSelection);\n}\n\nsuite('Editor Contrib - Copy Lines Command', () => {\n\n\ttest('copy first line down', function () {\n\t\ttestCopyLinesDownCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 3, 1, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 1)\n\t\t);\n\t});\n\n\ttest('copy first line up', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 3, 1, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 3, 1, 1)\n\t\t);\n\t});\n\n\ttest('copy last line down', function () {\n\t\ttestCopyLinesDownCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(5, 3, 5, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(6, 3, 6, 1)\n\t\t);\n\t});\n\n\ttest('copy last line up', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(5, 3, 5, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(5, 3, 5, 1)\n\t\t);\n\t});\n\n\ttest('issue #1322: copy line up', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(3, 11, 3, 11),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(3, 11, 3, 11)\n\t\t);\n\t});\n\n\ttest('issue #1322: copy last line up', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(5, 6, 5, 6),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(5, 6, 5, 6)\n\t\t);\n\t});\n\n\ttest('copy many lines up', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(4, 3, 2, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(4, 3, 2, 1)\n\t\t);\n\t});\n\n\ttest('ignore empty selection', function () {\n\t\ttestCopyLinesUpCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 1, 1, 1),\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 1, 1, 1)\n\t\t);\n\t});\n});\n\nsuite('Editor Contrib - Duplicate Selection', () => {\n\n\tconst duplicateSelectionAction = new DuplicateSelectionAction();\n\n\tfunction testDuplicateSelectionAction(lines: string[], selections: Selection[], expectedLines: string[], expectedSelections: Selection[]): void {\n\t\twithTestCodeEditor(lines.join('\\n'), {}, (editor) => {\n\t\t\teditor.setSelections(selections);\n\t\t\tduplicateSelectionAction.run(null!, editor, {});\n\t\t\tassert.deepStrictEqual(editor.getValue(), expectedLines.join('\\n'));\n\t\t\tassert.deepStrictEqual(editor.getSelections()!.map(s => s.toString()), expectedSelections.map(s => s.toString()));\n\t\t});\n\t}\n\n\ttest('empty selection', function () {\n\t\ttestDuplicateSelectionAction(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\t[new Selection(2, 2, 2, 2), new Selection(3, 2, 3, 2)],\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\t[new Selection(3, 2, 3, 2), new Selection(5, 2, 5, 2)]\n\t\t);\n\t});\n\n\ttest('with selection', function () {\n\t\ttestDuplicateSelectionAction(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\t[new Selection(2, 1, 2, 4), new Selection(3, 1, 3, 4)],\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'secsecond line',\n\t\t\t\t'thithird line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\t[new Selection(2, 4, 2, 7), new Selection(3, 4, 3, 7)]\n\t\t);\n\t});\n});\n"]}